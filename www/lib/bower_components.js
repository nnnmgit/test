!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function r(t,e){return e>t?-1:t>e?1:t>=e?0:0/0}function n(t){return null===t?0/0:+t}function i(t){return!isNaN(t)}function o(t){return{left:function(e,r,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=e.length);i>n;){var o=n+i>>>1;t(e[o],r)<0?n=o+1:i=o}return n},right:function(e,r,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=e.length);i>n;){var o=n+i>>>1;t(e[o],r)>0?i=o:n=o+1}return n}}}function a(t){return t.length}function s(t){for(var e=1;t*e%1;)e*=10;return e}function u(t,e){for(var r in e)Object.defineProperty(t.prototype,r,{value:e[r],enumerable:!1})}function h(){this._=Object.create(null)}function l(t){return(t+="")===ma||t[0]===ga?ga+t:t}function c(t){return(t+="")[0]===ga?t.slice(1):t}function f(t){return l(t)in this._}function p(t){return(t=l(t))in this._&&delete this._[t]}function d(){var t=[];for(var e in this._)t.push(c(e));return t}function m(){var t=0;for(var e in this._)++t;return t}function g(){for(var t in this._)return!1;return!0}function v(){this._=Object.create(null)}function E(t){return t}function y(t,e,r){return function(){var n=r.apply(e,arguments);return n===e?t:n}}function x(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var r=0,n=va.length;n>r;++r){var i=va[r]+e;if(i in t)return i}}function T(){}function R(){}function b(t){function e(){for(var e,n=r,i=-1,o=n.length;++i<o;)(e=n[i].on)&&e.apply(this,arguments);return t}var r=[],n=new h;return e.on=function(e,i){var o,a=n.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,r=r.slice(0,o=r.indexOf(a)).concat(r.slice(o+1)),n.remove(e)),i&&r.push(n.set(e,{on:i})),t)},e}function _(){ra.event.preventDefault()}function w(){for(var t,e=ra.event;t=e.sourceEvent;)e=t;return e}function M(t){for(var e=new R,r=0,n=arguments.length;++r<n;)e[arguments[r]]=b(e);return e.of=function(r,n){return function(i){try{var o=i.sourceEvent=ra.event;i.target=t,ra.event=i,e[i.type].apply(r,n)}finally{ra.event=o}}},e}function H(t){return ya(t,ba),t}function S(t){return"function"==typeof t?t:function(){return xa(t,this)}}function C(t){return"function"==typeof t?t:function(){return Ta(t,this)}}function A(t,e){function r(){this.removeAttribute(t)}function n(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var r=e.apply(this,arguments);null==r?this.removeAttribute(t):this.setAttribute(t,r)}function s(){var r=e.apply(this,arguments);null==r?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}return t=ra.ns.qualify(t),null==e?t.local?n:r:"function"==typeof e?t.local?s:a:t.local?o:i}function L(t){return t.trim().replace(/\s+/g," ")}function P(t){return new RegExp("(?:^|\\s+)"+ra.requote(t)+"(?:\\s+|$)","g")}function F(t){return(t+"").trim().split(/^|\s+/)}function D(t,e){function r(){for(var r=-1;++r<i;)t[r](this,e)}function n(){for(var r=-1,n=e.apply(this,arguments);++r<i;)t[r](this,n)}t=F(t).map(B);var i=t.length;return"function"==typeof e?n:r}function B(t){var e=P(t);return function(r,n){if(i=r.classList)return n?i.add(t):i.remove(t);var i=r.getAttribute("class")||"";n?(e.lastIndex=0,e.test(i)||r.setAttribute("class",L(i+" "+t))):r.setAttribute("class",L(i.replace(e," ")))}}function O(t,e,r){function n(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,r)}function o(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,r)}return null==e?n:"function"==typeof e?o:i}function N(t,e){function r(){delete this[t]}function n(){this[t]=e}function i(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}return null==e?r:"function"==typeof e?i:n}function k(t){function e(){var e=this.ownerDocument,r=this.namespaceURI;return r?e.createElementNS(r,t):e.createElement(t)}function r(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ra.ns.qualify(t)).local?r:e}function U(){var t=this.parentNode;t&&t.removeChild(this)}function I(t){return{__data__:t}}function z(t){return function(){return Ra(this,t)}}function V(t){return arguments.length||(t=r),function(e,r){return e&&r?t(e.__data__,r.__data__):!e-!r}}function j(t,e){for(var r=0,n=t.length;n>r;r++)for(var i,o=t[r],a=0,s=o.length;s>a;a++)(i=o[a])&&e(i,a,r);return t}function G(t){return ya(t,wa),t}function W(t){var e,r;return function(n,i,o){var a,s=t[o].update,u=s.length;for(o!=r&&(r=o,e=0),i>=e&&(e=i+1);!(a=s[e])&&++e<u;);return a}}function X(t,e,r){function n(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function i(){var i=u(e,ia(arguments));n.call(this),this.addEventListener(t,this[a]=i,i.$=r),i._=e}function o(){var e,r=new RegExp("^__on([^.]+)"+ra.requote(t)+"$");for(var n in this)if(e=n.match(r)){var i=this[n];this.removeEventListener(e[1],i,i.$),delete this[n]}}var a="__on"+t,s=t.indexOf("."),u=q;s>0&&(t=t.slice(0,s));var h=Ma.get(t);return h&&(t=h,u=Y),s?e?i:n:e?T:o}function q(t,e){return function(r){var n=ra.event;ra.event=r,e[0]=this.__data__;try{t.apply(this,e)}finally{ra.event=n}}}function Y(t,e){var r=q(t,e);return function(t){var e=this,n=t.relatedTarget;n&&(n===e||8&n.compareDocumentPosition(e))||r.call(e,t)}}function K(r){var n=".dragsuppress-"+ ++Sa,i="click"+n,o=ra.select(e(r)).on("touchmove"+n,_).on("dragstart"+n,_).on("selectstart"+n,_);if(null==Ha&&(Ha="onselectstart"in r?!1:x(r.style,"userSelect")),Ha){var a=t(r).style,s=a[Ha];a[Ha]="none"}return function(t){if(o.on(n,null),Ha&&(a[Ha]=s),t){var e=function(){o.on(i,null)};o.on(i,function(){_(),e()},!0),setTimeout(e,0)}}}function Z(t,r){r.changedTouches&&(r=r.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>Ca){var o=e(t);if(o.scrollX||o.scrollY){n=ra.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=n[0][0].getScreenCTM();Ca=!(a.f||a.e),n.remove()}}return Ca?(i.x=r.pageX,i.y=r.pageY):(i.x=r.clientX,i.y=r.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var s=t.getBoundingClientRect();return[r.clientX-s.left-t.clientLeft,r.clientY-s.top-t.clientTop]}function Q(){return ra.event.changedTouches[0].identifier}function $(t){return t>0?1:0>t?-1:0}function J(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(e[1]-t[1])*(r[0]-t[0])}function tt(t){return t>1?0:-1>t?Pa:Math.acos(t)}function et(t){return t>1?Ba:-1>t?-Ba:Math.asin(t)}function rt(t){return((t=Math.exp(t))-1/t)/2}function nt(t){return((t=Math.exp(t))+1/t)/2}function it(t){return((t=Math.exp(2*t))-1)/(t+1)}function ot(t){return(t=Math.sin(t/2))*t}function at(){}function st(t,e,r){return this instanceof st?(this.h=+t,this.s=+e,void(this.l=+r)):arguments.length<2?t instanceof st?new st(t.h,t.s,t.l):Tt(""+t,Rt,st):new st(t,e,r)}function ut(t,e,r){function n(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*n(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,r=0>r?0:r>1?1:r,a=.5>=r?r*(1+e):r+e-r*e,o=2*r-a,new vt(i(t+120),i(t),i(t-120))}function ht(t,e,r){return this instanceof ht?(this.h=+t,this.c=+e,void(this.l=+r)):arguments.length<2?t instanceof ht?new ht(t.h,t.c,t.l):t instanceof ct?pt(t.l,t.a,t.b):pt((t=bt((t=ra.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ht(t,e,r)}function lt(t,e,r){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ct(r,Math.cos(t*=Oa)*e,Math.sin(t)*e)}function ct(t,e,r){return this instanceof ct?(this.l=+t,this.a=+e,void(this.b=+r)):arguments.length<2?t instanceof ct?new ct(t.l,t.a,t.b):t instanceof ht?lt(t.h,t.c,t.l):bt((t=vt(t)).r,t.g,t.b):new ct(t,e,r)}function ft(t,e,r){var n=(t+16)/116,i=n+e/500,o=n-r/200;return i=dt(i)*qa,n=dt(n)*Ya,o=dt(o)*Ka,new vt(gt(3.2404542*i-1.5371385*n-.4985314*o),gt(-.969266*i+1.8760108*n+.041556*o),gt(.0556434*i-.2040259*n+1.0572252*o))}function pt(t,e,r){return t>0?new ht(Math.atan2(r,e)*Na,Math.sqrt(e*e+r*r),t):new ht(0/0,0/0,t)}function dt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function mt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function gt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function vt(t,e,r){return this instanceof vt?(this.r=~~t,this.g=~~e,void(this.b=~~r)):arguments.length<2?t instanceof vt?new vt(t.r,t.g,t.b):Tt(""+t,vt,ut):new vt(t,e,r)}function Et(t){return new vt(t>>16,t>>8&255,255&t)}function yt(t){return Et(t)+""}function xt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Tt(t,e,r){var n,i,o,a=0,s=0,u=0;if(n=/([a-z]+)\((.*)\)/i.exec(t))switch(i=n[2].split(","),n[1]){case"hsl":return r(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(wt(i[0]),wt(i[1]),wt(i[2]))}return(o=$a.get(t.toLowerCase()))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,u=15&o,u=u<<4|u):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,u=255&o)),e(a,s,u))}function Rt(t,e,r){var n,i,o=Math.min(t/=255,e/=255,r/=255),a=Math.max(t,e,r),s=a-o,u=(a+o)/2;return s?(i=.5>u?s/(a+o):s/(2-a-o),n=t==a?(e-r)/s+(r>e?6:0):e==a?(r-t)/s+2:(t-e)/s+4,n*=60):(n=0/0,i=u>0&&1>u?0:n),new st(n,i,u)}function bt(t,e,r){t=_t(t),e=_t(e),r=_t(r);var n=mt((.4124564*t+.3575761*e+.1804375*r)/qa),i=mt((.2126729*t+.7151522*e+.072175*r)/Ya),o=mt((.0193339*t+.119192*e+.9503041*r)/Ka);return ct(116*i-16,500*(n-i),200*(i-o))}function _t(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function wt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Mt(t){return"function"==typeof t?t:function(){return t}}function Ht(t){return function(e,r,n){return 2===arguments.length&&"function"==typeof r&&(n=r,r=null),St(e,r,t,n)}}function St(t,e,r,n){function i(){var t,e=u.status;if(!e&&At(u)||e>=200&&300>e||304===e){try{t=r.call(o,u)}catch(n){return void a.error.call(o,n)}a.load.call(o,t)}else a.error.call(o,u)}var o={},a=ra.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,h=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=i:u.onreadystatechange=function(){u.readyState>3&&i()},u.onprogress=function(t){var e=ra.event;ra.event=t;try{a.progress.call(o,u)}finally{ra.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(h=t,o):h},o.response=function(t){return r=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ia(arguments)))}}),o.send=function(r,n,i){if(2===arguments.length&&"function"==typeof n&&(i=n,n=null),u.open(r,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),u.setRequestHeader)for(var l in s)u.setRequestHeader(l,s[l]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=h&&(u.responseType=h),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,u),u.send(null==n?null:n),o},o.abort=function(){return u.abort(),o},ra.rebind(o,a,"on"),null==n?o:o.get(Ct(n))}function Ct(t){return 1===t.length?function(e,r){t(null==e?r:null)}:t}function At(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Lt(){var t=Pt(),e=Ft()-t;e>24?(isFinite(e)&&(clearTimeout(rs),rs=setTimeout(Lt,e)),es=0):(es=1,is(Lt))}function Pt(){var t=Date.now();for(ns=Ja;ns;)t>=ns.t&&(ns.f=ns.c(t-ns.t)),ns=ns.n;return t}function Ft(){for(var t,e=Ja,r=1/0;e;)e.f?e=t?t.n=e.n:Ja=e.n:(e.t<r&&(r=e.t),e=(t=e).n);return ts=t,r}function Dt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Bt(t,e){var r=Math.pow(10,3*da(8-e));return{scale:e>8?function(t){return t/r}:function(t){return t*r},symbol:t}}function Ot(t){var e=t.decimal,r=t.thousands,n=t.grouping,i=t.currency,o=n&&r?function(t,e){for(var i=t.length,o=[],a=0,s=n[0],u=0;i>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>e));)s=n[a=(a+1)%n.length];return o.reverse().join(r)}:E;return function(t){var r=as.exec(t),n=r[1]||" ",a=r[2]||">",s=r[3]||"-",u=r[4]||"",h=r[5],l=+r[6],c=r[7],f=r[8],p=r[9],d=1,m="",g="",v=!1,E=!0;switch(f&&(f=+f.substring(1)),(h||"0"===n&&"="===a)&&(h=n="0",a="="),p){case"n":c=!0,p="g";break;case"%":d=100,g="%",p="f";break;case"p":d=100,g="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(m="0"+p.toLowerCase());case"c":E=!1;case"d":v=!0,f=0;break;case"s":d=-1,p="r"}"$"===u&&(m=i[0],g=i[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):("e"==p||"f"==p)&&(f=Math.max(0,Math.min(20,f)))),p=ss.get(p)||Nt;var y=h&&c;return function(t){var r=g;if(v&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>d){var u=ra.formatPrefix(t,f);t=u.scale(t),r=u.symbol+g}else t*=d;t=p(t,f);var x,T,R=t.lastIndexOf(".");if(0>R){var b=E?t.lastIndexOf("e"):-1;0>b?(x=t,T=""):(x=t.substring(0,b),T=t.substring(b))}else x=t.substring(0,R),T=e+t.substring(R+1);!h&&c&&(x=o(x,1/0));var _=m.length+x.length+T.length+(y?0:i.length),w=l>_?new Array(_=l-_+1).join(n):"";return y&&(x=o(w+x,w.length?l-T.length:1/0)),i+=m,t=x+T,("<"===a?i+t+w:">"===a?w+i+t:"^"===a?w.substring(0,_>>=1)+i+t+w.substring(_):i+(y?t:w+t))+r}}}function Nt(t){return t+""}function kt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ut(t,e,r){function n(e){var r=t(e),n=o(r,1);return n-e>e-r?r:n}function i(r){return e(r=t(new hs(r-1)),1),r}function o(t,r){return e(t=new hs(+t),r),t}function a(t,n,o){var a=i(t),s=[];if(o>1)for(;n>a;)r(a)%o||s.push(new Date(+a)),e(a,1);else for(;n>a;)s.push(new Date(+a)),e(a,1);return s}function s(t,e,r){try{hs=kt;var n=new kt;return n._=t,a(n,e,r)}finally{hs=Date}}t.floor=t,t.round=n,t.ceil=i,t.offset=o,t.range=a;var u=t.utc=It(t);return u.floor=u,u.round=It(n),u.ceil=It(i),u.offset=It(o),u.range=s,t}function It(t){return function(e,r){try{hs=kt;var n=new kt;return n._=e,t(n,r)._}finally{hs=Date}}}function zt(t){function e(t){function e(e){for(var r,i,o,a=[],s=-1,u=0;++s<n;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=cs[r=t.charAt(++s)])&&(r=t.charAt(++s)),(o=S[r])&&(r=o(e,null==i?"e"===r?" ":"0":i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=r(n,t,e,0);if(i!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var o=null!=n.Z&&hs!==kt,a=new(o?kt:hs);return"j"in n?a.setFullYear(n.y,0,n.j):"w"in n&&("W"in n||"U"in n)?(a.setFullYear(n.y,0,1),a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(a.getDay()+5)%7:n.w+7*n.U-(a.getDay()+6)%7)):a.setFullYear(n.y,n.m,n.d),a.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),o?a._:a},e.toString=function(){return t},e}function r(t,e,r,n){for(var i,o,a,s=0,u=e.length,h=r.length;u>s;){if(n>=h)return-1;if(i=e.charCodeAt(s++),37===i){if(a=e.charAt(s++),o=C[a in cs?e.charAt(s++):a],!o||(n=o(t,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}function n(t,e,r){R.lastIndex=0;var n=R.exec(e.slice(r));return n?(t.w=b.get(n[0].toLowerCase()),r+n[0].length):-1}function i(t,e,r){x.lastIndex=0;var n=x.exec(e.slice(r));return n?(t.w=T.get(n[0].toLowerCase()),r+n[0].length):-1}function o(t,e,r){M.lastIndex=0;var n=M.exec(e.slice(r));return n?(t.m=H.get(n[0].toLowerCase()),r+n[0].length):-1}function a(t,e,r){_.lastIndex=0;var n=_.exec(e.slice(r));return n?(t.m=w.get(n[0].toLowerCase()),r+n[0].length):-1}function s(t,e,n){return r(t,S.c.toString(),e,n)}function u(t,e,n){return r(t,S.x.toString(),e,n)}function h(t,e,n){return r(t,S.X.toString(),e,n)}function l(t,e,r){var n=y.get(e.slice(r,r+=2).toLowerCase());return null==n?-1:(t.p=n,r)}var c=t.dateTime,f=t.date,p=t.time,d=t.periods,m=t.days,g=t.shortDays,v=t.months,E=t.shortMonths;e.utc=function(t){function r(t){try{hs=kt;var e=new hs;return e._=t,n(e)}finally{hs=Date}}var n=e(t);return r.parse=function(t){try{hs=kt;var e=n.parse(t);return e&&e._}finally{hs=Date}},r.toString=n.toString,r},e.multi=e.utc.multi=se;var y=ra.map(),x=jt(m),T=Gt(m),R=jt(g),b=Gt(g),_=jt(v),w=Gt(v),M=jt(E),H=Gt(E);d.forEach(function(t,e){y.set(t.toLowerCase(),e)});var S={a:function(t){return g[t.getDay()]},A:function(t){return m[t.getDay()]},b:function(t){return E[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:e(c),d:function(t,e){return Vt(t.getDate(),e,2)},e:function(t,e){return Vt(t.getDate(),e,2)},H:function(t,e){return Vt(t.getHours(),e,2)},I:function(t,e){return Vt(t.getHours()%12||12,e,2)},j:function(t,e){return Vt(1+us.dayOfYear(t),e,3)},L:function(t,e){return Vt(t.getMilliseconds(),e,3)},m:function(t,e){return Vt(t.getMonth()+1,e,2)},M:function(t,e){return Vt(t.getMinutes(),e,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,e){return Vt(t.getSeconds(),e,2)},U:function(t,e){return Vt(us.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Vt(us.mondayOfYear(t),e,2)},x:e(f),X:e(p),y:function(t,e){return Vt(t.getFullYear()%100,e,2)},Y:function(t,e){return Vt(t.getFullYear()%1e4,e,4)},Z:oe,"%":function(){return"%"}},C={a:n,A:i,b:o,B:a,c:s,d:Jt,e:Jt,H:ee,I:ee,j:te,L:ie,m:$t,M:re,p:l,S:ne,U:Xt,w:Wt,W:qt,x:u,X:h,y:Kt,Y:Yt,Z:Zt,"%":ae};return e}function Vt(t,e,r){var n=0>t?"-":"",i=(n?-t:t)+"",o=i.length;return n+(r>o?new Array(r-o+1).join(e)+i:i)}function jt(t){return new RegExp("^(?:"+t.map(ra.requote).join("|")+")","i")}function Gt(t){for(var e=new h,r=-1,n=t.length;++r<n;)e.set(t[r].toLowerCase(),r);return e}function Wt(t,e,r){fs.lastIndex=0;var n=fs.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Xt(t,e,r){fs.lastIndex=0;var n=fs.exec(e.slice(r));return n?(t.U=+n[0],r+n[0].length):-1}function qt(t,e,r){fs.lastIndex=0;var n=fs.exec(e.slice(r));return n?(t.W=+n[0],r+n[0].length):-1}function Yt(t,e,r){fs.lastIndex=0;var n=fs.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Kt(t,e,r){fs.lastIndex=0;var n=fs.exec(e.slice(r,r+2));return n?(t.y=Qt(+n[0]),r+n[0].length):-1}function Zt(t,e,r){return/^[+-]\d{4}$/.test(e=e.slice(r,r+5))?(t.Z=-e,r+5):-1}function Qt(t){return t+(t>68?1900:2e3)}function $t(t,e,r){fs.lastIndex=0;var n=fs.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Jt(t,e,r){fs.lastIndex=0;var n=fs.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function te(t,e,r){fs.lastIndex=0;var n=fs.exec(e.slice(r,r+3));return n?(t.j=+n[0],r+n[0].length):-1}function ee(t,e,r){fs.lastIndex=0;var n=fs.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function re(t,e,r){fs.lastIndex=0;var n=fs.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function ne(t,e,r){fs.lastIndex=0;var n=fs.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function ie(t,e,r){fs.lastIndex=0;var n=fs.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function oe(t){var e=t.getTimezoneOffset(),r=e>0?"-":"+",n=da(e)/60|0,i=da(e)%60;return r+Vt(n,"0",2)+Vt(i,"0",2)}function ae(t,e,r){ps.lastIndex=0;var n=ps.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function se(t){for(var e=t.length,r=-1;++r<e;)t[r][0]=this(t[r][0]);return function(e){for(var r=0,n=t[r];!n[1](e);)n=t[++r];return n[0](e)}}function ue(){}function he(t,e,r){var n=r.s=t+e,i=n-t,o=n-i;r.t=t-o+(e-i)}function le(t,e){t&&vs.hasOwnProperty(t.type)&&vs[t.type](t,e)}function ce(t,e,r){var n,i=-1,o=t.length-r;for(e.lineStart();++i<o;)n=t[i],e.point(n[0],n[1],n[2]);e.lineEnd()}function fe(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)ce(t[r],e,1);e.polygonEnd()}function pe(){function t(t,e){t*=Oa,e=e*Oa/2+Pa/4;var r=t-n,a=r>=0?1:-1,s=a*r,u=Math.cos(e),h=Math.sin(e),l=o*h,c=i*u+l*Math.cos(s),f=l*a*Math.sin(s);ys.add(Math.atan2(f,c)),n=t,i=u,o=h}var e,r,n,i,o;xs.point=function(a,s){xs.point=t,n=(e=a)*Oa,i=Math.cos(s=(r=s)*Oa/2+Pa/4),o=Math.sin(s)},xs.lineEnd=function(){t(e,r)}}function de(t){var e=t[0],r=t[1],n=Math.cos(r);return[n*Math.cos(e),n*Math.sin(e),Math.sin(r)]}function me(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ge(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ve(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ee(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ye(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function xe(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function Te(t,e){return da(t[0]-e[0])<Aa&&da(t[1]-e[1])<Aa}function Re(t,e){t*=Oa;var r=Math.cos(e*=Oa);be(r*Math.cos(t),r*Math.sin(t),Math.sin(e))}function be(t,e,r){++Ts,bs+=(t-bs)/Ts,_s+=(e-_s)/Ts,ws+=(r-ws)/Ts}function _e(){function t(t,i){t*=Oa;var o=Math.cos(i*=Oa),a=o*Math.cos(t),s=o*Math.sin(t),u=Math.sin(i),h=Math.atan2(Math.sqrt((h=r*u-n*s)*h+(h=n*a-e*u)*h+(h=e*s-r*a)*h),e*a+r*s+n*u);Rs+=h,Ms+=h*(e+(e=a)),Hs+=h*(r+(r=s)),Ss+=h*(n+(n=u)),be(e,r,n)}var e,r,n;Ps.point=function(i,o){i*=Oa;var a=Math.cos(o*=Oa);e=a*Math.cos(i),r=a*Math.sin(i),n=Math.sin(o),Ps.point=t,be(e,r,n)}}function we(){Ps.point=Re}function Me(){function t(t,e){t*=Oa;var r=Math.cos(e*=Oa),a=r*Math.cos(t),s=r*Math.sin(t),u=Math.sin(e),h=i*u-o*s,l=o*a-n*u,c=n*s-i*a,f=Math.sqrt(h*h+l*l+c*c),p=n*a+i*s+o*u,d=f&&-tt(p)/f,m=Math.atan2(f,p);Cs+=d*h,As+=d*l,Ls+=d*c,Rs+=m,Ms+=m*(n+(n=a)),Hs+=m*(i+(i=s)),Ss+=m*(o+(o=u)),be(n,i,o)}var e,r,n,i,o;Ps.point=function(a,s){e=a,r=s,Ps.point=t,a*=Oa;var u=Math.cos(s*=Oa);n=u*Math.cos(a),i=u*Math.sin(a),o=Math.sin(s),be(n,i,o)},Ps.lineEnd=function(){t(e,r),Ps.lineEnd=we,Ps.point=Re}}function He(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,n){return r=e.invert(r,n),r&&t.invert(r[0],r[1])}),r}function Se(){return!0}function Ce(t,e,r,n,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r=t[0],n=t[e];if(Te(r,n)){i.lineStart();for(var s=0;e>s;++s)i.point((r=t[s])[0],r[1]);return void i.lineEnd()}var u=new Le(r,t,null,!0),h=new Le(r,null,u,!1);u.o=h,o.push(u),a.push(h),u=new Le(n,t,null,!1),h=new Le(n,null,u,!0),u.o=h,o.push(u),a.push(h)}}),a.sort(e),Ae(o),Ae(a),o.length){for(var s=0,u=r,h=a.length;h>s;++s)a[s].e=u=!u;for(var l,c,f=o[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var s=0,h=l.length;h>s;++s)i.point((c=l[s])[0],c[1]);else n(p.x,p.n.x,1,i);p=p.n}else{if(d){l=p.p.z;for(var s=l.length-1;s>=0;--s)i.point((c=l[s])[0],c[1])}else n(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Ae(t){if(e=t.length){for(var e,r,n=0,i=t[0];++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Le(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Pe(t,e,r,n){return function(i,o){function a(e,r){var n=i(e,r);t(e=n[0],r=n[1])&&o.point(e,r)}function s(t,e){var r=i(t,e);g.point(r[0],r[1])}function u(){E.point=s,g.lineStart()}function h(){E.point=a,g.lineEnd()}function l(t,e){m.push([t,e]);var r=i(t,e);x.point(r[0],r[1])}function c(){x.lineStart(),m=[]}function f(){l(m[0][0],m[0][1]),x.lineEnd();var t,e=x.clean(),r=y.buffer(),n=r.length;if(m.pop(),d.push(m),m=null,n)if(1&e){t=r[0];var i,n=t.length-1,a=-1;if(n>0){for(T||(o.polygonStart(),T=!0),o.lineStart();++a<n;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else n>1&&2&e&&r.push(r.pop().concat(r.shift())),p.push(r.filter(Fe))}var p,d,m,g=e(o),v=i.invert(n[0],n[1]),E={point:a,lineStart:u,lineEnd:h,polygonStart:function(){E.point=l,E.lineStart=c,E.lineEnd=f,p=[],d=[]},polygonEnd:function(){E.point=a,E.lineStart=u,E.lineEnd=h,p=ra.merge(p);var t=Ue(v,d);p.length?(T||(o.polygonStart(),T=!0),Ce(p,Be,t,r,o)):t&&(T||(o.polygonStart(),T=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),T&&(o.polygonEnd(),T=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}},y=De(),x=e(y),T=!1;return E}}function Fe(t){return t.length>1}function De(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,r){t.push([e,r])},lineEnd:T,buffer:function(){var r=e;return e=[],t=null,r},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Be(t,e){return((t=t.x)[0]<0?t[1]-Ba-Aa:Ba-t[1])-((e=e.x)[0]<0?e[1]-Ba-Aa:Ba-e[1])}function Oe(t){var e,r=0/0,n=0/0,i=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Pa:-Pa,u=da(o-r);da(u-Pa)<Aa?(t.point(r,n=(n+a)/2>0?Ba:-Ba),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(o,n),e=0):i!==s&&u>=Pa&&(da(r-i)<Aa&&(r-=i*Aa),da(o-s)<Aa&&(o-=s*Aa),n=Ne(r,n,o,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(s,n),e=0),t.point(r=o,n=a),i=s},lineEnd:function(){t.lineEnd(),r=n=0/0},clean:function(){return 2-e}}}function Ne(t,e,r,n){var i,o,a=Math.sin(t-r);return da(a)>Aa?Math.atan((Math.sin(e)*(o=Math.cos(n))*Math.sin(r)-Math.sin(n)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+n)/2}function ke(t,e,r,n){var i;if(null==t)i=r*Ba,n.point(-Pa,i),n.point(0,i),n.point(Pa,i),n.point(Pa,0),n.point(Pa,-i),n.point(0,-i),n.point(-Pa,-i),n.point(-Pa,0),n.point(-Pa,i);else if(da(t[0]-e[0])>Aa){var o=t[0]<e[0]?Pa:-Pa;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(e[0],e[1])}function Ue(t,e){var r=t[0],n=t[1],i=[Math.sin(r),-Math.cos(r),0],o=0,a=0;ys.reset();for(var s=0,u=e.length;u>s;++s){var h=e[s],l=h.length;if(l)for(var c=h[0],f=c[0],p=c[1]/2+Pa/4,d=Math.sin(p),m=Math.cos(p),g=1;;){g===l&&(g=0),t=h[g];var v=t[0],E=t[1]/2+Pa/4,y=Math.sin(E),x=Math.cos(E),T=v-f,R=T>=0?1:-1,b=R*T,_=b>Pa,w=d*y;if(ys.add(Math.atan2(w*R*Math.sin(b),m*x+w*Math.cos(b))),o+=_?T+R*Fa:T,_^f>=r^v>=r){var M=ge(de(c),de(t));ye(M);var H=ge(i,M);ye(H);var S=(_^T>=0?-1:1)*et(H[2]);(n>S||n===S&&(M[0]||M[1]))&&(a+=_^T>=0?1:-1)}if(!g++)break;f=v,d=y,m=x,c=t}}return(-Aa>o||Aa>o&&0>ys)^1&a}function Ie(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function r(t){var r,o,u,h,l;return{lineStart:function(){h=u=!1,l=1},point:function(c,f){var p,d=[c,f],m=e(c,f),g=a?m?0:i(c,f):m?i(c+(0>c?Pa:-Pa),f):0;if(!r&&(h=u=m)&&t.lineStart(),m!==u&&(p=n(r,d),(Te(r,p)||Te(d,p))&&(d[0]+=Aa,d[1]+=Aa,m=e(d[0],d[1]))),m!==u)l=0,m?(t.lineStart(),p=n(d,r),t.point(p[0],p[1])):(p=n(r,d),t.point(p[0],p[1]),t.lineEnd()),r=p;else if(s&&r&&a^m){var v;g&o||!(v=n(d,r,!0))||(l=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!m||r&&Te(r,d)||t.point(d[0],d[1]),r=d,u=m,o=g},lineEnd:function(){u&&t.lineEnd(),r=null},clean:function(){return l|(h&&u)<<1}}}function n(t,e,r){var n=de(t),i=de(e),a=[1,0,0],s=ge(n,i),u=me(s,s),h=s[0],l=u-h*h;if(!l)return!r&&t;var c=o*u/l,f=-o*h/l,p=ge(a,s),d=Ee(a,c),m=Ee(s,f);ve(d,m);var g=p,v=me(d,g),E=me(g,g),y=v*v-E*(me(d,d)-1);if(!(0>y)){var x=Math.sqrt(y),T=Ee(g,(-v-x)/E);if(ve(T,d),T=xe(T),!r)return T;var R,b=t[0],_=e[0],w=t[1],M=e[1];b>_&&(R=b,b=_,_=R);var H=_-b,S=da(H-Pa)<Aa,C=S||Aa>H;if(!S&&w>M&&(R=w,w=M,M=R),C?S?w+M>0^T[1]<(da(T[0]-b)<Aa?w:M):w<=T[1]&&T[1]<=M:H>Pa^(b<=T[0]&&T[0]<=_)){var A=Ee(g,(-v+x)/E);return ve(A,d),[T,xe(A)]}}}function i(e,r){var n=a?t:Pa-t,i=0;return-n>e?i|=1:e>n&&(i|=2),-n>r?i|=4:r>n&&(i|=8),i}var o=Math.cos(t),a=o>0,s=da(o)>Aa,u=pr(t,6*Oa);return Pe(e,r,u,a?[0,-t]:[-Pa,t-Pa])}function ze(t,e,r,n){return function(i){var o,a=i.a,s=i.b,u=a.x,h=a.y,l=s.x,c=s.y,f=0,p=1,d=l-u,m=c-h;if(o=t-u,d||!(o>0)){if(o/=d,0>d){if(f>o)return;p>o&&(p=o)}else if(d>0){if(o>p)return;o>f&&(f=o)}if(o=r-u,d||!(0>o)){if(o/=d,0>d){if(o>p)return;o>f&&(f=o)}else if(d>0){if(f>o)return;p>o&&(p=o)}if(o=e-h,m||!(o>0)){if(o/=m,0>m){if(f>o)return;p>o&&(p=o)}else if(m>0){if(o>p)return;o>f&&(f=o)}if(o=n-h,m||!(0>o)){if(o/=m,0>m){if(o>p)return;o>f&&(f=o)}else if(m>0){if(f>o)return;p>o&&(p=o)}return f>0&&(i.a={x:u+f*d,y:h+f*m}),1>p&&(i.b={x:u+p*d,y:h+p*m}),i}}}}}}function Ve(t,e,r,n){function i(n,i){return da(n[0]-t)<Aa?i>0?0:3:da(n[0]-r)<Aa?i>0?2:1:da(n[1]-e)<Aa?i>0?1:0:i>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var r=i(t,1),n=i(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t){for(var e=0,r=g.length,n=t[1],i=0;r>i;++i)for(var o,a=1,s=g[i],u=s.length,h=s[0];u>a;++a)o=s[a],h[1]<=n?o[1]>n&&J(h,o,t)>0&&++e:o[1]<=n&&J(h,o,t)<0&&--e,h=o;return 0!==e}function h(o,s,u,h){var l=0,c=0;if(null==o||(l=i(o,u))!==(c=i(s,u))||a(o,s)<0^u>0){do h.point(0===l||3===l?t:r,l>1?n:e);while((l=(l+u+4)%4)!==c)}else h.point(s[0],s[1])}function l(i,o){return i>=t&&r>=i&&o>=e&&n>=o}function c(t,e){l(t,e)&&s.point(t,e)}function f(){C.point=d,g&&g.push(v=[]),_=!0,b=!1,T=R=0/0}function p(){m&&(d(E,y),x&&b&&H.rejoin(),m.push(H.buffer())),C.point=c,b&&s.lineEnd()}function d(t,e){t=Math.max(-Ds,Math.min(Ds,t)),e=Math.max(-Ds,Math.min(Ds,e));var r=l(t,e);if(g&&v.push([t,e]),_)E=t,y=e,x=r,_=!1,r&&(s.lineStart(),s.point(t,e));else if(r&&b)s.point(t,e);else{var n={a:{x:T,y:R},b:{x:t,y:e}};S(n)?(b||(s.lineStart(),s.point(n.a.x,n.a.y)),s.point(n.b.x,n.b.y),r||s.lineEnd(),w=!1):r&&(s.lineStart(),s.point(t,e),w=!1)}T=t,R=e,b=r}var m,g,v,E,y,x,T,R,b,_,w,M=s,H=De(),S=ze(t,e,r,n),C={point:c,lineStart:f,lineEnd:p,polygonStart:function(){s=H,m=[],g=[],w=!0},polygonEnd:function(){s=M,m=ra.merge(m);var e=u([t,n]),r=w&&e,i=m.length;(r||i)&&(s.polygonStart(),r&&(s.lineStart(),h(null,null,1,s),s.lineEnd()),i&&Ce(m,o,e,h,s),s.polygonEnd()),m=g=v=null}};return C}}function je(t){var e=0,r=Pa/3,n=or(t),i=n(e,r);return i.parallels=function(t){return arguments.length?n(e=t[0]*Pa/180,r=t[1]*Pa/180):[e/Pa*180,r/Pa*180]},i}function Ge(t,e){function r(t,e){var r=Math.sqrt(o-2*i*Math.sin(e))/i;return[r*Math.sin(t*=i),a-r*Math.cos(t)]}var n=Math.sin(t),i=(n+Math.sin(e))/2,o=1+n*(2*i-n),a=Math.sqrt(o)/i;return r.invert=function(t,e){var r=a-e;return[Math.atan2(t,r)/i,et((o-(t*t+r*r)*i*i)/(2*i))]},r}function We(){function t(t,e){Os+=i*t-n*e,n=t,i=e}var e,r,n,i;zs.point=function(o,a){zs.point=t,e=n=o,r=i=a},zs.lineEnd=function(){t(e,r)}}function Xe(t,e){Ns>t&&(Ns=t),t>Us&&(Us=t),ks>e&&(ks=e),e>Is&&(Is=e)}function qe(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=r}function r(t,e){a.push("L",t,",",e)}function n(){s.point=t}function i(){a.push("Z")}var o=Ye(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:n,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=n,s.point=t},pointRadius:function(t){return o=Ye(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function Ye(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ke(t,e){bs+=t,_s+=e,++ws}function Ze(){function t(t,n){var i=t-e,o=n-r,a=Math.sqrt(i*i+o*o);Ms+=a*(e+t)/2,Hs+=a*(r+n)/2,Ss+=a,Ke(e=t,r=n)}var e,r;js.point=function(n,i){js.point=t,Ke(e=n,r=i)}}function Qe(){js.point=Ke}function $e(){function t(t,e){var r=t-n,o=e-i,a=Math.sqrt(r*r+o*o);Ms+=a*(n+t)/2,Hs+=a*(i+e)/2,Ss+=a,a=i*t-n*e,Cs+=a*(n+t),As+=a*(i+e),Ls+=3*a,Ke(n=t,i=e)}var e,r,n,i;js.point=function(o,a){js.point=t,Ke(e=n=o,r=i=a)},js.lineEnd=function(){t(e,r)}}function Je(t){function e(e,r){t.moveTo(e+a,r),t.arc(e,r,a,0,Fa)}function r(e,r){t.moveTo(e,r),s.point=n}function n(e,r){t.lineTo(e,r)}function i(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=r},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return a=t,s},result:T};return s}function tr(t){function e(t){return(s?n:r)(t)}function r(e){return nr(e,function(r,n){r=t(r,n),e.point(r[0],r[1])})}function n(e){function r(r,n){r=t(r,n),e.point(r[0],r[1])}function n(){y=0/0,_.point=o,e.lineStart()}function o(r,n){var o=de([r,n]),a=t(r,n);i(y,x,E,T,R,b,y=a[0],x=a[1],E=r,T=o[0],R=o[1],b=o[2],s,e),e.point(y,x)}function a(){_.point=r,e.lineEnd()}function u(){n(),_.point=h,_.lineEnd=l}function h(t,e){o(c=t,f=e),p=y,d=x,m=T,g=R,v=b,_.point=o}function l(){i(y,x,E,T,R,b,p,d,c,m,g,v,s,e),_.lineEnd=a,a()}var c,f,p,d,m,g,v,E,y,x,T,R,b,_={point:r,lineStart:n,lineEnd:a,polygonStart:function(){
e.polygonStart(),_.lineStart=u},polygonEnd:function(){e.polygonEnd(),_.lineStart=n}};return _}function i(e,r,n,s,u,h,l,c,f,p,d,m,g,v){var E=l-e,y=c-r,x=E*E+y*y;if(x>4*o&&g--){var T=s+p,R=u+d,b=h+m,_=Math.sqrt(T*T+R*R+b*b),w=Math.asin(b/=_),M=da(da(b)-1)<Aa||da(n-f)<Aa?(n+f)/2:Math.atan2(R,T),H=t(M,w),S=H[0],C=H[1],A=S-e,L=C-r,P=y*A-E*L;(P*P/x>o||da((E*A+y*L)/x-.5)>.3||a>s*p+u*d+h*m)&&(i(e,r,n,s,u,h,S,C,M,T/=_,R/=_,b,g,v),v.point(S,C),i(S,C,M,T,R,b,l,c,f,p,d,m,g,v))}}var o=.5,a=Math.cos(30*Oa),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function er(t){var e=tr(function(e,r){return t([e*Na,r*Na])});return function(t){return ar(e(t))}}function rr(t){this.stream=t}function nr(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function ir(t){return or(function(){return t})()}function or(t){function e(t){return t=s(t[0]*Oa,t[1]*Oa),[t[0]*f+u,h-t[1]*f]}function r(t){return t=s.invert((t[0]-u)/f,(h-t[1])/f),t&&[t[0]*Na,t[1]*Na]}function n(){s=He(a=hr(v,y,x),o);var t=o(m,g);return u=p-t[0]*f,h=d+t[1]*f,i()}function i(){return l&&(l.valid=!1,l=null),e}var o,a,s,u,h,l,c=tr(function(t,e){return t=o(t,e),[t[0]*f+u,h-t[1]*f]}),f=150,p=480,d=250,m=0,g=0,v=0,y=0,x=0,T=Fs,R=E,b=null,_=null;return e.stream=function(t){return l&&(l.valid=!1),l=ar(T(a,c(R(t)))),l.valid=!0,l},e.clipAngle=function(t){return arguments.length?(T=null==t?(b=t,Fs):Ie((b=+t)*Oa),i()):b},e.clipExtent=function(t){return arguments.length?(_=t,R=t?Ve(t[0][0],t[0][1],t[1][0],t[1][1]):E,i()):_},e.scale=function(t){return arguments.length?(f=+t,n()):f},e.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],n()):[p,d]},e.center=function(t){return arguments.length?(m=t[0]%360*Oa,g=t[1]%360*Oa,n()):[m*Na,g*Na]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Oa,y=t[1]%360*Oa,x=t.length>2?t[2]%360*Oa:0,n()):[v*Na,y*Na,x*Na]},ra.rebind(e,c,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&r,n()}}function ar(t){return nr(t,function(e,r){t.point(e*Oa,r*Oa)})}function sr(t,e){return[t,e]}function ur(t,e){return[t>Pa?t-Fa:-Pa>t?t+Fa:t,e]}function hr(t,e,r){return t?e||r?He(cr(t),fr(e,r)):cr(t):e||r?fr(e,r):ur}function lr(t){return function(e,r){return e+=t,[e>Pa?e-Fa:-Pa>e?e+Fa:e,r]}}function cr(t){var e=lr(t);return e.invert=lr(-t),e}function fr(t,e){function r(t,e){var r=Math.cos(e),s=Math.cos(t)*r,u=Math.sin(t)*r,h=Math.sin(e),l=h*n+s*i;return[Math.atan2(u*o-l*a,s*n-h*i),et(l*o+u*a)]}var n=Math.cos(t),i=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return r.invert=function(t,e){var r=Math.cos(e),s=Math.cos(t)*r,u=Math.sin(t)*r,h=Math.sin(e),l=h*o-u*a;return[Math.atan2(u*o+h*a,s*n+l*i),et(l*n-s*i)]},r}function pr(t,e){var r=Math.cos(t),n=Math.sin(t);return function(i,o,a,s){var u=a*e;null!=i?(i=dr(r,i),o=dr(r,o),(a>0?o>i:i>o)&&(i+=a*Fa)):(i=t+a*Fa,o=t-.5*u);for(var h,l=i;a>0?l>o:o>l;l-=u)s.point((h=xe([r,-n*Math.cos(l),-n*Math.sin(l)]))[0],h[1])}}function dr(t,e){var r=de(e);r[0]-=t,ye(r);var n=tt(-r[1]);return((-r[2]<0?-n:n)+2*Math.PI-Aa)%(2*Math.PI)}function mr(t,e,r){var n=ra.range(t,e-Aa,r).concat(e);return function(t){return n.map(function(e){return[t,e]})}}function gr(t,e,r){var n=ra.range(t,e-Aa,r).concat(e);return function(t){return n.map(function(e){return[e,t]})}}function vr(t){return t.source}function Er(t){return t.target}function yr(t,e,r,n){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=i*Math.cos(t),h=i*Math.sin(t),l=a*Math.cos(r),c=a*Math.sin(r),f=2*Math.asin(Math.sqrt(ot(n-e)+i*a*ot(r-t))),p=1/Math.sin(f),d=f?function(t){var e=Math.sin(t*=f)*p,r=Math.sin(f-t)*p,n=r*u+e*l,i=r*h+e*c,a=r*o+e*s;return[Math.atan2(i,n)*Na,Math.atan2(a,Math.sqrt(n*n+i*i))*Na]}:function(){return[t*Na,e*Na]};return d.distance=f,d}function xr(){function t(t,i){var o=Math.sin(i*=Oa),a=Math.cos(i),s=da((t*=Oa)-e),u=Math.cos(s);Gs+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=n*o-r*a*u)*s),r*o+n*a*u),e=t,r=o,n=a}var e,r,n;Ws.point=function(i,o){e=i*Oa,r=Math.sin(o*=Oa),n=Math.cos(o),Ws.point=t},Ws.lineEnd=function(){Ws.point=Ws.lineEnd=T}}function Tr(t,e){function r(e,r){var n=Math.cos(e),i=Math.cos(r),o=t(n*i);return[o*i*Math.sin(e),o*Math.sin(r)]}return r.invert=function(t,r){var n=Math.sqrt(t*t+r*r),i=e(n),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,n*a),Math.asin(n&&r*o/n)]},r}function Rr(t,e){function r(t,e){a>0?-Ba+Aa>e&&(e=-Ba+Aa):e>Ba-Aa&&(e=Ba-Aa);var r=a/Math.pow(i(e),o);return[r*Math.sin(o*t),a-r*Math.cos(o*t)]}var n=Math.cos(t),i=function(t){return Math.tan(Pa/4+t/2)},o=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(i(e)/i(t)),a=n*Math.pow(i(t),o)/o;return o?(r.invert=function(t,e){var r=a-e,n=$(o)*Math.sqrt(t*t+r*r);return[Math.atan2(t,r)/o,2*Math.atan(Math.pow(a/n,1/o))-Ba]},r):_r}function br(t,e){function r(t,e){var r=o-e;return[r*Math.sin(i*t),o-r*Math.cos(i*t)]}var n=Math.cos(t),i=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),o=n/i+t;return da(i)<Aa?sr:(r.invert=function(t,e){var r=o-e;return[Math.atan2(t,r)/i,o-$(i)*Math.sqrt(t*t+r*r)]},r)}function _r(t,e){return[t,Math.log(Math.tan(Pa/4+e/2))]}function wr(t){var e,r=ir(t),n=r.scale,i=r.translate,o=r.clipExtent;return r.scale=function(){var t=n.apply(r,arguments);return t===r?e?r.clipExtent(null):r:t},r.translate=function(){var t=i.apply(r,arguments);return t===r?e?r.clipExtent(null):r:t},r.clipExtent=function(t){var a=o.apply(r,arguments);if(a===r){if(e=null==t){var s=Pa*n(),u=i();o([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else e&&(a=null);return a},r.clipExtent(null)}function Mr(t,e){return[Math.log(Math.tan(Pa/4+e/2)),-t]}function Hr(t){return t[0]}function Sr(t){return t[1]}function Cr(t){for(var e=t.length,r=[0,1],n=2,i=2;e>i;i++){for(;n>1&&J(t[r[n-2]],t[r[n-1]],t[i])<=0;)--n;r[n++]=i}return r.slice(0,n)}function Ar(t,e){return t[0]-e[0]||t[1]-e[1]}function Lr(t,e,r){return(r[0]-e[0])*(t[1]-e[1])<(r[1]-e[1])*(t[0]-e[0])}function Pr(t,e,r,n){var i=t[0],o=r[0],a=e[0]-i,s=n[0]-o,u=t[1],h=r[1],l=e[1]-u,c=n[1]-h,f=(s*(u-h)-c*(i-o))/(c*a-s*l);return[i+f*a,u+f*l]}function Fr(t){var e=t[0],r=t[t.length-1];return!(e[0]-r[0]||e[1]-r[1])}function Dr(){en(this),this.edge=this.site=this.circle=null}function Br(t){var e=nu.pop()||new Dr;return e.site=t,e}function Or(t){Xr(t),tu.remove(t),nu.push(t),en(t)}function Nr(t){var e=t.circle,r=e.x,n=e.cy,i={x:r,y:n},o=t.P,a=t.N,s=[t];Or(t);for(var u=o;u.circle&&da(r-u.circle.x)<Aa&&da(n-u.circle.cy)<Aa;)o=u.P,s.unshift(u),Or(u),u=o;s.unshift(u),Xr(u);for(var h=a;h.circle&&da(r-h.circle.x)<Aa&&da(n-h.circle.cy)<Aa;)a=h.N,s.push(h),Or(h),h=a;s.push(h),Xr(h);var l,c=s.length;for(l=1;c>l;++l)h=s[l],u=s[l-1],$r(h.edge,u.site,h.site,i);u=s[0],h=s[c-1],h.edge=Zr(u.site,h.site,null,i),Wr(u),Wr(h)}function kr(t){for(var e,r,n,i,o=t.x,a=t.y,s=tu._;s;)if(n=Ur(s,a)-o,n>Aa)s=s.L;else{if(i=o-Ir(s,a),!(i>Aa)){n>-Aa?(e=s.P,r=s):i>-Aa?(e=s,r=s.N):e=r=s;break}if(!s.R){e=s;break}s=s.R}var u=Br(t);if(tu.insert(e,u),e||r){if(e===r)return Xr(e),r=Br(e.site),tu.insert(u,r),u.edge=r.edge=Zr(e.site,u.site),Wr(e),void Wr(r);if(!r)return void(u.edge=Zr(e.site,u.site));Xr(e),Xr(r);var h=e.site,l=h.x,c=h.y,f=t.x-l,p=t.y-c,d=r.site,m=d.x-l,g=d.y-c,v=2*(f*g-p*m),E=f*f+p*p,y=m*m+g*g,x={x:(g*E-p*y)/v+l,y:(f*y-m*E)/v+c};$r(r.edge,h,d,x),u.edge=Zr(h,t,null,x),r.edge=Zr(t,d,null,x),Wr(e),Wr(r)}}function Ur(t,e){var r=t.site,n=r.x,i=r.y,o=i-e;if(!o)return n;var a=t.P;if(!a)return-(1/0);r=a.site;var s=r.x,u=r.y,h=u-e;if(!h)return s;var l=s-n,c=1/o-1/h,f=l/h;return c?(-f+Math.sqrt(f*f-2*c*(l*l/(-2*h)-u+h/2+i-o/2)))/c+n:(n+s)/2}function Ir(t,e){var r=t.N;if(r)return Ur(r,e);var n=t.site;return n.y===e?n.x:1/0}function zr(t){this.site=t,this.edges=[]}function Vr(t){for(var e,r,n,i,o,a,s,u,h,l,c=t[0][0],f=t[1][0],p=t[0][1],d=t[1][1],m=Js,g=m.length;g--;)if(o=m[g],o&&o.prepare())for(s=o.edges,u=s.length,a=0;u>a;)l=s[a].end(),n=l.x,i=l.y,h=s[++a%u].start(),e=h.x,r=h.y,(da(n-e)>Aa||da(i-r)>Aa)&&(s.splice(a,0,new Jr(Qr(o.site,l,da(n-c)<Aa&&d-i>Aa?{x:c,y:da(e-c)<Aa?r:d}:da(i-d)<Aa&&f-n>Aa?{x:da(r-d)<Aa?e:f,y:d}:da(n-f)<Aa&&i-p>Aa?{x:f,y:da(e-f)<Aa?r:p}:da(i-p)<Aa&&n-c>Aa?{x:da(r-p)<Aa?e:c,y:p}:null),o.site,null)),++u)}function jr(t,e){return e.angle-t.angle}function Gr(){en(this),this.x=this.y=this.arc=this.site=this.cy=null}function Wr(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,i=t.site,o=r.site;if(n!==o){var a=i.x,s=i.y,u=n.x-a,h=n.y-s,l=o.x-a,c=o.y-s,f=2*(u*c-h*l);if(!(f>=-La)){var p=u*u+h*h,d=l*l+c*c,m=(c*p-h*d)/f,g=(u*d-l*p)/f,c=g+s,v=iu.pop()||new Gr;v.arc=t,v.site=i,v.x=m+a,v.y=c+Math.sqrt(m*m+g*g),v.cy=c,t.circle=v;for(var E=null,y=ru._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){E=y.P;break}y=y.L}else{if(!y.R){E=y;break}y=y.R}ru.insert(E,v),E||(eu=v)}}}}function Xr(t){var e=t.circle;e&&(e.P||(eu=e.N),ru.remove(e),iu.push(e),en(e),t.circle=null)}function qr(t){for(var e,r=$s,n=ze(t[0][0],t[0][1],t[1][0],t[1][1]),i=r.length;i--;)e=r[i],(!Yr(e,t)||!n(e)||da(e.a.x-e.b.x)<Aa&&da(e.a.y-e.b.y)<Aa)&&(e.a=e.b=null,r.splice(i,1))}function Yr(t,e){var r=t.b;if(r)return!0;var n,i,o=t.a,a=e[0][0],s=e[1][0],u=e[0][1],h=e[1][1],l=t.l,c=t.r,f=l.x,p=l.y,d=c.x,m=c.y,g=(f+d)/2,v=(p+m)/2;if(m===p){if(a>g||g>=s)return;if(f>d){if(o){if(o.y>=h)return}else o={x:g,y:u};r={x:g,y:h}}else{if(o){if(o.y<u)return}else o={x:g,y:h};r={x:g,y:u}}}else if(n=(f-d)/(m-p),i=v-n*g,-1>n||n>1)if(f>d){if(o){if(o.y>=h)return}else o={x:(u-i)/n,y:u};r={x:(h-i)/n,y:h}}else{if(o){if(o.y<u)return}else o={x:(h-i)/n,y:h};r={x:(u-i)/n,y:u}}else if(m>p){if(o){if(o.x>=s)return}else o={x:a,y:n*a+i};r={x:s,y:n*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:n*s+i};r={x:a,y:n*a+i}}return t.a=o,t.b=r,!0}function Kr(t,e){this.l=t,this.r=e,this.a=this.b=null}function Zr(t,e,r,n){var i=new Kr(t,e);return $s.push(i),r&&$r(i,t,e,r),n&&$r(i,e,t,n),Js[t.i].edges.push(new Jr(i,t,e)),Js[e.i].edges.push(new Jr(i,e,t)),i}function Qr(t,e,r){var n=new Kr(t,null);return n.a=e,n.b=r,$s.push(n),n}function $r(t,e,r,n){t.a||t.b?t.l===r?t.b=n:t.a=n:(t.a=n,t.l=e,t.r=r)}function Jr(t,e,r){var n=t.a,i=t.b;this.edge=t,this.site=e,this.angle=r?Math.atan2(r.y-e.y,r.x-e.x):t.l===e?Math.atan2(i.x-n.x,n.y-i.y):Math.atan2(n.x-i.x,i.y-n.y)}function tn(){this._=null}function en(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function rn(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function nn(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function on(t){for(;t.L;)t=t.L;return t}function an(t,e){var r,n,i,o=t.sort(sn).pop();for($s=[],Js=new Array(t.length),tu=new tn,ru=new tn;;)if(i=eu,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==r||o.y!==n)&&(Js[o.i]=new zr(o),kr(o),r=o.x,n=o.y),o=t.pop();else{if(!i)break;Nr(i.arc)}e&&(qr(e),Vr(e));var a={cells:Js,edges:$s};return tu=ru=$s=Js=null,a}function sn(t,e){return e.y-t.y||e.x-t.x}function un(t,e,r){return(t.x-r.x)*(e.y-t.y)-(t.x-e.x)*(r.y-t.y)}function hn(t){return t.x}function ln(t){return t.y}function cn(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fn(t,e,r,n,i,o){if(!t(e,r,n,i,o)){var a=.5*(r+i),s=.5*(n+o),u=e.nodes;u[0]&&fn(t,u[0],r,n,a,s),u[1]&&fn(t,u[1],a,n,i,s),u[2]&&fn(t,u[2],r,s,a,o),u[3]&&fn(t,u[3],a,s,i,o)}}function pn(t,e,r,n,i,o,a){var s,u=1/0;return function h(t,l,c,f,p){if(!(l>o||c>a||n>f||i>p)){if(d=t.point){var d,m=e-t.x,g=r-t.y,v=m*m+g*g;if(u>v){var E=Math.sqrt(u=v);n=e-E,i=r-E,o=e+E,a=r+E,s=d}}for(var y=t.nodes,x=.5*(l+f),T=.5*(c+p),R=e>=x,b=r>=T,_=b<<1|R,w=_+4;w>_;++_)if(t=y[3&_])switch(3&_){case 0:h(t,l,c,x,T);break;case 1:h(t,x,c,f,T);break;case 2:h(t,l,T,x,p);break;case 3:h(t,x,T,f,p)}}}(t,n,i,o,a),s}function dn(t,e){t=ra.rgb(t),e=ra.rgb(e);var r=t.r,n=t.g,i=t.b,o=e.r-r,a=e.g-n,s=e.b-i;return function(t){return"#"+xt(Math.round(r+o*t))+xt(Math.round(n+a*t))+xt(Math.round(i+s*t))}}function mn(t,e){var r,n={},i={};for(r in t)r in e?n[r]=En(t[r],e[r]):i[r]=t[r];for(r in e)r in t||(i[r]=e[r]);return function(t){for(r in n)i[r]=n[r](t);return i}}function gn(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function vn(t,e){var r,n,i,o=au.lastIndex=su.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(r=au.exec(t))&&(n=su.exec(e));)(i=n.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(r=r[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,u.push({i:a,x:gn(r,n)})),o=su.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var r,n=0;e>n;++n)s[(r=u[n]).i]=r.x(t);return s.join("")})}function En(t,e){for(var r,n=ra.interpolators.length;--n>=0&&!(r=ra.interpolators[n](t,e)););return r}function yn(t,e){var r,n=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(r=0;s>r;++r)n.push(En(t[r],e[r]));for(;o>r;++r)i[r]=t[r];for(;a>r;++r)i[r]=e[r];return function(t){for(r=0;s>r;++r)i[r]=n[r](t);return i}}function xn(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Tn(t){return function(e){return 1-t(1-e)}}function Rn(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function bn(t){return t*t}function _n(t){return t*t*t}function wn(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(.5>t?r:3*(t-e)+r-.75)}function Mn(t){return function(e){return Math.pow(e,t)}}function Hn(t){return 1-Math.cos(t*Ba)}function Sn(t){return Math.pow(2,10*(t-1))}function Cn(t){return 1-Math.sqrt(1-t*t)}function An(t,e){var r;return arguments.length<2&&(e=.45),arguments.length?r=e/Fa*Math.asin(1/t):(t=1,r=e/4),function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-r)*Fa/e)}}function Ln(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Pn(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Fn(t,e){t=ra.hcl(t),e=ra.hcl(e);var r=t.h,n=t.c,i=t.l,o=e.h-r,a=e.c-n,s=e.l-i;return isNaN(a)&&(a=0,n=isNaN(n)?e.c:n),isNaN(o)?(o=0,r=isNaN(r)?e.h:r):o>180?o-=360:-180>o&&(o+=360),function(t){return lt(r+o*t,n+a*t,i+s*t)+""}}function Dn(t,e){t=ra.hsl(t),e=ra.hsl(e);var r=t.h,n=t.s,i=t.l,o=e.h-r,a=e.s-n,s=e.l-i;return isNaN(a)&&(a=0,n=isNaN(n)?e.s:n),isNaN(o)?(o=0,r=isNaN(r)?e.h:r):o>180?o-=360:-180>o&&(o+=360),function(t){return ut(r+o*t,n+a*t,i+s*t)+""}}function Bn(t,e){t=ra.lab(t),e=ra.lab(e);var r=t.l,n=t.a,i=t.b,o=e.l-r,a=e.a-n,s=e.b-i;return function(t){return ft(r+o*t,n+a*t,i+s*t)+""}}function On(t,e){return e-=t,function(r){return Math.round(t+e*r)}}function Nn(t){var e=[t.a,t.b],r=[t.c,t.d],n=Un(e),i=kn(e,r),o=Un(In(r,e,-i))||0;e[0]*r[1]<r[0]*e[1]&&(e[0]*=-1,e[1]*=-1,n*=-1,i*=-1),this.rotate=(n?Math.atan2(e[1],e[0]):Math.atan2(-r[0],r[1]))*Na,this.translate=[t.e,t.f],this.scale=[n,o],this.skew=o?Math.atan2(i,o)*Na:0}function kn(t,e){return t[0]*e[0]+t[1]*e[1]}function Un(t){var e=Math.sqrt(kn(t,t));return e&&(t[0]/=e,t[1]/=e),e}function In(t,e,r){return t[0]+=r*e[0],t[1]+=r*e[1],t}function zn(t,e){var r,n=[],i=[],o=ra.transform(t),a=ra.transform(e),s=o.translate,u=a.translate,h=o.rotate,l=a.rotate,c=o.skew,f=a.skew,p=o.scale,d=a.scale;return s[0]!=u[0]||s[1]!=u[1]?(n.push("translate(",null,",",null,")"),i.push({i:1,x:gn(s[0],u[0])},{i:3,x:gn(s[1],u[1])})):n.push(u[0]||u[1]?"translate("+u+")":""),h!=l?(h-l>180?l+=360:l-h>180&&(h+=360),i.push({i:n.push(n.pop()+"rotate(",null,")")-2,x:gn(h,l)})):l&&n.push(n.pop()+"rotate("+l+")"),c!=f?i.push({i:n.push(n.pop()+"skewX(",null,")")-2,x:gn(c,f)}):f&&n.push(n.pop()+"skewX("+f+")"),p[0]!=d[0]||p[1]!=d[1]?(r=n.push(n.pop()+"scale(",null,",",null,")"),i.push({i:r-4,x:gn(p[0],d[0])},{i:r-2,x:gn(p[1],d[1])})):(1!=d[0]||1!=d[1])&&n.push(n.pop()+"scale("+d+")"),r=i.length,function(t){for(var e,o=-1;++o<r;)n[(e=i[o]).i]=e.x(t);return n.join("")}}function Vn(t,e){return e=(e-=t=+t)||1/e,function(r){return(r-t)/e}}function jn(t,e){return e=(e-=t=+t)||1/e,function(r){return Math.max(0,Math.min(1,(r-t)/e))}}function Gn(t){for(var e=t.source,r=t.target,n=Xn(e,r),i=[e];e!==n;)e=e.parent,i.push(e);for(var o=i.length;r!==n;)i.splice(o,0,r),r=r.parent;return i}function Wn(t){for(var e=[],r=t.parent;null!=r;)e.push(t),t=r,r=r.parent;return e.push(t),e}function Xn(t,e){if(t===e)return t;for(var r=Wn(t),n=Wn(e),i=r.pop(),o=n.pop(),a=null;i===o;)a=i,i=r.pop(),o=n.pop();return a}function qn(t){t.fixed|=2}function Yn(t){t.fixed&=-7}function Kn(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Zn(t){t.fixed&=-5}function Qn(t,e,r){var n=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,u=-1;++u<s;)o=a[u],null!=o&&(Qn(o,e,r),t.charge+=o.charge,n+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var h=e*r[t.point.index];t.charge+=t.pointCharge=h,n+=h*t.point.x,i+=h*t.point.y}t.cx=n/t.charge,t.cy=i/t.charge}function $n(t,e){return ra.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=ii,t}function Jn(t,e){for(var r=[t];null!=(t=r.pop());)if(e(t),(i=t.children)&&(n=i.length))for(var n,i;--n>=0;)r.push(i[n])}function ti(t,e){for(var r=[t],n=[];null!=(t=r.pop());)if(n.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)r.push(o[a]);for(;null!=(t=n.pop());)e(t)}function ei(t){return t.children}function ri(t){return t.value}function ni(t,e){return e.value-t.value}function ii(t){return ra.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function oi(t){return t.x}function ai(t){return t.y}function si(t,e,r){t.y0=e,t.y=r}function ui(t){return ra.range(t.length)}function hi(t){for(var e=-1,r=t[0].length,n=[];++e<r;)n[e]=0;return n}function li(t){for(var e,r=1,n=0,i=t[0][1],o=t.length;o>r;++r)(e=t[r][1])>i&&(n=r,i=e);return n}function ci(t){return t.reduce(fi,0)}function fi(t,e){return t+e[1]}function pi(t,e){return di(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function di(t,e){for(var r=-1,n=+t[0],i=(t[1]-n)/e,o=[];++r<=e;)o[r]=i*r+n;return o}function mi(t){return[ra.min(t),ra.max(t)]}function gi(t,e){return t.value-e.value}function vi(t,e){var r=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=r,r._pack_prev=e}function Ei(t,e){t._pack_next=e,e._pack_prev=t}function yi(t,e){var r=e.x-t.x,n=e.y-t.y,i=t.r+e.r;return.999*i*i>r*r+n*n}function xi(t){function e(t){l=Math.min(t.x-t.r,l),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),p=Math.max(t.y+t.r,p)}if((r=t.children)&&(h=r.length)){var r,n,i,o,a,s,u,h,l=1/0,c=-(1/0),f=1/0,p=-(1/0);if(r.forEach(Ti),n=r[0],n.x=-n.r,n.y=0,e(n),h>1&&(i=r[1],i.x=i.r,i.y=0,e(i),h>2))for(o=r[2],_i(n,i,o),e(o),vi(n,o),n._pack_prev=o,vi(o,i),i=n._pack_next,a=3;h>a;a++){_i(n,i,o=r[a]);var d=0,m=1,g=1;for(s=i._pack_next;s!==i;s=s._pack_next,m++)if(yi(s,o)){d=1;break}if(1==d)for(u=n._pack_prev;u!==s._pack_prev&&!yi(u,o);u=u._pack_prev,g++);d?(g>m||m==g&&i.r<n.r?Ei(n,i=s):Ei(n=u,i),a--):(vi(n,o),i=o,e(o))}var v=(l+c)/2,E=(f+p)/2,y=0;for(a=0;h>a;a++)o=r[a],o.x-=v,o.y-=E,y=Math.max(y,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=y,r.forEach(Ri)}}function Ti(t){t._pack_next=t._pack_prev=t}function Ri(t){delete t._pack_next,delete t._pack_prev}function bi(t,e,r,n){var i=t.children;if(t.x=e+=n*t.x,t.y=r+=n*t.y,t.r*=n,i)for(var o=-1,a=i.length;++o<a;)bi(i[o],e,r,n)}function _i(t,e,r){var n=t.r+r.r,i=e.x-t.x,o=e.y-t.y;if(n&&(i||o)){var a=e.r+r.r,s=i*i+o*o;a*=a,n*=n;var u=.5+(n-a)/(2*s),h=Math.sqrt(Math.max(0,2*a*(n+s)-(n-=s)*n-a*a))/(2*s);r.x=t.x+u*i+h*o,r.y=t.y+u*o-h*i}else r.x=t.x+n,r.y=t.y}function wi(t,e){return t.parent==e.parent?1:2}function Mi(t){var e=t.children;return e.length?e[0]:t.t}function Hi(t){var e,r=t.children;return(e=r.length)?r[e-1]:t.t}function Si(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function Ci(t){for(var e,r=0,n=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=r,e.m+=r,r+=e.s+(n+=e.c)}function Ai(t,e,r){return t.a.parent===e.parent?t.a:r}function Li(t){return 1+ra.max(t,function(t){return t.y})}function Pi(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Fi(t){var e=t.children;return e&&e.length?Fi(e[0]):t}function Di(t){var e,r=t.children;return r&&(e=r.length)?Di(r[e-1]):t}function Bi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Oi(t,e){var r=t.x+e[3],n=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>i&&(r+=i/2,i=0),0>o&&(n+=o/2,o=0),{x:r,y:n,dx:i,dy:o}}function Ni(t){var e=t[0],r=t[t.length-1];return r>e?[e,r]:[r,e]}function ki(t){return t.rangeExtent?t.rangeExtent():Ni(t.range())}function Ui(t,e,r,n){var i=r(t[0],t[1]),o=n(e[0],e[1]);return function(t){return o(i(t))}}function Ii(t,e){var r,n=0,i=t.length-1,o=t[n],a=t[i];return o>a&&(r=n,n=i,i=r,r=o,o=a,a=r),t[n]=e.floor(o),t[i]=e.ceil(a),t}function zi(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Eu}function Vi(t,e,r,n){var i=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)i.push(r(t[a-1],t[a])),o.push(n(e[a-1],e[a]));return function(e){var r=ra.bisect(t,e,1,s)-1;return o[r](i[r](e))}}function ji(t,e,r,n){function i(){var i=Math.min(t.length,e.length)>2?Vi:Ui,u=n?jn:Vn;return a=i(t,e,u,r),s=i(e,t,u,En),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(On)},o.clamp=function(t){return arguments.length?(n=t,i()):n},o.interpolate=function(t){return arguments.length?(r=t,i()):r},o.ticks=function(e){return qi(t,e)},o.tickFormat=function(e,r){return Yi(t,e,r)},o.nice=function(e){return Wi(t,e),i()},o.copy=function(){return ji(t,e,r,n)},i()}function Gi(t,e){return ra.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Wi(t,e){return Ii(t,zi(Xi(t,e)[2]))}function Xi(t,e){null==e&&(e=10);var r=Ni(t),n=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),o=e/n*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+.5*i,r[2]=i,r}function qi(t,e){return ra.range.apply(ra,Xi(t,e))}function Yi(t,e,r){var n=Xi(t,e);if(r){var i=as.exec(r);if(i.shift(),"s"===i[8]){var o=ra.formatPrefix(Math.max(da(n[0]),da(n[1])));return i[7]||(i[7]="."+Ki(o.scale(n[2]))),i[8]="f",r=ra.format(i.join("")),function(t){return r(o.scale(t))+o.symbol}}i[7]||(i[7]="."+Zi(i[8],n)),r=i.join("")}else r=",."+Ki(n[2])+"f";return ra.format(r)}function Ki(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Zi(t,e){var r=Ki(e[2]);return t in yu?Math.abs(r-Ki(Math.max(da(e[0]),da(e[1]))))+ +("e"!==t):r-2*("%"===t)}function Qi(t,e,r,n){function i(t){return(r?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return r?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(i(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(r=e[0]>=0,t.domain((n=e.map(Number)).map(i)),a):n},a.base=function(r){return arguments.length?(e=+r,t.domain(n.map(i)),a):e},a.nice=function(){var e=Ii(n.map(i),r?Math:Tu);return t.domain(e),n=e.map(o),a},a.ticks=function(){var t=Ni(n),a=[],s=t[0],u=t[1],h=Math.floor(i(s)),l=Math.ceil(i(u)),c=e%1?2:e;if(isFinite(l-h)){if(r){for(;l>h;h++)for(var f=1;c>f;f++)a.push(o(h)*f);a.push(o(h))}else for(a.push(o(h));h++<l;)for(var f=c-1;f>0;f--)a.push(o(h)*f);for(h=0;a[h]<s;h++);for(l=a.length;a[l-1]>u;l--);a=a.slice(h,l)}return a},a.tickFormat=function(t,e){if(!arguments.length)return xu;arguments.length<2?e=xu:"function"!=typeof e&&(e=ra.format(e));var n,s=Math.max(.1,t/a.ticks().length),u=r?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/o(u(i(t)+n))<=s?e(t):""}},a.copy=function(){return Qi(t.copy(),e,r,n)},Gi(a,t)}function $i(t,e,r){function n(e){return t(i(e))}var i=Ji(e),o=Ji(1/e);return n.invert=function(e){return o(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(i)),n):r},n.ticks=function(t){return qi(r,t)},n.tickFormat=function(t,e){return Yi(r,t,e)},n.nice=function(t){return n.domain(Wi(r,t))},n.exponent=function(a){return arguments.length?(i=Ji(e=a),o=Ji(1/e),t.domain(r.map(i)),n):e},n.copy=function(){return $i(t.copy(),e,r)},Gi(n,t)}function Ji(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function to(t,e){function r(r){return o[((i.get(r)||("range"===e.t?i.set(r,t.push(r)):0/0))-1)%o.length]}function n(e,r){return ra.range(t.length).map(function(t){return e+r*t})}var i,o,a;return r.domain=function(n){if(!arguments.length)return t;t=[],i=new h;for(var o,a=-1,s=n.length;++a<s;)i.has(o=n[a])||i.set(o,t.push(o));return r[e.t].apply(r,e.a)},r.range=function(t){return arguments.length?(o=t,a=0,e={t:"range",a:arguments},r):o},r.rangePoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],h=i[1],l=t.length<2?(u=(u+h)/2,0):(h-u)/(t.length-1+s);return o=n(u+l*s/2,l),a=0,e={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],h=i[1],l=t.length<2?(u=h=Math.round((u+h)/2),0):(h-u)/(t.length-1+s)|0;return o=n(u+Math.round(l*s/2+(h-u-(t.length-1+s)*l)/2),l),a=0,e={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var h=i[1]<i[0],l=i[h-0],c=i[1-h],f=(c-l)/(t.length-s+2*u);return o=n(l+f*u,f),h&&o.reverse(),a=f*(1-s),e={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var h=i[1]<i[0],l=i[h-0],c=i[1-h],f=Math.floor((c-l)/(t.length-s+2*u));return o=n(l+Math.round((c-l-(t.length-s)*f)/2),f),h&&o.reverse(),a=Math.round(f*(1-s)),e={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return a},r.rangeExtent=function(){return Ni(e.a[0])},r.copy=function(){return to(t,e)},r.domain(t)}function eo(t,e){function o(){var r=0,n=e.length;for(s=[];++r<n;)s[r-1]=ra.quantile(t,r/n);return a}function a(t){return isNaN(t=+t)?void 0:e[ra.bisect(s,t)]}var s;return a.domain=function(e){return arguments.length?(t=e.map(n).filter(i).sort(r),o()):t},a.range=function(t){return arguments.length?(e=t,o()):e},a.quantiles=function(){return s},a.invertExtent=function(r){return r=e.indexOf(r),0>r?[0/0,0/0]:[r>0?s[r-1]:t[0],r<s.length?s[r]:t[t.length-1]]},a.copy=function(){return eo(t,e)},o()}function ro(t,e,r){function n(e){return r[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function i(){return o=r.length/(e-t),a=r.length-1,n}var o,a;return n.domain=function(r){return arguments.length?(t=+r[0],e=+r[r.length-1],i()):[t,e]},n.range=function(t){return arguments.length?(r=t,i()):r},n.invertExtent=function(e){return e=r.indexOf(e),e=0>e?0/0:e/o+t,[e,e+1/o]},n.copy=function(){return ro(t,e,r)},i()}function no(t,e){function r(r){return r>=r?e[ra.bisect(t,r)]:void 0}return r.domain=function(e){return arguments.length?(t=e,r):t},r.range=function(t){return arguments.length?(e=t,r):e},r.invertExtent=function(r){return r=e.indexOf(r),[t[r-1],t[r]]},r.copy=function(){return no(t,e)},r}function io(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(r){return arguments.length?(t=r.map(e),e):t},e.ticks=function(e){return qi(t,e)},e.tickFormat=function(e,r){return Yi(t,e,r)},e.copy=function(){return io(t)},e}function oo(){return 0}function ao(t){return t.innerRadius}function so(t){return t.outerRadius}function uo(t){return t.startAngle}function ho(t){return t.endAngle}function lo(t){return t&&t.padAngle}function co(t,e,r,n){return(t-r)*e-(e-n)*t>0?0:1}function fo(t,e,r,n,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?n:-n)/Math.sqrt(o*o+a*a),u=s*a,h=-s*o,l=t[0]+u,c=t[1]+h,f=e[0]+u,p=e[1]+h,d=(l+f)/2,m=(c+p)/2,g=f-l,v=p-c,E=g*g+v*v,y=r-n,x=l*p-f*c,T=(0>v?-1:1)*Math.sqrt(y*y*E-x*x),R=(x*v-g*T)/E,b=(-x*g-v*T)/E,_=(x*v+g*T)/E,w=(-x*g+v*T)/E,M=R-d,H=b-m,S=_-d,C=w-m;return M*M+H*H>S*S+C*C&&(R=_,b=w),[[R-u,b-h],[R*r/y,b*r/y]]}function po(t){function e(e){function a(){h.push("M",o(t(l),s))}for(var u,h=[],l=[],c=-1,f=e.length,p=Mt(r),d=Mt(n);++c<f;)i.call(this,u=e[c],c)?l.push([+p.call(this,u,c),+d.call(this,u,c)]):l.length&&(a(),l=[]);return l.length&&a(),h.length?h.join(""):null}var r=Hr,n=Sr,i=Se,o=mo,a=o.key,s=.7;return e.x=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(n=t,e):n},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Hu.get(t)||mo).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function mo(t){return t.join("L")}function go(t){return mo(t)+"Z"}function vo(t){for(var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];++e<r;)i.push("H",(n[0]+(n=t[e])[0])/2,"V",n[1]);return r>1&&i.push("H",n[0]),i.join("")}function Eo(t){for(var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];++e<r;)i.push("V",(n=t[e])[1],"H",n[0]);return i.join("")}function yo(t){for(var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];++e<r;)i.push("H",(n=t[e])[0],"V",n[1]);return i.join("")}function xo(t,e){return t.length<4?mo(t):t[1]+bo(t.slice(1,-1),_o(t,e))}function To(t,e){return t.length<3?mo(t):t[0]+bo((t.push(t[0]),t),_o([t[t.length-2]].concat(t,[t[1]]),e))}function Ro(t,e){return t.length<3?mo(t):t[0]+bo(t,_o(t,e))}function bo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return mo(t);var r=t.length!=e.length,n="",i=t[0],o=t[1],a=e[0],s=a,u=1;if(r&&(n+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],u=2),e.length>1){s=e[1],o=t[u],u++,n+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var h=2;h<e.length;h++,u++)o=t[u],s=e[h],n+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(r){var l=t[u];n+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+l[0]+","+l[1]}return n}function _o(t,e){for(var r,n=[],i=(1-e)/2,o=t[0],a=t[1],s=1,u=t.length;++s<u;)r=o,o=a,a=t[s],n.push([i*(a[0]-r[0]),i*(a[1]-r[1])]);return n}function wo(t){if(t.length<3)return mo(t);var e=1,r=t.length,n=t[0],i=n[0],o=n[1],a=[i,i,i,(n=t[1])[0]],s=[o,o,o,n[1]],u=[i,",",o,"L",Co(Au,a),",",Co(Au,s)];for(t.push(t[r-1]);++e<=r;)n=t[e],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Ao(u,a,s);return t.pop(),u.push("L",n),u.join("")}function Mo(t){if(t.length<4)return mo(t);for(var e,r=[],n=-1,i=t.length,o=[0],a=[0];++n<3;)e=t[n],o.push(e[0]),a.push(e[1]);for(r.push(Co(Au,o)+","+Co(Au,a)),--n;++n<i;)e=t[n],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Ao(r,o,a);return r.join("")}function Ho(t){for(var e,r,n=-1,i=t.length,o=i+4,a=[],s=[];++n<4;)r=t[n%i],a.push(r[0]),s.push(r[1]);for(e=[Co(Au,a),",",Co(Au,s)],--n;++n<o;)r=t[n%i],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Ao(e,a,s);return e.join("")}function So(t,e){var r=t.length-1;if(r)for(var n,i,o=t[0][0],a=t[0][1],s=t[r][0]-o,u=t[r][1]-a,h=-1;++h<=r;)n=t[h],i=h/r,n[0]=e*n[0]+(1-e)*(o+i*s),n[1]=e*n[1]+(1-e)*(a+i*u);return wo(t)}function Co(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ao(t,e,r){t.push("C",Co(Su,e),",",Co(Su,r),",",Co(Cu,e),",",Co(Cu,r),",",Co(Au,e),",",Co(Au,r))}function Lo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Po(t){for(var e=0,r=t.length-1,n=[],i=t[0],o=t[1],a=n[0]=Lo(i,o);++e<r;)n[e]=(a+(a=Lo(i=o,o=t[e+1])))/2;return n[e]=a,n}function Fo(t){for(var e,r,n,i,o=[],a=Po(t),s=-1,u=t.length-1;++s<u;)e=Lo(t[s],t[s+1]),da(e)<Aa?a[s]=a[s+1]=0:(r=a[s]/e,n=a[s+1]/e,i=r*r+n*n,i>9&&(i=3*e/Math.sqrt(i),a[s]=i*r,a[s+1]=i*n));for(s=-1;++s<=u;)i=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}function Do(t){return t.length<3?mo(t):t[0]+bo(t,Fo(t))}function Bo(t){for(var e,r,n,i=-1,o=t.length;++i<o;)e=t[i],r=e[0],n=e[1]-Ba,e[0]=r*Math.cos(n),e[1]=r*Math.sin(n);return t}function Oo(t){function e(e){function u(){m.push("M",s(t(v),c),l,h(t(g.reverse()),c),"Z")}for(var f,p,d,m=[],g=[],v=[],E=-1,y=e.length,x=Mt(r),T=Mt(i),R=r===n?function(){return p}:Mt(n),b=i===o?function(){return d}:Mt(o);++E<y;)a.call(this,f=e[E],E)?(g.push([p=+x.call(this,f,E),d=+T.call(this,f,E)]),v.push([+R.call(this,f,E),+b.call(this,f,E)])):g.length&&(u(),g=[],v=[]);return g.length&&u(),m.length?m.join(""):null}var r=Hr,n=Hr,i=0,o=Sr,a=Se,s=mo,u=s.key,h=s,l="L",c=.7;return e.x=function(t){return arguments.length?(r=n=t,e):n},e.x0=function(t){return arguments.length?(r=t,
e):r},e.x1=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(u="function"==typeof t?s=t:(s=Hu.get(t)||mo).key,h=s.reverse||s,l=s.closed?"M":"L",e):u},e.tension=function(t){return arguments.length?(c=t,e):c},e}function No(t){return t.radius}function ko(t){return[t.x,t.y]}function Uo(t){return function(){var e=t.apply(this,arguments),r=e[0],n=e[1]-Ba;return[r*Math.cos(n),r*Math.sin(n)]}}function Io(){return 64}function zo(){return"circle"}function Vo(t){var e=Math.sqrt(t/Pa);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function jo(t){return function(){var e,r;(e=this[t])&&(r=e[e.active])&&(--e.count?delete e[e.active]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Go(t,e,r){return ya(t,Nu),t.namespace=e,t.id=r,t}function Wo(t,e,r,n){var i=t.id,o=t.namespace;return j(t,"function"==typeof r?function(t,a,s){t[o][i].tween.set(e,n(r.call(t,t.__data__,a,s)))}:(r=n(r),function(t){t[o][i].tween.set(e,r)}))}function Xo(t){return null==t&&(t=""),function(){this.textContent=t}}function qo(t){return null==t?"__transition__":"__transition_"+t+"__"}function Yo(t,e,r,n,i){var o=t[r]||(t[r]={active:0,count:0}),a=o[n];if(!a){var s=i.time;a=o[n]={tween:new h,time:s,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++o.count,ra.timer(function(i){function u(r){if(o.active>n)return l();var i=o[o.active];i&&(--o.count,delete o[o.active],i.event&&i.event.interrupt.call(t,t.__data__,i.index)),o.active=n,a.event&&a.event.start.call(t,t.__data__,e),a.tween.forEach(function(r,n){(n=n.call(t,t.__data__,e))&&m.push(n)}),f=a.ease,c=a.duration,ra.timer(function(){return d.c=h(r||1)?Se:h,1},0,s)}function h(r){if(o.active!==n)return 1;for(var i=r/c,s=f(i),u=m.length;u>0;)m[--u].call(t,s);return i>=1?(a.event&&a.event.end.call(t,t.__data__,e),l()):void 0}function l(){return--o.count?delete o[n]:delete t[r],1}var c,f,p=a.delay,d=ns,m=[];return d.t=p+s,i>=p?u(i-p):void(d.c=u)},0,s)}}function Ko(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate("+(isFinite(n)?n:r(t))+",0)"})}function Zo(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate(0,"+(isFinite(n)?n:r(t))+")"})}function Qo(t){return t.toISOString()}function $o(t,e,r){function n(e){return t(e)}function i(t,r){var n=t[1]-t[0],i=n/r,o=ra.bisect(Xu,i);return o==Xu.length?[e.year,Xi(t.map(function(t){return t/31536e6}),r)[2]]:o?e[i/Xu[o-1]<Xu[o]/i?o-1:o]:[Ku,Xi(t,r)[2]]}return n.invert=function(e){return Jo(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e),n):t.domain().map(Jo)},n.nice=function(t,e){function r(r){return!isNaN(r)&&!t.range(r,Jo(+r+1),e).length}var o=n.domain(),a=Ni(o),s=null==t?i(a,10):"number"==typeof t&&i(a,t);return s&&(t=s[0],e=s[1]),n.domain(Ii(o,e>1?{floor:function(e){for(;r(e=t.floor(e));)e=Jo(e-1);return e},ceil:function(e){for(;r(e=t.ceil(e));)e=Jo(+e+1);return e}}:t))},n.ticks=function(t,e){var r=Ni(n.domain()),o=null==t?i(r,10):"number"==typeof t?i(r,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(r[0],Jo(+r[1]+1),1>e?1:e)},n.tickFormat=function(){return r},n.copy=function(){return $o(t.copy(),e,r)},Gi(n,t)}function Jo(t){return new Date(t)}function ta(t){return JSON.parse(t.responseText)}function ea(t){var e=oa.createRange();return e.selectNode(oa.body),e.createContextualFragment(t.responseText)}var ra={version:"3.5.5"},na=[].slice,ia=function(t){return na.call(t)},oa=this.document;if(oa)try{ia(oa.documentElement.childNodes)[0].nodeType}catch(aa){ia=function(t){for(var e=t.length,r=new Array(e);e--;)r[e]=t[e];return r}}if(Date.now||(Date.now=function(){return+new Date}),oa)try{oa.createElement("DIV").style.setProperty("opacity",0,"")}catch(sa){var ua=this.Element.prototype,ha=ua.setAttribute,la=ua.setAttributeNS,ca=this.CSSStyleDeclaration.prototype,fa=ca.setProperty;ua.setAttribute=function(t,e){ha.call(this,t,e+"")},ua.setAttributeNS=function(t,e,r){la.call(this,t,e,r+"")},ca.setProperty=function(t,e,r){fa.call(this,t,e+"",r)}}ra.ascending=r,ra.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},ra.min=function(t,e){var r,n,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(n=t[i])&&n>=n){r=n;break}for(;++i<o;)null!=(n=t[i])&&r>n&&(r=n)}else{for(;++i<o;)if(null!=(n=e.call(t,t[i],i))&&n>=n){r=n;break}for(;++i<o;)null!=(n=e.call(t,t[i],i))&&r>n&&(r=n)}return r},ra.max=function(t,e){var r,n,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(n=t[i])&&n>=n){r=n;break}for(;++i<o;)null!=(n=t[i])&&n>r&&(r=n)}else{for(;++i<o;)if(null!=(n=e.call(t,t[i],i))&&n>=n){r=n;break}for(;++i<o;)null!=(n=e.call(t,t[i],i))&&n>r&&(r=n)}return r},ra.extent=function(t,e){var r,n,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(n=t[o])&&n>=n){r=i=n;break}for(;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),n>i&&(i=n))}else{for(;++o<a;)if(null!=(n=e.call(t,t[o],o))&&n>=n){r=i=n;break}for(;++o<a;)null!=(n=e.call(t,t[o],o))&&(r>n&&(r=n),n>i&&(i=n))}return[r,i]},ra.sum=function(t,e){var r,n=0,o=t.length,a=-1;if(1===arguments.length)for(;++a<o;)i(r=+t[a])&&(n+=r);else for(;++a<o;)i(r=+e.call(t,t[a],a))&&(n+=r);return n},ra.mean=function(t,e){var r,o=0,a=t.length,s=-1,u=a;if(1===arguments.length)for(;++s<a;)i(r=n(t[s]))?o+=r:--u;else for(;++s<a;)i(r=n(e.call(t,t[s],s)))?o+=r:--u;return u?o/u:void 0},ra.quantile=function(t,e){var r=(t.length-1)*e+1,n=Math.floor(r),i=+t[n-1],o=r-n;return o?i+o*(t[n]-i):i},ra.median=function(t,e){var o,a=[],s=t.length,u=-1;if(1===arguments.length)for(;++u<s;)i(o=n(t[u]))&&a.push(o);else for(;++u<s;)i(o=n(e.call(t,t[u],u)))&&a.push(o);return a.length?ra.quantile(a.sort(r),.5):void 0},ra.variance=function(t,e){var r,o,a=t.length,s=0,u=0,h=-1,l=0;if(1===arguments.length)for(;++h<a;)i(r=n(t[h]))&&(o=r-s,s+=o/++l,u+=o*(r-s));else for(;++h<a;)i(r=n(e.call(t,t[h],h)))&&(o=r-s,s+=o/++l,u+=o*(r-s));return l>1?u/(l-1):void 0},ra.deviation=function(){var t=ra.variance.apply(this,arguments);return t?Math.sqrt(t):t};var pa=o(r);ra.bisectLeft=pa.left,ra.bisect=ra.bisectRight=pa.right,ra.bisector=function(t){return o(1===t.length?function(e,n){return r(t(e),n)}:t)},ra.shuffle=function(t,e,r){(o=arguments.length)<3&&(r=t.length,2>o&&(e=0));for(var n,i,o=r-e;o;)i=Math.random()*o--|0,n=t[o+e],t[o+e]=t[i+e],t[i+e]=n;return t},ra.permute=function(t,e){for(var r=e.length,n=new Array(r);r--;)n[r]=t[e[r]];return n},ra.pairs=function(t){for(var e,r=0,n=t.length-1,i=t[0],o=new Array(0>n?0:n);n>r;)o[r]=[e=i,i=t[++r]];return o},ra.zip=function(){if(!(n=arguments.length))return[];for(var t=-1,e=ra.min(arguments,a),r=new Array(e);++t<e;)for(var n,i=-1,o=r[t]=new Array(n);++i<n;)o[i]=arguments[i][t];return r},ra.transpose=function(t){return ra.zip.apply(ra,t)},ra.keys=function(t){var e=[];for(var r in t)e.push(r);return e},ra.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},ra.entries=function(t){var e=[];for(var r in t)e.push({key:r,value:t[r]});return e},ra.merge=function(t){for(var e,r,n,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(r=new Array(a);--i>=0;)for(n=t[i],e=n.length;--e>=0;)r[--a]=n[e];return r};var da=Math.abs;ra.range=function(t,e,r){if(arguments.length<3&&(r=1,arguments.length<2&&(e=t,t=0)),(e-t)/r===1/0)throw new Error("infinite range");var n,i=[],o=s(da(r)),a=-1;if(t*=o,e*=o,r*=o,0>r)for(;(n=t+r*++a)>e;)i.push(n/o);else for(;(n=t+r*++a)<e;)i.push(n/o);return i},ra.map=function(t,e){var r=new h;if(t instanceof h)t.forEach(function(t,e){r.set(t,e)});else if(Array.isArray(t)){var n,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)r.set(i,t[i]);else for(;++i<o;)r.set(e.call(t,n=t[i],i),n)}else for(var a in t)r.set(a,t[a]);return r};var ma="__proto__",ga="\x00";u(h,{has:f,get:function(t){return this._[l(t)]},set:function(t,e){return this._[l(t)]=e},remove:p,keys:d,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:c(e),value:this._[e]});return t},size:m,empty:g,forEach:function(t){for(var e in this._)t.call(this,c(e),this._[e])}}),ra.nest=function(){function t(e,a,s){if(s>=o.length)return n?n.call(i,a):r?a.sort(r):a;for(var u,l,c,f,p=-1,d=a.length,m=o[s++],g=new h;++p<d;)(f=g.get(u=m(l=a[p])))?f.push(l):g.set(u,[l]);return e?(l=e(),c=function(r,n){l.set(r,t(e,n,s))}):(l={},c=function(r,n){l[r]=t(e,n,s)}),g.forEach(c),l}function e(t,r){if(r>=o.length)return t;var n=[],i=a[r++];return t.forEach(function(t,i){n.push({key:t,values:e(i,r)})}),i?n.sort(function(t,e){return i(t.key,e.key)}):n}var r,n,i={},o=[],a=[];return i.map=function(e,r){return t(r,e,0)},i.entries=function(r){return e(t(ra.map,r,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return a[o.length-1]=t,i},i.sortValues=function(t){return r=t,i},i.rollup=function(t){return n=t,i},i},ra.set=function(t){var e=new v;if(t)for(var r=0,n=t.length;n>r;++r)e.add(t[r]);return e},u(v,{has:f,add:function(t){return this._[l(t+="")]=!0,t},remove:p,values:d,size:m,empty:g,forEach:function(t){for(var e in this._)t.call(this,c(e))}}),ra.behavior={},ra.rebind=function(t,e){for(var r,n=1,i=arguments.length;++n<i;)t[r=arguments[n]]=y(t,e,e[r]);return t};var va=["webkit","ms","moz","Moz","o","O"];ra.dispatch=function(){for(var t=new R,e=-1,r=arguments.length;++e<r;)t[arguments[e]]=b(t);return t},R.prototype.on=function(t,e){var r=t.indexOf("."),n="";if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t)return arguments.length<2?this[t].on(n):this[t].on(n,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(n,null);return this}},ra.event=null,ra.requote=function(t){return t.replace(Ea,"\\$&")};var Ea=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ya={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)t[r]=e[r]},xa=function(t,e){return e.querySelector(t)},Ta=function(t,e){return e.querySelectorAll(t)},Ra=function(t,e){var r=t.matches||t[x(t,"matchesSelector")];return(Ra=function(t,e){return r.call(t,e)})(t,e)};"function"==typeof Sizzle&&(xa=function(t,e){return Sizzle(t,e)[0]||null},Ta=Sizzle,Ra=Sizzle.matchesSelector),ra.selection=function(){return ra.select(oa.documentElement)};var ba=ra.selection.prototype=[];ba.select=function(t){var e,r,n,i,o=[];t=S(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var u=-1,h=n.length;++u<h;)(i=n[u])?(e.push(r=t.call(i,i.__data__,u,a)),r&&"__data__"in i&&(r.__data__=i.__data__)):e.push(null)}return H(o)},ba.selectAll=function(t){var e,r,n=[];t=C(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,u=a.length;++s<u;)(r=a[s])&&(n.push(e=ia(t.call(r,r.__data__,s,i))),e.parentNode=r);return H(n)};var _a={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ra.ns={prefix:_a,qualify:function(t){var e=t.indexOf(":"),r=t;return e>=0&&(r=t.slice(0,e),t=t.slice(e+1)),_a.hasOwnProperty(r)?{space:_a[r],local:t}:t}},ba.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var r=this.node();return t=ra.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(e in t)this.each(A(e,t[e]));return this}return this.each(A(t,e))},ba.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var r=this.node(),n=(t=F(t)).length,i=-1;if(e=r.classList){for(;++i<n;)if(!e.contains(t[i]))return!1}else for(e=r.getAttribute("class");++i<n;)if(!P(t[i]).test(e))return!1;return!0}for(e in t)this.each(D(e,t[e]));return this}return this.each(D(t,e))},ba.style=function(t,r,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(r="");for(n in t)this.each(O(n,t[n],r));return this}if(2>i){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}n=""}return this.each(O(t,r,n))},ba.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(N(e,t[e]));return this}return this.each(N(t,e))},ba.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ba.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ba.append=function(t){return t=k(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ba.insert=function(t,e){return t=k(t),e=S(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},ba.remove=function(){return this.each(U)},ba.data=function(t,e){function r(t,r){var n,i,o,a=t.length,c=r.length,f=Math.min(a,c),p=new Array(c),d=new Array(c),m=new Array(a);if(e){var g,v=new h,E=new Array(a);for(n=-1;++n<a;)v.has(g=e.call(i=t[n],i.__data__,n))?m[n]=i:v.set(g,i),E[n]=g;for(n=-1;++n<c;)(i=v.get(g=e.call(r,o=r[n],n)))?i!==!0&&(p[n]=i,i.__data__=o):d[n]=I(o),v.set(g,!0);for(n=-1;++n<a;)v.get(E[n])!==!0&&(m[n]=t[n])}else{for(n=-1;++n<f;)i=t[n],o=r[n],i?(i.__data__=o,p[n]=i):d[n]=I(o);for(;c>n;++n)d[n]=I(r[n]);for(;a>n;++n)m[n]=t[n]}d.update=p,d.parentNode=p.parentNode=m.parentNode=t.parentNode,s.push(d),u.push(p),l.push(m)}var n,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(n=this[0]).length);++o<a;)(i=n[o])&&(t[o]=i.__data__);return t}var s=G([]),u=H([]),l=H([]);if("function"==typeof t)for(;++o<a;)r(n=this[o],t.call(n,n.parentNode.__data__,o));else for(;++o<a;)r(n=this[o],t);return u.enter=function(){return s},u.exit=function(){return l},u},ba.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ba.filter=function(t){var e,r,n,i=[];"function"!=typeof t&&(t=z(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var s=0,u=r.length;u>s;s++)(n=r[s])&&t.call(n,n.__data__,s,o)&&e.push(n)}return H(i)},ba.order=function(){for(var t=-1,e=this.length;++t<e;)for(var r,n=this[t],i=n.length-1,o=n[i];--i>=0;)(r=n[i])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this},ba.sort=function(t){t=V.apply(this,arguments);for(var e=-1,r=this.length;++e<r;)this[e].sort(t);return this.order()},ba.each=function(t){return j(this,function(e,r,n){t.call(e,e.__data__,r,n)})},ba.call=function(t){var e=ia(arguments);return t.apply(e[0]=this,e),this},ba.empty=function(){return!this.node()},ba.node=function(){for(var t=0,e=this.length;e>t;t++)for(var r=this[t],n=0,i=r.length;i>n;n++){var o=r[n];if(o)return o}return null},ba.size=function(){var t=0;return j(this,function(){++t}),t};var wa=[];ra.selection.enter=G,ra.selection.enter.prototype=wa,wa.append=ba.append,wa.empty=ba.empty,wa.node=ba.node,wa.call=ba.call,wa.size=ba.size,wa.select=function(t){for(var e,r,n,i,o,a=[],s=-1,u=this.length;++s<u;){n=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var h=-1,l=i.length;++h<l;)(o=i[h])?(e.push(n[h]=r=t.call(i.parentNode,o.__data__,h,s)),r.__data__=o.__data__):e.push(null)}return H(a)},wa.insert=function(t,e){return arguments.length<2&&(e=W(this)),ba.insert.call(this,t,e)},ra.select=function(e){var r;return"string"==typeof e?(r=[xa(e,oa)],r.parentNode=oa.documentElement):(r=[e],r.parentNode=t(e)),H([r])},ra.selectAll=function(t){var e;return"string"==typeof t?(e=ia(Ta(t,oa)),e.parentNode=oa.documentElement):(e=t,e.parentNode=null),H([e])},ba.on=function(t,e,r){var n=arguments.length;if(3>n){if("string"!=typeof t){2>n&&(e=!1);for(r in t)this.each(X(r,t[r],e));return this}if(2>n)return(n=this.node()["__on"+t])&&n._;r=!1}return this.each(X(t,e,r))};var Ma=ra.map({mouseenter:"mouseover",mouseleave:"mouseout"});oa&&Ma.forEach(function(t){"on"+t in oa&&Ma.remove(t)});var Ha,Sa=0;ra.mouse=function(t){return Z(t,w())};var Ca=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ra.touch=function(t,e,r){if(arguments.length<3&&(r=e,e=w().changedTouches),e)for(var n,i=0,o=e.length;o>i;++i)if((n=e[i]).identifier===r)return Z(t,n)},ra.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function r(t,e,r,o,a){return function(){function s(){var t,r,n=e(f,m);n&&(t=n[0]-y[0],r=n[1]-y[1],d|=t|r,y=n,p({type:"drag",x:n[0]+h[0],y:n[1]+h[1],dx:t,dy:r}))}function u(){e(f,m)&&(v.on(o+g,null).on(a+g,null),E(d&&ra.event.target===c),p({type:"dragend"}))}var h,l=this,c=ra.event.target,f=l.parentNode,p=n.of(l,arguments),d=0,m=t(),g=".drag"+(null==m?"":"-"+m),v=ra.select(r(c)).on(o+g,s).on(a+g,u),E=K(c),y=e(f,m);i?(h=i.apply(l,arguments),h=[h.x-y[0],h.y-y[1]]):h=[0,0],p({type:"dragstart"})}}var n=M(t,"drag","dragstart","dragend"),i=null,o=r(T,ra.mouse,e,"mousemove","mouseup"),a=r(Q,ra.touch,E,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},ra.rebind(t,n,"on")},ra.touches=function(t,e){return arguments.length<2&&(e=w().touches),e?ia(e).map(function(e){var r=Z(t,e);return r.identifier=e.identifier,r}):[]};var Aa=1e-6,La=Aa*Aa,Pa=Math.PI,Fa=2*Pa,Da=Fa-Aa,Ba=Pa/2,Oa=Pa/180,Na=180/Pa,ka=Math.SQRT2,Ua=2,Ia=4;ra.interpolateZoom=function(t,e){function r(t){var e=t*E;if(v){var r=nt(m),a=o/(Ua*f)*(r*it(ka*e+m)-rt(m));return[n+a*h,i+a*l,o*r/nt(ka*e+m)]}return[n+t*h,i+t*l,o*Math.exp(ka*e)]}var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2],h=a-n,l=s-i,c=h*h+l*l,f=Math.sqrt(c),p=(u*u-o*o+Ia*c)/(2*o*Ua*f),d=(u*u-o*o-Ia*c)/(2*u*Ua*f),m=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(d*d+1)-d),v=g-m,E=(v||Math.log(u/o))/ka;return r.duration=1e3*E,r},ra.behavior.zoom=function(){function t(t){t.on(L,c).on(Va+".zoom",p).on("dblclick.zoom",d).on(D,f)}function r(t){return[(t[0]-w.x)/w.k,(t[1]-w.y)/w.k]}function n(t){return[t[0]*w.k+w.x,t[1]*w.k+w.y]}function i(t){w.k=Math.max(S[0],Math.min(S[1],t))}function o(t,e){e=n(e),w.x+=t[0]-e[0],w.y+=t[1]-e[1]}function a(e,r,n,a){e.__chart__={x:w.x,y:w.y,k:w.k},i(Math.pow(2,a)),o(g=r,n),e=ra.select(e),C>0&&(e=e.transition().duration(C)),e.call(t.event)}function s(){T&&T.domain(x.range().map(function(t){return(t-w.x)/w.k}).map(x.invert)),b&&b.domain(R.range().map(function(t){return(t-w.y)/w.k}).map(R.invert))}function u(t){A++||t({type:"zoomstart"})}function h(t){s(),t({type:"zoom",scale:w.k,translate:[w.x,w.y]})}function l(t){--A||t({type:"zoomend"}),g=null}function c(){function t(){c=1,o(ra.mouse(i),p),h(s)}function n(){f.on(P,null).on(F,null),d(c&&ra.event.target===a),l(s)}var i=this,a=ra.event.target,s=B.of(i,arguments),c=0,f=ra.select(e(i)).on(P,t).on(F,n),p=r(ra.mouse(i)),d=K(i);Ou.call(i),u(s)}function f(){function t(){var t=ra.touches(d);return p=w.k,t.forEach(function(t){t.identifier in g&&(g[t.identifier]=r(t))}),t}function e(){var e=ra.event.target;ra.select(e).on(x,n).on(T,s),R.push(e);for(var r=ra.event.changedTouches,i=0,o=r.length;o>i;++i)g[r[i].identifier]=null;var u=t(),h=Date.now();if(1===u.length){if(500>h-y){var l=u[0];a(d,l,g[l.identifier],Math.floor(Math.log(w.k)/Math.LN2)+1),_()}y=h}else if(u.length>1){var l=u[0],c=u[1],f=l[0]-c[0],p=l[1]-c[1];v=f*f+p*p}}function n(){var t,e,r,n,a=ra.touches(d);Ou.call(d);for(var s=0,u=a.length;u>s;++s,n=null)if(r=a[s],n=g[r.identifier]){if(e)break;t=r,e=n}if(n){var l=(l=r[0]-t[0])*l+(l=r[1]-t[1])*l,c=v&&Math.sqrt(l/v);t=[(t[0]+r[0])/2,(t[1]+r[1])/2],e=[(e[0]+n[0])/2,(e[1]+n[1])/2],i(c*p)}y=null,o(t,e),h(m)}function s(){if(ra.event.touches.length){for(var e=ra.event.changedTouches,r=0,n=e.length;n>r;++r)delete g[e[r].identifier];for(var i in g)return void t()}ra.selectAll(R).on(E,null),b.on(L,c).on(D,f),M(),l(m)}var p,d=this,m=B.of(d,arguments),g={},v=0,E=".zoom-"+ra.event.changedTouches[0].identifier,x="touchmove"+E,T="touchend"+E,R=[],b=ra.select(d),M=K(d);e(),u(m),b.on(L,null).on(D,e)}function p(){var t=B.of(this,arguments);E?clearTimeout(E):(m=r(g=v||ra.mouse(this)),Ou.call(this),u(t)),E=setTimeout(function(){E=null,l(t)},50),_(),i(Math.pow(2,.002*za())*w.k),o(g,m),h(t)}function d(){var t=ra.mouse(this),e=Math.log(w.k)/Math.LN2;a(this,t,r(t),ra.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var m,g,v,E,y,x,T,R,b,w={x:0,y:0,k:1},H=[960,500],S=ja,C=250,A=0,L="mousedown.zoom",P="mousemove.zoom",F="mouseup.zoom",D="touchstart.zoom",B=M(t,"zoomstart","zoom","zoomend");return Va||(Va="onwheel"in oa?(za=function(){return-ra.event.deltaY*(ra.event.deltaMode?120:1)},"wheel"):"onmousewheel"in oa?(za=function(){return ra.event.wheelDelta},"mousewheel"):(za=function(){return-ra.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=B.of(this,arguments),e=w;Du?ra.select(this).transition().each("start.zoom",function(){w=this.__chart__||{x:0,y:0,k:1},u(t)}).tween("zoom:zoom",function(){var r=H[0],n=H[1],i=g?g[0]:r/2,o=g?g[1]:n/2,a=ra.interpolateZoom([(i-w.x)/w.k,(o-w.y)/w.k,r/w.k],[(i-e.x)/e.k,(o-e.y)/e.k,r/e.k]);return function(e){var n=a(e),s=r/n[2];this.__chart__=w={x:i-n[0]*s,y:o-n[1]*s,k:s},h(t)}}).each("interrupt.zoom",function(){l(t)}).each("end.zoom",function(){l(t)}):(this.__chart__=w,u(t),h(t),l(t))})},t.translate=function(e){return arguments.length?(w={x:+e[0],y:+e[1],k:w.k},s(),t):[w.x,w.y]},t.scale=function(e){return arguments.length?(w={x:w.x,y:w.y,k:+e},s(),t):w.k},t.scaleExtent=function(e){return arguments.length?(S=null==e?ja:[+e[0],+e[1]],t):S},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(H=e&&[+e[0],+e[1]],t):H},t.duration=function(e){return arguments.length?(C=+e,t):C},t.x=function(e){return arguments.length?(T=e,x=e.copy(),w={x:0,y:0,k:1},t):T},t.y=function(e){return arguments.length?(b=e,R=e.copy(),w={x:0,y:0,k:1},t):b},ra.rebind(t,B,"on")};var za,Va,ja=[0,1/0];ra.color=at,at.prototype.toString=function(){return this.rgb()+""},ra.hsl=st;var Ga=st.prototype=new at;Ga.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,this.l/t)},Ga.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,t*this.l)},Ga.rgb=function(){return ut(this.h,this.s,this.l)},ra.hcl=ht;var Wa=ht.prototype=new at;Wa.brighter=function(t){return new ht(this.h,this.c,Math.min(100,this.l+Xa*(arguments.length?t:1)))},Wa.darker=function(t){return new ht(this.h,this.c,Math.max(0,this.l-Xa*(arguments.length?t:1)))},Wa.rgb=function(){return lt(this.h,this.c,this.l).rgb()},ra.lab=ct;var Xa=18,qa=.95047,Ya=1,Ka=1.08883,Za=ct.prototype=new at;Za.brighter=function(t){return new ct(Math.min(100,this.l+Xa*(arguments.length?t:1)),this.a,this.b)},Za.darker=function(t){return new ct(Math.max(0,this.l-Xa*(arguments.length?t:1)),this.a,this.b)},Za.rgb=function(){return ft(this.l,this.a,this.b)},ra.rgb=vt;var Qa=vt.prototype=new at;Qa.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,r=this.g,n=this.b,i=30;return e||r||n?(e&&i>e&&(e=i),r&&i>r&&(r=i),n&&i>n&&(n=i),new vt(Math.min(255,e/t),Math.min(255,r/t),Math.min(255,n/t))):new vt(i,i,i)},Qa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new vt(t*this.r,t*this.g,t*this.b)},Qa.hsl=function(){return Rt(this.r,this.g,this.b)},Qa.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var $a=ra.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});$a.forEach(function(t,e){$a.set(t,Et(e))}),ra.functor=Mt,ra.xhr=Ht(E),ra.dsv=function(t,e){function r(t,r,o){arguments.length<3&&(o=r,r=null);var a=St(t,e,null==r?n:i(r),o);return a.row=function(t){return arguments.length?a.response(null==(r=t)?n:i(t)):r},a}function n(t){return r.parse(t.responseText)}function i(t){return function(e){return r.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return r.parse=function(t,e){var n;return r.parseRows(t,function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,r){return e(i(t),r)}:i})},r.parseRows=function(t,e){function r(){if(l>=h)return a;if(i)return i=!1,o;var e=l;if(34===t.charCodeAt(e)){for(var r=e;r++<h;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}l=r+2;var n=t.charCodeAt(r+1);return 13===n?(i=!0,10===t.charCodeAt(r+2)&&++l):10===n&&(i=!0),t.slice(e+1,r).replace(/""/g,'"')}for(;h>l;){var n=t.charCodeAt(l++),s=1;if(10===n)i=!0;else if(13===n)i=!0,10===t.charCodeAt(l)&&(++l,++s);else if(n!==u)continue;return t.slice(e,l-s)}return t.slice(e)}for(var n,i,o={},a={},s=[],h=t.length,l=0,c=0;(n=r())!==a;){for(var f=[];n!==o&&n!==a;)f.push(n),n=r();e&&null==(f=e(f,c++))||s.push(f)}return s},r.format=function(e){if(Array.isArray(e[0]))return r.formatRows(e);var n=new v,i=[];return e.forEach(function(t){for(var e in t)n.has(e)||i.push(n.add(e))}),[i.map(a).join(t)].concat(e.map(function(e){return i.map(function(t){return a(e[t])}).join(t)})).join("\n")},r.formatRows=function(t){return t.map(o).join("\n")},r},ra.csv=ra.dsv(",","text/csv"),ra.tsv=ra.dsv("	","text/tab-separated-values");var Ja,ts,es,rs,ns,is=this[x(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ra.timer=function(t,e,r){var n=arguments.length;2>n&&(e=0),3>n&&(r=Date.now());var i=r+e,o={c:t,t:i,f:!1,n:null};ts?ts.n=o:Ja=o,ts=o,es||(rs=clearTimeout(rs),es=1,is(Lt))},ra.timer.flush=function(){Pt(),Ft()},ra.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var os=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Bt);ra.formatPrefix=function(t,e){var r=0;return t&&(0>t&&(t*=-1),e&&(t=ra.round(t,Dt(t,e))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),os[8+r/3]};var as=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ss=ra.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=ra.round(t,Dt(t,e))).toFixed(Math.max(0,Math.min(20,Dt(t*(1+1e-15),e))))}}),us=ra.time={},hs=Date;kt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ls.setUTCDate.apply(this._,arguments)},setDay:function(){ls.setUTCDay.apply(this._,arguments)},setFullYear:function(){ls.setUTCFullYear.apply(this._,arguments)},setHours:function(){ls.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ls.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ls.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ls.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ls.setUTCSeconds.apply(this._,arguments)},setTime:function(){ls.setTime.apply(this._,arguments)}};var ls=Date.prototype;us.year=Ut(function(t){return t=us.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),us.years=us.year.range,us.years.utc=us.year.utc.range,us.day=Ut(function(t){var e=new hs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),us.days=us.day.range,us.days.utc=us.day.utc.range,us.dayOfYear=function(t){var e=us.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var r=us[t]=Ut(function(t){return(t=us.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var r=us.year(t).getDay();return Math.floor((us.dayOfYear(t)+(r+e)%7)/7)-(r!==e)});us[t+"s"]=r.range,us[t+"s"].utc=r.utc.range,us[t+"OfYear"]=function(t){var r=us.year(t).getDay();return Math.floor((us.dayOfYear(t)+(r+e)%7)/7)}}),us.week=us.sunday,us.weeks=us.sunday.range,us.weeks.utc=us.sunday.utc.range,us.weekOfYear=us.sundayOfYear;var cs={"-":"",_:" ",0:"0"},fs=/^\s*\d+/,ps=/^%/;ra.locale=function(t){return{numberFormat:Ot(t),timeFormat:zt(t)}};var ds=ra.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ra.format=ds.numberFormat,ra.geo={},ue.prototype={s:0,t:0,add:function(t){he(t,this.t,ms),
he(ms.s,this.s,this),this.s?this.t+=ms.t:this.s=ms.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ms=new ue;ra.geo.stream=function(t,e){t&&gs.hasOwnProperty(t.type)?gs[t.type](t,e):le(t,e)};var gs={Feature:function(t,e){le(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,i=r.length;++n<i;)le(r[n].geometry,e)}},vs={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){ce(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)ce(r[n],e,0)},Polygon:function(t,e){fe(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)fe(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,i=r.length;++n<i;)le(r[n],e)}};ra.geo.area=function(t){return Es=0,ra.geo.stream(t,xs),Es};var Es,ys=new ue,xs={sphere:function(){Es+=4*Pa},point:T,lineStart:T,lineEnd:T,polygonStart:function(){ys.reset(),xs.lineStart=pe},polygonEnd:function(){var t=2*ys;Es+=0>t?4*Pa+t:t,xs.lineStart=xs.lineEnd=xs.point=T}};ra.geo.bounds=function(){function t(t,e){y.push(x=[l=t,f=t]),c>e&&(c=e),e>p&&(p=e)}function e(e,r){var n=de([e*Oa,r*Oa]);if(v){var i=ge(v,n),o=[i[1],-i[0],0],a=ge(o,i);ye(a),a=xe(a);var u=e-d,h=u>0?1:-1,m=a[0]*Na*h,g=da(u)>180;if(g^(m>h*d&&h*e>m)){var E=a[1]*Na;E>p&&(p=E)}else if(m=(m+360)%360-180,g^(m>h*d&&h*e>m)){var E=-a[1]*Na;c>E&&(c=E)}else c>r&&(c=r),r>p&&(p=r);g?d>e?s(l,e)>s(l,f)&&(f=e):s(e,f)>s(l,f)&&(l=e):f>=l?(l>e&&(l=e),e>f&&(f=e)):e>d?s(l,e)>s(l,f)&&(f=e):s(e,f)>s(l,f)&&(l=e)}else t(e,r);v=n,d=e}function r(){T.point=e}function n(){x[0]=l,x[1]=f,T.point=t,v=null}function i(t,r){if(v){var n=t-d;E+=da(n)>180?n+(n>0?360:-360):n}else m=t,g=r;xs.point(t,r),e(t,r)}function o(){xs.lineStart()}function a(){i(m,g),xs.lineEnd(),da(E)>Aa&&(l=-(f=180)),x[0]=l,x[1]=f,v=null}function s(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function h(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var l,c,f,p,d,m,g,v,E,y,x,T={point:t,lineStart:r,lineEnd:n,polygonStart:function(){T.point=i,T.lineStart=o,T.lineEnd=a,E=0,xs.polygonStart()},polygonEnd:function(){xs.polygonEnd(),T.point=t,T.lineStart=r,T.lineEnd=n,0>ys?(l=-(f=180),c=-(p=90)):E>Aa?p=90:-Aa>E&&(c=-90),x[0]=l,x[1]=f}};return function(t){p=f=-(l=c=1/0),y=[],ra.geo.stream(t,T);var e=y.length;if(e){y.sort(u);for(var r,n=1,i=y[0],o=[i];e>n;++n)r=y[n],h(r[0],i)||h(r[1],i)?(s(i[0],r[1])>s(i[0],i[1])&&(i[1]=r[1]),s(r[0],i[1])>s(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(var a,r,d=-(1/0),e=o.length-1,n=0,i=o[e];e>=n;i=r,++n)r=o[n],(a=s(i[1],r[0]))>d&&(d=a,l=r[0],f=i[1])}return y=x=null,l===1/0||c===1/0?[[0/0,0/0],[0/0,0/0]]:[[l,c],[f,p]]}}(),ra.geo.centroid=function(t){Ts=Rs=bs=_s=ws=Ms=Hs=Ss=Cs=As=Ls=0,ra.geo.stream(t,Ps);var e=Cs,r=As,n=Ls,i=e*e+r*r+n*n;return La>i&&(e=Ms,r=Hs,n=Ss,Aa>Rs&&(e=bs,r=_s,n=ws),i=e*e+r*r+n*n,La>i)?[0/0,0/0]:[Math.atan2(r,e)*Na,et(n/Math.sqrt(i))*Na]};var Ts,Rs,bs,_s,ws,Ms,Hs,Ss,Cs,As,Ls,Ps={sphere:T,point:Re,lineStart:_e,lineEnd:we,polygonStart:function(){Ps.lineStart=Me},polygonEnd:function(){Ps.lineStart=_e}},Fs=Pe(Se,Oe,ke,[-Pa,-Pa/2]),Ds=1e9;ra.geo.clipExtent=function(){var t,e,r,n,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(s){return arguments.length?(o=Ve(t=+s[0][0],e=+s[0][1],r=+s[1][0],n=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[r,n]]}};return a.extent([[0,0],[960,500]])},(ra.geo.conicEqualArea=function(){return je(Ge)}).raw=Ge,ra.geo.albers=function(){return ra.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ra.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,r(o,a),e||(n(o,a),e)||i(o,a),e}var e,r,n,i,o=ra.geo.albers(),a=ra.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ra.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,r){e=[t,r]}};return t.invert=function(t){var e=o.scale(),r=o.translate(),n=(t[0]-r[0])/e,i=(t[1]-r[1])/e;return(i>=.12&&.234>i&&n>=-.425&&-.214>n?a:i>=.166&&.234>i&&n>=-.214&&-.115>n?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),r=a.stream(t),n=s.stream(t);return{point:function(t,i){e.point(t,i),r.point(t,i),n.point(t,i)},sphere:function(){e.sphere(),r.sphere(),n.sphere()},lineStart:function(){e.lineStart(),r.lineStart(),n.lineStart()},lineEnd:function(){e.lineEnd(),r.lineEnd(),n.lineEnd()},polygonStart:function(){e.polygonStart(),r.polygonStart(),n.polygonStart()},polygonEnd:function(){e.polygonEnd(),r.polygonEnd(),n.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var h=o.scale(),l=+e[0],c=+e[1];return r=o.translate(e).clipExtent([[l-.455*h,c-.238*h],[l+.455*h,c+.238*h]]).stream(u).point,n=a.translate([l-.307*h,c+.201*h]).clipExtent([[l-.425*h+Aa,c+.12*h+Aa],[l-.214*h-Aa,c+.234*h-Aa]]).stream(u).point,i=s.translate([l-.205*h,c+.212*h]).clipExtent([[l-.214*h+Aa,c+.166*h+Aa],[l-.115*h-Aa,c+.234*h-Aa]]).stream(u).point,t},t.scale(1070)};var Bs,Os,Ns,ks,Us,Is,zs={point:T,lineStart:T,lineEnd:T,polygonStart:function(){Os=0,zs.lineStart=We},polygonEnd:function(){zs.lineStart=zs.lineEnd=zs.point=T,Bs+=da(Os/2)}},Vs={point:Xe,lineStart:T,lineEnd:T,polygonStart:T,polygonEnd:T},js={point:Ke,lineStart:Ze,lineEnd:Qe,polygonStart:function(){js.lineStart=$e},polygonEnd:function(){js.point=Ke,js.lineStart=Ze,js.lineEnd=Qe}};ra.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),ra.geo.stream(t,a)),o.result()}function e(){return a=null,t}var r,n,i,o,a,s=4.5;return t.area=function(t){return Bs=0,ra.geo.stream(t,i(zs)),Bs},t.centroid=function(t){return bs=_s=ws=Ms=Hs=Ss=Cs=As=Ls=0,ra.geo.stream(t,i(js)),Ls?[Cs/Ls,As/Ls]:Ss?[Ms/Ss,Hs/Ss]:ws?[bs/ws,_s/ws]:[0/0,0/0]},t.bounds=function(t){return Us=Is=-(Ns=ks=1/0),ra.geo.stream(t,i(Vs)),[[Ns,ks],[Us,Is]]},t.projection=function(t){return arguments.length?(i=(r=t)?t.stream||er(t):E,e()):r},t.context=function(t){return arguments.length?(o=null==(n=t)?new qe:new Je(t),"function"!=typeof s&&o.pointRadius(s),e()):n},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(ra.geo.albersUsa()).context(null)},ra.geo.transform=function(t){return{stream:function(e){var r=new rr(e);for(var n in t)r[n]=t[n];return r}}},rr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ra.geo.projection=ir,ra.geo.projectionMutator=or,(ra.geo.equirectangular=function(){return ir(sr)}).raw=sr.invert=sr,ra.geo.rotation=function(t){function e(e){return e=t(e[0]*Oa,e[1]*Oa),e[0]*=Na,e[1]*=Na,e}return t=hr(t[0]%360*Oa,t[1]*Oa,t.length>2?t[2]*Oa:0),e.invert=function(e){return e=t.invert(e[0]*Oa,e[1]*Oa),e[0]*=Na,e[1]*=Na,e},e},ur.invert=sr,ra.geo.circle=function(){function t(){var t="function"==typeof n?n.apply(this,arguments):n,e=hr(-t[0]*Oa,-t[1]*Oa,0).invert,i=[];return r(null,null,1,{point:function(t,r){i.push(t=e(t,r)),t[0]*=Na,t[1]*=Na}}),{type:"Polygon",coordinates:[i]}}var e,r,n=[0,0],i=6;return t.origin=function(e){return arguments.length?(n=e,t):n},t.angle=function(n){return arguments.length?(r=pr((e=+n)*Oa,i*Oa),t):e},t.precision=function(n){return arguments.length?(r=pr(e*Oa,(i=+n)*Oa),t):i},t.angle(90)},ra.geo.distance=function(t,e){var r,n=(e[0]-t[0])*Oa,i=t[1]*Oa,o=e[1]*Oa,a=Math.sin(n),s=Math.cos(n),u=Math.sin(i),h=Math.cos(i),l=Math.sin(o),c=Math.cos(o);return Math.atan2(Math.sqrt((r=c*a)*r+(r=h*l-u*c*s)*r),u*l+h*c*s)},ra.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ra.range(Math.ceil(o/g)*g,i,g).map(f).concat(ra.range(Math.ceil(h/v)*v,u,v).map(p)).concat(ra.range(Math.ceil(n/d)*d,r,d).filter(function(t){return da(t%g)>Aa}).map(l)).concat(ra.range(Math.ceil(s/m)*m,a,m).filter(function(t){return da(t%v)>Aa}).map(c))}var r,n,i,o,a,s,u,h,l,c,f,p,d=10,m=d,g=90,v=360,E=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(p(u).slice(1),f(i).reverse().slice(1),p(h).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],h=+e[0][1],u=+e[1][1],o>i&&(e=o,o=i,i=e),h>u&&(e=h,h=u,u=e),t.precision(E)):[[o,h],[i,u]]},t.minorExtent=function(e){return arguments.length?(n=+e[0][0],r=+e[1][0],s=+e[0][1],a=+e[1][1],n>r&&(e=n,n=r,r=e),s>a&&(e=s,s=a,a=e),t.precision(E)):[[n,s],[r,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(g=+e[0],v=+e[1],t):[g,v]},t.minorStep=function(e){return arguments.length?(d=+e[0],m=+e[1],t):[d,m]},t.precision=function(e){return arguments.length?(E=+e,l=mr(s,a,90),c=gr(n,r,E),f=mr(h,u,90),p=gr(o,i,E),t):E},t.majorExtent([[-180,-90+Aa],[180,90-Aa]]).minorExtent([[-180,-80-Aa],[180,80+Aa]])},ra.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),r||i.apply(this,arguments)]}}var e,r,n=vr,i=Er;return t.distance=function(){return ra.geo.distance(e||n.apply(this,arguments),r||i.apply(this,arguments))},t.source=function(r){return arguments.length?(n=r,e="function"==typeof r?null:r,t):n},t.target=function(e){return arguments.length?(i=e,r="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},ra.geo.interpolate=function(t,e){return yr(t[0]*Oa,t[1]*Oa,e[0]*Oa,e[1]*Oa)},ra.geo.length=function(t){return Gs=0,ra.geo.stream(t,Ws),Gs};var Gs,Ws={sphere:T,point:T,lineStart:xr,lineEnd:T,polygonStart:T,polygonEnd:T},Xs=Tr(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ra.geo.azimuthalEqualArea=function(){return ir(Xs)}).raw=Xs;var qs=Tr(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},E);(ra.geo.azimuthalEquidistant=function(){return ir(qs)}).raw=qs,(ra.geo.conicConformal=function(){return je(Rr)}).raw=Rr,(ra.geo.conicEquidistant=function(){return je(br)}).raw=br;var Ys=Tr(function(t){return 1/t},Math.atan);(ra.geo.gnomonic=function(){return ir(Ys)}).raw=Ys,_r.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ba]},(ra.geo.mercator=function(){return wr(_r)}).raw=_r;var Ks=Tr(function(){return 1},Math.asin);(ra.geo.orthographic=function(){return ir(Ks)}).raw=Ks;var Zs=Tr(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ra.geo.stereographic=function(){return ir(Zs)}).raw=Zs,Mr.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ba]},(ra.geo.transverseMercator=function(){var t=wr(Mr),e=t.center,r=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?r([t[0],t[1],t.length>2?t[2]+90:90]):(t=r(),[t[0],t[1],t[2]-90])},r([0,0,90])}).raw=Mr,ra.geom={},ra.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=Mt(r),o=Mt(n),a=t.length,s=[],u=[];for(e=0;a>e;e++)s.push([+i.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(Ar),e=0;a>e;e++)u.push([s[e][0],-s[e][1]]);var h=Cr(s),l=Cr(u),c=l[0]===h[0],f=l[l.length-1]===h[h.length-1],p=[];for(e=h.length-1;e>=0;--e)p.push(t[s[h[e]][2]]);for(e=+c;e<l.length-f;++e)p.push(t[s[l[e]][2]]);return p}var r=Hr,n=Sr;return arguments.length?e(t):(e.x=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(n=t,e):n},e)},ra.geom.polygon=function(t){return ya(t,Qs),t};var Qs=ra.geom.polygon.prototype=[];Qs.area=function(){for(var t,e=-1,r=this.length,n=this[r-1],i=0;++e<r;)t=n,n=this[e],i+=t[1]*n[0]-t[0]*n[1];return.5*i},Qs.centroid=function(t){var e,r,n=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++n<i;)e=s,s=this[n],r=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*r,a+=(e[1]+s[1])*r;return[o*t,a*t]},Qs.clip=function(t){for(var e,r,n,i,o,a,s=Fr(t),u=-1,h=this.length-Fr(this),l=this[h-1];++u<h;){for(e=t.slice(),t.length=0,i=this[u],o=e[(n=e.length-s)-1],r=-1;++r<n;)a=e[r],Lr(a,l,i)?(Lr(o,l,i)||t.push(Pr(o,a,l,i)),t.push(a)):Lr(o,l,i)&&t.push(Pr(o,a,l,i)),o=a;s&&t.push(t[0]),l=i}return t};var $s,Js,tu,eu,ru,nu=[],iu=[];zr.prototype.prepare=function(){for(var t,e=this.edges,r=e.length;r--;)t=e[r].edge,t.b&&t.a||e.splice(r,1);return e.sort(jr),e.length},Jr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},tn.prototype={insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=on(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)n=r.U,r===n.L?(i=n.R,i&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(rn(this,r),t=r,r=t.U),r.C=!1,n.C=!0,nn(this,n))):(i=n.L,i&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&(nn(this,r),t=r,r=t.U),r.C=!1,n.C=!0,rn(this,n))),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,i=t.U,o=t.L,a=t.R;if(r=o?a?on(a):o:a,i?i.L===t?i.L=r:i.R=r:this._=r,o&&a?(n=r.C,r.C=t.C,r.L=o,o.U=r,r!==a?(i=r.U,r.U=t.U,t=r.R,i.L=t,r.R=a,a.U=r):(r.U=i,i=r,t=r.R)):(n=t.C,t=r),t&&(t.U=i),!n){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,rn(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,nn(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,rn(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,nn(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,rn(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,nn(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},ra.geom.voronoi=function(t){function e(t){var e=new Array(t.length),n=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return an(r(t),s).cells.forEach(function(r,s){var u=r.edges,h=r.site,l=e[s]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):h.x>=n&&h.x<=o&&h.y>=i&&h.y<=a?[[n,a],[o,a],[o,i],[n,i]]:[];l.point=t[s]}),e}function r(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Aa)*Aa,y:Math.round(a(t,e)/Aa)*Aa,i:e}})}var n=Hr,i=Sr,o=n,a=i,s=ou;return t?e(t):(e.links=function(t){return an(r(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return an(r(t)).cells.forEach(function(r,n){for(var i,o,a=r.site,s=r.edges.sort(jr),u=-1,h=s.length,l=s[h-1].edge,c=l.l===a?l.r:l.l;++u<h;)i=l,o=c,l=s[u].edge,c=l.l===a?l.r:l.l,n<o.i&&n<c.i&&un(a,o,c)<0&&e.push([t[n],t[o.i],t[c.i]])}),e},e.x=function(t){return arguments.length?(o=Mt(n=t),e):n},e.y=function(t){return arguments.length?(a=Mt(i=t),e):i},e.clipExtent=function(t){return arguments.length?(s=null==t?ou:t,e):s===ou?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===ou?null:s&&s[1]},e)};var ou=[[-1e6,-1e6],[1e6,1e6]];ra.geom.delaunay=function(t){return ra.geom.voronoi().triangles(t)},ra.geom.quadtree=function(t,e,r,n,i){function o(t){function o(t,e,r,n,i,o,a,s){if(!isNaN(r)&&!isNaN(n))if(t.leaf){var u=t.x,l=t.y;if(null!=u)if(da(u-r)+da(l-n)<.01)h(t,e,r,n,i,o,a,s);else{var c=t.point;t.x=t.y=t.point=null,h(t,c,u,l,i,o,a,s),h(t,e,r,n,i,o,a,s)}else t.x=r,t.y=n,t.point=e}else h(t,e,r,n,i,o,a,s)}function h(t,e,r,n,i,a,s,u){var h=.5*(i+s),l=.5*(a+u),c=r>=h,f=n>=l,p=f<<1|c;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=cn()),c?i=h:s=h,f?a=l:u=l,o(t,e,r,n,i,a,s,u)}var l,c,f,p,d,m,g,v,E,y=Mt(s),x=Mt(u);if(null!=e)m=e,g=r,v=n,E=i;else if(v=E=-(m=g=1/0),c=[],f=[],d=t.length,a)for(p=0;d>p;++p)l=t[p],l.x<m&&(m=l.x),l.y<g&&(g=l.y),l.x>v&&(v=l.x),l.y>E&&(E=l.y),c.push(l.x),f.push(l.y);else for(p=0;d>p;++p){var T=+y(l=t[p],p),R=+x(l,p);m>T&&(m=T),g>R&&(g=R),T>v&&(v=T),R>E&&(E=R),c.push(T),f.push(R)}var b=v-m,_=E-g;b>_?E=g+b:v=m+_;var w=cn();if(w.add=function(t){o(w,t,+y(t,++p),+x(t,p),m,g,v,E)},w.visit=function(t){fn(t,w,m,g,v,E)},w.find=function(t){return pn(w,t[0],t[1],m,g,v,E)},p=-1,null==e){for(;++p<d;)o(w,t[p],c[p],f[p],m,g,v,E);--p}else t.forEach(w.add);return c=f=t=l=null,w}var a,s=Hr,u=Sr;return(a=arguments.length)?(s=hn,u=ln,3===a&&(i=r,n=e,r=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(u=t,o):u},o.extent=function(t){return arguments.length?(null==t?e=r=n=i=null:(e=+t[0][0],r=+t[0][1],n=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,r],[n,i]]},o.size=function(t){return arguments.length?(null==t?e=r=n=i=null:(e=r=0,n=+t[0],i=+t[1]),o):null==e?null:[n-e,i-r]},o)},ra.interpolateRgb=dn,ra.interpolateObject=mn,ra.interpolateNumber=gn,ra.interpolateString=vn;var au=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,su=new RegExp(au.source,"g");ra.interpolate=En,ra.interpolators=[function(t,e){var r=typeof e;return("string"===r?$a.has(e)||/^(#|rgb\(|hsl\()/.test(e)?dn:vn:e instanceof at?dn:Array.isArray(e)?yn:"object"===r&&isNaN(e)?mn:gn)(t,e)}],ra.interpolateArray=yn;var uu=function(){return E},hu=ra.map({linear:uu,poly:Mn,quad:function(){return bn},cubic:function(){return _n},sin:function(){return Hn},exp:function(){return Sn},circle:function(){return Cn},elastic:An,back:Ln,bounce:function(){return Pn}}),lu=ra.map({"in":E,out:Tn,"in-out":Rn,"out-in":function(t){return Rn(Tn(t))}});ra.ease=function(t){var e=t.indexOf("-"),r=e>=0?t.slice(0,e):t,n=e>=0?t.slice(e+1):"in";return r=hu.get(r)||uu,n=lu.get(n)||E,xn(n(r.apply(null,na.call(arguments,1))))},ra.interpolateHcl=Fn,ra.interpolateHsl=Dn,ra.interpolateLab=Bn,ra.interpolateRound=On,ra.transform=function(t){var e=oa.createElementNS(ra.ns.prefix.svg,"g");return(ra.transform=function(t){if(null!=t){e.setAttribute("transform",t);var r=e.transform.baseVal.consolidate()}return new Nn(r?r.matrix:cu)})(t)},Nn.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var cu={a:1,b:0,c:0,d:1,e:0,f:0};ra.interpolateTransform=zn,ra.layout={},ra.layout.bundle=function(){return function(t){for(var e=[],r=-1,n=t.length;++r<n;)e.push(Gn(t[r]));return e}},ra.layout.chord=function(){function t(){var t,h,c,f,p,d={},m=[],g=ra.range(o),v=[];for(r=[],n=[],t=0,f=-1;++f<o;){for(h=0,p=-1;++p<o;)h+=i[f][p];m.push(h),v.push(ra.range(o)),t+=h}for(a&&g.sort(function(t,e){return a(m[t],m[e])}),s&&v.forEach(function(t,e){t.sort(function(t,r){return s(i[e][t],i[e][r])})}),t=(Fa-l*o)/t,h=0,f=-1;++f<o;){for(c=h,p=-1;++p<o;){var E=g[f],y=v[E][p],x=i[E][y],T=h,R=h+=x*t;d[E+"-"+y]={index:E,subindex:y,startAngle:T,endAngle:R,value:x}}n[E]={index:E,startAngle:c,endAngle:h,value:(h-c)/t},h+=l}for(f=-1;++f<o;)for(p=f-1;++p<o;){var b=d[f+"-"+p],_=d[p+"-"+f];(b.value||_.value)&&r.push(b.value<_.value?{source:_,target:b}:{source:b,target:_})}u&&e()}function e(){r.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var r,n,i,o,a,s,u,h={},l=0;return h.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,r=n=null,h):i},h.padding=function(t){return arguments.length?(l=t,r=n=null,h):l},h.sortGroups=function(t){return arguments.length?(a=t,r=n=null,h):a},h.sortSubgroups=function(t){return arguments.length?(s=t,r=null,h):s},h.sortChords=function(t){return arguments.length?(u=t,r&&e(),h):u},h.chords=function(){return r||t(),r},h.groups=function(){return n||t(),n},h},ra.layout.force=function(){function t(t){return function(e,r,n,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=i-r,u=o*o+a*a;if(u>s*s/g){if(d>u){var h=e.charge/u;t.px-=o*h,t.py-=a*h}return!0}if(e.point&&u&&d>u){var h=e.pointCharge/u;t.px-=o*h,t.py-=a*h}}return!e.charge}}function e(t){t.px=ra.event.x,t.py=ra.event.y,s.resume()}var r,n,i,o,a,s={},u=ra.dispatch("start","tick","end"),h=[1,1],l=.9,c=fu,f=pu,p=-30,d=du,m=.1,g=.64,v=[],y=[];return s.tick=function(){if((n*=.99)<.005)return u.end({type:"end",alpha:n=0}),!0;var e,r,s,c,f,d,g,E,x,T=v.length,R=y.length;for(r=0;R>r;++r)s=y[r],c=s.source,f=s.target,E=f.x-c.x,x=f.y-c.y,(d=E*E+x*x)&&(d=n*o[r]*((d=Math.sqrt(d))-i[r])/d,E*=d,x*=d,f.x-=E*(g=c.weight/(f.weight+c.weight)),f.y-=x*g,c.x+=E*(g=1-g),c.y+=x*g);if((g=n*m)&&(E=h[0]/2,x=h[1]/2,r=-1,g))for(;++r<T;)s=v[r],s.x+=(E-s.x)*g,s.y+=(x-s.y)*g;if(p)for(Qn(e=ra.geom.quadtree(v),n,a),r=-1;++r<T;)(s=v[r]).fixed||e.visit(t(s));for(r=-1;++r<T;)s=v[r],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*l,s.y-=(s.py-(s.py=s.y))*l);u.tick({type:"tick",alpha:n})},s.nodes=function(t){return arguments.length?(v=t,s):v},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(h=t,s):h},s.linkDistance=function(t){return arguments.length?(c="function"==typeof t?t:+t,s):c},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.friction=function(t){return arguments.length?(l=+t,s):l},s.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,s):p},s.chargeDistance=function(t){return arguments.length?(d=t*t,s):Math.sqrt(d)},s.gravity=function(t){return arguments.length?(m=+t,s):m},s.theta=function(t){return arguments.length?(g=t*t,s):Math.sqrt(g)},s.alpha=function(t){return arguments.length?(t=+t,n?n=t>0?t:0:t>0&&(u.start({type:"start",alpha:n=t}),ra.timer(s.tick)),s):n},s.start=function(){function t(t,n){if(!r){for(r=new Array(u),s=0;u>s;++s)r[s]=[];for(s=0;l>s;++s){var i=y[s];r[i.source.index].push(i.target),r[i.target.index].push(i.source)}}for(var o,a=r[e],s=-1,h=a.length;++s<h;)if(!isNaN(o=a[s][t]))return o;return Math.random()*n}var e,r,n,u=v.length,l=y.length,d=h[0],m=h[1];for(e=0;u>e;++e)(n=v[e]).index=e,n.weight=0;for(e=0;l>e;++e)n=y[e],"number"==typeof n.source&&(n.source=v[n.source]),"number"==typeof n.target&&(n.target=v[n.target]),++n.source.weight,++n.target.weight;for(e=0;u>e;++e)n=v[e],isNaN(n.x)&&(n.x=t("x",d)),isNaN(n.y)&&(n.y=t("y",m)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(i=[],"function"==typeof c)for(e=0;l>e;++e)i[e]=+c.call(this,y[e],e);else for(e=0;l>e;++e)i[e]=c;if(o=[],"function"==typeof f)for(e=0;l>e;++e)o[e]=+f.call(this,y[e],e);else for(e=0;l>e;++e)o[e]=f;if(a=[],"function"==typeof p)for(e=0;u>e;++e)a[e]=+p.call(this,v[e],e);else for(e=0;u>e;++e)a[e]=p;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return r||(r=ra.behavior.drag().origin(E).on("dragstart.force",qn).on("drag.force",e).on("dragend.force",Yn)),arguments.length?void this.on("mouseover.force",Kn).on("mouseout.force",Zn).call(r):r},ra.rebind(s,u,"on")};var fu=20,pu=1,du=1/0;ra.layout.hierarchy=function(){function t(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(h=r.call(t,o,o.depth))&&(u=h.length)){for(var u,h,l;--u>=0;)a.push(l=h[u]),l.parent=o,l.depth=o.depth+1;n&&(o.value=0),o.children=h}else n&&(o.value=+n.call(t,o,o.depth)||0),delete o.children;return ti(i,function(t){var r,i;e&&(r=t.children)&&r.sort(e),n&&(i=t.parent)&&(i.value+=t.value)}),s}var e=ni,r=ei,n=ri;return t.sort=function(r){return arguments.length?(e=r,t):e},t.children=function(e){return arguments.length?(r=e,t):r},t.value=function(e){return arguments.length?(n=e,t):n},t.revalue=function(e){return n&&(Jn(e,function(t){t.children&&(t.value=0)}),ti(e,function(e){var r;e.children||(e.value=+n.call(t,e,e.depth)||0),(r=e.parent)&&(r.value+=e.value)})),e},t},ra.layout.partition=function(){function t(e,r,n,i){var o=e.children;if(e.x=r,e.y=e.depth*i,e.dx=n,e.dy=i,o&&(a=o.length)){var a,s,u,h=-1;for(n=e.value?n/e.value:0;++h<a;)t(s=o[h],r,u=s.value*n,i),r+=u}}function e(t){var r=t.children,n=0;if(r&&(i=r.length))for(var i,o=-1;++o<i;)n=Math.max(n,e(r[o]));return 1+n}function r(r,o){var a=n.call(this,r,o);return t(a[0],0,i[0],i[1]/e(a[0])),a}var n=ra.layout.hierarchy(),i=[1,1];return r.size=function(t){return arguments.length?(i=t,r):i},$n(r,n)},ra.layout.pie=function(){function t(a){var s,u=a.length,h=a.map(function(r,n){return+e.call(t,r,n)}),l=+("function"==typeof n?n.apply(this,arguments):n),c=("function"==typeof i?i.apply(this,arguments):i)-l,f=Math.min(Math.abs(c)/u,+("function"==typeof o?o.apply(this,arguments):o)),p=f*(0>c?-1:1),d=(c-u*p)/ra.sum(h),m=ra.range(u),g=[];return null!=r&&m.sort(r===mu?function(t,e){return h[e]-h[t]}:function(t,e){return r(a[t],a[e])}),m.forEach(function(t){g[t]={data:a[t],value:s=h[t],startAngle:l,endAngle:l+=s*d+p,padAngle:f}}),g}var e=Number,r=mu,n=0,i=Fa,o=0;return t.value=function(r){return arguments.length?(e=r,t):e},t.sort=function(e){return arguments.length?(r=e,t):r},t.startAngle=function(e){return arguments.length?(n=e,t):n},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var mu={};ra.layout.stack=function(){function t(s,u){if(!(f=s.length))return s;var h=s.map(function(r,n){return e.call(t,r,n)}),l=h.map(function(e){return e.map(function(e,r){return[o.call(t,e,r),a.call(t,e,r)]})}),c=r.call(t,l,u);h=ra.permute(h,c),l=ra.permute(l,c);var f,p,d,m,g=n.call(t,l,u),v=h[0].length;for(d=0;v>d;++d)for(i.call(t,h[0][d],m=g[d],l[0][d][1]),p=1;f>p;++p)i.call(t,h[p][d],m+=l[p-1][d][1],l[p][d][1]);return s}var e=E,r=ui,n=hi,i=si,o=oi,a=ai;return t.values=function(r){return arguments.length?(e=r,t):e},t.order=function(e){return arguments.length?(r="function"==typeof e?e:gu.get(e)||ui,t):r},t.offset=function(e){return arguments.length?(n="function"==typeof e?e:vu.get(e)||hi,t):n},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(i=e,t):i},t};var gu=ra.map({"inside-out":function(t){var e,r,n=t.length,i=t.map(li),o=t.map(ci),a=ra.range(n).sort(function(t,e){return i[t]-i[e]}),s=0,u=0,h=[],l=[];for(e=0;n>e;++e)r=a[e],u>s?(s+=o[r],h.push(r)):(u+=o[r],l.push(r));return l.reverse().concat(h)},reverse:function(t){return ra.range(t.length).reverse()},"default":ui}),vu=ra.map({silhouette:function(t){var e,r,n,i=t.length,o=t[0].length,a=[],s=0,u=[];for(r=0;o>r;++r){for(e=0,n=0;i>e;e++)n+=t[e][r][1];n>s&&(s=n),a.push(n)}for(r=0;o>r;++r)u[r]=(s-a[r])/2;return u},wiggle:function(t){var e,r,n,i,o,a,s,u,h,l=t.length,c=t[0],f=c.length,p=[];for(p[0]=u=h=0,r=1;f>r;++r){for(e=0,i=0;l>e;++e)i+=t[e][r][1];for(e=0,o=0,s=c[r][0]-c[r-1][0];l>e;++e){for(n=0,a=(t[e][r][1]-t[e][r-1][1])/(2*s);e>n;++n)a+=(t[n][r][1]-t[n][r-1][1])/s;o+=a*t[e][r][1]}p[r]=u-=i?o/i*s:0,h>u&&(h=u)}for(r=0;f>r;++r)p[r]-=h;return p},expand:function(t){var e,r,n,i=t.length,o=t[0].length,a=1/i,s=[];for(r=0;o>r;++r){for(e=0,n=0;i>e;e++)n+=t[e][r][1];if(n)for(e=0;i>e;e++)t[e][r][1]/=n;else for(e=0;i>e;e++)t[e][r][1]=a}for(r=0;o>r;++r)s[r]=0;return s},zero:hi});ra.layout.histogram=function(){function t(t,o){for(var a,s,u=[],h=t.map(r,this),l=n.call(this,h,o),c=i.call(this,l,h,o),o=-1,f=h.length,p=c.length-1,d=e?1:1/f;++o<p;)a=u[o]=[],a.dx=c[o+1]-(a.x=c[o]),a.y=0;if(p>0)for(o=-1;++o<f;)s=h[o],s>=l[0]&&s<=l[1]&&(a=u[ra.bisect(c,s,1,p)-1],a.y+=d,a.push(t[o]));return u}var e=!0,r=Number,n=mi,i=pi;return t.value=function(e){return arguments.length?(r=e,t):r},t.range=function(e){return arguments.length?(n=Mt(e),t):n},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return di(t,e)}:Mt(e),t):i},t.frequency=function(r){return arguments.length?(e=!!r,t):e},t},ra.layout.pack=function(){function t(t,o){var a=r.call(this,t,o),s=a[0],u=i[0],h=i[1],l=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,ti(s,function(t){t.r=+l(t.value)}),ti(s,xi),n){var c=n*(e?1:Math.max(2*s.r/u,2*s.r/h))/2;ti(s,function(t){t.r+=c}),ti(s,xi),ti(s,function(t){t.r-=c})}return bi(s,u/2,h/2,e?1:1/Math.max(2*s.r/u,2*s.r/h)),a}var e,r=ra.layout.hierarchy().sort(gi),n=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(r){return arguments.length?(e=null==r||"function"==typeof r?r:+r,t):e},t.padding=function(e){return arguments.length?(n=+e,t):n},$n(t,r)},ra.layout.tree=function(){function t(t,i){var l=a.call(this,t,i),c=l[0],f=e(c);if(ti(f,r),f.parent.m=-f.z,Jn(f,n),h)Jn(c,o);else{var p=c,d=c,m=c;Jn(c,function(t){t.x<p.x&&(p=t),t.x>d.x&&(d=t),t.depth>m.depth&&(m=t)});var g=s(p,d)/2-p.x,v=u[0]/(d.x+s(d,p)/2+g),E=u[1]/(m.depth||1);Jn(c,function(t){t.x=(t.x+g)*v,t.y=t.depth*E})}return l}function e(t){for(var e,r={A:null,children:[t]},n=[r];null!=(e=n.pop());)for(var i,o=e.children,a=0,s=o.length;s>a;++a)n.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return r.children[0]}function r(t){var e=t.children,r=t.parent.children,n=t.i?r[t.i-1]:null;if(e.length){Ci(t);var o=(e[0].z+e[e.length-1].z)/2;n?(t.z=n.z+s(t._,n._),t.m=t.z-o):t.z=o}else n&&(t.z=n.z+s(t._,n._));t.parent.A=i(t,n,t.parent.A||r[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,r){if(e){for(var n,i=t,o=t,a=e,u=i.parent.children[0],h=i.m,l=o.m,c=a.m,f=u.m;a=Hi(a),i=Mi(i),a&&i;)u=Mi(u),o=Hi(o),o.a=t,n=a.z+c-i.z-h+s(a._,i._),n>0&&(Si(Ai(a,t,r),t,n),h+=n,l+=n),c+=a.m,h+=i.m,f+=u.m,l+=o.m;a&&!Hi(o)&&(o.t=a,o.m+=c-l),i&&!Mi(u)&&(u.t=i,u.m+=h-f,r=t)}return r}function o(t){t.x*=u[0],t.y=t.depth*u[1]}var a=ra.layout.hierarchy().sort(null).value(null),s=wi,u=[1,1],h=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(h=null==(u=e)?o:null,t):h?null:u},t.nodeSize=function(e){return arguments.length?(h=null==(u=e)?null:o,t):h?u:null},$n(t,a)},ra.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),u=s[0],h=0;ti(u,function(t){var e=t.children;e&&e.length?(t.x=Pi(e),t.y=Li(e)):(t.x=a?h+=r(t,a):0,t.y=0,a=t)});var l=Fi(u),c=Di(u),f=l.x-r(l,c)/2,p=c.x+r(c,l)/2;return ti(u,i?function(t){t.x=(t.x-u.x)*n[0],t.y=(u.y-t.y)*n[1]}:function(t){t.x=(t.x-f)/(p-f)*n[0],t.y=(1-(u.y?t.y/u.y:1))*n[1]}),s}var e=ra.layout.hierarchy().sort(null).value(null),r=wi,n=[1,1],i=!1;return t.separation=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(i=null==(n=e),t):i?null:n},t.nodeSize=function(e){return arguments.length?(i=null!=(n=e),t):i?n:null},$n(t,e)},ra.layout.treemap=function(){function t(t,e){for(var r,n,i=-1,o=t.length;++i<o;)n=(r=t[i]).value*(0>e?0:e),r.area=isNaN(n)||0>=n?0:n}function e(r){var o=r.children;if(o&&o.length){var a,s,u,h=c(r),l=[],f=o.slice(),d=1/0,m="slice"===p?h.dx:"dice"===p?h.dy:"slice-dice"===p?1&r.depth?h.dy:h.dx:Math.min(h.dx,h.dy);for(t(f,h.dx*h.dy/r.value),l.area=0;(u=f.length)>0;)l.push(a=f[u-1]),l.area+=a.area,"squarify"!==p||(s=n(l,m))<=d?(f.pop(),d=s):(l.area-=l.pop().area,i(l,m,h,!1),m=Math.min(h.dx,h.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,m,h,!0),l.length=l.area=0),o.forEach(e)}}function r(e){var n=e.children;if(n&&n.length){var o,a=c(e),s=n.slice(),u=[];for(t(s,a.dx*a.dy/e.value),u.area=0;o=s.pop();)u.push(o),u.area+=o.area,null!=o.z&&(i(u,o.z?a.dx:a.dy,a,!s.length),u.length=u.area=0);n.forEach(r)}}function n(t,e){for(var r,n=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(r=t[a].area)&&(o>r&&(o=r),r>i&&(i=r));return n*=n,e*=e,n?Math.max(e*i*d/n,n/(e*o*d)):1/0}function i(t,e,r,n){var i,o=-1,a=t.length,s=r.x,h=r.y,l=e?u(t.area/e):0;if(e==r.dx){for((n||l>r.dy)&&(l=r.dy);++o<a;)i=t[o],i.x=s,i.y=h,i.dy=l,s+=i.dx=Math.min(r.x+r.dx-s,l?u(i.area/l):0);i.z=!0,i.dx+=r.x+r.dx-s,r.y+=l,r.dy-=l}else{for((n||l>r.dx)&&(l=r.dx);++o<a;)i=t[o],i.x=s,i.y=h,i.dx=l,h+=i.dy=Math.min(r.y+r.dy-h,l?u(i.area/l):0);i.z=!1,i.dy+=r.y+r.dy-h,r.x+=l,r.dx-=l}}function o(n){var i=a||s(n),o=i[0];return o.x=0,o.y=0,o.dx=h[0],o.dy=h[1],a&&s.revalue(o),t([o],o.dx*o.dy/o.value),
(a?r:e)(o),f&&(a=i),i}var a,s=ra.layout.hierarchy(),u=Math.round,h=[1,1],l=null,c=Bi,f=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(h=t,o):h},o.padding=function(t){function e(e){var r=t.call(o,e,e.depth);return null==r?Bi(e):Oi(e,"number"==typeof r?[r,r,r,r]:r)}function r(e){return Oi(e,t)}if(!arguments.length)return l;var n;return c=null==(l=t)?Bi:"function"==(n=typeof t)?e:"number"===n?(t=[t,t,t,t],r):r,o},o.round=function(t){return arguments.length?(u=t?Math.round:Number,o):u!=Number},o.sticky=function(t){return arguments.length?(f=t,a=null,o):f},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(p=t+"",o):p},$n(o,s)},ra.random={normal:function(t,e){var r=arguments.length;return 2>r&&(e=1),1>r&&(t=0),function(){var r,n,i;do r=2*Math.random()-1,n=2*Math.random()-1,i=r*r+n*n;while(!i||i>1);return t+e*r*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=ra.random.normal.apply(ra,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=ra.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,r=0;t>r;r++)e+=Math.random();return e}}},ra.scale={};var Eu={floor:E,ceil:E};ra.scale.linear=function(){return ji([0,1],[0,1],En,!1)};var yu={s:1,g:1,p:1,r:1,e:1};ra.scale.log=function(){return Qi(ra.scale.linear().domain([0,1]),10,!0,[1,10])};var xu=ra.format(".0e"),Tu={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ra.scale.pow=function(){return $i(ra.scale.linear(),1,[0,1])},ra.scale.sqrt=function(){return ra.scale.pow().exponent(.5)},ra.scale.ordinal=function(){return to([],{t:"range",a:[[]]})},ra.scale.category10=function(){return ra.scale.ordinal().range(Ru)},ra.scale.category20=function(){return ra.scale.ordinal().range(bu)},ra.scale.category20b=function(){return ra.scale.ordinal().range(_u)},ra.scale.category20c=function(){return ra.scale.ordinal().range(wu)};var Ru=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(yt),bu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(yt),_u=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(yt),wu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(yt);ra.scale.quantile=function(){return eo([],[])},ra.scale.quantize=function(){return ro(0,1,[0,1])},ra.scale.threshold=function(){return no([.5],[0,1])},ra.scale.identity=function(){return io([0,1])},ra.svg={},ra.svg.arc=function(){function t(){var t=Math.max(0,+r.apply(this,arguments)),h=Math.max(0,+n.apply(this,arguments)),l=a.apply(this,arguments)-Ba,c=s.apply(this,arguments)-Ba,f=Math.abs(c-l),p=l>c?0:1;if(t>h&&(d=h,h=t,t=d),f>=Da)return e(h,p)+(t?e(t,1-p):"")+"Z";var d,m,g,v,E,y,x,T,R,b,_,w,M=0,H=0,S=[];if((v=(+u.apply(this,arguments)||0)/2)&&(g=o===Mu?Math.sqrt(t*t+h*h):+o.apply(this,arguments),p||(H*=-1),h&&(H=et(g/h*Math.sin(v))),t&&(M=et(g/t*Math.sin(v)))),h){E=h*Math.cos(l+H),y=h*Math.sin(l+H),x=h*Math.cos(c-H),T=h*Math.sin(c-H);var C=Math.abs(c-l-2*H)<=Pa?0:1;if(H&&co(E,y,x,T)===p^C){var A=(l+c)/2;E=h*Math.cos(A),y=h*Math.sin(A),x=T=null}}else E=y=0;if(t){R=t*Math.cos(c-M),b=t*Math.sin(c-M),_=t*Math.cos(l+M),w=t*Math.sin(l+M);var L=Math.abs(l-c+2*M)<=Pa?0:1;if(M&&co(R,b,_,w)===1-p^L){var P=(l+c)/2;R=t*Math.cos(P),b=t*Math.sin(P),_=w=null}}else R=b=0;if((d=Math.min(Math.abs(h-t)/2,+i.apply(this,arguments)))>.001){m=h>t^p?0:1;var F=null==_?[R,b]:null==x?[E,y]:Pr([E,y],[_,w],[x,T],[R,b]),D=E-F[0],B=y-F[1],O=x-F[0],N=T-F[1],k=1/Math.sin(Math.acos((D*O+B*N)/(Math.sqrt(D*D+B*B)*Math.sqrt(O*O+N*N)))/2),U=Math.sqrt(F[0]*F[0]+F[1]*F[1]);if(null!=x){var I=Math.min(d,(h-U)/(k+1)),z=fo(null==_?[R,b]:[_,w],[E,y],h,I,p),V=fo([x,T],[R,b],h,I,p);d===I?S.push("M",z[0],"A",I,",",I," 0 0,",m," ",z[1],"A",h,",",h," 0 ",1-p^co(z[1][0],z[1][1],V[1][0],V[1][1]),",",p," ",V[1],"A",I,",",I," 0 0,",m," ",V[0]):S.push("M",z[0],"A",I,",",I," 0 1,",m," ",V[0])}else S.push("M",E,",",y);if(null!=_){var j=Math.min(d,(t-U)/(k-1)),G=fo([E,y],[_,w],t,-j,p),W=fo([R,b],null==x?[E,y]:[x,T],t,-j,p);d===j?S.push("L",W[0],"A",j,",",j," 0 0,",m," ",W[1],"A",t,",",t," 0 ",p^co(W[1][0],W[1][1],G[1][0],G[1][1]),",",1-p," ",G[1],"A",j,",",j," 0 0,",m," ",G[0]):S.push("L",W[0],"A",j,",",j," 0 0,",m," ",G[0])}else S.push("L",R,",",b)}else S.push("M",E,",",y),null!=x&&S.push("A",h,",",h," 0 ",C,",",p," ",x,",",T),S.push("L",R,",",b),null!=_&&S.push("A",t,",",t," 0 ",L,",",1-p," ",_,",",w);return S.push("Z"),S.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var r=ao,n=so,i=oo,o=Mu,a=uo,s=ho,u=lo;return t.innerRadius=function(e){return arguments.length?(r=Mt(e),t):r},t.outerRadius=function(e){return arguments.length?(n=Mt(e),t):n},t.cornerRadius=function(e){return arguments.length?(i=Mt(e),t):i},t.padRadius=function(e){return arguments.length?(o=e==Mu?Mu:Mt(e),t):o},t.startAngle=function(e){return arguments.length?(a=Mt(e),t):a},t.endAngle=function(e){return arguments.length?(s=Mt(e),t):s},t.padAngle=function(e){return arguments.length?(u=Mt(e),t):u},t.centroid=function(){var t=(+r.apply(this,arguments)+ +n.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Ba;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Mu="auto";ra.svg.line=function(){return po(E)};var Hu=ra.map({linear:mo,"linear-closed":go,step:vo,"step-before":Eo,"step-after":yo,basis:wo,"basis-open":Mo,"basis-closed":Ho,bundle:So,cardinal:Ro,"cardinal-open":xo,"cardinal-closed":To,monotone:Do});Hu.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Su=[0,2/3,1/3,0],Cu=[0,1/3,2/3,0],Au=[0,1/6,2/3,1/6];ra.svg.line.radial=function(){var t=po(Bo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Eo.reverse=yo,yo.reverse=Eo,ra.svg.area=function(){return Oo(E)},ra.svg.area.radial=function(){var t=Oo(Bo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ra.svg.chord=function(){function t(t,s){var u=e(this,o,t,s),h=e(this,a,t,s);return"M"+u.p0+n(u.r,u.p1,u.a1-u.a0)+(r(u,h)?i(u.r,u.p1,u.r,u.p0):i(u.r,u.p1,h.r,h.p0)+n(h.r,h.p1,h.a1-h.a0)+i(h.r,h.p1,u.r,u.p0))+"Z"}function e(t,e,r,n){var i=e.call(t,r,n),o=s.call(t,i,n),a=u.call(t,i,n)-Ba,l=h.call(t,i,n)-Ba;return{r:o,a0:a,a1:l,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(l),o*Math.sin(l)]}}function r(t,e){return t.a0==e.a0&&t.a1==e.a1}function n(t,e,r){return"A"+t+","+t+" 0 "+ +(r>Pa)+",1 "+e}function i(t,e,r,n){return"Q 0,0 "+n}var o=vr,a=Er,s=No,u=uo,h=ho;return t.radius=function(e){return arguments.length?(s=Mt(e),t):s},t.source=function(e){return arguments.length?(o=Mt(e),t):o},t.target=function(e){return arguments.length?(a=Mt(e),t):a},t.startAngle=function(e){return arguments.length?(u=Mt(e),t):u},t.endAngle=function(e){return arguments.length?(h=Mt(e),t):h},t},ra.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),a=r.call(this,t,i),s=(o.y+a.y)/2,u=[o,{x:o.x,y:s},{x:a.x,y:s},a];return u=u.map(n),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=vr,r=Er,n=ko;return t.source=function(r){return arguments.length?(e=Mt(r),t):e},t.target=function(e){return arguments.length?(r=Mt(e),t):r},t.projection=function(e){return arguments.length?(n=e,t):n},t},ra.svg.diagonal.radial=function(){var t=ra.svg.diagonal(),e=ko,r=t.projection;return t.projection=function(t){return arguments.length?r(Uo(e=t)):e},t},ra.svg.symbol=function(){function t(t,n){return(Lu.get(e.call(this,t,n))||Vo)(r.call(this,t,n))}var e=zo,r=Io;return t.type=function(r){return arguments.length?(e=Mt(r),t):e},t.size=function(e){return arguments.length?(r=Mt(e),t):r},t};var Lu=ra.map({circle:Vo,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Fu)),r=e*Fu;return"M0,"+-e+"L"+r+",0 0,"+e+" "+-r+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Pu),r=e*Pu/2;return"M0,"+r+"L"+e+","+-r+" "+-e+","+-r+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Pu),r=e*Pu/2;return"M0,"+-r+"L"+e+","+r+" "+-e+","+r+"Z"}});ra.svg.symbolTypes=Lu.keys();var Pu=Math.sqrt(3),Fu=Math.tan(30*Oa);ba.transition=function(t){for(var e,r,n=Du||++ku,i=qo(t),o=[],a=Bu||{time:Date.now(),ease:wn,delay:0,duration:250},s=-1,u=this.length;++s<u;){o.push(e=[]);for(var h=this[s],l=-1,c=h.length;++l<c;)(r=h[l])&&Yo(r,l,i,n,a),e.push(r)}return Go(o,i,n)},ba.interrupt=function(t){return this.each(null==t?Ou:jo(qo(t)))};var Du,Bu,Ou=jo(qo()),Nu=[],ku=0;Nu.call=ba.call,Nu.empty=ba.empty,Nu.node=ba.node,Nu.size=ba.size,ra.transition=function(t,e){return t&&t.transition?Du?t.transition(e):t:ra.selection().transition(t)},ra.transition.prototype=Nu,Nu.select=function(t){var e,r,n,i=this.id,o=this.namespace,a=[];t=S(t);for(var s=-1,u=this.length;++s<u;){a.push(e=[]);for(var h=this[s],l=-1,c=h.length;++l<c;)(n=h[l])&&(r=t.call(n,n.__data__,l,s))?("__data__"in n&&(r.__data__=n.__data__),Yo(r,l,o,i,n[o][i]),e.push(r)):e.push(null)}return Go(a,o,i)},Nu.selectAll=function(t){var e,r,n,i,o,a=this.id,s=this.namespace,u=[];t=C(t);for(var h=-1,l=this.length;++h<l;)for(var c=this[h],f=-1,p=c.length;++f<p;)if(n=c[f]){o=n[s][a],r=t.call(n,n.__data__,f,h),u.push(e=[]);for(var d=-1,m=r.length;++d<m;)(i=r[d])&&Yo(i,d,s,a,o),e.push(i)}return Go(u,s,a)},Nu.filter=function(t){var e,r,n,i=[];"function"!=typeof t&&(t=z(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]);for(var r=this[o],s=0,u=r.length;u>s;s++)(n=r[s])&&t.call(n,n.__data__,s,o)&&e.push(n)}return Go(i,this.namespace,this.id)},Nu.tween=function(t,e){var r=this.id,n=this.namespace;return arguments.length<2?this.node()[n][r].tween.get(t):j(this,null==e?function(e){e[n][r].tween.remove(t)}:function(i){i[n][r].tween.set(t,e)})},Nu.attr=function(t,e){function r(){this.removeAttribute(s)}function n(){this.removeAttributeNS(s.space,s.local)}function i(t){return null==t?r:(t+="",function(){var e,r=this.getAttribute(s);return r!==t&&(e=a(r,t),function(t){this.setAttribute(s,e(t))})})}function o(t){return null==t?n:(t+="",function(){var e,r=this.getAttributeNS(s.space,s.local);return r!==t&&(e=a(r,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?zn:En,s=ra.ns.qualify(t);return Wo(this,"attr."+t,e,s.local?o:i)},Nu.attrTween=function(t,e){function r(t,r){var n=e.call(this,t,r,this.getAttribute(i));return n&&function(t){this.setAttribute(i,n(t))}}function n(t,r){var n=e.call(this,t,r,this.getAttributeNS(i.space,i.local));return n&&function(t){this.setAttributeNS(i.space,i.local,n(t))}}var i=ra.ns.qualify(t);return this.tween("attr."+t,i.local?n:r)},Nu.style=function(t,r,n){function i(){this.style.removeProperty(t)}function o(r){return null==r?i:(r+="",function(){var i,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==r&&(i=En(o,r),function(e){this.style.setProperty(t,i(e),n)})})}var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(r="");for(n in t)this.style(n,t[n],r);return this}n=""}return Wo(this,"style."+t,r,o)},Nu.styleTween=function(t,r,n){function i(i,o){var a=r.call(this,i,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,i)},Nu.text=function(t){return Wo(this,"text",t,Xo)},Nu.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Nu.ease=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].ease:("function"!=typeof t&&(t=ra.ease.apply(ra,arguments)),j(this,function(n){n[r][e].ease=t}))},Nu.delay=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].delay:j(this,"function"==typeof t?function(n,i,o){n[r][e].delay=+t.call(n,n.__data__,i,o)}:(t=+t,function(n){n[r][e].delay=t}))},Nu.duration=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].duration:j(this,"function"==typeof t?function(n,i,o){n[r][e].duration=Math.max(1,t.call(n,n.__data__,i,o))}:(t=Math.max(1,t),function(n){n[r][e].duration=t}))},Nu.each=function(t,e){var r=this.id,n=this.namespace;if(arguments.length<2){var i=Bu,o=Du;try{Du=r,j(this,function(e,i,o){Bu=e[n][r],t.call(e,e.__data__,i,o)})}finally{Bu=i,Du=o}}else j(this,function(i){var o=i[n][r];(o.event||(o.event=ra.dispatch("start","end","interrupt"))).on(t,e)});return this},Nu.transition=function(){for(var t,e,r,n,i=this.id,o=++ku,a=this.namespace,s=[],u=0,h=this.length;h>u;u++){s.push(t=[]);for(var e=this[u],l=0,c=e.length;c>l;l++)(r=e[l])&&(n=r[a][i],Yo(r,l,a,o,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration})),t.push(r)}return Go(s,a,o)},ra.svg.axis=function(){function t(t){t.each(function(){var t,h=ra.select(this),l=this.__chart__||r,c=this.__chart__=r.copy(),f=null==u?c.ticks?c.ticks.apply(c,s):c.domain():u,p=null==e?c.tickFormat?c.tickFormat.apply(c,s):E:e,d=h.selectAll(".tick").data(f,c),m=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Aa),g=ra.transition(d.exit()).style("opacity",Aa).remove(),v=ra.transition(d.order()).style("opacity",1),y=Math.max(i,0)+a,x=ki(c),T=h.selectAll(".domain").data([0]),R=(T.enter().append("path").attr("class","domain"),ra.transition(T));m.append("line"),m.append("text");var b,_,w,M,H=m.select("line"),S=v.select("line"),C=d.select("text").text(p),A=m.select("text"),L=v.select("text"),P="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(t=Ko,b="x",w="y",_="x2",M="y2",C.attr("dy",0>P?"0em":".71em").style("text-anchor","middle"),R.attr("d","M"+x[0]+","+P*o+"V0H"+x[1]+"V"+P*o)):(t=Zo,b="y",w="x",_="y2",M="x2",C.attr("dy",".32em").style("text-anchor",0>P?"end":"start"),R.attr("d","M"+P*o+","+x[0]+"H0V"+x[1]+"H"+P*o)),H.attr(M,P*i),A.attr(w,P*y),S.attr(_,0).attr(M,P*i),L.attr(b,0).attr(w,P*y),c.rangeBand){var F=c,D=F.rangeBand()/2;l=c=function(t){return F(t)+D}}else l.rangeBand?l=c:g.call(t,c,l);m.call(t,l,c),v.call(t,c,c)})}var e,r=ra.scale.linear(),n=Uu,i=6,o=6,a=3,s=[10],u=null;return t.scale=function(e){return arguments.length?(r=e,t):r},t.orient=function(e){return arguments.length?(n=e in Iu?e+"":Uu,t):n},t.ticks=function(){return arguments.length?(s=arguments,t):s},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(r){return arguments.length?(e=r,t):e},t.tickSize=function(e){var r=arguments.length;return r?(i=+e,o=+arguments[r-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Uu="bottom",Iu={top:1,right:1,bottom:1,left:1};ra.svg.brush=function(){function t(e){e.each(function(){var e=ra.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=e.selectAll(".resize").data(m,E);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return zu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var u,c=ra.transition(e),f=ra.transition(a);h&&(u=ki(h),f.attr("x",u[0]).attr("width",u[1]-u[0]),n(c)),l&&(u=ki(l),f.attr("y",u[0]).attr("height",u[1]-u[0]),i(c)),r(c)})}function r(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",c[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function i(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function o(){function o(){32==ra.event.keyCode&&(C||(y=null,L[0]-=c[1],L[1]-=f[1],C=2),_())}function m(){32==ra.event.keyCode&&2==C&&(L[0]+=c[1],L[1]+=f[1],C=0,_())}function g(){var t=ra.mouse(T),e=!1;x&&(t[0]+=x[0],t[1]+=x[1]),C||(ra.event.altKey?(y||(y=[(c[0]+c[1])/2,(f[0]+f[1])/2]),L[0]=c[+(t[0]<y[0])],L[1]=f[+(t[1]<y[1])]):y=null),H&&v(t,h,0)&&(n(w),e=!0),S&&v(t,l,1)&&(i(w),e=!0),e&&(r(w),b({type:"brush",mode:C?"move":"resize"}))}function v(t,e,r){var n,i,o=ki(e),u=o[0],h=o[1],l=L[r],m=r?f:c,g=m[1]-m[0];return C&&(u-=l,h-=g+l),n=(r?d:p)?Math.max(u,Math.min(h,t[r])):t[r],C?i=(n+=l)+g:(y&&(l=Math.max(u,Math.min(h,2*y[r]-n))),n>l?(i=n,n=l):i=l),m[0]!=n||m[1]!=i?(r?s=null:a=null,m[0]=n,m[1]=i,!0):void 0}function E(){g(),w.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ra.select("body").style("cursor",null),P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),b({type:"brushend"})}var y,x,T=this,R=ra.select(ra.event.target),b=u.of(T,arguments),w=ra.select(T),M=R.datum(),H=!/^(n|s)$/.test(M)&&h,S=!/^(e|w)$/.test(M)&&l,C=R.classed("extent"),A=K(T),L=ra.mouse(T),P=ra.select(e(T)).on("keydown.brush",o).on("keyup.brush",m);if(ra.event.changedTouches?P.on("touchmove.brush",g).on("touchend.brush",E):P.on("mousemove.brush",g).on("mouseup.brush",E),w.interrupt().selectAll("*").interrupt(),C)L[0]=c[0]-L[0],L[1]=f[0]-L[1];else if(M){var F=+/w$/.test(M),D=+/^n/.test(M);x=[c[1-F]-L[0],f[1-D]-L[1]],L[0]=c[F],L[1]=f[D]}else ra.event.altKey&&(y=L.slice());w.style("pointer-events","none").selectAll(".resize").style("display",null),ra.select("body").style("cursor",R.style("cursor")),b({type:"brushstart"}),g()}var a,s,u=M(t,"brushstart","brush","brushend"),h=null,l=null,c=[0,0],f=[0,0],p=!0,d=!0,m=Vu[0];return t.event=function(t){t.each(function(){var t=u.of(this,arguments),e={x:c,y:f,i:a,j:s},r=this.__chart__||e;this.__chart__=e,Du?ra.select(this).transition().each("start.brush",function(){a=r.i,s=r.j,c=r.x,f=r.y,t({type:"brushstart"})}).tween("brush:brush",function(){var r=yn(c,e.x),n=yn(f,e.y);return a=s=null,function(i){c=e.x=r(i),f=e.y=n(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(h=e,m=Vu[!h<<1|!l],t):h},t.y=function(e){return arguments.length?(l=e,m=Vu[!h<<1|!l],t):l},t.clamp=function(e){return arguments.length?(h&&l?(p=!!e[0],d=!!e[1]):h?p=!!e:l&&(d=!!e),t):h&&l?[p,d]:h?p:l?d:null},t.extent=function(e){var r,n,i,o,u;return arguments.length?(h&&(r=e[0],n=e[1],l&&(r=r[0],n=n[0]),a=[r,n],h.invert&&(r=h(r),n=h(n)),r>n&&(u=r,r=n,n=u),(r!=c[0]||n!=c[1])&&(c=[r,n])),l&&(i=e[0],o=e[1],h&&(i=i[1],o=o[1]),s=[i,o],l.invert&&(i=l(i),o=l(o)),i>o&&(u=i,i=o,o=u),(i!=f[0]||o!=f[1])&&(f=[i,o])),t):(h&&(a?(r=a[0],n=a[1]):(r=c[0],n=c[1],h.invert&&(r=h.invert(r),n=h.invert(n)),r>n&&(u=r,r=n,n=u))),l&&(s?(i=s[0],o=s[1]):(i=f[0],o=f[1],l.invert&&(i=l.invert(i),o=l.invert(o)),i>o&&(u=i,i=o,o=u))),h&&l?[[r,i],[n,o]]:h?[r,n]:l&&[i,o])},t.clear=function(){return t.empty()||(c=[0,0],f=[0,0],a=s=null),t},t.empty=function(){return!!h&&c[0]==c[1]||!!l&&f[0]==f[1]},ra.rebind(t,u,"on")};var zu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],ju=us.format=ds.timeFormat,Gu=ju.utc,Wu=Gu("%Y-%m-%dT%H:%M:%S.%LZ");ju.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Qo:Wu,Qo.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Qo.toString=Wu.toString,us.second=Ut(function(t){return new hs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),us.seconds=us.second.range,us.seconds.utc=us.second.utc.range,us.minute=Ut(function(t){return new hs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),us.minutes=us.minute.range,us.minutes.utc=us.minute.utc.range,us.hour=Ut(function(t){var e=t.getTimezoneOffset()/60;return new hs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),us.hours=us.hour.range,us.hours.utc=us.hour.utc.range,us.month=Ut(function(t){return t=us.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),us.months=us.month.range,us.months.utc=us.month.utc.range;var Xu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],qu=[[us.second,1],[us.second,5],[us.second,15],[us.second,30],[us.minute,1],[us.minute,5],[us.minute,15],[us.minute,30],[us.hour,1],[us.hour,3],[us.hour,6],[us.hour,12],[us.day,1],[us.day,2],[us.week,1],[us.month,1],[us.month,3],[us.year,1]],Yu=ju.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Se]]),Ku={range:function(t,e,r){return ra.range(Math.ceil(t/r)*r,+e,r).map(Jo)},floor:E,ceil:E};qu.year=us.year,us.scale=function(){return $o(ra.scale.linear(),qu,Yu)};var Zu=qu.map(function(t){return[t[0].utc,t[1]]}),Qu=Gu.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Se]]);Zu.year=us.year.utc,us.scale.utc=function(){return $o(ra.scale.linear(),Zu,Qu)},ra.text=Ht(function(t){return t.responseText}),ra.json=function(t,e){return St(t,"application/json",ta,e)},ra.html=function(t,e){return St(t,"text/html",ea,e)},ra.xml=Ht(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(ra):"object"==typeof module&&module.exports&&(module.exports=ra),this.d3=ra}(),/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */
function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function r(t){var e="length"in t&&t.length,r=J.type(t);return"function"===r||J.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===r||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,r){if(J.isFunction(e))return J.grep(t,function(t,n){return!!e.call(t,n,t)!==r});if(e.nodeType)return J.grep(t,function(t){return t===e!==r});if("string"==typeof e){if(st.test(e))return J.filter(e,t,r);e=J.filter(e,t)}return J.grep(t,function(t){return X.call(e,t)>=0!==r})}function i(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=dt[t]={};return J.each(t.match(pt)||[],function(t,r){e[r]=!0}),e}function a(){Q.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1),J.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+s.uid++}function u(t,e,r){var n;if(void 0===r&&1===t.nodeType)if(n="data-"+e.replace(xt,"-$1").toLowerCase(),r=t.getAttribute(n),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:yt.test(r)?J.parseJSON(r):r}catch(i){}Et.set(t,e,r)}else r=void 0;return r}function h(){return!0}function l(){return!1}function c(){try{return Q.activeElement}catch(t){}}function f(t,e){return J.nodeName(t,"table")&&J.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function p(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function d(t){var e=Ot.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var r=0,n=t.length;n>r;r++)vt.set(t[r],"globalEval",!e||vt.get(e[r],"globalEval"))}function g(t,e){var r,n,i,o,a,s,u,h;if(1===e.nodeType){if(vt.hasData(t)&&(o=vt.access(t),a=vt.set(e,o),h=o.events)){delete a.handle,a.events={};for(i in h)for(r=0,n=h[i].length;n>r;r++)J.event.add(e,i,h[i][r])}Et.hasData(t)&&(s=Et.access(t),u=J.extend({},s),Et.set(e,u))}}function v(t,e){var r=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&J.nodeName(t,e)?J.merge([t],r):r}function E(t,e){var r=e.nodeName.toLowerCase();"input"===r&&_t.test(t.type)?e.checked=t.checked:("input"===r||"textarea"===r)&&(e.defaultValue=t.defaultValue)}function y(e,r){var n,i=J(r.createElement(e)).appendTo(r.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(i[0]))?n.display:J.css(i[0],"display");return i.detach(),o}function x(t){var e=Q,r=It[t];return r||(r=y(t,e),"none"!==r&&r||(Ut=(Ut||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Ut[0].contentDocument,e.write(),e.close(),r=y(t,e),Ut.detach()),It[t]=r),r}function T(t,e,r){var n,i,o,a,s=t.style;return r=r||jt(t),r&&(a=r.getPropertyValue(e)||r[e]),r&&(""!==a||J.contains(t.ownerDocument,t)||(a=J.style(t,e)),Vt.test(a)&&zt.test(e)&&(n=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=r.width,s.width=n,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function R(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function b(t,e){if(e in t)return e;for(var r=e[0].toUpperCase()+e.slice(1),n=e,i=Kt.length;i--;)if(e=Kt[i]+r,e in t)return e;return n}function _(t,e,r){var n=Wt.exec(e);return n?Math.max(0,n[1]-(r||0))+(n[2]||"px"):e}function w(t,e,r,n,i){for(var o=r===(n?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===r&&(a+=J.css(t,r+Rt[o],!0,i)),n?("content"===r&&(a-=J.css(t,"padding"+Rt[o],!0,i)),"margin"!==r&&(a-=J.css(t,"border"+Rt[o]+"Width",!0,i))):(a+=J.css(t,"padding"+Rt[o],!0,i),"padding"!==r&&(a+=J.css(t,"border"+Rt[o]+"Width",!0,i)));return a}function M(t,e,r){var n=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=jt(t),a="border-box"===J.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=T(t,e,o),(0>i||null==i)&&(i=t.style[e]),Vt.test(i))return i;n=a&&(Z.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+w(t,e,r||(a?"border":"content"),n,o)+"px"}function H(t,e){for(var r,n,i,o=[],a=0,s=t.length;s>a;a++)n=t[a],n.style&&(o[a]=vt.get(n,"olddisplay"),r=n.style.display,e?(o[a]||"none"!==r||(n.style.display=""),""===n.style.display&&bt(n)&&(o[a]=vt.access(n,"olddisplay",x(n.nodeName)))):(i=bt(n),"none"===r&&i||vt.set(n,"olddisplay",i?r:J.css(n,"display"))));for(a=0;s>a;a++)n=t[a],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[a]||"":"none"));return t}function S(t,e,r,n,i){return new S.prototype.init(t,e,r,n,i)}function C(){return setTimeout(function(){Zt=void 0}),Zt=J.now()}function A(t,e){var r,n=0,i={height:t};for(e=e?1:0;4>n;n+=2-e)r=Rt[n],i["margin"+r]=i["padding"+r]=t;return e&&(i.opacity=i.width=t),i}function L(t,e,r){for(var n,i=(re[e]||[]).concat(re["*"]),o=0,a=i.length;a>o;o++)if(n=i[o].call(r,e,t))return n}function P(t,e,r){var n,i,o,a,s,u,h,l,c=this,f={},p=t.style,d=t.nodeType&&bt(t),m=vt.get(t,"fxshow");r.queue||(s=J._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,J.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(r.overflow=[p.overflow,p.overflowX,p.overflowY],h=J.css(t,"display"),l="none"===h?vt.get(t,"olddisplay")||x(t.nodeName):h,"inline"===l&&"none"===J.css(t,"float")&&(p.display="inline-block")),r.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=r.overflow[0],p.overflowX=r.overflow[1],p.overflowY=r.overflow[2]}));for(n in e)if(i=e[n],$t.exec(i)){if(delete e[n],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!m||void 0===m[n])continue;d=!0}f[n]=m&&m[n]||J.style(t,n)}else h=void 0;if(J.isEmptyObject(f))"inline"===("none"===h?x(t.nodeName):h)&&(p.display=h);else{m?"hidden"in m&&(d=m.hidden):m=vt.access(t,"fxshow",{}),o&&(m.hidden=!d),d?J(t).show():c.done(function(){J(t).hide()}),c.done(function(){var e;vt.remove(t,"fxshow");for(e in f)J.style(t,e,f[e])});for(n in f)a=L(d?m[n]:0,n,c),n in m||(m[n]=a.start,d&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}}function F(t,e){var r,n,i,o,a;for(r in t)if(n=J.camelCase(r),i=e[n],o=t[r],J.isArray(o)&&(i=o[1],o=t[r]=o[0]),r!==n&&(t[n]=o,delete t[r]),a=J.cssHooks[n],a&&"expand"in a){o=a.expand(o),delete t[n];for(r in o)r in t||(t[r]=o[r],e[r]=i)}else e[n]=i}function D(t,e,r){var n,i,o=0,a=ee.length,s=J.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=Zt||C(),r=Math.max(0,h.startTime+h.duration-e),n=r/h.duration||0,o=1-n,a=0,u=h.tweens.length;u>a;a++)h.tweens[a].run(o);return s.notifyWith(t,[h,o,r]),1>o&&u?r:(s.resolveWith(t,[h]),!1)},h=s.promise({elem:t,props:J.extend({},e),opts:J.extend(!0,{specialEasing:{}},r),originalProperties:e,originalOptions:r,startTime:Zt||C(),duration:r.duration,tweens:[],createTween:function(e,r){var n=J.Tween(t,h.opts,e,r,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var r=0,n=e?h.tweens.length:0;if(i)return this;for(i=!0;n>r;r++)h.tweens[r].run(1);return e?s.resolveWith(t,[h,e]):s.rejectWith(t,[h,e]),this}}),l=h.props;for(F(l,h.opts.specialEasing);a>o;o++)if(n=ee[o].call(h,t,l,h.opts))return n;return J.map(l,L,h),J.isFunction(h.opts.start)&&h.opts.start.call(t,h),J.fx.timer(J.extend(u,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function B(t){return function(e,r){"string"!=typeof e&&(r=e,e="*");var n,i=0,o=e.toLowerCase().match(pt)||[];if(J.isFunction(r))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(r)):(t[n]=t[n]||[]).push(r)}}function O(t,e,r,n){function i(s){var u;return o[s]=!0,J.each(t[s]||[],function(t,s){var h=s(e,r,n);return"string"!=typeof h||a||o[h]?a?!(u=h):void 0:(e.dataTypes.unshift(h),i(h),!1)}),u}var o={},a=t===ye;return i(e.dataTypes[0])||!o["*"]&&i("*")}function N(t,e){var r,n,i=J.ajaxSettings.flatOptions||{};for(r in e)void 0!==e[r]&&((i[r]?t:n||(n={}))[r]=e[r]);return n&&J.extend(!0,t,n),t}function k(t,e,r){for(var n,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(i in s)if(s[i]&&s[i].test(n)){u.unshift(i);break}if(u[0]in r)o=u[0];else{for(i in r){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==u[0]&&u.unshift(o),r[o]):void 0}function U(t,e,r,n){var i,o,a,s,u,h={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)h[a.toLowerCase()]=t.converters[a];for(o=l.shift();o;)if(t.responseFields[o]&&(r[t.responseFields[o]]=e),!u&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=h[u+" "+o]||h["* "+o],!a)for(i in h)if(s=i.split(" "),s[1]===o&&(a=h[u+" "+s[0]]||h["* "+s[0]])){a===!0?a=h[i]:h[i]!==!0&&(o=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(c){return{state:"parsererror",error:a?c:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function I(t,e,r,n){var i;if(J.isArray(e))J.each(e,function(e,i){r||_e.test(t)?n(t,i):I(t+"["+("object"==typeof i?e:"")+"]",i,r,n)});else if(r||"object"!==J.type(e))n(t,e);else for(i in e)I(t+"["+i+"]",e[i],r,n)}function z(t){return J.isWindow(t)?t:9===t.nodeType&&t.defaultView}var V=[],j=V.slice,G=V.concat,W=V.push,X=V.indexOf,q={},Y=q.toString,K=q.hasOwnProperty,Z={},Q=t.document,$="2.1.4",J=function(t,e){return new J.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,rt=/-([\da-z])/gi,nt=function(t,e){return e.toUpperCase()};J.fn=J.prototype={jquery:$,constructor:J,selector:"",length:0,toArray:function(){return j.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:j.call(this)},pushStack:function(t){var e=J.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return J.each(this,t,e)},map:function(t){return this.pushStack(J.map(this,function(e,r){return t.call(e,r,e)}))},slice:function(){return this.pushStack(j.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,r=+t+(0>t?e:0);return this.pushStack(r>=0&&e>r?[this[r]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:V.sort,splice:V.splice},J.extend=J.fn.extend=function(){var t,e,r,n,i,o,a=arguments[0]||{},s=1,u=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[s]||{},s++),"object"==typeof a||J.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(t=arguments[s]))for(e in t)r=a[e],n=t[e],a!==n&&(h&&n&&(J.isPlainObject(n)||(i=J.isArray(n)))?(i?(i=!1,o=r&&J.isArray(r)?r:[]):o=r&&J.isPlainObject(r)?r:{},a[e]=J.extend(h,o,n)):void 0!==n&&(a[e]=n));return a},J.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===J.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!J.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==J.type(t)||t.nodeType||J.isWindow(t)?!1:t.constructor&&!K.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?q[Y.call(t)]||"object":typeof t},globalEval:function(t){var e,r=eval;t=J.trim(t),t&&(1===t.indexOf("use strict")?(e=Q.createElement("script"),e.text=t,Q.head.appendChild(e).parentNode.removeChild(e)):r(t))},camelCase:function(t){return t.replace(et,"ms-").replace(rt,nt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var i,o=0,a=t.length,s=r(t);if(n){if(s)for(;a>o&&(i=e.apply(t[o],n),i!==!1);o++);else for(o in t)if(i=e.apply(t[o],n),i===!1)break}else if(s)for(;a>o&&(i=e.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=e.call(t[o],o,t[o]),i===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(r(Object(t))?J.merge(n,"string"==typeof t?[t]:t):W.call(n,t)),n},inArray:function(t,e,r){return null==e?-1:X.call(e,t,r)},merge:function(t,e){for(var r=+e.length,n=0,i=t.length;r>n;n++)t[i++]=e[n];return t.length=i,t},grep:function(t,e,r){for(var n,i=[],o=0,a=t.length,s=!r;a>o;o++)n=!e(t[o],o),n!==s&&i.push(t[o]);return i},map:function(t,e,n){var i,o=0,a=t.length,s=r(t),u=[];if(s)for(;a>o;o++)i=e(t[o],o,n),null!=i&&u.push(i);else for(o in t)i=e(t[o],o,n),null!=i&&u.push(i);return G.apply([],u)},guid:1,proxy:function(t,e){var r,n,i;return"string"==typeof e&&(r=t[e],e=t,t=r),J.isFunction(t)?(n=j.call(arguments,2),i=function(){return t.apply(e||this,n.concat(j.call(arguments)))},i.guid=t.guid=t.guid||J.guid++,i):void 0},now:Date.now,support:Z}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){q["[object "+e+"]"]=e.toLowerCase()});var it=/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
function(t){function e(t,e,r,n){var i,o,a,s,u,h,c,p,d,m;if((e?e.ownerDocument||e:I)!==P&&L(e),e=e||P,r=r||[],s=e.nodeType,"string"!=typeof t||!t||1!==s&&9!==s&&11!==s)return r;if(!n&&D){if(11!==s&&(i=Et.exec(t)))if(a=i[1]){if(9===s){if(o=e.getElementById(a),!o||!o.parentNode)return r;if(o.id===a)return r.push(o),r}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&k(e,o)&&o.id===a)return r.push(o),r}else{if(i[2])return $.apply(r,e.getElementsByTagName(t)),r;if((a=i[3])&&T.getElementsByClassName)return $.apply(r,e.getElementsByClassName(a)),r}if(T.qsa&&(!B||!B.test(t))){if(p=c=U,d=e,m=1!==s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(h=w(t),(c=e.getAttribute("id"))?p=c.replace(xt,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",u=h.length;u--;)h[u]=p+f(h[u]);d=yt.test(t)&&l(e.parentNode)||e,m=h.join(",")}if(m)try{return $.apply(r,d.querySelectorAll(m)),r}catch(g){}finally{c||e.removeAttribute("id")}}}return H(t.replace(ut,"$1"),e,r,n)}function r(){function t(r,n){return e.push(r+" ")>R.cacheLength&&delete t[e.shift()],t[r+" "]=n}var e=[];return t}function n(t){return t[U]=!0,t}function i(t){var e=P.createElement("div");try{return!!t(e)}catch(r){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var r=t.split("|"),n=t.length;n--;)R.attrHandle[r[n]]=e}function a(t,e){var r=e&&t,n=r&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||q)-(~t.sourceIndex||q);if(n)return n;if(r)for(;r=r.nextSibling;)if(r===e)return-1;return t?1:-1}function s(t){return function(e){var r=e.nodeName.toLowerCase();return"input"===r&&e.type===t}}function u(t){return function(e){var r=e.nodeName.toLowerCase();return("input"===r||"button"===r)&&e.type===t}}function h(t){return n(function(e){return e=+e,n(function(r,n){for(var i,o=t([],r.length,e),a=o.length;a--;)r[i=o[a]]&&(r[i]=!(n[i]=r[i]))})})}function l(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function c(){}function f(t){for(var e=0,r=t.length,n="";r>e;e++)n+=t[e].value;return n}function p(t,e,r){var n=e.dir,i=r&&"parentNode"===n,o=V++;return e.first?function(e,r,o){for(;e=e[n];)if(1===e.nodeType||i)return t(e,r,o)}:function(e,r,a){var s,u,h=[z,o];if(a){for(;e=e[n];)if((1===e.nodeType||i)&&t(e,r,a))return!0}else for(;e=e[n];)if(1===e.nodeType||i){if(u=e[U]||(e[U]={}),(s=u[n])&&s[0]===z&&s[1]===o)return h[2]=s[2];if(u[n]=h,h[2]=t(e,r,a))return!0}}}function d(t){return t.length>1?function(e,r,n){for(var i=t.length;i--;)if(!t[i](e,r,n))return!1;return!0}:t[0]}function m(t,r,n){for(var i=0,o=r.length;o>i;i++)e(t,r[i],n);return n}function g(t,e,r,n,i){for(var o,a=[],s=0,u=t.length,h=null!=e;u>s;s++)(o=t[s])&&(!r||r(o,n,i))&&(a.push(o),h&&e.push(s));return a}function v(t,e,r,i,o,a){return i&&!i[U]&&(i=v(i)),o&&!o[U]&&(o=v(o,a)),n(function(n,a,s,u){var h,l,c,f=[],p=[],d=a.length,v=n||m(e||"*",s.nodeType?[s]:s,[]),E=!t||!n&&e?v:g(v,f,t,s,u),y=r?o||(n?t:d||i)?[]:a:E;if(r&&r(E,y,s,u),i)for(h=g(y,p),i(h,[],s,u),l=h.length;l--;)(c=h[l])&&(y[p[l]]=!(E[p[l]]=c));if(n){if(o||t){if(o){for(h=[],l=y.length;l--;)(c=y[l])&&h.push(E[l]=c);o(null,y=[],h,u)}for(l=y.length;l--;)(c=y[l])&&(h=o?tt(n,c):f[l])>-1&&(n[h]=!(a[h]=c))}}else y=g(y===a?y.splice(d,y.length):y),o?o(null,a,y,u):$.apply(a,y)})}function E(t){for(var e,r,n,i=t.length,o=R.relative[t[0].type],a=o||R.relative[" "],s=o?1:0,u=p(function(t){return t===e},a,!0),h=p(function(t){return tt(e,t)>-1},a,!0),l=[function(t,r,n){var i=!o&&(n||r!==S)||((e=r).nodeType?u(t,r,n):h(t,r,n));return e=null,i}];i>s;s++)if(r=R.relative[t[s].type])l=[p(d(l),r)];else{if(r=R.filter[t[s].type].apply(null,t[s].matches),r[U]){for(n=++s;i>n&&!R.relative[t[n].type];n++);return v(s>1&&d(l),s>1&&f(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(ut,"$1"),r,n>s&&E(t.slice(s,n)),i>n&&E(t=t.slice(n)),i>n&&f(t))}l.push(r)}return d(l)}function y(t,r){var i=r.length>0,o=t.length>0,a=function(n,a,s,u,h){var l,c,f,p=0,d="0",m=n&&[],v=[],E=S,y=n||o&&R.find.TAG("*",h),x=z+=null==E?1:Math.random()||.1,T=y.length;for(h&&(S=a!==P&&a);d!==T&&null!=(l=y[d]);d++){if(o&&l){for(c=0;f=t[c++];)if(f(l,a,s)){u.push(l);break}h&&(z=x)}i&&((l=!f&&l)&&p--,n&&m.push(l))}if(p+=d,i&&d!==p){for(c=0;f=r[c++];)f(m,v,a,s);if(n){if(p>0)for(;d--;)m[d]||v[d]||(v[d]=Z.call(u));v=g(v)}$.apply(u,v),h&&!n&&v.length>0&&p+r.length>1&&e.uniqueSort(u)}return h&&(z=x,S=E),m};return i?n(a):a}var x,T,R,b,_,w,M,H,S,C,A,L,P,F,D,B,O,N,k,U="sizzle"+1*new Date,I=t.document,z=0,V=0,j=r(),G=r(),W=r(),X=function(t,e){return t===e&&(A=!0),0},q=1<<31,Y={}.hasOwnProperty,K=[],Z=K.pop,Q=K.push,$=K.push,J=K.slice,tt=function(t,e){for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it=nt.replace("w","w#"),ot="\\["+rt+"*("+nt+")(?:"+rt+"*([*^$|!~]?=)"+rt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+rt+"*\\]",at=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",st=new RegExp(rt+"+","g"),ut=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),ht=new RegExp("^"+rt+"*,"+rt+"*"),lt=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),ct=new RegExp("="+rt+"*([^\\]'\"]*?)"+rt+"*\\]","g"),ft=new RegExp(at),pt=new RegExp("^"+it+"$"),dt={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,Et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,xt=/'|\\/g,Tt=new RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),Rt=function(t,e,r){var n="0x"+e-65536;return n!==n||r?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},bt=function(){L()};try{$.apply(K=J.call(I.childNodes),I.childNodes),K[I.childNodes.length].nodeType}catch(_t){$={apply:K.length?function(t,e){Q.apply(t,J.call(e))}:function(t,e){for(var r=t.length,n=0;t[r++]=e[n++];);t.length=r-1}}}T=e.support={},_=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},L=e.setDocument=function(t){var e,r,n=t?t.ownerDocument||t:I;return n!==P&&9===n.nodeType&&n.documentElement?(P=n,F=n.documentElement,r=n.defaultView,r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",bt,!1):r.attachEvent&&r.attachEvent("onunload",bt)),D=!_(n),T.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),T.getElementsByTagName=i(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),T.getElementsByClassName=vt.test(n.getElementsByClassName),T.getById=i(function(t){return F.appendChild(t).id=U,!n.getElementsByName||!n.getElementsByName(U).length}),T.getById?(R.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&D){var r=e.getElementById(t);return r&&r.parentNode?[r]:[]}},R.filter.ID=function(t){var e=t.replace(Tt,Rt);return function(t){return t.getAttribute("id")===e}}):(delete R.find.ID,R.filter.ID=function(t){var e=t.replace(Tt,Rt);return function(t){var r="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return r&&r.value===e}}),R.find.TAG=T.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):T.qsa?e.querySelectorAll(t):void 0}:function(t,e){var r,n=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;r=o[i++];)1===r.nodeType&&n.push(r);return n}return o},R.find.CLASS=T.getElementsByClassName&&function(t,e){return D?e.getElementsByClassName(t):void 0},O=[],B=[],(T.qsa=vt.test(n.querySelectorAll))&&(i(function(t){F.appendChild(t).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&B.push("[*^$]="+rt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||B.push("\\["+rt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+U+"-]").length||B.push("~="),t.querySelectorAll(":checked").length||B.push(":checked"),t.querySelectorAll("a#"+U+"+*").length||B.push(".#.+[+~]")}),i(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&B.push("name"+rt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||B.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),B.push(",.*:")})),(T.matchesSelector=vt.test(N=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&i(function(t){T.disconnectedMatch=N.call(t,"div"),N.call(t,"[s!='']:x"),O.push("!=",at)}),B=B.length&&new RegExp(B.join("|")),O=O.length&&new RegExp(O.join("|")),e=vt.test(F.compareDocumentPosition),k=e||vt.test(F.contains)?function(t,e){var r=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},X=e?function(t,e){if(t===e)return A=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r?r:(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&r||!T.sortDetached&&e.compareDocumentPosition(t)===r?t===n||t.ownerDocument===I&&k(I,t)?-1:e===n||e.ownerDocument===I&&k(I,e)?1:C?tt(C,t)-tt(C,e):0:4&r?-1:1)}:function(t,e){if(t===e)return A=!0,0;var r,i=0,o=t.parentNode,s=e.parentNode,u=[t],h=[e];if(!o||!s)return t===n?-1:e===n?1:o?-1:s?1:C?tt(C,t)-tt(C,e):0;if(o===s)return a(t,e);for(r=t;r=r.parentNode;)u.unshift(r);for(r=e;r=r.parentNode;)h.unshift(r);for(;u[i]===h[i];)i++;return i?a(u[i],h[i]):u[i]===I?-1:h[i]===I?1:0},n):P},e.matches=function(t,r){return e(t,null,null,r)},e.matchesSelector=function(t,r){if((t.ownerDocument||t)!==P&&L(t),r=r.replace(ct,"='$1']"),!(!T.matchesSelector||!D||O&&O.test(r)||B&&B.test(r)))try{var n=N.call(t,r);if(n||T.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(i){}return e(r,P,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==P&&L(t),k(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==P&&L(t);var r=R.attrHandle[e.toLowerCase()],n=r&&Y.call(R.attrHandle,e.toLowerCase())?r(t,e,!D):void 0;return void 0!==n?n:T.attributes||!D?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,r=[],n=0,i=0;if(A=!T.detectDuplicates,C=!T.sortStable&&t.slice(0),t.sort(X),A){for(;e=t[i++];)e===t[i]&&(n=r.push(i));for(;n--;)t.splice(r[n],1)}return C=null,t},b=e.getText=function(t){var e,r="",n=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)r+=b(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[n++];)r+=b(e);return r},R=e.selectors={cacheLength:50,createPseudo:n,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Tt,Rt),t[3]=(t[3]||t[4]||t[5]||"").replace(Tt,Rt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,r=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":r&&ft.test(r)&&(e=w(r,!0))&&(e=r.indexOf(")",r.length-e)-r.length)&&(t[0]=t[0].slice(0,e),t[2]=r.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Tt,Rt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=j[t+" "];return e||(e=new RegExp("(^|"+rt+")"+t+"("+rt+"|$)"))&&j(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,r,n){return function(i){var o=e.attr(i,t);return null==o?"!="===r:r?(o+="","="===r?o===n:"!="===r?o!==n:"^="===r?n&&0===o.indexOf(n):"*="===r?n&&o.indexOf(n)>-1:"$="===r?n&&o.slice(-n.length)===n:"~="===r?(" "+o.replace(st," ")+" ").indexOf(n)>-1:"|="===r?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,r,n,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===n&&0===i?function(t){return!!t.parentNode}:function(e,r,u){var h,l,c,f,p,d,m=o!==a?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),E=!u&&!s;if(g){if(o){for(;m;){for(c=e;c=c[m];)if(s?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;d=m="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?g.firstChild:g.lastChild],a&&E){for(l=g[U]||(g[U]={}),h=l[t]||[],p=h[0]===z&&h[1],f=h[0]===z&&h[2],c=p&&g.childNodes[p];c=++p&&c&&c[m]||(f=p=0)||d.pop();)if(1===c.nodeType&&++f&&c===e){l[t]=[z,p,f];break}}else if(E&&(h=(e[U]||(e[U]={}))[t])&&h[0]===z)f=h[1];else for(;(c=++p&&c&&c[m]||(f=p=0)||d.pop())&&((s?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++f||(E&&((c[U]||(c[U]={}))[t]=[z,f]),c!==e)););return f-=i,f===n||f%n===0&&f/n>=0}}},PSEUDO:function(t,r){var i,o=R.pseudos[t]||R.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[U]?o(r):o.length>1?(i=[t,t,"",r],R.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,i=o(t,r),a=i.length;a--;)n=tt(t,i[a]),t[n]=!(e[n]=i[a])}):function(t){return o(t,0,i)}):o}},pseudos:{not:n(function(t){var e=[],r=[],i=M(t.replace(ut,"$1"));return i[U]?n(function(t,e,r,n){for(var o,a=i(t,null,n,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,n,o){return e[0]=t,i(e,null,o,r),e[0]=null,!r.pop()}}),has:n(function(t){return function(r){return e(t,r).length>0}}),contains:n(function(t){return t=t.replace(Tt,Rt),function(e){return(e.textContent||e.innerText||b(e)).indexOf(t)>-1}}),lang:n(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(Tt,Rt).toLowerCase(),function(e){var r;do if(r=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return r=r.toLowerCase(),r===t||0===r.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var r=t.location&&t.location.hash;return r&&r.slice(1)===e.id},root:function(t){return t===F},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!R.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,r){return[0>r?r+e:r]}),even:h(function(t,e){for(var r=0;e>r;r+=2)t.push(r);return t}),odd:h(function(t,e){for(var r=1;e>r;r+=2)t.push(r);return t}),lt:h(function(t,e,r){for(var n=0>r?r+e:r;--n>=0;)t.push(n);return t}),gt:h(function(t,e,r){for(var n=0>r?r+e:r;++n<e;)t.push(n);return t})}},R.pseudos.nth=R.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})R.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})R.pseudos[x]=u(x);return c.prototype=R.filters=R.pseudos,R.setFilters=new c,w=e.tokenize=function(t,r){var n,i,o,a,s,u,h,l=G[t+" "];if(l)return r?0:l.slice(0);for(s=t,u=[],h=R.preFilter;s;){(!n||(i=ht.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=lt.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(ut," ")}),s=s.slice(n.length));for(a in R.filter)!(i=dt[a].exec(s))||h[a]&&!(i=h[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return r?s.length:s?e.error(t):G(t,u).slice(0)},M=e.compile=function(t,e){var r,n=[],i=[],o=W[t+" "];if(!o){for(e||(e=w(t)),r=e.length;r--;)o=E(e[r]),o[U]?n.push(o):i.push(o);o=W(t,y(i,n)),o.selector=t}return o},H=e.select=function(t,e,r,n){var i,o,a,s,u,h="function"==typeof t&&t,c=!n&&w(t=h.selector||t);if(r=r||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&T.getById&&9===e.nodeType&&D&&R.relative[o[1].type]){if(e=(R.find.ID(a.matches[0].replace(Tt,Rt),e)||[])[0],!e)return r;h&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=dt.needsContext.test(t)?0:o.length;i--&&(a=o[i],!R.relative[s=a.type]);)if((u=R.find[s])&&(n=u(a.matches[0].replace(Tt,Rt),yt.test(o[0].type)&&l(e.parentNode)||e))){if(o.splice(i,1),t=n.length&&f(o),!t)return $.apply(r,n),r;break}}return(h||M(t,c))(n,e,!D,r,yt.test(t)&&l(e.parentNode)||e),r},T.sortStable=U.split("").sort(X).join("")===U,T.detectDuplicates=!!A,L(),T.sortDetached=i(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,r){return r?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),T.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,r){return r||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,r){var n;return r?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);J.find=it,J.expr=it.selectors,J.expr[":"]=J.expr.pseudos,J.unique=it.uniqueSort,J.text=it.getText,J.isXMLDoc=it.isXML,J.contains=it.contains;var ot=J.expr.match.needsContext,at=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^.[^:#\[\.,]*$/;J.filter=function(t,e,r){var n=e[0];return r&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?J.find.matchesSelector(n,t)?[n]:[]:J.find.matches(t,J.grep(e,function(t){return 1===t.nodeType}))},J.fn.extend({find:function(t){var e,r=this.length,n=[],i=this;if("string"!=typeof t)return this.pushStack(J(t).filter(function(){for(e=0;r>e;e++)if(J.contains(i[e],this))return!0}));for(e=0;r>e;e++)J.find(t,i[e],n);return n=this.pushStack(r>1?J.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&ot.test(t)?J(t):t||[],!1).length}});var ut,ht=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,lt=J.fn.init=function(t,e){var r,n;if(!t)return this;if("string"==typeof t){if(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ht.exec(t),!r||!r[1]&&e)return!e||e.jquery?(e||ut).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof J?e[0]:e,J.merge(this,J.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:Q,!0)),at.test(r[1])&&J.isPlainObject(e))for(r in e)J.isFunction(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return n=Q.getElementById(r[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=Q,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):J.isFunction(t)?"undefined"!=typeof ut.ready?ut.ready(t):t(J):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),J.makeArray(t,this))};lt.prototype=J.fn,ut=J(Q);var ct=/^(?:parents|prev(?:Until|All))/,ft={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(t,e,r){for(var n=[],i=void 0!==r;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&J(t).is(r))break;n.push(t)}return n},sibling:function(t,e){for(var r=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&r.push(t);return r}}),J.fn.extend({has:function(t){var e=J(t,this),r=e.length;return this.filter(function(){for(var t=0;r>t;t++)if(J.contains(this,e[t]))return!0})},closest:function(t,e){for(var r,n=0,i=this.length,o=[],a=ot.test(t)||"string"!=typeof t?J(t,e||this.context):0;i>n;n++)for(r=this[n];r&&r!==e;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&J.find.matchesSelector(r,t))){o.push(r);break}return this.pushStack(o.length>1?J.unique(o):o)},index:function(t){return t?"string"==typeof t?X.call(J(t),this[0]):X.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(J.unique(J.merge(this.get(),J(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),J.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return J.dir(t,"parentNode")},parentsUntil:function(t,e,r){return J.dir(t,"parentNode",r)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return J.dir(t,"nextSibling")},prevAll:function(t){return J.dir(t,"previousSibling")},nextUntil:function(t,e,r){return J.dir(t,"nextSibling",r)},prevUntil:function(t,e,r){return J.dir(t,"previousSibling",r)},siblings:function(t){return J.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return J.sibling(t.firstChild)},contents:function(t){return t.contentDocument||J.merge([],t.childNodes)}},function(t,e){J.fn[t]=function(r,n){var i=J.map(this,e,r);return"Until"!==t.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=J.filter(n,i)),this.length>1&&(ft[t]||J.unique(i),ct.test(t)&&i.reverse()),this.pushStack(i)}});var pt=/\S+/g,dt={};J.Callbacks=function(t){t="string"==typeof t?dt[t]||o(t):J.extend({},t);var e,r,n,i,a,s,u=[],h=!t.once&&[],l=function(o){for(e=t.memory&&o,r=!0,s=i||0,i=0,a=u.length,n=!0;u&&a>s;s++)if(u[s].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}n=!1,u&&(h?h.length&&l(h.shift()):e?u=[]:c.disable())},c={add:function(){if(u){var r=u.length;!function o(e){J.each(e,function(e,r){var n=J.type(r);"function"===n?t.unique&&c.has(r)||u.push(r):r&&r.length&&"string"!==n&&o(r)})}(arguments),n?a=u.length:e&&(i=r,l(e))}return this},remove:function(){return u&&J.each(arguments,function(t,e){for(var r;(r=J.inArray(e,u,r))>-1;)u.splice(r,1),n&&(a>=r&&a--,s>=r&&s--)}),this},has:function(t){return t?J.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],a=0,this},disable:function(){return u=h=e=void 0,this},disabled:function(){return!u},lock:function(){return h=void 0,e||c.disable(),this},locked:function(){return!h},fireWith:function(t,e){return!u||r&&!h||(e=e||[],e=[t,e.slice?e.slice():e],n?h.push(e):l(e)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},J.extend({Deferred:function(t){var e=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],r="pending",n={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return J.Deferred(function(r){J.each(e,function(e,o){var a=J.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&J.isFunction(t.promise)?t.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===n?r.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?J.extend(t,n):n}},i={};return n.pipe=n.then,J.each(e,function(t,o){var a=o[2],s=o[3];n[o[1]]=a.add,s&&a.add(function(){r=s},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?n:this,arguments),this},i[o[0]+"With"]=a.fireWith}),n.promise(i),t&&t.call(i,i),i},when:function(t){var e,r,n,i=0,o=j.call(arguments),a=o.length,s=1!==a||t&&J.isFunction(t.promise)?a:0,u=1===s?t:J.Deferred(),h=function(t,r,n){return function(i){r[t]=this,n[t]=arguments.length>1?j.call(arguments):i,n===e?u.notifyWith(r,n):--s||u.resolveWith(r,n)}};if(a>1)for(e=new Array(a),r=new Array(a),n=new Array(a);a>i;i++)o[i]&&J.isFunction(o[i].promise)?o[i].promise().done(h(i,n,o)).fail(u.reject).progress(h(i,r,e)):--s;return s||u.resolveWith(n,o),u.promise()}});var mt;J.fn.ready=function(t){return J.ready.promise().done(t),this},J.extend({isReady:!1,readyWait:1,holdReady:function(t){t?J.readyWait++:J.ready(!0)},ready:function(t){(t===!0?--J.readyWait:J.isReady)||(J.isReady=!0,t!==!0&&--J.readyWait>0||(mt.resolveWith(Q,[J]),J.fn.triggerHandler&&(J(Q).triggerHandler("ready"),J(Q).off("ready"))))}}),J.ready.promise=function(e){return mt||(mt=J.Deferred(),"complete"===Q.readyState?setTimeout(J.ready):(Q.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1))),mt.promise(e)},J.ready.promise();var gt=J.access=function(t,e,r,n,i,o,a){var s=0,u=t.length,h=null==r;if("object"===J.type(r)){i=!0;for(s in r)J.access(t,e,s,r[s],!0,o,a)}else if(void 0!==n&&(i=!0,J.isFunction(n)||(a=!0),h&&(a?(e.call(t,n),e=null):(h=e,e=function(t,e,r){return h.call(J(t),r)})),e))for(;u>s;s++)e(t[s],r,a?n:n.call(t[s],s,e(t[s],r)));return i?t:h?e.call(t):u?e(t[0],r):o};J.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},s.uid=1,s.accepts=J.acceptData,s.prototype={key:function(t){if(!s.accepts(t))return 0;var e={},r=t[this.expando];if(!r){r=s.uid++;try{e[this.expando]={value:r},Object.defineProperties(t,e)}catch(n){e[this.expando]=r,J.extend(t,e)}}return this.cache[r]||(this.cache[r]={}),r},set:function(t,e,r){var n,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=r;else if(J.isEmptyObject(o))J.extend(this.cache[i],e);else for(n in e)o[n]=e[n];return o},get:function(t,e){var r=this.cache[this.key(t)];return void 0===e?r:r[e]},access:function(t,e,r){var n;return void 0===e||e&&"string"==typeof e&&void 0===r?(n=this.get(t,e),void 0!==n?n:this.get(t,J.camelCase(e))):(this.set(t,e,r),void 0!==r?r:e)},remove:function(t,e){var r,n,i,o=this.key(t),a=this.cache[o];if(void 0===e)this.cache[o]={};else{J.isArray(e)?n=e.concat(e.map(J.camelCase)):(i=J.camelCase(e),e in a?n=[e,i]:(n=i,n=n in a?[n]:n.match(pt)||[])),r=n.length;for(;r--;)delete a[n[r]]}},hasData:function(t){return!J.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var vt=new s,Et=new s,yt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xt=/([A-Z])/g;J.extend({hasData:function(t){return Et.hasData(t)||vt.hasData(t)},data:function(t,e,r){return Et.access(t,e,r)},removeData:function(t,e){Et.remove(t,e)},_data:function(t,e,r){return vt.access(t,e,r)},_removeData:function(t,e){vt.remove(t,e)}}),J.fn.extend({data:function(t,e){var r,n,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=Et.get(o),1===o.nodeType&&!vt.get(o,"hasDataAttrs"))){for(r=a.length;r--;)a[r]&&(n=a[r].name,0===n.indexOf("data-")&&(n=J.camelCase(n.slice(5)),u(o,n,i[n])));vt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){Et.set(this,t)}):gt(this,function(e){var r,n=J.camelCase(t);if(o&&void 0===e){if(r=Et.get(o,t),void 0!==r)return r;if(r=Et.get(o,n),void 0!==r)return r;if(r=u(o,n,void 0),void 0!==r)return r}else this.each(function(){var r=Et.get(this,n);Et.set(this,n,e),-1!==t.indexOf("-")&&void 0!==r&&Et.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Et.remove(this,t)})}}),J.extend({queue:function(t,e,r){var n;return t?(e=(e||"fx")+"queue",n=vt.get(t,e),r&&(!n||J.isArray(r)?n=vt.access(t,e,J.makeArray(r)):n.push(r)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var r=J.queue(t,e),n=r.length,i=r.shift(),o=J._queueHooks(t,e),a=function(){J.dequeue(t,e)};"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===e&&r.unshift("inprogress"),delete o.stop,i.call(t,a,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var r=e+"queueHooks";return vt.get(t,r)||vt.access(t,r,{empty:J.Callbacks("once memory").add(function(){vt.remove(t,[e+"queue",r])})})}}),J.fn.extend({queue:function(t,e){var r=2;return"string"!=typeof t&&(e=t,t="fx",r--),arguments.length<r?J.queue(this[0],t):void 0===e?this:this.each(function(){var r=J.queue(this,t,e);J._queueHooks(this,t),"fx"===t&&"inprogress"!==r[0]&&J.dequeue(this,t)})},dequeue:function(t){return this.each(function(){J.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var r,n=1,i=J.Deferred(),o=this,a=this.length,s=function(){--n||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)r=vt.get(o[a],t+"queueHooks"),r&&r.empty&&(n++,r.empty.add(s));return s(),i.promise(e)}});var Tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Rt=["Top","Right","Bottom","Left"],bt=function(t,e){return t=e||t,"none"===J.css(t,"display")||!J.contains(t.ownerDocument,t)},_t=/^(?:checkbox|radio)$/i;!function(){var t=Q.createDocumentFragment(),e=t.appendChild(Q.createElement("div")),r=Q.createElement("input");r.setAttribute("type","radio"),r.setAttribute("checked","checked"),r.setAttribute("name","t"),e.appendChild(r),Z.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var wt="undefined";Z.focusinBubbles="onfocusin"in t;var Mt=/^key/,Ht=/^(?:mouse|pointer|contextmenu)|click/,St=/^(?:focusinfocus|focusoutblur)$/,Ct=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(t,e,r,n,i){var o,a,s,u,h,l,c,f,p,d,m,g=vt.get(t);if(g)for(r.handler&&(o=r,r=o.handler,i=o.selector),r.guid||(r.guid=J.guid++),(u=g.events)||(u=g.events={}),(a=g.handle)||(a=g.handle=function(e){return typeof J!==wt&&J.event.triggered!==e.type?J.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(pt)||[""],h=e.length;h--;)s=Ct.exec(e[h])||[],p=m=s[1],d=(s[2]||"").split(".").sort(),p&&(c=J.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,c=J.event.special[p]||{},l=J.extend({type:p,origType:m,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&J.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=u[p])||(f=u[p]=[],f.delegateCount=0,c.setup&&c.setup.call(t,n,d,a)!==!1||t.addEventListener&&t.addEventListener(p,a,!1)),c.add&&(c.add.call(t,l),l.handler.guid||(l.handler.guid=r.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),J.event.global[p]=!0)},remove:function(t,e,r,n,i){var o,a,s,u,h,l,c,f,p,d,m,g=vt.hasData(t)&&vt.get(t);if(g&&(u=g.events)){for(e=(e||"").match(pt)||[""],h=e.length;h--;)if(s=Ct.exec(e[h])||[],p=m=s[1],d=(s[2]||"").split(".").sort(),p){for(c=J.event.special[p]||{},p=(n?c.delegateType:c.bindType)||p,f=u[p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)l=f[o],!i&&m!==l.origType||r&&r.guid!==l.guid||s&&!s.test(l.namespace)||n&&n!==l.selector&&("**"!==n||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,c.remove&&c.remove.call(t,l));a&&!f.length&&(c.teardown&&c.teardown.call(t,d,g.handle)!==!1||J.removeEvent(t,p,g.handle),delete u[p])}else for(p in u)J.event.remove(t,p+e[h],r,n,!0);J.isEmptyObject(u)&&(delete g.handle,vt.remove(t,"events"))}},trigger:function(e,r,n,i){var o,a,s,u,h,l,c,f=[n||Q],p=K.call(e,"type")?e.type:e,d=K.call(e,"namespace")?e.namespace.split("."):[];if(a=s=n=n||Q,3!==n.nodeType&&8!==n.nodeType&&!St.test(p+J.event.triggered)&&(p.indexOf(".")>=0&&(d=p.split("."),p=d.shift(),d.sort()),h=p.indexOf(":")<0&&"on"+p,e=e[J.expando]?e:new J.Event(p,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=d.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),
r=null==r?[e]:J.makeArray(r,[e]),c=J.event.special[p]||{},i||!c.trigger||c.trigger.apply(n,r)!==!1)){if(!i&&!c.noBubble&&!J.isWindow(n)){for(u=c.delegateType||p,St.test(u+p)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(n.ownerDocument||Q)&&f.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=f[o++])&&!e.isPropagationStopped();)e.type=o>1?u:c.bindType||p,l=(vt.get(a,"events")||{})[e.type]&&vt.get(a,"handle"),l&&l.apply(a,r),l=h&&a[h],l&&l.apply&&J.acceptData(a)&&(e.result=l.apply(a,r),e.result===!1&&e.preventDefault());return e.type=p,i||e.isDefaultPrevented()||c._default&&c._default.apply(f.pop(),r)!==!1||!J.acceptData(n)||h&&J.isFunction(n[p])&&!J.isWindow(n)&&(s=n[h],s&&(n[h]=null),J.event.triggered=p,n[p](),J.event.triggered=void 0,s&&(n[h]=s)),e.result}},dispatch:function(t){t=J.event.fix(t);var e,r,n,i,o,a=[],s=j.call(arguments),u=(vt.get(this,"events")||{})[t.type]||[],h=J.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,t)!==!1){for(a=J.event.handlers.call(this,t,u),e=0;(i=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,r=0;(o=i.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,n=((J.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,e){var r,n,i,o,a=[],s=e.delegateCount,u=t.target;if(s&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==t.type){for(n=[],r=0;s>r;r++)o=e[r],i=o.selector+" ",void 0===n[i]&&(n[i]=o.needsContext?J(i,this).index(u)>=0:J.find(i,this,null,[u]).length),n[i]&&n.push(o);n.length&&a.push({elem:u,handlers:n})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var r,n,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(r=t.target.ownerDocument||Q,n=r.documentElement,i=r.body,t.pageX=e.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[J.expando])return t;var e,r,n,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Ht.test(i)?this.mouseHooks:Mt.test(i)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,t=new J.Event(o),e=n.length;e--;)r=n[e],t[r]=o[r];return t.target||(t.target=Q),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&J.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return J.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,r,n){var i=J.extend(new J.Event,r,{type:t,isSimulated:!0,originalEvent:{}});n?J.event.trigger(i,null,e):J.event.dispatch.call(e,i),i.isDefaultPrevented()&&r.preventDefault()}},J.removeEvent=function(t,e,r){t.removeEventListener&&t.removeEventListener(e,r,!1)},J.Event=function(t,e){return this instanceof J.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?h:l):this.type=t,e&&J.extend(this,e),this.timeStamp=t&&t.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(t,e)},J.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=h,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=h,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=h,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){J.event.special[t]={delegateType:e,bindType:e,handle:function(t){var r,n=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==n&&!J.contains(n,i))&&(t.type=o.origType,r=o.handler.apply(this,arguments),t.type=e),r}}}),Z.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(t,e){var r=function(t){J.event.simulate(e,t.target,J.event.fix(t),!0)};J.event.special[e]={setup:function(){var n=this.ownerDocument||this,i=vt.access(n,e);i||n.addEventListener(t,r,!0),vt.access(n,e,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=vt.access(n,e)-1;i?vt.access(n,e,i):(n.removeEventListener(t,r,!0),vt.remove(n,e))}}}),J.fn.extend({on:function(t,e,r,n,i){var o,a;if("object"==typeof t){"string"!=typeof e&&(r=r||e,e=void 0);for(a in t)this.on(a,e,r,t[a],i);return this}if(null==r&&null==n?(n=e,r=e=void 0):null==n&&("string"==typeof e?(n=r,r=void 0):(n=r,r=e,e=void 0)),n===!1)n=l;else if(!n)return this;return 1===i&&(o=n,n=function(t){return J().off(t),o.apply(this,arguments)},n.guid=o.guid||(o.guid=J.guid++)),this.each(function(){J.event.add(this,t,n,r,e)})},one:function(t,e,r,n){return this.on(t,e,r,n,1)},off:function(t,e,r){var n,i;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,J(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(e===!1||"function"==typeof e)&&(r=e,e=void 0),r===!1&&(r=l),this.each(function(){J.event.remove(this,t,r,e)})},trigger:function(t,e){return this.each(function(){J.event.trigger(t,e,this)})},triggerHandler:function(t,e){var r=this[0];return r?J.event.trigger(t,e,r,!0):void 0}});var At=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Lt=/<([\w:]+)/,Pt=/<|&#?\w+;/,Ft=/<(?:script|style|link)/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^$|\/(?:java|ecma)script/i,Ot=/^true\/(.*)/,Nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,kt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};kt.optgroup=kt.option,kt.tbody=kt.tfoot=kt.colgroup=kt.caption=kt.thead,kt.th=kt.td,J.extend({clone:function(t,e,r){var n,i,o,a,s=t.cloneNode(!0),u=J.contains(t.ownerDocument,t);if(!(Z.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||J.isXMLDoc(t)))for(a=v(s),o=v(t),n=0,i=o.length;i>n;n++)E(o[n],a[n]);if(e)if(r)for(o=o||v(t),a=a||v(s),n=0,i=o.length;i>n;n++)g(o[n],a[n]);else g(t,s);return a=v(s,"script"),a.length>0&&m(a,!u&&v(t,"script")),s},buildFragment:function(t,e,r,n){for(var i,o,a,s,u,h,l=e.createDocumentFragment(),c=[],f=0,p=t.length;p>f;f++)if(i=t[f],i||0===i)if("object"===J.type(i))J.merge(c,i.nodeType?[i]:i);else if(Pt.test(i)){for(o=o||l.appendChild(e.createElement("div")),a=(Lt.exec(i)||["",""])[1].toLowerCase(),s=kt[a]||kt._default,o.innerHTML=s[1]+i.replace(At,"<$1></$2>")+s[2],h=s[0];h--;)o=o.lastChild;J.merge(c,o.childNodes),o=l.firstChild,o.textContent=""}else c.push(e.createTextNode(i));for(l.textContent="",f=0;i=c[f++];)if((!n||-1===J.inArray(i,n))&&(u=J.contains(i.ownerDocument,i),o=v(l.appendChild(i),"script"),u&&m(o),r))for(h=0;i=o[h++];)Bt.test(i.type||"")&&r.push(i);return l},cleanData:function(t){for(var e,r,n,i,o=J.event.special,a=0;void 0!==(r=t[a]);a++){if(J.acceptData(r)&&(i=r[vt.expando],i&&(e=vt.cache[i]))){if(e.events)for(n in e.events)o[n]?J.event.remove(r,n):J.removeEvent(r,n,e.handle);vt.cache[i]&&delete vt.cache[i]}delete Et.cache[r[Et.expando]]}}}),J.fn.extend({text:function(t){return gt(this,function(t){return void 0===t?J.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var r,n=t?J.filter(t,this):this,i=0;null!=(r=n[i]);i++)e||1!==r.nodeType||J.cleanData(v(r)),r.parentNode&&(e&&J.contains(r.ownerDocument,r)&&m(v(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(J.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return J.clone(this,t,e)})},html:function(t){return gt(this,function(t){var e=this[0]||{},r=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ft.test(t)&&!kt[(Lt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(At,"<$1></$2>");try{for(;n>r;r++)e=this[r]||{},1===e.nodeType&&(J.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,J.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=G.apply([],t);var r,n,i,o,a,s,u=0,h=this.length,l=this,c=h-1,f=t[0],m=J.isFunction(f);if(m||h>1&&"string"==typeof f&&!Z.checkClone&&Dt.test(f))return this.each(function(r){var n=l.eq(r);m&&(t[0]=f.call(this,r,n.html())),n.domManip(t,e)});if(h&&(r=J.buildFragment(t,this[0].ownerDocument,!1,this),n=r.firstChild,1===r.childNodes.length&&(r=n),n)){for(i=J.map(v(r,"script"),p),o=i.length;h>u;u++)a=r,u!==c&&(a=J.clone(a,!0,!0),o&&J.merge(i,v(a,"script"))),e.call(this[u],a,u);if(o)for(s=i[i.length-1].ownerDocument,J.map(i,d),u=0;o>u;u++)a=i[u],Bt.test(a.type||"")&&!vt.access(a,"globalEval")&&J.contains(s,a)&&(a.src?J._evalUrl&&J._evalUrl(a.src):J.globalEval(a.textContent.replace(Nt,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){J.fn[t]=function(t){for(var r,n=[],i=J(t),o=i.length-1,a=0;o>=a;a++)r=a===o?this:this.clone(!0),J(i[a])[e](r),W.apply(n,r.get());return this.pushStack(n)}});var Ut,It={},zt=/^margin/,Vt=new RegExp("^("+Tt+")(?!px)[a-z%]+$","i"),jt=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",i.appendChild(o);var e=t.getComputedStyle(a,null);r="1%"!==e.top,n="4px"===e.width,i.removeChild(o)}var r,n,i=Q.documentElement,o=Q.createElement("div"),a=Q.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),t.getComputedStyle&&J.extend(Z,{pixelPosition:function(){return e(),r},boxSizingReliable:function(){return null==n&&e(),n},reliableMarginRight:function(){var e,r=a.appendChild(Q.createElement("div"));return r.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",a.style.width="1px",i.appendChild(o),e=!parseFloat(t.getComputedStyle(r,null).marginRight),i.removeChild(o),a.removeChild(r),e}}))}(),J.swap=function(t,e,r,n){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];i=r.apply(t,n||[]);for(o in e)t.style[o]=a[o];return i};var Gt=/^(none|table(?!-c[ea]).+)/,Wt=new RegExp("^("+Tt+")(.*)$","i"),Xt=new RegExp("^([+-])=("+Tt+")","i"),qt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:"0",fontWeight:"400"},Kt=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(t,e){if(e){var r=T(t,"opacity");return""===r?"1":r}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,r,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=J.camelCase(e),u=t.style;return e=J.cssProps[s]||(J.cssProps[s]=b(u,s)),a=J.cssHooks[e]||J.cssHooks[s],void 0===r?a&&"get"in a&&void 0!==(i=a.get(t,!1,n))?i:u[e]:(o=typeof r,"string"===o&&(i=Xt.exec(r))&&(r=(i[1]+1)*i[2]+parseFloat(J.css(t,e)),o="number"),null!=r&&r===r&&("number"!==o||J.cssNumber[s]||(r+="px"),Z.clearCloneStyle||""!==r||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(r=a.set(t,r,n))||(u[e]=r)),void 0)}},css:function(t,e,r,n){var i,o,a,s=J.camelCase(e);return e=J.cssProps[s]||(J.cssProps[s]=b(t.style,s)),a=J.cssHooks[e]||J.cssHooks[s],a&&"get"in a&&(i=a.get(t,!0,r)),void 0===i&&(i=T(t,e,n)),"normal"===i&&e in Yt&&(i=Yt[e]),""===r||r?(o=parseFloat(i),r===!0||J.isNumeric(o)?o||0:i):i}}),J.each(["height","width"],function(t,e){J.cssHooks[e]={get:function(t,r,n){return r?Gt.test(J.css(t,"display"))&&0===t.offsetWidth?J.swap(t,qt,function(){return M(t,e,n)}):M(t,e,n):void 0},set:function(t,r,n){var i=n&&jt(t);return _(t,r,n?w(t,e,n,"border-box"===J.css(t,"boxSizing",!1,i),i):0)}}}),J.cssHooks.marginRight=R(Z.reliableMarginRight,function(t,e){return e?J.swap(t,{display:"inline-block"},T,[t,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(t,e){J.cssHooks[t+e]={expand:function(r){for(var n=0,i={},o="string"==typeof r?r.split(" "):[r];4>n;n++)i[t+Rt[n]+e]=o[n]||o[n-2]||o[0];return i}},zt.test(t)||(J.cssHooks[t+e].set=_)}),J.fn.extend({css:function(t,e){return gt(this,function(t,e,r){var n,i,o={},a=0;if(J.isArray(e)){for(n=jt(t),i=e.length;i>a;a++)o[e[a]]=J.css(t,e[a],!1,n);return o}return void 0!==r?J.style(t,e,r):J.css(t,e)},t,e,arguments.length>1)},show:function(){return H(this,!0)},hide:function(){return H(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){bt(this)?J(this).show():J(this).hide()})}}),J.Tween=S,S.prototype={constructor:S,init:function(t,e,r,n,i,o){this.elem=t,this.prop=r,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(J.cssNumber[r]?"":"px")},cur:function(){var t=S.propHooks[this.prop];return t&&t.get?t.get(this):S.propHooks._default.get(this)},run:function(t){var e,r=S.propHooks[this.prop];return this.pos=e=this.options.duration?J.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):S.propHooks._default.set(this),this}},S.prototype.init.prototype=S.prototype,S.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=J.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){J.fx.step[t.prop]?J.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[J.cssProps[t.prop]]||J.cssHooks[t.prop])?J.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},S.propHooks.scrollTop=S.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},J.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},J.fx=S.prototype.init,J.fx.step={};var Zt,Qt,$t=/^(?:toggle|show|hide)$/,Jt=new RegExp("^(?:([+-])=|)("+Tt+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[P],re={"*":[function(t,e){var r=this.createTween(t,e),n=r.cur(),i=Jt.exec(e),o=i&&i[3]||(J.cssNumber[t]?"":"px"),a=(J.cssNumber[t]||"px"!==o&&+n)&&Jt.exec(J.css(r.elem,t)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+n||1;do s=s||".5",a/=s,J.style(r.elem,t,a+o);while(s!==(s=r.cur()/n)&&1!==s&&--u)}return i&&(a=r.start=+a||+n||0,r.unit=o,r.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),r}]};J.Animation=J.extend(D,{tweener:function(t,e){J.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var r,n=0,i=t.length;i>n;n++)r=t[n],re[r]=re[r]||[],re[r].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),J.speed=function(t,e,r){var n=t&&"object"==typeof t?J.extend({},t):{complete:r||!r&&e||J.isFunction(t)&&t,duration:t,easing:r&&e||e&&!J.isFunction(e)&&e};return n.duration=J.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in J.fx.speeds?J.fx.speeds[n.duration]:J.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){J.isFunction(n.old)&&n.old.call(this),n.queue&&J.dequeue(this,n.queue)},n},J.fn.extend({fadeTo:function(t,e,r,n){return this.filter(bt).css("opacity",0).show().end().animate({opacity:e},t,r,n)},animate:function(t,e,r,n){var i=J.isEmptyObject(t),o=J.speed(e,r,n),a=function(){var e=D(this,J.extend({},t),o);(i||vt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,r){var n=function(t){var e=t.stop;delete t.stop,e(r)};return"string"!=typeof t&&(r=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=J.timers,a=vt.get(this);if(i)a[i]&&a[i].stop&&n(a[i]);else for(i in a)a[i]&&a[i].stop&&te.test(i)&&n(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(r),e=!1,o.splice(i,1));(e||!r)&&J.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,r=vt.get(this),n=r[t+"queue"],i=r[t+"queueHooks"],o=J.timers,a=n?n.length:0;for(r.finish=!0,J.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete r.finish})}}),J.each(["toggle","show","hide"],function(t,e){var r=J.fn[e];J.fn[e]=function(t,n,i){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(A(e,!0),t,n,i)}}),J.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){J.fn[t]=function(t,r,n){return this.animate(e,t,r,n)}}),J.timers=[],J.fx.tick=function(){var t,e=0,r=J.timers;for(Zt=J.now();e<r.length;e++)t=r[e],t()||r[e]!==t||r.splice(e--,1);r.length||J.fx.stop(),Zt=void 0},J.fx.timer=function(t){J.timers.push(t),t()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Qt||(Qt=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Qt),Qt=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(t,e){return t=J.fx?J.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,r){var n=setTimeout(e,t);r.stop=function(){clearTimeout(n)}})},function(){var t=Q.createElement("input"),e=Q.createElement("select"),r=e.appendChild(Q.createElement("option"));t.type="checkbox",Z.checkOn=""!==t.value,Z.optSelected=r.selected,e.disabled=!0,Z.optDisabled=!r.disabled,t=Q.createElement("input"),t.value="t",t.type="radio",Z.radioValue="t"===t.value}();var ne,ie,oe=J.expr.attrHandle;J.fn.extend({attr:function(t,e){return gt(this,J.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){J.removeAttr(this,t)})}}),J.extend({attr:function(t,e,r){var n,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===wt?J.prop(t,e,r):(1===o&&J.isXMLDoc(t)||(e=e.toLowerCase(),n=J.attrHooks[e]||(J.expr.match.bool.test(e)?ie:ne)),void 0===r?n&&"get"in n&&null!==(i=n.get(t,e))?i:(i=J.find.attr(t,e),null==i?void 0:i):null!==r?n&&"set"in n&&void 0!==(i=n.set(t,r,e))?i:(t.setAttribute(e,r+""),r):void J.removeAttr(t,e))},removeAttr:function(t,e){var r,n,i=0,o=e&&e.match(pt);if(o&&1===t.nodeType)for(;r=o[i++];)n=J.propFix[r]||r,J.expr.match.bool.test(r)&&(t[n]=!1),t.removeAttribute(r)},attrHooks:{type:{set:function(t,e){if(!Z.radioValue&&"radio"===e&&J.nodeName(t,"input")){var r=t.value;return t.setAttribute("type",e),r&&(t.value=r),e}}}}}),ie={set:function(t,e,r){return e===!1?J.removeAttr(t,r):t.setAttribute(r,r),r}},J.each(J.expr.match.bool.source.match(/\w+/g),function(t,e){var r=oe[e]||J.find.attr;oe[e]=function(t,e,n){var i,o;return n||(o=oe[e],oe[e]=i,i=null!=r(t,e,n)?e.toLowerCase():null,oe[e]=o),i}});var ae=/^(?:input|select|textarea|button)$/i;J.fn.extend({prop:function(t,e){return gt(this,J.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[J.propFix[t]||t]})}}),J.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,r){var n,i,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!J.isXMLDoc(t),o&&(e=J.propFix[e]||e,i=J.propHooks[e]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(t,r,e))?n:t[e]=r:i&&"get"in i&&null!==(n=i.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ae.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Z.optSelected||(J.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this});var se=/[\t\r\n\f]/g;J.fn.extend({addClass:function(t){var e,r,n,i,o,a,s="string"==typeof t&&t,u=0,h=this.length;if(J.isFunction(t))return this.each(function(e){J(this).addClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(pt)||[];h>u;u++)if(r=this[u],n=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(se," "):" ")){for(o=0;i=e[o++];)n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=J.trim(n),r.className!==a&&(r.className=a)}return this},removeClass:function(t){var e,r,n,i,o,a,s=0===arguments.length||"string"==typeof t&&t,u=0,h=this.length;if(J.isFunction(t))return this.each(function(e){J(this).removeClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(pt)||[];h>u;u++)if(r=this[u],n=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(se," "):"")){for(o=0;i=e[o++];)for(;n.indexOf(" "+i+" ")>=0;)n=n.replace(" "+i+" "," ");a=t?J.trim(n):"",r.className!==a&&(r.className=a)}return this},toggleClass:function(t,e){var r=typeof t;return"boolean"==typeof e&&"string"===r?e?this.addClass(t):this.removeClass(t):this.each(J.isFunction(t)?function(r){J(this).toggleClass(t.call(this,r,this.className,e),e)}:function(){if("string"===r)for(var e,n=0,i=J(this),o=t.match(pt)||[];e=o[n++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else(r===wt||"boolean"===r)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",r=0,n=this.length;n>r;r++)if(1===this[r].nodeType&&(" "+this[r].className+" ").replace(se," ").indexOf(e)>=0)return!0;return!1}});var ue=/\r/g;J.fn.extend({val:function(t){var e,r,n,i=this[0];{if(arguments.length)return n=J.isFunction(t),this.each(function(r){var i;1===this.nodeType&&(i=n?t.call(this,r,J(this).val()):t,null==i?i="":"number"==typeof i?i+="":J.isArray(i)&&(i=J.map(i,function(t){return null==t?"":t+""})),e=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))});if(i)return e=J.valHooks[i.type]||J.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(r=e.get(i,"value"))?r:(r=i.value,"string"==typeof r?r.replace(ue,""):null==r?"":r)}}}),J.extend({valHooks:{option:{get:function(t){var e=J.find.attr(t,"value");return null!=e?e:J.trim(J.text(t))}},select:{get:function(t){for(var e,r,n=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,a=o?null:[],s=o?i+1:n.length,u=0>i?s:o?i:0;s>u;u++)if(r=n[u],!(!r.selected&&u!==i||(Z.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&J.nodeName(r.parentNode,"optgroup"))){if(e=J(r).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var r,n,i=t.options,o=J.makeArray(e),a=i.length;a--;)n=i[a],(n.selected=J.inArray(n.value,o)>=0)&&(r=!0);return r||(t.selectedIndex=-1),o}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(t,e){return J.isArray(e)?t.checked=J.inArray(J(t).val(),e)>=0:void 0}},Z.checkOn||(J.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){J.fn[e]=function(t,r){return arguments.length>0?this.on(e,null,t,r):this.trigger(e)}}),J.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,r){return this.on(t,null,e,r)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,r,n){return this.on(e,t,r,n)},undelegate:function(t,e,r){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",r)}});var he=J.now(),le=/\?/;J.parseJSON=function(t){return JSON.parse(t+"")},J.parseXML=function(t){var e,r;if(!t||"string"!=typeof t)return null;try{r=new DOMParser,e=r.parseFromString(t,"text/xml")}catch(n){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+t),e};var ce=/#.*$/,fe=/([?&])_=[^&]*/,pe=/^(.*?):[ \t]*([^\r\n]*)$/gm,de=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,me=/^(?:GET|HEAD)$/,ge=/^\/\//,ve=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ee={},ye={},xe="*/".concat("*"),Te=t.location.href,Re=ve.exec(Te.toLowerCase())||[];J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Te,type:"GET",isLocal:de.test(Re[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?N(N(t,J.ajaxSettings),e):N(J.ajaxSettings,t)},ajaxPrefilter:B(Ee),ajaxTransport:B(ye),ajax:function(t,e){function r(t,e,r,a){var u,l,v,E,x,R=e;2!==y&&(y=2,s&&clearTimeout(s),n=void 0,o=a||"",T.readyState=t>0?4:0,u=t>=200&&300>t||304===t,r&&(E=k(c,T,r)),E=U(c,E,T,u),u?(c.ifModified&&(x=T.getResponseHeader("Last-Modified"),x&&(J.lastModified[i]=x),x=T.getResponseHeader("etag"),x&&(J.etag[i]=x)),204===t||"HEAD"===c.type?R="nocontent":304===t?R="notmodified":(R=E.state,l=E.data,v=E.error,u=!v)):(v=R,(t||!R)&&(R="error",0>t&&(t=0))),T.status=t,T.statusText=(e||R)+"",u?d.resolveWith(f,[l,R,T]):d.rejectWith(f,[T,R,v]),T.statusCode(g),g=void 0,h&&p.trigger(u?"ajaxSuccess":"ajaxError",[T,c,u?l:v]),m.fireWith(f,[T,R]),h&&(p.trigger("ajaxComplete",[T,c]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,a,s,u,h,l,c=J.ajaxSetup({},e),f=c.context||c,p=c.context&&(f.nodeType||f.jquery)?J(f):J.event,d=J.Deferred(),m=J.Callbacks("once memory"),g=c.statusCode||{},v={},E={},y=0,x="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!a)for(a={};e=pe.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(t,e){var r=t.toLowerCase();return y||(t=E[r]=E[r]||t,v[t]=e),this},overrideMimeType:function(t){return y||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)g[e]=[g[e],t[e]];else T.always(t[T.status]);return this},abort:function(t){var e=t||x;return n&&n.abort(e),r(0,e),this}};if(d.promise(T).complete=m.add,T.success=T.done,T.error=T.fail,c.url=((t||c.url||Te)+"").replace(ce,"").replace(ge,Re[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=J.trim(c.dataType||"*").toLowerCase().match(pt)||[""],null==c.crossDomain&&(u=ve.exec(c.url.toLowerCase()),c.crossDomain=!(!u||u[1]===Re[1]&&u[2]===Re[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(Re[3]||("http:"===Re[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=J.param(c.data,c.traditional)),O(Ee,c,e,T),2===y)return T;h=J.event&&c.global,h&&0===J.active++&&J.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!me.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(le.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=fe.test(i)?i.replace(fe,"$1_="+he++):i+(le.test(i)?"&":"?")+"_="+he++)),c.ifModified&&(J.lastModified[i]&&T.setRequestHeader("If-Modified-Since",J.lastModified[i]),J.etag[i]&&T.setRequestHeader("If-None-Match",J.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||e.contentType)&&T.setRequestHeader("Content-Type",c.contentType),T.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+xe+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)T.setRequestHeader(l,c.headers[l]);if(c.beforeSend&&(c.beforeSend.call(f,T,c)===!1||2===y))return T.abort();x="abort";for(l in{success:1,error:1,complete:1})T[l](c[l]);if(n=O(ye,c,e,T)){T.readyState=1,h&&p.trigger("ajaxSend",[T,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){T.abort("timeout")},c.timeout));try{y=1,n.send(v,r)}catch(R){if(!(2>y))throw R;r(-1,R)}}else r(-1,"No Transport");return T},getJSON:function(t,e,r){return J.get(t,e,r,"json")},getScript:function(t,e){return J.get(t,void 0,e,"script")}}),J.each(["get","post"],function(t,e){J[e]=function(t,r,n,i){return J.isFunction(r)&&(i=i||n,n=r,r=void 0),J.ajax({url:t,type:e,dataType:i,data:r,success:n})}}),J._evalUrl=function(t){return J.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},J.fn.extend({wrapAll:function(t){var e;return J.isFunction(t)?this.each(function(e){J(this).wrapAll(t.call(this,e))}):(this[0]&&(e=J(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(J.isFunction(t)?function(e){J(this).wrapInner(t.call(this,e))}:function(){var e=J(this),r=e.contents();r.length?r.wrapAll(t):e.append(t)})},wrap:function(t){var e=J.isFunction(t);return this.each(function(r){J(this).wrapAll(e?t.call(this,r):t)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},J.expr.filters.visible=function(t){return!J.expr.filters.hidden(t)};var be=/%20/g,_e=/\[\]$/,we=/\r?\n/g,Me=/^(?:submit|button|image|reset|file)$/i,He=/^(?:input|select|textarea|keygen)/i;J.param=function(t,e){var r,n=[],i=function(t,e){e=J.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e);

};if(void 0===e&&(e=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(t)||t.jquery&&!J.isPlainObject(t))J.each(t,function(){i(this.name,this.value)});else for(r in t)I(r,t[r],e,i);return n.join("&").replace(be,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=J.prop(this,"elements");return t?J.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!J(this).is(":disabled")&&He.test(this.nodeName)&&!Me.test(t)&&(this.checked||!_t.test(t))}).map(function(t,e){var r=J(this).val();return null==r?null:J.isArray(r)?J.map(r,function(t){return{name:e.name,value:t.replace(we,"\r\n")}}):{name:e.name,value:r.replace(we,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Se=0,Ce={},Ae={0:200,1223:204},Le=J.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Ce)Ce[t]()}),Z.cors=!!Le&&"withCredentials"in Le,Z.ajax=Le=!!Le,J.ajaxTransport(function(t){var e;return Z.cors||Le&&!t.crossDomain?{send:function(r,n){var i,o=t.xhr(),a=++Se;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(i in r)o.setRequestHeader(i,r[i]);e=function(t){return function(){e&&(delete Ce[a],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?n(o.status,o.statusText):n(Ae[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Ce[a]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(s){if(e)throw s}},abort:function(){e&&e()}}:void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return J.globalEval(t),t}}}),J.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),J.ajaxTransport("script",function(t){if(t.crossDomain){var e,r;return{send:function(n,i){e=J("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",r=function(t){e.remove(),r=null,t&&i("error"===t.type?404:200,t.type)}),Q.head.appendChild(e[0])},abort:function(){r&&r()}}}});var Pe=[],Fe=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Pe.pop()||J.expando+"_"+he++;return this[t]=!0,t}}),J.ajaxPrefilter("json jsonp",function(e,r,n){var i,o,a,s=e.jsonp!==!1&&(Fe.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fe.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=J.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Fe,"$1"+i):e.jsonp!==!1&&(e.url+=(le.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||J.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},n.always(function(){t[i]=o,e[i]&&(e.jsonpCallback=r.jsonpCallback,Pe.push(i)),a&&J.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),J.parseHTML=function(t,e,r){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(r=e,e=!1),e=e||Q;var n=at.exec(t),i=!r&&[];return n?[e.createElement(n[1])]:(n=J.buildFragment([t],e,i),i&&i.length&&J(i).remove(),J.merge([],n.childNodes))};var De=J.fn.load;J.fn.load=function(t,e,r){if("string"!=typeof t&&De)return De.apply(this,arguments);var n,i,o,a=this,s=t.indexOf(" ");return s>=0&&(n=J.trim(t.slice(s)),t=t.slice(0,s)),J.isFunction(e)?(r=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&J.ajax({url:t,type:i,dataType:"html",data:e}).done(function(t){o=arguments,a.html(n?J("<div>").append(J.parseHTML(t)).find(n):t)}).complete(r&&function(t,e){a.each(r,o||[t.responseText,e,t])}),this},J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){J.fn[e]=function(t){return this.on(e,t)}}),J.expr.filters.animated=function(t){return J.grep(J.timers,function(e){return t===e.elem}).length};var Be=t.document.documentElement;J.offset={setOffset:function(t,e,r){var n,i,o,a,s,u,h,l=J.css(t,"position"),c=J(t),f={};"static"===l&&(t.style.position="relative"),s=c.offset(),o=J.css(t,"top"),u=J.css(t,"left"),h=("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1,h?(n=c.position(),a=n.top,i=n.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),J.isFunction(e)&&(e=e.call(t,r,s)),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+i),"using"in e?e.using.call(t,f):c.css(f)}},J.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){J.offset.setOffset(this,t,e)});var e,r,n=this[0],i={top:0,left:0},o=n&&n.ownerDocument;if(o)return e=o.documentElement,J.contains(e,n)?(typeof n.getBoundingClientRect!==wt&&(i=n.getBoundingClientRect()),r=z(o),{top:i.top+r.pageYOffset-e.clientTop,left:i.left+r.pageXOffset-e.clientLeft}):i},position:function(){if(this[0]){var t,e,r=this[0],n={top:0,left:0};return"fixed"===J.css(r,"position")?e=r.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),J.nodeName(t[0],"html")||(n=t.offset()),n.top+=J.css(t[0],"borderTopWidth",!0),n.left+=J.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-J.css(r,"marginTop",!0),left:e.left-n.left-J.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Be;t&&!J.nodeName(t,"html")&&"static"===J.css(t,"position");)t=t.offsetParent;return t||Be})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var n="pageYOffset"===r;J.fn[e]=function(i){return gt(this,function(e,i,o){var a=z(e);return void 0===o?a?a[r]:e[i]:void(a?a.scrollTo(n?t.pageXOffset:o,n?o:t.pageYOffset):e[i]=o)},e,i,arguments.length,null)}}),J.each(["top","left"],function(t,e){J.cssHooks[e]=R(Z.pixelPosition,function(t,r){return r?(r=T(t,e),Vt.test(r)?J(t).position()[e]+"px":r):void 0})}),J.each({Height:"height",Width:"width"},function(t,e){J.each({padding:"inner"+t,content:e,"":"outer"+t},function(r,n){J.fn[n]=function(n,i){var o=arguments.length&&(r||"boolean"!=typeof n),a=r||(n===!0||i===!0?"margin":"border");return gt(this,function(e,r,n){var i;return J.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===n?J.css(e,r,a):J.style(e,r,n,a)},e,o?n:void 0,o,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return J});var Oe=t.jQuery,Ne=t.$;return J.noConflict=function(e){return t.$===J&&(t.$=Ne),e&&t.jQuery===J&&(t.jQuery=Oe),J},typeof e===wt&&(t.jQuery=t.$=J),J});var THREE={REVISION:"70"};"object"==typeof module&&(module.exports=THREE),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:t>0?1:0}),THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.MinEquation=103,THREE.MaxEquation=104,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=300,THREE.CubeReflectionMapping=301,THREE.CubeRefractionMapping=302,THREE.EquirectangularReflectionMapping=303,THREE.EquirectangularRefractionMapping=304,THREE.SphericalReflectionMapping=305,THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGBEFormat=THREE.RGBAFormat,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.RGB_PVRTC_4BPPV1_Format=2100,THREE.RGB_PVRTC_2BPPV1_Format=2101,THREE.RGBA_PVRTC_4BPPV1_Format=2102,THREE.RGBA_PVRTC_2BPPV1_Format=2103,THREE.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(t,e){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},THREE.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},THREE.Color=function(t){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(t)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(t){return t instanceof THREE.Color?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,r){return this.r=t,this.g=e,this.b=r,this},setHSL:function(t,e,r){if(0===e)this.r=this.g=this.b=r;else{var n=function(t,e,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?t+6*(e-t)*r:.5>r?e:2/3>r?t+6*(e-t)*(2/3-r):t};e=.5>=r?r*(1+e):r+e-r*e,r=2*r-e,this.r=n(r,e,t+1/3),this.g=n(r,e,t),this.b=n(r,e,t-1/3)}return this},setStyle:function(t){return/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(t)?(t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(t),this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this):/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(t)?(t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(t),this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this):/^\#([0-9a-f]{6})$/i.test(t)?(t=/^\#([0-9a-f]{6})$/i.exec(t),this.setHex(parseInt(t[1],16)),this):/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(t)?(t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t),this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this):/^(\w+)$/i.test(t)?(this.setHex(THREE.ColorKeywords[t]),this):void 0},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t){return this.r=t.r*t.r,this.g=t.g*t.g,this.b=t.b*t.b,this},copyLinearToGamma:function(t){return this.r=Math.sqrt(t.r),this.g=Math.sqrt(t.g),this.b=Math.sqrt(t.b),this},convertGammaToLinear:function(){var t=this.r,e=this.g,r=this.b;return this.r=t*t,this.g=e*e,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){t=t||{h:0,s:0,l:0};var e,r=this.r,n=this.g,i=this.b,o=Math.max(r,n,i),a=Math.min(r,n,i),s=(a+o)/2;if(a===o)a=e=0;else{var u=o-a,a=.5>=s?u/(o+a):u/(2-o-a);switch(o){case r:e=(n-i)/u+(i>n?6:0);break;case n:e=(i-r)/u+2;break;case i:e=(r-n)/u+4}e/=6}return t.h=e,t.s=a,t.l=s,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,r){var n=this.getHSL();return n.h+=t,n.s+=e,n.l+=r,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t){return this.r=t[0],this.g=t[1],this.b=t[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._w=void 0!==n?n:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._w=n,this.onChangeCallback(),this},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!1==t instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var r=Math.cos(t._x/2),n=Math.cos(t._y/2),i=Math.cos(t._z/2),o=Math.sin(t._x/2),a=Math.sin(t._y/2),s=Math.sin(t._z/2);return"XYZ"===t.order?(this._x=o*n*i+r*a*s,this._y=r*a*i-o*n*s,this._z=r*n*s+o*a*i,this._w=r*n*i-o*a*s):"YXZ"===t.order?(this._x=o*n*i+r*a*s,this._y=r*a*i-o*n*s,this._z=r*n*s-o*a*i,this._w=r*n*i+o*a*s):"ZXY"===t.order?(this._x=o*n*i-r*a*s,this._y=r*a*i+o*n*s,this._z=r*n*s+o*a*i,this._w=r*n*i-o*a*s):"ZYX"===t.order?(this._x=o*n*i-r*a*s,this._y=r*a*i+o*n*s,this._z=r*n*s-o*a*i,this._w=r*n*i+o*a*s):"YZX"===t.order?(this._x=o*n*i+r*a*s,this._y=r*a*i+o*n*s,this._z=r*n*s-o*a*i,this._w=r*n*i-o*a*s):"XZY"===t.order&&(this._x=o*n*i-r*a*s,this._y=r*a*i-o*n*s,this._z=r*n*s+o*a*i,this._w=r*n*i+o*a*s),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var r=e/2,n=Math.sin(r);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,r=e[0];t=e[4];var n=e[8],i=e[1],o=e[5],a=e[9],s=e[2],u=e[6],e=e[10],h=r+o+e;return h>0?(r=.5/Math.sqrt(h+1),this._w=.25/r,this._x=(u-a)*r,this._y=(n-s)*r,this._z=(i-t)*r):r>o&&r>e?(r=2*Math.sqrt(1+r-o-e),this._w=(u-a)/r,this._x=.25*r,this._y=(t+i)/r,this._z=(n+s)/r):o>e?(r=2*Math.sqrt(1+o-r-e),this._w=(n-s)/r,this._x=(t+i)/r,this._y=.25*r,this._z=(a+u)/r):(r=2*Math.sqrt(1+e-r-o),this._w=(i-t)/r,this._x=(n+s)/r,this._y=(a+u)/r,this._z=.25*r),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e;return function(r,n){return void 0===t&&(t=new THREE.Vector3),e=r.dot(n)+1,1e-6>e?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var r=t._x,n=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,h=e._w;return this._x=r*h+o*a+n*u-i*s,this._y=n*h+o*s+i*a-r*u,this._z=i*h+o*u+r*s-n*a,this._w=o*h-r*a-n*s-i*u,this.onChangeCallback(),this},multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var r=this._x,n=this._y,i=this._z,o=this._w,a=o*t._w+r*t._x+n*t._y+i*t._z;if(0>a?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=r,this._y=n,this._z=i,this;var s=Math.acos(a),u=Math.sqrt(1-a*a);return.001>Math.abs(u)?(this._w=.5*(o+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this):(a=Math.sin((1-e)*s)/u,s=Math.sin(e*s)/u,this._w=o*a+this._w*s,this._x=r*a+this._x*s,this._y=n*a+this._y*s,this._z=i*a+this._z*s,this.onChangeCallback(),this)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(t,e,r,n){return r.copy(t).slerp(e,n)},THREE.Vector2=function(t,e){this.x=t||0,this.y=e||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScalar:function(t){return this.x+=t,this.y+=t,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return 0!==t?(t=1/t,this.x*=t,this.y*=t):this.y=this.x=0,this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScalar:function(){var t,e;return function(r,n){return void 0===t&&(t=new THREE.Vector2,e=new THREE.Vector2),t.set(r,r),e.set(n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return t=this.y-t.y,e*e+t*t},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,r){return void 0===r&&(r=0),e=e*t.itemSize+r,this.x=t.array[e],this.y=t.array[e+1],this},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(t,e,r){this.x=t||0,this.y=e||0,this.z=r||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(t,e,r){return this.x=t,this.y=e,this.z=r,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return!1==e instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new THREE.Quaternion),this.applyQuaternion(t.setFromEuler(e)),this}}(),applyAxisAngle:function(){var t;return function(e,r){return void 0===t&&(t=new THREE.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,r)),this}}(),applyMatrix3:function(t){var e=this.x,r=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[3]*r+t[6]*n,this.y=t[1]*e+t[4]*r+t[7]*n,this.z=t[2]*e+t[5]*r+t[8]*n,this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[4]*r+t[8]*n+t[12],this.y=t[1]*e+t[5]*r+t[9]*n+t[13],this.z=t[2]*e+t[6]*r+t[10]*n+t[14],this},applyProjection:function(t){var e=this.x,r=this.y,n=this.z;t=t.elements;var i=1/(t[3]*e+t[7]*r+t[11]*n+t[15]);return this.x=(t[0]*e+t[4]*r+t[8]*n+t[12])*i,this.y=(t[1]*e+t[5]*r+t[9]*n+t[13])*i,this.z=(t[2]*e+t[6]*r+t[10]*n+t[14])*i,this},applyQuaternion:function(t){var e=this.x,r=this.y,n=this.z,i=t.x,o=t.y,a=t.z;t=t.w;var s=t*e+o*n-a*r,u=t*r+a*e-i*n,h=t*n+i*r-o*e,e=-i*e-o*r-a*n;return this.x=s*t+e*-i+u*-a-h*-o,this.y=u*t+e*-o+h*-i-s*-a,this.z=h*t+e*-a+s*-o-u*-i,this},project:function(){var t;return function(e){return void 0===t&&(t=new THREE.Matrix4),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new THREE.Matrix4),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,r=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[4]*r+t[8]*n,this.y=t[1]*e+t[5]*r+t[9]*n,this.z=t[2]*e+t[6]*r+t[10]*n,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return 0!==t?(t=1/t,this.x*=t,this.y*=t,this.z*=t):this.z=this.y=this.x=0,this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScalar:function(){var t,e;return function(r,n){return void 0===t&&(t=new THREE.Vector3,e=new THREE.Vector3),t.set(r,r,r),e.set(n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var r=this.x,n=this.y,i=this.z;return this.x=n*t.z-i*t.y,this.y=i*t.x-r*t.z,this.z=r*t.y-n*t.x,this},crossVectors:function(t,e){var r=t.x,n=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=n*s-i*a,this.y=i*o-r*s,this.z=r*a-n*o,this},projectOnVector:function(){var t,e;return function(r){return void 0===t&&(t=new THREE.Vector3),t.copy(r).normalize(),e=this.dot(t),this.copy(t).multiplyScalar(e)}}(),projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new THREE.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new THREE.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){return t=this.dot(t)/(this.length()*t.length()),Math.acos(THREE.Math.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y;return t=this.z-t.z,e*e+r*r+t*t},setEulerFromRotationMatrix:function(t,e){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(t,e){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),r=this.set(t.elements[4],t.elements[5],t.elements[6]).length();return t=this.set(t.elements[8],t.elements[9],t.elements[10]).length(),this.x=e,
this.y=r,this.z=t,this},setFromMatrixColumn:function(t,e){var r=4*t,n=e.elements;return this.x=n[r],this.y=n[r+1],this.z=n[r+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,r){return void 0===r&&(r=0),e=e*t.itemSize+r,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(t,e,r,n){this.x=t||0,this.y=e||0,this.z=r||0,this.w=void 0!==n?n:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(t,e,r,n){return this.x=t,this.y=e,this.z=r,this.w=n,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z,i=this.w;return t=t.elements,this.x=t[0]*e+t[4]*r+t[8]*n+t[12]*i,this.y=t[1]*e+t[5]*r+t[9]*n+t[13]*i,this.z=t[2]*e+t[6]*r+t[10]*n+t[14]*i,this.w=t[3]*e+t[7]*r+t[11]*n+t[15]*i,this},divideScalar:function(t){return 0!==t?(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.z=this.y=this.x=0,this.w=1),this},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,r,n;t=t.elements;var i=t[0];n=t[4];var o=t[8],a=t[1],s=t[5],u=t[9];r=t[2],e=t[6];var h=t[10];return.01>Math.abs(n-a)&&.01>Math.abs(o-r)&&.01>Math.abs(u-e)?.1>Math.abs(n+a)&&.1>Math.abs(o+r)&&.1>Math.abs(u+e)&&.1>Math.abs(i+s+h-3)?(this.set(1,0,0,0),this):(t=Math.PI,i=(i+1)/2,s=(s+1)/2,h=(h+1)/2,n=(n+a)/4,o=(o+r)/4,u=(u+e)/4,i>s&&i>h?.01>i?(e=0,n=r=.707106781):(e=Math.sqrt(i),r=n/e,n=o/e):s>h?.01>s?(e=.707106781,r=0,n=.707106781):(r=Math.sqrt(s),e=n/r,n=u/r):.01>h?(r=e=.707106781,n=0):(n=Math.sqrt(h),e=o/n,r=u/n),this.set(e,r,n,t),this):(t=Math.sqrt((e-u)*(e-u)+(o-r)*(o-r)+(a-n)*(a-n)),.001>Math.abs(t)&&(t=1),this.x=(e-u)/t,this.y=(o-r)/t,this.z=(a-n)/t,this.w=Math.acos((i+s+h-1)/2),this)},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this.w>t.w&&(this.w=t.w),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this.w<t.w&&(this.w=t.w),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this.w<t.w?this.w=t.w:this.w>e.w&&(this.w=e.w),this},clampScalar:function(){var t,e;return function(r,n){return void 0===t&&(t=new THREE.Vector4,e=new THREE.Vector4),t.set(r,r,r,r),e.set(n,n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,r){return void 0===r&&(r=0),e=e*t.itemSize+r,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this.w=t.array[e+3],this},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._order=n||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,r){var n=THREE.Math.clamp,i=t.elements;t=i[0];var o=i[4],a=i[8],s=i[1],u=i[5],h=i[9],l=i[2],c=i[6],i=i[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(n(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(-h,i),this._z=Math.atan2(-o,t)):(this._x=Math.atan2(c,u),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(h,-1,1)),.99999>Math.abs(h)?(this._y=Math.atan2(a,i),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-l,t),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(c,-1,1)),.99999>Math.abs(c)?(this._y=Math.atan2(-l,i),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,t))):"ZYX"===e?(this._y=Math.asin(-n(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(c,i),this._z=Math.atan2(s,t)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===e?(this._z=Math.asin(n(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-l,t)):(this._x=0,this._y=Math.atan2(a,i))):"XZY"===e?(this._z=Math.asin(-n(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(c,u),this._y=Math.atan2(a,t)):(this._x=Math.atan2(-h,i),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,r,n){return void 0===t&&(t=new THREE.Matrix4),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,r,n),this}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new THREE.Quaternion;return function(e){t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(t,e){this.start=void 0!==t?t:new THREE.Vector3,this.end=void 0!==e?e:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},center:function(t){return(t||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return(t||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var r=e||new THREE.Vector3;return this.delta(r).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(r,n){t.subVectors(r,this.start),e.subVectors(this.end,this.start);var i=e.dot(e),i=e.dot(t)/i;return n&&(i=THREE.Math.clamp(i,0,1)),i}}(),closestPointToPoint:function(t,e,r){return t=this.closestPointToPointParameter(t,e),r=r||new THREE.Vector3,this.delta(r).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}},THREE.Box2=function(t,e){this.min=void 0!==t?t:new THREE.Vector2(1/0,1/0),this.max=void 0!==e?e:new THREE.Vector2(-(1/0),-(1/0))},THREE.Box2.prototype={constructor:THREE.Box2,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;r>e;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new THREE.Vector2;return function(e,r){var n=t.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(t){return(t||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){return(t||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y?!0:!1},getParameter:function(t,e){return(e||new THREE.Vector2).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y?!1:!0},clampPoint:function(t,e){return(e||new THREE.Vector2).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new THREE.Vector2;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(t,e){this.min=void 0!==t?t:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==e?e:new THREE.Vector3(-(1/0),-(1/0),-(1/0))},THREE.Box3.prototype={constructor:THREE.Box3,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;r>e;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new THREE.Vector3;return function(e,r){var n=t.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(){var t=new THREE.Vector3;return function(e){var r=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var n=e.geometry;if(void 0!==n)if(n instanceof THREE.Geometry)for(var i=n.vertices,n=0,o=i.length;o>n;n++)t.copy(i[n]),t.applyMatrix4(e.matrixWorld),r.expandByPoint(t);else if(n instanceof THREE.BufferGeometry&&void 0!==n.attributes.position)for(i=n.attributes.position.array,n=0,o=i.length;o>n;n+=3)t.set(i[n],i[n+1],i[n+2]),t.applyMatrix4(e.matrixWorld),r.expandByPoint(t)}),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){return(t||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){return(t||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z?!0:!1},getParameter:function(t,e){return(e||new THREE.Vector3).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z?!1:!0},clampPoint:function(t,e){return(e||new THREE.Vector3).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new THREE.Vector3;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new THREE.Vector3;return function(e){return e=e||new THREE.Sphere,e.center=this.center(),e.radius=.5*this.size(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(e){return t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(t),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(t,e,r,n,i,o,a,s,u){var h=this.elements;return h[0]=t,h[3]=e,h[6]=r,h[1]=n,h[4]=i,h[7]=o,h[2]=a,h[5]=s,h[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(t){return t=t.elements,this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new THREE.Vector3;return function(e,r,n){void 0===r&&(r=0),void 0===n&&(n=e.length);for(var i=0;n>i;i+=3,r+=3)t.x=e[r],t.y=e[r+1],t.z=e[r+2],t.applyMatrix3(this),e[r]=t.x,e[r+1]=t.y,e[r+2]=t.z;return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],t=t[8];return e*o*t-e*a*u-r*i*t+r*a*s+n*i*u-n*o*s},getInverse:function(t,e){var r=t.elements,n=this.elements;if(n[0]=r[10]*r[5]-r[6]*r[9],n[1]=-r[10]*r[1]+r[2]*r[9],n[2]=r[6]*r[1]-r[2]*r[5],n[3]=-r[10]*r[4]+r[6]*r[8],n[4]=r[10]*r[0]-r[2]*r[8],n[5]=-r[6]*r[0]+r[2]*r[4],n[6]=r[9]*r[4]-r[5]*r[8],n[7]=-r[9]*r[0]+r[1]*r[8],n[8]=r[5]*r[0]-r[1]*r[4],r=r[0]*n[0]+r[1]*n[3]+r[2]*n[6],0===r){if(e)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/r),this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},clone:function(){return(new THREE.Matrix3).fromArray(this.elements)}},THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(t,e,r,n,i,o,a,s,u,h,l,c,f,p,d,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=r,g[12]=n,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=h,g[10]=l,g[14]=c,g[3]=f,g[7]=p,g[11]=d,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(t){return this.elements.set(t.elements),this},extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,r){var n=this.elements;return t.set(n[0],n[1],n[2]),e.set(n[4],n[5],n[6]),r.set(n[8],n[9],n[10]),this},makeBasis:function(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this},extractRotation:function(){var t=new THREE.Vector3;return function(e){var r=this.elements;e=e.elements;var n=1/t.set(e[0],e[1],e[2]).length(),i=1/t.set(e[4],e[5],e[6]).length(),o=1/t.set(e[8],e[9],e[10]).length();return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[8]=e[8]*o,r[9]=e[9]*o,r[10]=e[10]*o,this}}(),makeRotationFromEuler:function(t){!1==t instanceof THREE.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,r=t.x,n=t.y,i=t.z,o=Math.cos(r),r=Math.sin(r),a=Math.cos(n),n=Math.sin(n),s=Math.cos(i),i=Math.sin(i);if("XYZ"===t.order){t=o*s;var u=o*i,h=r*s,l=r*i;e[0]=a*s,e[4]=-a*i,e[8]=n,e[1]=u+h*n,e[5]=t-l*n,e[9]=-r*a,e[2]=l-t*n,e[6]=h+u*n,e[10]=o*a}else"YXZ"===t.order?(t=a*s,u=a*i,h=n*s,l=n*i,e[0]=t+l*r,e[4]=h*r-u,e[8]=o*n,e[1]=o*i,e[5]=o*s,e[9]=-r,e[2]=u*r-h,e[6]=l+t*r,e[10]=o*a):"ZXY"===t.order?(t=a*s,u=a*i,h=n*s,l=n*i,e[0]=t-l*r,e[4]=-o*i,e[8]=h+u*r,e[1]=u+h*r,e[5]=o*s,e[9]=l-t*r,e[2]=-o*n,e[6]=r,e[10]=o*a):"ZYX"===t.order?(t=o*s,u=o*i,h=r*s,l=r*i,e[0]=a*s,e[4]=h*n-u,e[8]=t*n+l,e[1]=a*i,e[5]=l*n+t,e[9]=u*n-h,e[2]=-n,e[6]=r*a,e[10]=o*a):"YZX"===t.order?(t=o*a,u=o*n,h=r*a,l=r*n,e[0]=a*s,e[4]=l-t*i,e[8]=h*i+u,e[1]=i,e[5]=o*s,e[9]=-r*s,e[2]=-n*s,e[6]=u*i+h,e[10]=t-l*i):"XZY"===t.order&&(t=o*a,u=o*n,h=r*a,l=r*n,e[0]=a*s,e[4]=-i,e[8]=n*s,e[1]=t*i+l,e[5]=o*s,e[9]=u*i-h,e[2]=h*i-u,e[6]=r*s,e[10]=l*i+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},makeRotationFromQuaternion:function(t){var e=this.elements,r=t.x,n=t.y,i=t.z,o=t.w,a=r+r,s=n+n,u=i+i;t=r*a;var h=r*s,r=r*u,l=n*s,n=n*u,i=i*u,a=o*a,s=o*s,o=o*u;return e[0]=1-(l+i),e[4]=h-o,e[8]=r+s,e[1]=h+o,e[5]=1-(t+i),e[9]=n-a,e[2]=r-s,e[6]=n+a,e[10]=1-(t+l),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new THREE.Vector3,e=new THREE.Vector3,r=new THREE.Vector3;return function(n,i,o){var a=this.elements;return r.subVectors(n,i).normalize(),0===r.length()&&(r.z=1),t.crossVectors(o,r).normalize(),0===t.length()&&(r.x+=1e-4,t.crossVectors(o,r).normalize()),e.crossVectors(r,t),a[0]=t.x,a[4]=e.x,a[8]=r.x,a[1]=t.y,a[5]=e.y,a[9]=r.y,a[2]=t.z,a[6]=e.z,a[10]=r.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,e){var r=t.elements,n=e.elements,i=this.elements,o=r[0],a=r[4],s=r[8],u=r[12],h=r[1],l=r[5],c=r[9],f=r[13],p=r[2],d=r[6],m=r[10],g=r[14],v=r[3],E=r[7],y=r[11],r=r[15],x=n[0],T=n[4],R=n[8],b=n[12],_=n[1],w=n[5],M=n[9],H=n[13],S=n[2],C=n[6],A=n[10],L=n[14],P=n[3],F=n[7],D=n[11],n=n[15];return i[0]=o*x+a*_+s*S+u*P,i[4]=o*T+a*w+s*C+u*F,i[8]=o*R+a*M+s*A+u*D,i[12]=o*b+a*H+s*L+u*n,i[1]=h*x+l*_+c*S+f*P,i[5]=h*T+l*w+c*C+f*F,i[9]=h*R+l*M+c*A+f*D,i[13]=h*b+l*H+c*L+f*n,i[2]=p*x+d*_+m*S+g*P,i[6]=p*T+d*w+m*C+g*F,i[10]=p*R+d*M+m*A+g*D,i[14]=p*b+d*H+m*L+g*n,i[3]=v*x+E*_+y*S+r*P,i[7]=v*T+E*w+y*C+r*F,i[11]=v*R+E*M+y*A+r*D,i[15]=v*b+E*H+y*L+r*n,this},multiplyToArray:function(t,e,r){var n=this.elements;return this.multiplyMatrices(t,e),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new THREE.Vector3;return function(e,r,n){void 0===r&&(r=0),void 0===n&&(n=e.length);for(var i=0;n>i;i+=3,r+=3)t.x=e[r],t.y=e[r+1],t.z=e[r+2],t.applyMatrix4(this),e[r]=t.x,e[r+1]=t.y,e[r+2]=t.z;return e}}(),rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},determinant:function(){var t=this.elements,e=t[0],r=t[4],n=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],h=t[2],l=t[6],c=t[10],f=t[14];return t[3]*(+i*s*l-n*u*l-i*a*c+r*u*c+n*a*f-r*s*f)+t[7]*(+e*s*f-e*u*c+i*o*c-n*o*f+n*u*h-i*s*h)+t[11]*(+e*u*l-e*a*f-i*o*l+r*o*f+i*a*h-r*u*h)+t[15]*(-n*a*h-e*s*l+e*a*c+n*o*l-r*o*c+r*s*h)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t},getPosition:function(){var t=new THREE.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var e=this.elements;return t.set(e[12],e[13],e[14])}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var r=this.elements,n=t.elements,i=n[0],o=n[4],a=n[8],s=n[12],u=n[1],h=n[5],l=n[9],c=n[13],f=n[2],p=n[6],d=n[10],m=n[14],g=n[3],v=n[7],E=n[11],n=n[15];if(r[0]=l*m*v-c*d*v+c*p*E-h*m*E-l*p*n+h*d*n,r[4]=s*d*v-a*m*v-s*p*E+o*m*E+a*p*n-o*d*n,r[8]=a*c*v-s*l*v+s*h*E-o*c*E-a*h*n+o*l*n,r[12]=s*l*p-a*c*p-s*h*d+o*c*d+a*h*m-o*l*m,r[1]=c*d*g-l*m*g-c*f*E+u*m*E+l*f*n-u*d*n,r[5]=a*m*g-s*d*g+s*f*E-i*m*E-a*f*n+i*d*n,r[9]=s*l*g-a*c*g-s*u*E+i*c*E+a*u*n-i*l*n,r[13]=a*c*f-s*l*f+s*u*d-i*c*d-a*u*m+i*l*m,r[2]=h*m*g-c*p*g+c*f*v-u*m*v-h*f*n+u*p*n,r[6]=s*p*g-o*m*g-s*f*v+i*m*v+o*f*n-i*p*n,r[10]=o*c*g-s*h*g+s*u*v-i*c*v-o*u*n+i*h*n,r[14]=s*h*f-o*c*f-s*u*p+i*c*p+o*u*m-i*h*m,r[3]=l*p*g-h*d*g-l*f*v+u*d*v+h*f*E-u*p*E,r[7]=o*d*g-a*p*g+a*f*v-i*d*v-o*f*E+i*p*E,r[11]=a*h*g-o*l*g-a*u*v+i*l*v+o*u*E-i*h*E,r[15]=o*l*f-a*h*f+a*u*p-i*l*p-o*u*d+i*h*d,r=i*r[0]+u*r[4]+f*r[8]+g*r[12],0==r){if(e)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/r),this},translate:function(t){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(t){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(t){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(t){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(t,e){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(t){var e=this.elements,r=t.x,n=t.y;return t=t.z,e[0]*=r,e[4]*=n,e[8]*=t,e[1]*=r,e[5]*=n,e[9]*=t,e[2]*=r,e[6]*=n,e[10]*=t,e[3]*=r,e[7]*=n,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],Math.max(t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10])))},makeTranslation:function(t,e,r){return this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var r=Math.cos(e),n=Math.sin(e),i=1-r,o=t.x,a=t.y,s=t.z,u=i*o,h=i*a;return this.set(u*o+r,u*a-n*s,u*s+n*a,0,u*a+n*s,h*a+r,h*s-n*o,0,u*s-n*a,h*s+n*o,i*s*s+r,0,0,0,0,1),this},makeScale:function(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this},compose:function(t,e,r){return this.makeRotationFromQuaternion(e),this.scale(r),this.setPosition(t),this},decompose:function(){var t=new THREE.Vector3,e=new THREE.Matrix4;return function(r,n,i){var o=this.elements,a=t.set(o[0],o[1],o[2]).length(),s=t.set(o[4],o[5],o[6]).length(),u=t.set(o[8],o[9],o[10]).length();0>this.determinant()&&(a=-a),r.x=o[12],r.y=o[13],r.z=o[14],e.elements.set(this.elements),r=1/a;var o=1/s,h=1/u;return e.elements[0]*=r,e.elements[1]*=r,e.elements[2]*=r,e.elements[4]*=o,e.elements[5]*=o,e.elements[6]*=o,e.elements[8]*=h,e.elements[9]*=h,e.elements[10]*=h,n.setFromRotationMatrix(e),i.x=a,i.y=s,i.z=u,this}}(),makeFrustum:function(t,e,r,n,i,o){var a=this.elements;return a[0]=2*i/(e-t),a[4]=0,a[8]=(e+t)/(e-t),a[12]=0,a[1]=0,a[5]=2*i/(n-r),a[9]=(n+r)/(n-r),a[13]=0,a[2]=0,a[6]=0,a[10]=-(o+i)/(o-i),a[14]=-2*o*i/(o-i),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(t,e,r,n){t=r*Math.tan(THREE.Math.degToRad(.5*t));var i=-t;return this.makeFrustum(i*e,t*e,i,t,r,n)},makeOrthographic:function(t,e,r,n,i,o){var a=this.elements,s=e-t,u=r-n,h=o-i;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-((e+t)/s),a[1]=0,a[5]=2/u,a[9]=0,a[13]=-((r+n)/u),a[2]=0,a[6]=0,a[10]=-2/h,a[14]=-((o+i)/h),a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)}},THREE.Ray=function(t,e){this.origin=void 0!==t?t:new THREE.Vector3,this.direction=void 0!==e?e:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new THREE.Vector3).copy(this.direction).multiplyScalar(t).add(this.origin)},recast:function(){var t=new THREE.Vector3;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var r=e||new THREE.Vector3;r.subVectors(t,this.origin);var n=r.dot(this.direction);return 0>n?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(){var t=new THREE.Vector3;return function(e){var r=t.subVectors(e,this.origin).dot(this.direction);return 0>r?this.origin.distanceTo(e):(t.copy(this.direction).multiplyScalar(r).add(this.origin),t.distanceTo(e))}}(),distanceSqToSegment:function(){var t=new THREE.Vector3,e=new THREE.Vector3,r=new THREE.Vector3;return function(n,i,o,a){t.copy(n).add(i).multiplyScalar(.5),e.copy(i).sub(n).normalize(),r.copy(this.origin).sub(t);var s,u=.5*n.distanceTo(i),h=-this.direction.dot(e),l=r.dot(this.direction),c=-r.dot(e),f=r.lengthSq(),p=Math.abs(1-h*h);return p>0?(n=h*c-l,i=h*l-c,s=u*p,n>=0?i>=-s?s>=i?(u=1/p,n*=u,i*=u,h=n*(n+h*i+2*l)+i*(h*n+i+2*c)+f):(i=u,n=Math.max(0,-(h*i+l)),h=-n*n+i*(i+2*c)+f):(i=-u,n=Math.max(0,-(h*i+l)),h=-n*n+i*(i+2*c)+f):-s>=i?(n=Math.max(0,-(-h*u+l)),i=n>0?-u:Math.min(Math.max(-u,-c),u),h=-n*n+i*(i+2*c)+f):s>=i?(n=0,i=Math.min(Math.max(-u,-c),u),h=i*(i+2*c)+f):(n=Math.max(0,-(h*u+l)),i=n>0?u:Math.min(Math.max(-u,-c),u),h=-n*n+i*(i+2*c)+f)):(i=h>0?-u:u,n=Math.max(0,-(h*i+l)),
h=-n*n+i*(i+2*c)+f),o&&o.copy(this.direction).multiplyScalar(n).add(this.origin),a&&a.copy(e).multiplyScalar(i).add(t),h}}(),isIntersectionSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},intersectSphere:function(){var t=new THREE.Vector3;return function(e,r){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),i=t.dot(t)-n*n,o=e.radius*e.radius;return i>o?null:(o=Math.sqrt(o-i),i=n-o,n+=o,0>i&&0>n?null:0>i?this.at(n,r):this.at(i,r))}}(),isIntersectionPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e?!0:!1},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0==e?0==t.distanceToPoint(this.origin)?0:null:(t=-(this.origin.dot(t.normal)+t.constant)/e,t>=0?t:null)},intersectPlane:function(t,e){var r=this.distanceToPlane(t);return null===r?null:this.at(r,e)},isIntersectionBox:function(){var t=new THREE.Vector3;return function(e){return null!==this.intersectBox(e,t)}}(),intersectBox:function(t,e){var r,n,i,o,a;n=1/this.direction.x,o=1/this.direction.y,a=1/this.direction.z;var s=this.origin;return n>=0?(r=(t.min.x-s.x)*n,n*=t.max.x-s.x):(r=(t.max.x-s.x)*n,n*=t.min.x-s.x),o>=0?(i=(t.min.y-s.y)*o,o*=t.max.y-s.y):(i=(t.max.y-s.y)*o,o*=t.min.y-s.y),r>o||i>n?null:((i>r||r!==r)&&(r=i),(n>o||n!==n)&&(n=o),a>=0?(i=(t.min.z-s.z)*a,a*=t.max.z-s.z):(i=(t.max.z-s.z)*a,a*=t.min.z-s.z),r>a||i>n?null:((i>r||r!==r)&&(r=i),(n>a||n!==n)&&(n=a),0>n?null:this.at(r>=0?r:n,e)))},intersectTriangle:function(){var t=new THREE.Vector3,e=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Vector3;return function(i,o,a,s,u){if(e.subVectors(o,i),r.subVectors(a,i),n.crossVectors(e,r),o=this.direction.dot(n),o>0){if(s)return null;s=1}else{if(!(0>o))return null;s=-1,o=-o}return t.subVectors(this.origin,i),i=s*this.direction.dot(r.crossVectors(t,r)),0>i?null:(a=s*this.direction.dot(e.cross(t)),0>a||i+a>o?null:(i=-s*t.dot(n),0>i?null:this.at(i/o,u)))}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(t,e){this.center=void 0!==t?t:new THREE.Vector3,this.radius=void 0!==e?e:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new THREE.Box3;return function(e,r){var n=this.center;void 0!==r?n.copy(r):t.setFromPoints(e).center(n);for(var i=0,o=0,a=e.length;a>o;o++)i=Math.max(i,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}}(),copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},clampPoint:function(t,e){var r=this.center.distanceToSquared(t),n=e||new THREE.Vector3;return n.copy(t),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(t){return t=t||new THREE.Box3,t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(t,e,r,n,i,o){this.planes=[void 0!==t?t:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==o?o:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(t,e,r,n,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(r),a[3].copy(n),a[4].copy(i),a[5].copy(o),this},copy:function(t){for(var e=this.planes,r=0;6>r;r++)e[r].copy(t.planes[r]);return this},setFromMatrix:function(t){var e=this.planes,r=t.elements;t=r[0];var n=r[1],i=r[2],o=r[3],a=r[4],s=r[5],u=r[6],h=r[7],l=r[8],c=r[9],f=r[10],p=r[11],d=r[12],m=r[13],g=r[14],r=r[15];return e[0].setComponents(o-t,h-a,p-l,r-d).normalize(),e[1].setComponents(o+t,h+a,p+l,r+d).normalize(),e[2].setComponents(o+n,h+s,p+c,r+m).normalize(),e[3].setComponents(o-n,h-s,p-c,r-m).normalize(),e[4].setComponents(o-i,h-u,p-f,r-g).normalize(),e[5].setComponents(o+i,h+u,p+f,r+g).normalize(),this},intersectsObject:function(){var t=new THREE.Sphere;return function(e){var r=e.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),t.copy(r.boundingSphere),t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){var e=this.planes,r=t.center;t=-t.radius;for(var n=0;6>n;n++)if(e[n].distanceToPoint(r)<t)return!1;return!0},intersectsBox:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(r){for(var n=this.planes,i=0;6>i;i++){var o=n[i];t.x=0<o.normal.x?r.min.x:r.max.x,e.x=0<o.normal.x?r.max.x:r.min.x,t.y=0<o.normal.y?r.min.y:r.max.y,e.y=0<o.normal.y?r.max.y:r.min.y,t.z=0<o.normal.z?r.min.z:r.max.z,e.z=0<o.normal.z?r.max.z:r.min.z;var a=o.distanceToPoint(t),o=o.distanceToPoint(e);if(0>a&&0>o)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,r=0;6>r;r++)if(0>e[r].distanceToPoint(t))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}},THREE.Plane=function(t,e){this.normal=void 0!==t?t:new THREE.Vector3(1,0,0),this.constant=void 0!==e?e:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,r,n){return this.normal.set(t,e,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(r,n,i){return n=t.subVectors(i,n).cross(e.subVectors(r,n)).normalize(),this.setFromNormalAndCoplanarPoint(n,r),this}}(),copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var r=this.distanceToPoint(t);return(e||new THREE.Vector3).copy(this.normal).multiplyScalar(r)},isIntersectionLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&t>0||0>t&&e>0},intersectLine:function(){var t=new THREE.Vector3;return function(e,r){var n=r||new THREE.Vector3,i=e.delta(t),o=this.normal.dot(i);return 0!=o?(o=-(e.start.dot(this.normal)+this.constant)/o,0>o||o>1?void 0:n.copy(i).multiplyScalar(o).add(e.start)):0==this.distanceToPoint(e.start)?n.copy(e.start):void 0}}(),coplanarPoint:function(t){return(t||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new THREE.Vector3,e=new THREE.Vector3,r=new THREE.Matrix3;return function(n,i){var o=i||r.getNormalMatrix(n),o=t.copy(this.normal).applyMatrix3(o),a=this.coplanarPoint(e);return a.applyMatrix4(n),this.setFromNormalAndCoplanarPoint(o,a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=Array(36),n=0;return function(){for(var i=0;36>i;i++)8==i||13==i||18==i||23==i?r[i]="-":14==i?r[i]="4":(2>=n&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,r[i]=e[19==i?3&t|8:t]);return r.join("")}}(),clamp:function(t,e,r){return e>t?e:t>r?r:t},clampBottom:function(t,e){return e>t?e:t},mapLinear:function(t,e,r,n,i){return n+(t-e)*(i-n)/(r-e)},smoothstep:function(t,e,r){return e>=t?0:t>=r?1:(t=(t-e)/(r-e),t*t*(3-2*t))},smootherstep:function(t,e,r){return e>=t?0:t>=r?1:(t=(t-e)/(r-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(t,e){return Math.floor(this.randFloat(t,e))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}(),isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t}},THREE.Spline=function(t){function e(t,e,r,n,i,o,a){return t=.5*(r-t),n=.5*(n-e),(2*(e-r)+t+n)*a+(-3*(e-r)-2*t-n)*o+t*i+e}this.points=t;var r,n,i,o,a,s,u,h,l,c=[],f={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.getPoint=function(t){return r=(this.points.length-1)*t,n=Math.floor(r),i=r-n,c[0]=0===n?n:n-1,c[1]=n,c[2]=n>this.points.length-2?this.points.length-1:n+1,c[3]=n>this.points.length-3?this.points.length-1:n+2,s=this.points[c[0]],u=this.points[c[1]],h=this.points[c[2]],l=this.points[c[3]],o=i*i,a=i*o,f.x=e(s.x,u.x,h.x,l.x,i,o,a),f.y=e(s.y,u.y,h.y,l.y,i,o,a),f.z=e(s.z,u.z,h.z,l.z,i,o,a),f},this.getControlPointsArray=function(){var t,e,r=this.points.length,n=[];for(t=0;r>t;t++)e=this.points[t],n[t]=[e.x,e.y,e.z];return n},this.getLength=function(t){var e,r,n,i=e=e=0,o=new THREE.Vector3,a=new THREE.Vector3,s=[],u=0;for(s[0]=0,t||(t=100),r=this.points.length*t,o.copy(this.points[0]),t=1;r>t;t++)e=t/r,n=this.getPoint(e),a.copy(n),u+=a.distanceTo(o),o.copy(n),e*=this.points.length-1,e=Math.floor(e),e!=i&&(s[e]=u,i=e);return s[s.length]=u,{chunks:s,total:u}},this.reparametrizeByArcLength=function(t){var e,r,n,i,o,a,s=[],u=new THREE.Vector3,h=this.getLength();for(s.push(u.copy(this.points[0]).clone()),e=1;e<this.points.length;e++){for(r=h.chunks[e]-h.chunks[e-1],a=Math.ceil(t*r/h.total),i=(e-1)/(this.points.length-1),o=e/(this.points.length-1),r=1;a-1>r;r++)n=i+1/a*r*(o-i),n=this.getPoint(n),s.push(u.copy(n).clone());s.push(u.copy(this.points[e]).clone())}this.points=s}},THREE.Triangle=function(t,e,r){this.a=void 0!==t?t:new THREE.Vector3,this.b=void 0!==e?e:new THREE.Vector3,this.c=void 0!==r?r:new THREE.Vector3},THREE.Triangle.normal=function(){var t=new THREE.Vector3;return function(e,r,n,i){return i=i||new THREE.Vector3,i.subVectors(n,r),t.subVectors(e,r),i.cross(t),e=i.lengthSq(),e>0?i.multiplyScalar(1/Math.sqrt(e)):i.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var t=new THREE.Vector3,e=new THREE.Vector3,r=new THREE.Vector3;return function(n,i,o,a,s){t.subVectors(a,i),e.subVectors(o,i),r.subVectors(n,i),n=t.dot(t),i=t.dot(e),o=t.dot(r);var u=e.dot(e);a=e.dot(r);var h=n*u-i*i;return s=s||new THREE.Vector3,0==h?s.set(-2,-1,-1):(h=1/h,u=(u*o-i*a)*h,n=(n*a-i*o)*h,s.set(1-u-n,n,u))}}(),THREE.Triangle.containsPoint=function(){var t=new THREE.Vector3;return function(e,r,n,i){return e=THREE.Triangle.barycoordFromPoint(e,r,n,i,t),0<=e.x&&0<=e.y&&1>=e.x+e.y}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(t,e,r){return this.a.copy(t),this.b.copy(e),this.c.copy(r),this},setFromPointsAndIndices:function(t,e,r,n){return this.a.copy(t[e]),this.b.copy(t[r]),this.c.copy(t[n]),this},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){return(t||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return THREE.Triangle.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return THREE.Triangle.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return THREE.Triangle.containsPoint(t,this.a,this.b,this.c)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}},THREE.Clock=function(t){this.autoStart=void 0!==t?t:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),t=.001*(e-this.oldTime);this.oldTime=e,this.elapsedTime+=t}return t}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(t){t.addEventListener=THREE.EventDispatcher.prototype.addEventListener,t.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,t.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,t.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[t]&&-1!==r[t].indexOf(e)?!0:!1},removeEventListener:function(t,e){if(void 0!==this._listeners){var r=this._listeners[t];if(void 0!==r){var n=r.indexOf(e);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var r=[],n=e.length,i=0;n>i;i++)r[i]=e[i];for(i=0;n>i;i++)r[i].call(this,t)}}}},function(t){t.Raycaster=function(e,r,n,i){this.ray=new t.Ray(e,r),this.near=n||0,this.far=i||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var e=function(t,e){return t.distance-e.distance},r=function(t,e,n,i){if(t.raycast(e,n),!0===i){t=t.children,i=0;for(var o=t.length;o>i;i++)r(t[i],e,n,!0)}};t.Raycaster.prototype={constructor:t.Raycaster,precision:1e-4,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(e,r){r instanceof t.PerspectiveCamera?(this.ray.origin.copy(r.position),this.ray.direction.set(e.x,e.y,.5).unproject(r).sub(r.position).normalize()):r instanceof t.OrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,n){var i=[];return r(t,this,i,n),i.sort(e),i},intersectObjects:function(t,n){var i=[];if(!1==t instanceof Array)return console.log("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var o=0,a=t.length;a>o;o++)r(t[o],this,i,n);return i.sort(e),i}}}(THREE),THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=THREE.Object3D.DefaultUp.clone();var t=new THREE.Vector3,e=new THREE.Euler,r=new THREE.Quaternion,n=new THREE.Vector3(1,1,1);e.onChange(function(){r.setFromEuler(e,!1)}),r.onChange(function(){e.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:n}}),this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.userData={}},THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0),THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(t){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=t},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(t){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new THREE.Quaternion;return function(e,r){return t.setFromAxisAngle(e,r),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new THREE.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new THREE.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new THREE.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new THREE.Vector3;return function(e,r){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(r)),this}}(),translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},translateX:function(){var t=new THREE.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new THREE.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new THREE.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new THREE.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new THREE.Matrix4;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add:",t,"can't be added as a child of itself."),this):(t instanceof THREE.Object3D?(void 0!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add:",t,"is not an instance of THREE.Object3D."),this)},remove:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);e=this.children.indexOf(t),-1!==e&&(t.parent=void 0,t.dispatchEvent({type:"removed"}),this.children.splice(e,1))},getChildByName:function(t,e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t,e)},getObjectById:function(t,e){return this.getObjectByProperty("id",t,e)},getObjectByName:function(t,e){return this.getObjectByProperty("name",t,e)},getObjectByProperty:function(t,e,r){if(this[t]===e)return this;for(var n=0,i=this.children.length;i>n;n++){var o=this.children[n].getObjectByProperty(t,e,r);if(void 0!==o)return o}},getWorldPosition:function(t){return t=t||new THREE.Vector3,this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(r){return r=r||new THREE.Quaternion,this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,r,e),r}}(),getWorldRotation:function(){var t=new THREE.Quaternion;return function(e){return e=e||new THREE.Euler,this.getWorldQuaternion(t),e.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new THREE.Vector3,e=new THREE.Quaternion;return function(r){return r=r||new THREE.Vector3,this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,r),r}}(),getWorldDirection:function(){var t=new THREE.Quaternion;return function(e){return e=e||new THREE.Vector3,this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=0,r=this.children.length;r>e;e++)this.children[e].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=0,r=this.children.length;r>e;e++)this.children[e].traverseVisible(t)}},traverseAncestors:function(t){this.parent&&(t(this.parent),this.parent.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===t)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=0,r=this.children.length;r>e;e++)this.children[e].updateMatrixWorld(t)},toJSON:function(){var t={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},e={},r=function(r){if(void 0===t.geometries&&(t.geometries=[]),void 0===e[r.uuid]){var n=r.toJSON();delete n.metadata,e[r.uuid]=n,t.geometries.push(n)}return r.uuid},n={},i=function(e){if(void 0===t.materials&&(t.materials=[]),void 0===n[e.uuid]){var r=e.toJSON();delete r.metadata,n[e.uuid]=r,t.materials.push(r)}return e.uuid},o=function(t){var e={};if(e.uuid=t.uuid,e.type=t.type,""!==t.name&&(e.name=t.name),"{}"!==JSON.stringify(t.userData)&&(e.userData=t.userData),!0!==t.visible&&(e.visible=t.visible),t instanceof THREE.PerspectiveCamera?(e.fov=t.fov,e.aspect=t.aspect,e.near=t.near,e.far=t.far):t instanceof THREE.OrthographicCamera?(e.left=t.left,e.right=t.right,e.top=t.top,e.bottom=t.bottom,e.near=t.near,e.far=t.far):t instanceof THREE.AmbientLight?e.color=t.color.getHex():t instanceof THREE.DirectionalLight?(e.color=t.color.getHex(),e.intensity=t.intensity):t instanceof THREE.PointLight?(e.color=t.color.getHex(),e.intensity=t.intensity,e.distance=t.distance):t instanceof THREE.SpotLight?(e.color=t.color.getHex(),e.intensity=t.intensity,e.distance=t.distance,e.angle=t.angle,e.exponent=t.exponent):t instanceof THREE.HemisphereLight?(e.color=t.color.getHex(),e.groundColor=t.groundColor.getHex()):t instanceof THREE.Mesh?(e.geometry=r(t.geometry),e.material=i(t.material)):t instanceof THREE.Line?(e.geometry=r(t.geometry),e.material=i(t.material)):t instanceof THREE.Sprite&&(e.material=i(t.material)),e.matrix=t.matrix.toArray(),0<t.children.length){e.children=[];for(var n=0;n<t.children.length;n++)e.children.push(o(t.children[n]))}return e};return t.object=o(this),t},clone:function(t,e){if(void 0===t&&(t=new THREE.Object3D),void 0===e&&(e=!0),t.name=this.name,t.up.copy(this.up),t.position.copy(this.position),t.quaternion.copy(this.quaternion),t.scale.copy(this.scale),t.rotationAutoUpdate=this.rotationAutoUpdate,t.matrix.copy(this.matrix),t.matrixWorld.copy(this.matrixWorld),t.matrixAutoUpdate=this.matrixAutoUpdate,t.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,t.visible=this.visible,t.castShadow=this.castShadow,t.receiveShadow=this.receiveShadow,t.frustumCulled=this.frustumCulled,t.userData=JSON.parse(JSON.stringify(this.userData)),!0===e)for(var r=0;r<this.children.length;r++)t.add(this.children[r].clone());return t}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Face3=function(t,e,r,n,i,o){this.a=t,this.b=e,this.c=r,this.normal=n instanceof THREE.Vector3?n:new THREE.Vector3,this.vertexNormals=n instanceof Array?n:[],this.color=i instanceof THREE.Color?i:new THREE.Color,this.vertexColors=i instanceof Array?i:[],this.vertexTangents=[],this.materialIndex=void 0!==o?o:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var t=new THREE.Face3(this.a,this.b,this.c);t.normal.copy(this.normal),t.color.copy(this.color),t.materialIndex=this.materialIndex;for(var e=0,r=this.vertexNormals.length;r>e;e++)t.vertexNormals[e]=this.vertexNormals[e].clone();for(e=0,r=this.vertexColors.length;r>e;e++)t.vertexColors[e]=this.vertexColors[e].clone();for(e=0,r=this.vertexTangents.length;r>e;e++)t.vertexTangents[e]=this.vertexTangents[e].clone();return t}},THREE.Face4=function(t,e,r,n,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(t,e,r,i,o,a)},THREE.BufferAttribute=function(t,e){this.array=t,this.itemSize=e,this.needsUpdate=!1},THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},copyAt:function(t,e,r){t*=this.itemSize,r*=e.itemSize;for(var n=0,i=this.itemSize;i>n;n++)this.array[t+n]=e.array[r+n]},set:function(t){return this.array.set(t),this},setX:function(t,e){return this.array[t*this.itemSize]=e,this},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},setXY:function(t,e,r){return t*=this.itemSize,this.array[t]=e,this.array[t+1]=r,this},setXYZ:function(t,e,r,n){return t*=this.itemSize,this.array[t]=e,this.array[t+1]=r,this.array[t+2]=n,this},setXYZW:function(t,e,r,n,i){return t*=this.itemSize,this.array[t]=e,this.array[t+1]=r,this.array[t+2]=n,this.array[t+3]=i,this},clone:function(){return new THREE.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},THREE.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.offsets=this.drawcalls=[],this.boundingSphere=this.boundingBox=null},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(t,e,r){!1==e instanceof THREE.BufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[t]={array:e,itemSize:r}):(this.attributes[t]=e,this.attributesKeys=Object.keys(this.attributes))},getAttribute:function(t){return this.attributes[t]},addDrawCall:function(t,e,r){this.drawcalls.push({start:t,count:e,index:void 0!==r?r:0})},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0),e=this.attributes.normal,void 0!==e&&((new THREE.Matrix3).getNormalMatrix(t).applyToVector3Array(e.array),e.needsUpdate=!0)},center:function(){},fromGeometry:function(t,e){e=e||{vertexColors:THREE.NoColors};var r=t.vertices,n=t.faces,i=t.faceVertexUvs,o=e.vertexColors,a=0<i[0].length,s=3==n[0].vertexNormals.length,u=new Float32Array(9*n.length);this.addAttribute("position",new THREE.BufferAttribute(u,3));var h=new Float32Array(9*n.length);if(this.addAttribute("normal",new THREE.BufferAttribute(h,3)),o!==THREE.NoColors){var l=new Float32Array(9*n.length);this.addAttribute("color",new THREE.BufferAttribute(l,3))}if(!0===a){var c=new Float32Array(6*n.length);this.addAttribute("uv",new THREE.BufferAttribute(c,2))}for(var f=0,p=0,d=0;f<n.length;f++,p+=6,d+=9){var m=n[f],g=r[m.a],v=r[m.b],E=r[m.c];u[d]=g.x,u[d+1]=g.y,u[d+2]=g.z,u[d+3]=v.x,u[d+4]=v.y,u[d+5]=v.z,u[d+6]=E.x,u[d+7]=E.y,u[d+8]=E.z,!0===s?(g=m.vertexNormals[0],v=m.vertexNormals[1],E=m.vertexNormals[2],h[d]=g.x,h[d+1]=g.y,h[d+2]=g.z,h[d+3]=v.x,h[d+4]=v.y,h[d+5]=v.z,h[d+6]=E.x,h[d+7]=E.y,h[d+8]=E.z):(g=m.normal,h[d]=g.x,h[d+1]=g.y,h[d+2]=g.z,h[d+3]=g.x,h[d+4]=g.y,h[d+5]=g.z,h[d+6]=g.x,h[d+7]=g.y,h[d+8]=g.z),o===THREE.FaceColors?(m=m.color,l[d]=m.r,l[d+1]=m.g,l[d+2]=m.b,l[d+3]=m.r,l[d+4]=m.g,l[d+5]=m.b,l[d+6]=m.r,l[d+7]=m.g,l[d+8]=m.b):o===THREE.VertexColors&&(g=m.vertexColors[0],v=m.vertexColors[1],m=m.vertexColors[2],l[d]=g.r,l[d+1]=g.g,l[d+2]=g.b,l[d+3]=v.r,l[d+4]=v.g,l[d+5]=v.b,l[d+6]=m.r,l[d+7]=m.g,l[d+8]=m.b),!0===a&&(m=i[0][f][0],g=i[0][f][1],v=i[0][f][2],c[p]=m.x,c[p+1]=m.y,c[p+2]=g.x,c[p+3]=g.y,c[p+4]=v.x,c[p+5]=v.y)}return this.computeBoundingSphere(),this},computeBoundingBox:function(){var t=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.attributes.position.array;if(e){var r=this.boundingBox;r.makeEmpty();for(var n=0,i=e.length;i>n;n+=3)t.set(e[n],e[n+1],e[n+2]),r.expandByPoint(t)}(void 0===e||0===e.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}}(),computeBoundingSphere:function(){var t=new THREE.Box3,e=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var r=this.attributes.position.array;if(r){t.makeEmpty();for(var n=this.boundingSphere.center,i=0,o=r.length;o>i;i+=3)e.set(r[i],r[i+1],r[i+2]),t.expandByPoint(e);t.center(n);for(var a=0,i=0,o=r.length;o>i;i+=3)e.set(r[i],r[i+1],r[i+2]),a=Math.max(a,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.attributes;if(t.position){var e=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(e.length),3));else for(var r=t.normal.array,n=0,i=r.length;i>n;n++)r[n]=0;var o,a,s,r=t.normal.array,u=new THREE.Vector3,h=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,f=new THREE.Vector3;if(t.index)for(var p=t.index.array,d=0<this.offsets.length?this.offsets:[{start:0,count:p.length,index:0}],m=0,g=d.length;g>m;++m){i=d[m].start,
o=d[m].count;for(var v=d[m].index,n=i,i=i+o;i>n;n+=3)o=3*(v+p[n]),a=3*(v+p[n+1]),s=3*(v+p[n+2]),u.fromArray(e,o),h.fromArray(e,a),l.fromArray(e,s),c.subVectors(l,h),f.subVectors(u,h),c.cross(f),r[o]+=c.x,r[o+1]+=c.y,r[o+2]+=c.z,r[a]+=c.x,r[a+1]+=c.y,r[a+2]+=c.z,r[s]+=c.x,r[s+1]+=c.y,r[s+2]+=c.z}else for(n=0,i=e.length;i>n;n+=9)u.fromArray(e,n),h.fromArray(e,n+3),l.fromArray(e,n+6),c.subVectors(l,h),f.subVectors(u,h),c.cross(f),r[n]=c.x,r[n+1]=c.y,r[n+2]=c.z,r[n+3]=c.x,r[n+4]=c.y,r[n+5]=c.z,r[n+6]=c.x,r[n+7]=c.y,r[n+8]=c.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},computeTangents:function(){function t(t,e,r){H.fromArray(n,3*t),S.fromArray(n,3*e),C.fromArray(n,3*r),A.fromArray(o,2*t),L.fromArray(o,2*e),P.fromArray(o,2*r),c=S.x-H.x,f=C.x-H.x,p=S.y-H.y,d=C.y-H.y,m=S.z-H.z,g=C.z-H.z,v=L.x-A.x,E=P.x-A.x,y=L.y-A.y,x=P.y-A.y,T=1/(v*x-E*y),F.set((x*c-y*f)*T,(x*p-y*d)*T,(x*m-y*g)*T),D.set((v*f-E*c)*T,(v*d-E*p)*T,(v*g-E*m)*T),u[t].add(F),u[e].add(F),u[r].add(F),h[t].add(D),h[e].add(D),h[r].add(D)}function e(t){V.fromArray(i,3*t),j.copy(V),k=u[t],I.copy(k),I.sub(V.multiplyScalar(V.dot(k))).normalize(),z.crossVectors(j,k),U=z.dot(h[t]),N=0>U?-1:1,s[4*t]=I.x,s[4*t+1]=I.y,s[4*t+2]=I.z,s[4*t+3]=N}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var r=this.attributes.index.array,n=this.attributes.position.array,i=this.attributes.normal.array,o=this.attributes.uv.array,a=n.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*a),4));for(var s=this.attributes.tangent.array,u=[],h=[],l=0;a>l;l++)u[l]=new THREE.Vector3,h[l]=new THREE.Vector3;var c,f,p,d,m,g,v,E,y,x,T,R,b,_,w,M,H=new THREE.Vector3,S=new THREE.Vector3,C=new THREE.Vector3,A=new THREE.Vector2,L=new THREE.Vector2,P=new THREE.Vector2,F=new THREE.Vector3,D=new THREE.Vector3;0===this.drawcalls.length&&this.addDrawCall(0,r.length,0);var B=this.drawcalls,l=0;for(b=B.length;b>l;++l){R=B[l].start,_=B[l].count;var O=B[l].index,a=R;for(R+=_;R>a;a+=3)_=O+r[a],w=O+r[a+1],M=O+r[a+2],t(_,w,M)}var N,k,U,I=new THREE.Vector3,z=new THREE.Vector3,V=new THREE.Vector3,j=new THREE.Vector3,l=0;for(b=B.length;b>l;++l)for(R=B[l].start,_=B[l].count,O=B[l].index,a=R,R+=_;R>a;a+=3)_=O+r[a],w=O+r[a+1],M=O+r[a+2],e(_),e(w),e(M)}},computeOffsets:function(t){var e=t;void 0===t&&(e=65535),Date.now(),t=this.attributes.index.array;for(var r=this.attributes.position.array,n=t.length/3,i=new Uint16Array(t.length),o=0,a=0,s=[{start:0,count:0,index:0}],u=s[0],h=0,l=0,c=new Int32Array(6),f=new Int32Array(r.length),p=new Int32Array(r.length),d=0;d<r.length;d++)f[d]=-1,p[d]=-1;for(r=0;n>r;r++){for(var m=l=0;3>m;m++)d=t[3*r+m],-1==f[d]?(c[2*m]=d,c[2*m+1]=-1,l++):f[d]<u.index?(c[2*m]=d,c[2*m+1]=-1,h++):(c[2*m]=d,c[2*m+1]=f[d]);if(a+l>u.index+e)for(u={start:o,count:0,index:a},s.push(u),l=0;6>l;l+=2)m=c[l+1],m>-1&&m<u.index&&(c[l+1]=-1);for(l=0;6>l;l+=2)d=c[l],m=c[l+1],-1===m&&(m=a++),f[d]=m,p[m]=d,i[o++]=m-u.index,u.count++}return this.reorderBuffers(i,p,a),this.offsets=s},merge:function(t,e){if(!1!=t instanceof THREE.BufferGeometry){void 0===e&&(e=0);var r,n=this.attributes;for(r in n)if(void 0!==t.attributes[r])for(var i=n[r].array,o=t.attributes[r],a=o.array,s=0,o=o.itemSize*e;s<a.length;s++,o++)i[o]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t,e,r,n=this.attributes.normal.array,i=0,o=n.length;o>i;i+=3)t=n[i],e=n[i+1],r=n[i+2],t=1/Math.sqrt(t*t+e*e+r*r),n[i]*=t,n[i+1]*=t,n[i+2]*=t},reorderBuffers:function(t,e,r){var n,i={};for(n in this.attributes)"index"!=n&&(i[n]=new this.attributes[n].array.constructor(this.attributes[n].itemSize*r));for(var o=0;r>o;o++){var a=e[o];for(n in this.attributes)if("index"!=n)for(var s=this.attributes[n].array,u=this.attributes[n].itemSize,h=i[n],l=0;u>l;l++)h[o*u+l]=s[a*u+l]}this.attributes.index.array=t;for(n in this.attributes)"index"!=n&&(this.attributes[n].array=i[n],this.attributes[n].numItems=this.attributes[n].itemSize*r)},toJSON:function(){var t,e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},r=this.attributes,n=this.offsets,i=this.boundingSphere;for(t in r){for(var o=r[t],a=[],s=o.array,u=0,h=s.length;h>u;u++)a[u]=s[u];e.data.attributes[t]={itemSize:o.itemSize,type:o.array.constructor.name,array:a}}return 0<n.length&&(e.data.offsets=JSON.parse(JSON.stringify(n))),null!==i&&(e.data.boundingSphere={center:i.center.toArray(),radius:i.radius}),e},clone:function(){var t,e=new THREE.BufferGeometry;for(t in this.attributes)e.addAttribute(t,this.attributes[t].clone());t=0;for(var r=this.offsets.length;r>t;t++){var n=this.offsets[t];e.offsets.push({start:n.start,index:n.index,count:n.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.hasTangents=!1,this.dynamic=!0,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(t){for(var e=(new THREE.Matrix3).getNormalMatrix(t),r=0,n=this.vertices.length;n>r;r++)this.vertices[r].applyMatrix4(t);for(r=0,n=this.faces.length;n>r;r++){t=this.faces[r],t.normal.applyMatrix3(e).normalize();for(var i=0,o=t.vertexNormals.length;o>i;i++)t.vertexNormals[i].applyMatrix3(e).normalize()}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},fromBufferGeometry:function(t){for(var e=this,r=t.attributes,n=r.position.array,i=void 0!==r.index?r.index.array:void 0,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=[],h=[],l=r=0;r<n.length;r+=3,l+=2)e.vertices.push(new THREE.Vector3(n[r],n[r+1],n[r+2])),void 0!==o&&u.push(new THREE.Vector3(o[r],o[r+1],o[r+2])),void 0!==a&&e.colors.push(new THREE.Color(a[r],a[r+1],a[r+2])),void 0!==s&&h.push(new THREE.Vector2(s[l],s[l+1]));if(l=function(t,r,n){var i=void 0!==o?[u[t].clone(),u[r].clone(),u[n].clone()]:[],l=void 0!==a?[e.colors[t].clone(),e.colors[r].clone(),e.colors[n].clone()]:[];e.faces.push(new THREE.Face3(t,r,n,i,l)),void 0!==s&&e.faceVertexUvs[0].push([h[t].clone(),h[r].clone(),h[n].clone()])},void 0!==i)for(r=0;r<i.length;r+=3)l(i[r],i[r+1],i[r+2]);else for(r=0;r<n.length/3;r+=3)l(r,r+1,r+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=new THREE.Vector3;return t.addVectors(this.boundingBox.min,this.boundingBox.max),t.multiplyScalar(-.5),this.applyMatrix((new THREE.Matrix4).makeTranslation(t.x,t.y,t.z)),this.computeBoundingBox(),t},computeFaceNormals:function(){for(var t=new THREE.Vector3,e=new THREE.Vector3,r=0,n=this.faces.length;n>r;r++){var i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b];t.subVectors(this.vertices[i.c],a),e.subVectors(o,a),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,r,n;for(n=Array(this.vertices.length),e=0,r=this.vertices.length;r>e;e++)n[e]=new THREE.Vector3;if(t){var i,o,a,s=new THREE.Vector3,u=new THREE.Vector3;for(new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,t=0,e=this.faces.length;e>t;t++)r=this.faces[t],i=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c],s.subVectors(a,o),u.subVectors(i,o),s.cross(u),n[r.a].add(s),n[r.b].add(s),n[r.c].add(s)}else for(t=0,e=this.faces.length;e>t;t++)r=this.faces[t],n[r.a].add(r.normal),n[r.b].add(r.normal),n[r.c].add(r.normal);for(e=0,r=this.vertices.length;r>e;e++)n[e].normalize();for(t=0,e=this.faces.length;e>t;t++)r=this.faces[t],r.vertexNormals[0]=n[r.a].clone(),r.vertexNormals[1]=n[r.b].clone(),r.vertexNormals[2]=n[r.c].clone()},computeMorphNormals:function(){var t,e,r,n,i;for(r=0,n=this.faces.length;n>r;r++)for(i=this.faces[r],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;e>t;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var o=new THREE.Geometry;for(o.faces=this.faces,t=0,e=this.morphTargets.length;e>t;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[],i=this.morphNormals[t].faceNormals;var a,s,u=this.morphNormals[t].vertexNormals;for(r=0,n=this.faces.length;n>r;r++)a=new THREE.Vector3,s={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},i.push(a),u.push(s)}for(u=this.morphNormals[t],o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),r=0,n=this.faces.length;n>r;r++)i=this.faces[r],a=u.faceNormals[r],s=u.vertexNormals[r],a.copy(i.normal),s.a.copy(i.vertexNormals[0]),s.b.copy(i.vertexNormals[1]),s.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;n>r;r++)i=this.faces[r],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){var t,e,r,n,i,o,a,s,u,h,l,c,f,p,d,m,g,v=[],E=[];r=new THREE.Vector3;var y=new THREE.Vector3,x=new THREE.Vector3,T=new THREE.Vector3,R=new THREE.Vector3;for(t=0,e=this.vertices.length;e>t;t++)v[t]=new THREE.Vector3,E[t]=new THREE.Vector3;for(t=0,e=this.faces.length;e>t;t++)i=this.faces[t],o=this.faceVertexUvs[0][t],n=i.a,g=i.b,i=i.c,a=this.vertices[n],s=this.vertices[g],u=this.vertices[i],h=o[0],l=o[1],c=o[2],o=s.x-a.x,f=u.x-a.x,p=s.y-a.y,d=u.y-a.y,s=s.z-a.z,a=u.z-a.z,u=l.x-h.x,m=c.x-h.x,l=l.y-h.y,h=c.y-h.y,c=1/(u*h-m*l),r.set((h*o-l*f)*c,(h*p-l*d)*c,(h*s-l*a)*c),y.set((u*f-m*o)*c,(u*d-m*p)*c,(u*a-m*s)*c),v[n].add(r),v[g].add(r),v[i].add(r),E[n].add(y),E[g].add(y),E[i].add(y);for(y=["a","b","c","d"],t=0,e=this.faces.length;e>t;t++)for(i=this.faces[t],r=0;r<Math.min(i.vertexNormals.length,3);r++)R.copy(i.vertexNormals[r]),n=i[y[r]],g=v[n],x.copy(g),x.sub(R.multiplyScalar(R.dot(g))).normalize(),T.crossVectors(i.vertexNormals[r],g),n=T.dot(E[n]),n=0>n?-1:1,i.vertexTangents[r]=new THREE.Vector4(x.x,x.y,x.z,n);this.hasTangents=!0},computeLineDistances:function(){for(var t=0,e=this.vertices,r=0,n=e.length;n>r;r++)r>0&&(t+=e[r].distanceTo(e[r-1])),this.lineDistances[r]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,r){if(!1==t instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);else{var n,i=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,u=t.faces,h=this.faceVertexUvs[0];t=t.faceVertexUvs[0],void 0===r&&(r=0),void 0!==e&&(n=(new THREE.Matrix3).getNormalMatrix(e));for(var l=0,c=a.length;c>l;l++){var f=a[l].clone();void 0!==e&&f.applyMatrix4(e),o.push(f)}for(l=0,c=u.length;c>l;l++){var p,a=u[l],d=a.vertexNormals,m=a.vertexColors,f=new THREE.Face3(a.a+i,a.b+i,a.c+i);for(f.normal.copy(a.normal),void 0!==n&&f.normal.applyMatrix3(n).normalize(),e=0,o=d.length;o>e;e++)p=d[e].clone(),void 0!==n&&p.applyMatrix3(n).normalize(),f.vertexNormals.push(p);for(f.color.copy(a.color),e=0,o=m.length;o>e;e++)p=m[e],f.vertexColors.push(p.clone());f.materialIndex=a.materialIndex+r,s.push(f)}for(l=0,c=t.length;c>l;l++)if(r=t[l],n=[],void 0!==r){for(e=0,o=r.length;o>e;e++)n.push(r[e].clone());h.push(n)}}},mergeMesh:function(t){!1==t instanceof THREE.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,r,n={},i=[],o=[],a=Math.pow(10,4);for(e=0,r=this.vertices.length;r>e;e++)t=this.vertices[e],t=Math.round(t.x*a)+"_"+Math.round(t.y*a)+"_"+Math.round(t.z*a),void 0===n[t]?(n[t]=e,i.push(this.vertices[e]),o[e]=i.length-1):o[e]=o[n[t]];for(n=[],e=0,r=this.faces.length;r>e;e++)for(a=this.faces[e],a.a=o[a.a],a.b=o[a.b],a.c=o[a.c],a=[a.a,a.b,a.c],t=0;3>t;t++)if(a[t]==a[(t+1)%3]){n.push(e);break}for(e=n.length-1;e>=0;e--)for(a=n[e],this.faces.splice(a,1),o=0,r=this.faceVertexUvs.length;r>o;o++)this.faceVertexUvs[o].splice(a,1);return e=this.vertices.length-i.length,this.vertices=i,e},toJSON:function(){function t(t,e,r){return r?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==h[e]?h[e]:(h[e]=u.length/3,u.push(t.x,t.y,t.z),h[e])}function r(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]?c[e]:(c[e]=l.length,l.push(t.getHex()),c[e])}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]?p[e]:(p[e]=f.length/2,f.push(t.x,t.y),p[e])}var i={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o,a=this.parameters;for(o in a)void 0!==a[o]&&(i[o]=a[o]);return i}for(a=[],o=0;o<this.vertices.length;o++){var s=this.vertices[o];a.push(s.x,s.y,s.z)}var s=[],u=[],h={},l=[],c={},f=[],p={};for(o=0;o<this.faces.length;o++){var d=this.faces[o],m=void 0!==this.faceVertexUvs[0][o],g=0<d.normal.length(),v=0<d.vertexNormals.length,E=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=0<d.vertexColors.length,x=0,x=t(x,0,0),x=t(x,1,!1),x=t(x,2,!1),x=t(x,3,m),x=t(x,4,g),x=t(x,5,v),x=t(x,6,E),x=t(x,7,y);s.push(x),s.push(d.a,d.b,d.c),m&&(m=this.faceVertexUvs[0][o],s.push(n(m[0]),n(m[1]),n(m[2]))),g&&s.push(e(d.normal)),v&&(g=d.vertexNormals,s.push(e(g[0]),e(g[1]),e(g[2]))),E&&s.push(r(d.color)),y&&(d=d.vertexColors,s.push(r(d[0]),r(d[1]),r(d[2])))}return i.data={},i.data.vertices=a,i.data.normals=u,0<l.length&&(i.data.colors=l),0<f.length&&(i.data.uvs=[f]),i.data.faces=s,i},clone:function(){for(var t=new THREE.Geometry,e=this.vertices,r=0,n=e.length;n>r;r++)t.vertices.push(e[r].clone());for(e=this.faces,r=0,n=e.length;n>r;r++)t.faces.push(e[r].clone());for(r=0,n=this.faceVertexUvs.length;n>r;r++){e=this.faceVertexUvs[r],void 0===t.faceVertexUvs[r]&&(t.faceVertexUvs[r]=[]);for(var i=0,o=e.length;o>i;i++){for(var a=e[i],s=[],u=0,h=a.length;h>u;u++)s.push(a[u].clone());t.faceVertexUvs[r].push(s)}}return t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.Camera=function(){THREE.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.constructor=THREE.Camera,THREE.Camera.prototype.getWorldDirection=function(){var t=new THREE.Quaternion;return function(e){return e=e||new THREE.Vector3,this.getWorldQuaternion(t),e.set(0,0,-1).applyQuaternion(t)}}(),THREE.Camera.prototype.lookAt=function(){var t=new THREE.Matrix4;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),THREE.Camera.prototype.clone=function(t){return void 0===t&&(t=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,t),t.matrixWorldInverse.copy(this.matrixWorldInverse),t.projectionMatrix.copy(this.projectionMatrix),t},THREE.CubeCamera=function(t,e,r){THREE.Object3D.call(this),this.type="CubeCamera";var n=new THREE.PerspectiveCamera(90,1,t,e);n.up.set(0,-1,0),n.lookAt(new THREE.Vector3(1,0,0)),this.add(n);var i=new THREE.PerspectiveCamera(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new THREE.Vector3(-1,0,0)),this.add(i);var o=new THREE.PerspectiveCamera(90,1,t,e);o.up.set(0,0,1),o.lookAt(new THREE.Vector3(0,1,0)),this.add(o);var a=new THREE.PerspectiveCamera(90,1,t,e);a.up.set(0,0,-1),a.lookAt(new THREE.Vector3(0,-1,0)),this.add(a);var s=new THREE.PerspectiveCamera(90,1,t,e);s.up.set(0,-1,0),s.lookAt(new THREE.Vector3(0,0,1)),this.add(s);var u=new THREE.PerspectiveCamera(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new THREE.Vector3(0,0,-1)),this.add(u),this.renderTarget=new THREE.WebGLRenderTargetCube(r,r,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(t,e){var r=this.renderTarget,h=r.generateMipmaps;r.generateMipmaps=!1,r.activeCubeFace=0,t.render(e,n,r),r.activeCubeFace=1,t.render(e,i,r),r.activeCubeFace=2,t.render(e,o,r),r.activeCubeFace=3,t.render(e,a,r),r.activeCubeFace=4,t.render(e,s,r),r.generateMipmaps=h,r.activeCubeFace=5,t.render(e,u,r)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.CubeCamera.prototype.constructor=THREE.CubeCamera,THREE.OrthographicCamera=function(t,e,r,n,i,o){THREE.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=t,this.right=e,this.top=r,this.bottom=n,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera,THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(r-t,r+t,n+e,n-e,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var t=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,t),t.zoom=this.zoom,t.left=this.left,t.right=this.right,t.top=this.top,t.bottom=this.bottom,t.near=this.near,t.far=this.far,t.projectionMatrix.copy(this.projectionMatrix),t},THREE.PerspectiveCamera=function(t,e,r,n){THREE.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==t?t:50,this.aspect=void 0!==e?e:1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera,THREE.PerspectiveCamera.prototype.setLens=function(t,e){void 0===e&&(e=24),this.fov=2*THREE.Math.radToDeg(Math.atan(e/(2*t))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(t,e,r,n,i,o){this.fullWidth=t,this.fullHeight=e,this.x=r,this.y=n,this.width=i,this.height=o,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var t=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var e=this.fullWidth/this.fullHeight,t=Math.tan(THREE.Math.degToRad(.5*t))*this.near,r=-t,n=e*r,e=Math.abs(e*t-n),r=Math.abs(t-r);this.projectionMatrix.makeFrustum(n+this.x*e/this.fullWidth,n+(this.x+this.width)*e/this.fullWidth,t-(this.y+this.height)*r/this.fullHeight,t-this.y*r/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(t,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.clone=function(){var t=new THREE.PerspectiveCamera;return THREE.Camera.prototype.clone.call(this,t),t.zoom=this.zoom,t.fov=this.fov,t.aspect=this.aspect,t.near=this.near,t.far=this.far,t.projectionMatrix.copy(this.projectionMatrix),t},THREE.Light=function(t){THREE.Object3D.call(this),this.type="Light",this.color=new THREE.Color(t)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.constructor=THREE.Light,THREE.Light.prototype.clone=function(t){return void 0===t&&(t=new THREE.Light),THREE.Object3D.prototype.clone.call(this,t),t.color.copy(this.color),t},THREE.AmbientLight=function(t){THREE.Light.call(this,t),this.type="AmbientLight"},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.constructor=THREE.AmbientLight,THREE.AmbientLight.prototype.clone=function(){var t=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,t),t},THREE.AreaLight=function(t,e){THREE.Light.call(this,t),this.type="AreaLight",this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=void 0!==e?e:1,this.height=this.width=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.AreaLight.prototype.constructor=THREE.AreaLight,THREE.DirectionalLight=function(t,e){THREE.Light.call(this,t),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==e?e:1,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraTop=this.shadowCameraRight=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight,THREE.DirectionalLight.prototype.clone=function(){var t=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,t),t.target=this.target.clone(),t.intensity=this.intensity,t.castShadow=this.castShadow,t.onlyShadow=this.onlyShadow,t.shadowCameraNear=this.shadowCameraNear,t.shadowCameraFar=this.shadowCameraFar,t.shadowCameraLeft=this.shadowCameraLeft,t.shadowCameraRight=this.shadowCameraRight,t.shadowCameraTop=this.shadowCameraTop,t.shadowCameraBottom=this.shadowCameraBottom,t.shadowCameraVisible=this.shadowCameraVisible,t.shadowBias=this.shadowBias,t.shadowDarkness=this.shadowDarkness,t.shadowMapWidth=this.shadowMapWidth,t.shadowMapHeight=this.shadowMapHeight,t.shadowCascade=this.shadowCascade,t.shadowCascadeOffset.copy(this.shadowCascadeOffset),t.shadowCascadeCount=this.shadowCascadeCount,t.shadowCascadeBias=this.shadowCascadeBias.slice(0),t.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),t.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),t.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),t.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),t},THREE.HemisphereLight=function(t,e,r){THREE.Light.call(this,t),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new THREE.Color(e),this.intensity=void 0!==r?r:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.constructor=THREE.HemisphereLight,THREE.HemisphereLight.prototype.clone=function(){var t=new THREE.HemisphereLight;return THREE.Light.prototype.clone.call(this,t),t.groundColor.copy(this.groundColor),t.intensity=this.intensity,t},THREE.PointLight=function(t,e,r){THREE.Light.call(this,t),this.type="PointLight",this.intensity=void 0!==e?e:1,this.distance=void 0!==r?r:0},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.constructor=THREE.PointLight,THREE.PointLight.prototype.clone=function(){var t=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,t),t.intensity=this.intensity,t.distance=this.distance,t},THREE.SpotLight=function(t,e,r,n,i){THREE.Light.call(this,t),this.type="SpotLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==e?e:1,this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.exponent=void 0!==i?i:10,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.constructor=THREE.SpotLight,THREE.SpotLight.prototype.clone=function(){var t=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,t),t.target=this.target.clone(),t.intensity=this.intensity,t.distance=this.distance,t.angle=this.angle,t.exponent=this.exponent,t.castShadow=this.castShadow,t.onlyShadow=this.onlyShadow,t.shadowCameraNear=this.shadowCameraNear,t.shadowCameraFar=this.shadowCameraFar,t.shadowCameraFov=this.shadowCameraFov,t.shadowCameraVisible=this.shadowCameraVisible,t.shadowBias=this.shadowBias,t.shadowDarkness=this.shadowDarkness,t.shadowMapWidth=this.shadowMapWidth,t.shadowMapHeight=this.shadowMapHeight,t},THREE.Cache=function(){this.files={}},THREE.Cache.prototype={constructor:THREE.Cache,add:function(t,e){this.files[t]=e},get:function(t){return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},THREE.Loader=function(t){this.statusDomElement=(this.showStatus=t)?THREE.Loader.prototype.addStatusElement():null,this.imageLoader=new THREE.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var t=document.createElement("div");return t.style.position="absolute",t.style.right="0px",t.style.top="0px",t.style.fontSize="0.8em",t.style.textAlign="left",t.style.background="rgba(0,0,0,0.25)",t.style.color="#fff",t.style.width="120px",t.style.padding="0.5em 0.5em 0.5em 0.5em",t.style.zIndex=1e3,t.innerHTML="Loading ...",t},updateProgress:function(t){var e="Loaded ",e=t.total?e+((100*t.loaded/t.total).toFixed(0)+"%"):e+((t.loaded/1024).toFixed(2)+" KB");this.statusDomElement.innerHTML=e},extractUrlBase:function(t){return t=t.split("/"),1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(t,e){for(var r=[],n=0;n<t.length;++n)r[n]=this.createMaterial(t[n],e);return r},needsTangents:function(t){for(var e=0,r=t.length;r>e;e++)if(t[e]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(t,e){function r(t){return t=Math.log(t)/Math.LN2,Math.pow(2,Math.round(t))}function n(t,n,i,a,s,u,h){var l,c=e+i,f=THREE.Loader.Handlers.get(c);null!==f?l=f.load(c):(l=new THREE.Texture,f=o.imageLoader,f.crossOrigin=o.crossOrigin,f.load(c,function(t){if(!1===THREE.Math.isPowerOfTwo(t.width)||!1===THREE.Math.isPowerOfTwo(t.height)){var e=r(t.width),n=r(t.height),i=document.createElement("canvas");i.width=e,i.height=n,i.getContext("2d").drawImage(t,0,0,e,n),l.image=i}else l.image=t;l.needsUpdate=!0})),l.sourceFile=i,a&&(l.repeat.set(a[0],a[1]),1!==a[0]&&(l.wrapS=THREE.RepeatWrapping),1!==a[1]&&(l.wrapT=THREE.RepeatWrapping)),s&&l.offset.set(s[0],s[1]),u&&(i={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==i[u[0]]&&(l.wrapS=i[u[0]]),void 0!==i[u[1]]&&(l.wrapT=i[u[1]])),h&&(l.anisotropy=h),t[n]=l}function i(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]}var o=this,a="MeshLambertMaterial",s={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(t.shading){var u=t.shading.toLowerCase();"phong"===u?a="MeshPhongMaterial":"basic"===u&&(a="MeshBasicMaterial")}return void 0!==t.blending&&void 0!==THREE[t.blending]&&(s.blending=THREE[t.blending]),(void 0!==t.transparent||1>t.opacity)&&(s.transparent=t.transparent),void 0!==t.depthTest&&(s.depthTest=t.depthTest),void 0!==t.depthWrite&&(s.depthWrite=t.depthWrite),void 0!==t.visible&&(s.visible=t.visible),void 0!==t.flipSided&&(s.side=THREE.BackSide),void 0!==t.doubleSided&&(s.side=THREE.DoubleSide),void 0!==t.wireframe&&(s.wireframe=t.wireframe),void 0!==t.vertexColors&&("face"===t.vertexColors?s.vertexColors=THREE.FaceColors:t.vertexColors&&(s.vertexColors=THREE.VertexColors)),t.colorDiffuse?s.color=i(t.colorDiffuse):t.DbgColor&&(s.color=t.DbgColor),t.colorSpecular&&(s.specular=i(t.colorSpecular)),t.colorAmbient&&(s.ambient=i(t.colorAmbient)),t.colorEmissive&&(s.emissive=i(t.colorEmissive)),t.transparency&&(s.opacity=t.transparency),t.specularCoef&&(s.shininess=t.specularCoef),t.mapDiffuse&&e&&n(s,"map",t.mapDiffuse,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy),t.mapLight&&e&&n(s,"lightMap",t.mapLight,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy),t.mapBump&&e&&n(s,"bumpMap",t.mapBump,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy),t.mapNormal&&e&&n(s,"normalMap",t.mapNormal,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy),t.mapSpecular&&e&&n(s,"specularMap",t.mapSpecular,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy),t.mapAlpha&&e&&n(s,"alphaMap",t.mapAlpha,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy),t.mapBumpScale&&(s.bumpScale=t.mapBumpScale),t.mapNormalFactor&&(s.normalScale=new THREE.Vector2(t.mapNormalFactor,t.mapNormalFactor)),a=new THREE[a](s),void 0!==t.DbgName&&(a.name=t.DbgName),a}},THREE.Loader.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=0,r=this.handlers.length;r>e;e+=2){var n=this.handlers[e+1];if(this.handlers[e].test(t))return n}return null}},THREE.XHRLoader=function(t){this.cache=new THREE.Cache,this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(t,e,r,n){var i=this,o=i.cache.get(t);void 0!==o?e&&e(o):(o=new XMLHttpRequest,o.open("GET",t,!0),o.addEventListener("load",function(r){i.cache.add(t,this.response),e&&e(this.response),i.manager.itemEnd(t)},!1),void 0!==r&&o.addEventListener("progress",function(t){r(t)},!1),void 0!==n&&o.addEventListener("error",function(t){n(t)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(o.responseType=this.responseType),o.send(null),i.manager.itemStart(t))},setResponseType:function(t){this.responseType=t},setCrossOrigin:function(t){this.crossOrigin=t}},THREE.ImageLoader=function(t){this.cache=new THREE.Cache,this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(t,e,r,n){var i=this,o=i.cache.get(t);return void 0===o?(o=document.createElement("img"),void 0!==e&&o.addEventListener("load",function(r){i.cache.add(t,this),e(this),i.manager.itemEnd(t)},!1),void 0!==r&&o.addEventListener("progress",function(t){r(t)},!1),void 0!==n&&o.addEventListener("error",function(t){n(t)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),o.src=t,i.manager.itemStart(t),o):void e(o)},setCrossOrigin:function(t){this.crossOrigin=t}},THREE.JSONLoader=function(t){THREE.Loader.call(this,t),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.constructor=THREE.JSONLoader,THREE.JSONLoader.prototype.load=function(t,e,r){r=r&&"string"==typeof r?r:this.extractUrlBase(t),this.onLoadStart(),this.loadAjaxJSON(this,t,e,r)},THREE.JSONLoader.prototype.loadAjaxJSON=function(t,e,r,n,i){var o=new XMLHttpRequest,a=0;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(200===o.status||0===o.status){if(o.responseText){var s=JSON.parse(o.responseText);if(void 0!==s.metadata&&"scene"===s.metadata.type)return void console.error('THREE.JSONLoader: "'+e+'" seems to be a Scene. Use THREE.SceneLoader instead.');

s=t.parse(s,n),r(s.geometry,s.materials)}else console.error('THREE.JSONLoader: "'+e+'" seems to be unreachable or the file is empty.');t.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+e+'" ('+o.status+")");else o.readyState===o.LOADING?i&&(0===a&&(a=o.getResponseHeader("Content-Length")),i({total:a,loaded:o.responseText.length})):o.readyState===o.HEADERS_RECEIVED&&void 0!==i&&(a=o.getResponseHeader("Content-Length"))},o.open("GET",e,!0),o.withCredentials=this.withCredentials,o.send(null)},THREE.JSONLoader.prototype.parse=function(t,e){var r=new THREE.Geometry,n=void 0!==t.scale?1/t.scale:1;return function(e){var n,i,o,a,s,u,h,l,c,f,p,d,m,g=t.faces;u=t.vertices;var v=t.normals,E=t.colors,y=0;if(void 0!==t.uvs){for(n=0;n<t.uvs.length;n++)t.uvs[n].length&&y++;for(n=0;y>n;n++)r.faceVertexUvs[n]=[]}for(a=0,s=u.length;s>a;)n=new THREE.Vector3,n.x=u[a++]*e,n.y=u[a++]*e,n.z=u[a++]*e,r.vertices.push(n);for(a=0,s=g.length;s>a;)if(e=g[a++],c=1&e,o=2&e,n=8&e,h=16&e,f=32&e,u=64&e,e&=128,c){if(c=new THREE.Face3,c.a=g[a],c.b=g[a+1],c.c=g[a+3],p=new THREE.Face3,p.a=g[a+1],p.b=g[a+2],p.c=g[a+3],a+=4,o&&(o=g[a++],c.materialIndex=o,p.materialIndex=o),o=r.faces.length,n)for(n=0;y>n;n++)for(d=t.uvs[n],r.faceVertexUvs[n][o]=[],r.faceVertexUvs[n][o+1]=[],i=0;4>i;i++)l=g[a++],m=d[2*l],l=d[2*l+1],m=new THREE.Vector2(m,l),2!==i&&r.faceVertexUvs[n][o].push(m),0!==i&&r.faceVertexUvs[n][o+1].push(m);if(h&&(h=3*g[a++],c.normal.set(v[h++],v[h++],v[h]),p.normal.copy(c.normal)),f)for(n=0;4>n;n++)h=3*g[a++],f=new THREE.Vector3(v[h++],v[h++],v[h]),2!==n&&c.vertexNormals.push(f),0!==n&&p.vertexNormals.push(f);if(u&&(u=g[a++],u=E[u],c.color.setHex(u),p.color.setHex(u)),e)for(n=0;4>n;n++)u=g[a++],u=E[u],2!==n&&c.vertexColors.push(new THREE.Color(u)),0!==n&&p.vertexColors.push(new THREE.Color(u));r.faces.push(c),r.faces.push(p)}else{if(c=new THREE.Face3,c.a=g[a++],c.b=g[a++],c.c=g[a++],o&&(o=g[a++],c.materialIndex=o),o=r.faces.length,n)for(n=0;y>n;n++)for(d=t.uvs[n],r.faceVertexUvs[n][o]=[],i=0;3>i;i++)l=g[a++],m=d[2*l],l=d[2*l+1],m=new THREE.Vector2(m,l),r.faceVertexUvs[n][o].push(m);if(h&&(h=3*g[a++],c.normal.set(v[h++],v[h++],v[h])),f)for(n=0;3>n;n++)h=3*g[a++],f=new THREE.Vector3(v[h++],v[h++],v[h]),c.vertexNormals.push(f);if(u&&(u=g[a++],c.color.setHex(E[u])),e)for(n=0;3>n;n++)u=g[a++],c.vertexColors.push(new THREE.Color(E[u]));r.faces.push(c)}}(n),function(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var n=0,i=t.skinWeights.length;i>n;n+=e)r.skinWeights.push(new THREE.Vector4(t.skinWeights[n],e>1?t.skinWeights[n+1]:0,e>2?t.skinWeights[n+2]:0,e>3?t.skinWeights[n+3]:0));if(t.skinIndices)for(n=0,i=t.skinIndices.length;i>n;n+=e)r.skinIndices.push(new THREE.Vector4(t.skinIndices[n],e>1?t.skinIndices[n+1]:0,e>2?t.skinIndices[n+2]:0,e>3?t.skinIndices[n+3]:0));r.bones=t.bones,r.bones&&0<r.bones.length&&(r.skinWeights.length!==r.skinIndices.length||r.skinIndices.length!==r.vertices.length)&&console.warn("When skinning, number of vertices ("+r.vertices.length+"), skinIndices ("+r.skinIndices.length+"), and skinWeights ("+r.skinWeights.length+") should match."),r.animation=t.animation,r.animations=t.animations}(),function(e){if(void 0!==t.morphTargets){var n,i,o,a,s,u;for(n=0,i=t.morphTargets.length;i>n;n++)for(r.morphTargets[n]={},r.morphTargets[n].name=t.morphTargets[n].name,r.morphTargets[n].vertices=[],s=r.morphTargets[n].vertices,u=t.morphTargets[n].vertices,o=0,a=u.length;a>o;o+=3){var h=new THREE.Vector3;h.x=u[o]*e,h.y=u[o+1]*e,h.z=u[o+2]*e,s.push(h)}}if(void 0!==t.morphColors)for(n=0,i=t.morphColors.length;i>n;n++)for(r.morphColors[n]={},r.morphColors[n].name=t.morphColors[n].name,r.morphColors[n].colors=[],a=r.morphColors[n].colors,s=t.morphColors[n].colors,e=0,o=s.length;o>e;e+=3)u=new THREE.Color(16755200),u.setRGB(s[e],s[e+1],s[e+2]),a.push(u)}(n),r.computeFaceNormals(),r.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:r}:(n=this.initMaterials(t.materials,e),this.needsTangents(n)&&r.computeTangents(),{geometry:r,materials:n})},THREE.LoadingManager=function(t,e,r){var n=this,i=0,o=0;this.onLoad=t,this.onProgress=e,this.onError=r,this.itemStart=function(t){o++},this.itemEnd=function(t){i++,void 0!==n.onProgress&&n.onProgress(t,i,o),i===o&&void 0!==n.onLoad&&n.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(t,e,r,n){var i=this,o=new THREE.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(t,function(t){e(i.parse(JSON.parse(t)))},r,n)},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t){var e,r=new THREE.BufferGeometry,n=t.attributes;for(e in n){var i=n[e],o=new self[i.type](i.array);r.addAttribute(e,new THREE.BufferAttribute(o,i.itemSize))}return n=t.offsets,void 0!==n&&(r.offsets=JSON.parse(JSON.stringify(n))),t=t.boundingSphere,void 0!==t&&(n=new THREE.Vector3,void 0!==t.center&&n.fromArray(t.center),r.boundingSphere=new THREE.Sphere(n,t.radius)),r}},THREE.MaterialLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(t,e,r,n){var i=this,o=new THREE.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(t,function(t){e(i.parse(JSON.parse(t)))},r,n)},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t){var e=new THREE[t.type];if(void 0!==t.color&&e.color.setHex(t.color),void 0!==t.ambient&&e.ambient.setHex(t.ambient),void 0!==t.emissive&&e.emissive.setHex(t.emissive),void 0!==t.specular&&e.specular.setHex(t.specular),void 0!==t.shininess&&(e.shininess=t.shininess),void 0!==t.uniforms&&(e.uniforms=t.uniforms),void 0!==t.vertexShader&&(e.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(e.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(e.vertexColors=t.vertexColors),void 0!==t.shading&&(e.shading=t.shading),void 0!==t.blending&&(e.blending=t.blending),void 0!==t.side&&(e.side=t.side),void 0!==t.opacity&&(e.opacity=t.opacity),void 0!==t.transparent&&(e.transparent=t.transparent),void 0!==t.wireframe&&(e.wireframe=t.wireframe),void 0!==t.materials)for(var r=0,n=t.materials.length;n>r;r++)e.materials.push(this.parse(t.materials[r]));return e}},THREE.ObjectLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(t,e,r,n){var i=this,o=new THREE.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(t,function(t){e(i.parse(JSON.parse(t)))},r,n)},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t){var e=this.parseGeometries(t.geometries),r=this.parseMaterials(t.materials);return this.parseObject(t.object,e,r)},parseGeometries:function(t){var e={};if(void 0!==t)for(var r=new THREE.JSONLoader,n=new THREE.BufferGeometryLoader,i=0,o=t.length;o>i;i++){var a,s=t[i];switch(s.type){case"PlaneGeometry":a=new THREE.PlaneGeometry(s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"CubeGeometry":a=new THREE.BoxGeometry(s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":a=new THREE.CircleGeometry(s.radius,s.segments);break;case"CylinderGeometry":a=new THREE.CylinderGeometry(s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded);break;case"SphereGeometry":a=new THREE.SphereGeometry(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"IcosahedronGeometry":a=new THREE.IcosahedronGeometry(s.radius,s.detail);break;case"TorusGeometry":a=new THREE.TorusGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":a=new THREE.TorusKnotGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.p,s.q,s.heightScale);break;case"BufferGeometry":a=n.parse(s.data);break;case"Geometry":a=r.parse(s.data).geometry}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),e[s.uuid]=a}return e},parseMaterials:function(t){var e={};if(void 0!==t)for(var r=new THREE.MaterialLoader,n=0,i=t.length;i>n;n++){var o=t[n],a=r.parse(o);a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),e[o.uuid]=a}return e},parseObject:function(){var t=new THREE.Matrix4;return function(e,r,n){var i;switch(e.type){case"Scene":i=new THREE.Scene;break;case"PerspectiveCamera":i=new THREE.PerspectiveCamera(e.fov,e.aspect,e.near,e.far);break;case"OrthographicCamera":i=new THREE.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":i=new THREE.AmbientLight(e.color);break;case"DirectionalLight":i=new THREE.DirectionalLight(e.color,e.intensity);break;case"PointLight":i=new THREE.PointLight(e.color,e.intensity,e.distance);break;case"SpotLight":i=new THREE.SpotLight(e.color,e.intensity,e.distance,e.angle,e.exponent);break;case"HemisphereLight":i=new THREE.HemisphereLight(e.color,e.groundColor,e.intensity);break;case"Mesh":i=r[e.geometry];var o=n[e.material];void 0===i&&console.warn("THREE.ObjectLoader: Undefined geometry",e.geometry),void 0===o&&console.warn("THREE.ObjectLoader: Undefined material",e.material),i=new THREE.Mesh(i,o);break;case"Line":i=r[e.geometry],o=n[e.material],void 0===i&&console.warn("THREE.ObjectLoader: Undefined geometry",e.geometry),void 0===o&&console.warn("THREE.ObjectLoader: Undefined material",e.material),i=new THREE.Line(i,o);break;case"Sprite":o=n[e.material],void 0===o&&console.warn("THREE.ObjectLoader: Undefined material",e.material),i=new THREE.Sprite(o);break;case"Group":i=new THREE.Group;break;default:i=new THREE.Object3D}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.children)for(var a in e.children)i.add(this.parseObject(e.children[a],r,n));return i}}()},THREE.TextureLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(t,e,r,n){var i=new THREE.ImageLoader(this.manager);i.setCrossOrigin(this.crossOrigin),i.load(t,function(t){t=new THREE.Texture(t),t.needsUpdate=!0,void 0!==e&&e(t)},r,n)},setCrossOrigin:function(t){this.crossOrigin=t}},THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(){this._parser=null},THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(t,e,r,n){var i=this,o=new THREE.DataTexture,a=new THREE.XHRLoader;return a.setResponseType("arraybuffer"),a.load(t,function(t){(t=i._parser(t))&&(void 0!==t.image?o.image=t.image:void 0!==t.data&&(o.image.width=t.width,o.image.height=t.height,o.image.data=t.data),o.wrapS=void 0!==t.wrapS?t.wrapS:THREE.ClampToEdgeWrapping,o.wrapT=void 0!==t.wrapT?t.wrapT:THREE.ClampToEdgeWrapping,o.magFilter=void 0!==t.magFilter?t.magFilter:THREE.LinearFilter,o.minFilter=void 0!==t.minFilter?t.minFilter:THREE.LinearMipMapLinearFilter,o.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(o.format=t.format),void 0!==t.type&&(o.type=t.type),void 0!==t.mipmaps&&(o.mipmaps=t.mipmaps),1===t.mipmapCount&&(o.minFilter=THREE.LinearFilter),o.needsUpdate=!0,e&&e(o,t))},r,n),o}},THREE.CompressedTextureLoader=function(){this._parser=null},THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(t,e,r){var n=this,i=[],o=new THREE.CompressedTexture;o.image=i;var a=new THREE.XHRLoader;if(a.setResponseType("arraybuffer"),t instanceof Array){var s=0;r=function(r){a.load(t[r],function(t){t=n._parser(t,!0),i[r]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},s+=1,6===s&&(1==t.mipmapCount&&(o.minFilter=THREE.LinearFilter),o.format=t.format,o.needsUpdate=!0,e&&e(o))})};for(var u=0,h=t.length;h>u;++u)r(u)}else a.load(t,function(t){if(t=n._parser(t,!0),t.isCubemap)for(var r=t.mipmaps.length/t.mipmapCount,a=0;r>a;a++){i[a]={mipmaps:[]};for(var s=0;s<t.mipmapCount;s++)i[a].mipmaps.push(t.mipmaps[a*t.mipmapCount+s]),i[a].format=t.format,i[a].width=t.width,i[a].height=t.height}else o.image.width=t.width,o.image.height=t.height,o.mipmaps=t.mipmaps;1===t.mipmapCount&&(o.minFilter=THREE.LinearFilter),o.format=t.format,o.needsUpdate=!0,e&&e(o)});return o}},THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Material",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.depthWrite=this.depthTest=!0,this.polygonOffset=!1,this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.needsUpdate=this.visible=!0},THREE.Material.prototype={constructor:THREE.Material,setValues:function(t){if(void 0!==t)for(var e in t){var r=t[e];if(void 0===r)console.warn("THREE.Material: '"+e+"' parameter is undefined.");else if(e in this){var n=this[e];n instanceof THREE.Color?n.set(r):n instanceof THREE.Vector3&&r instanceof THREE.Vector3?n.copy(r):this[e]="overdraw"==e?Number(r):r}}},toJSON:function(){var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return""!==this.name&&(t.name=this.name),this instanceof THREE.MeshBasicMaterial?(t.color=this.color.getHex(),this.vertexColors!==THREE.NoColors&&(t.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.MeshLambertMaterial?(t.color=this.color.getHex(),t.ambient=this.ambient.getHex(),t.emissive=this.emissive.getHex(),this.vertexColors!==THREE.NoColors&&(t.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.MeshPhongMaterial?(t.color=this.color.getHex(),t.ambient=this.ambient.getHex(),t.emissive=this.emissive.getHex(),t.specular=this.specular.getHex(),t.shininess=this.shininess,this.vertexColors!==THREE.NoColors&&(t.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.MeshNormalMaterial?(this.shading!==THREE.FlatShading&&(t.shading=this.shading),this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.MeshDepthMaterial?(this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.ShaderMaterial?(t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader):this instanceof THREE.SpriteMaterial&&(t.color=this.color.getHex()),1>this.opacity&&(t.opacity=this.opacity),!1!==this.transparent&&(t.transparent=this.transparent),!1!==this.wireframe&&(t.wireframe=this.wireframe),t},clone:function(t){return void 0===t&&(t=new THREE.Material),t.name=this.name,t.side=this.side,t.opacity=this.opacity,t.transparent=this.transparent,t.blending=this.blending,t.blendSrc=this.blendSrc,t.blendDst=this.blendDst,t.blendEquation=this.blendEquation,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.polygonOffset=this.polygonOffset,t.polygonOffsetFactor=this.polygonOffsetFactor,t.polygonOffsetUnits=this.polygonOffsetUnits,t.alphaTest=this.alphaTest,t.overdraw=this.overdraw,t.visible=this.visible,t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(t){THREE.Material.call(this),this.type="LineBasicMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(t)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial,THREE.LineBasicMaterial.prototype.clone=function(){var t=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.linewidth=this.linewidth,t.linecap=this.linecap,t.linejoin=this.linejoin,t.vertexColors=this.vertexColors,t.fog=this.fog,t},THREE.LineDashedMaterial=function(t){THREE.Material.call(this),this.type="LineDashedMaterial",this.color=new THREE.Color(16777215),this.scale=this.linewidth=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(t)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial,THREE.LineDashedMaterial.prototype.clone=function(){var t=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.linewidth=this.linewidth,t.scale=this.scale,t.dashSize=this.dashSize,t.gapSize=this.gapSize,t.vertexColors=this.vertexColors,t.fog=this.fog,t},THREE.MeshBasicMaterial=function(t){THREE.Material.call(this),this.type="MeshBasicMaterial",this.color=new THREE.Color(16777215),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphTargets=this.skinning=!1,this.setValues(t)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial,THREE.MeshBasicMaterial.prototype.clone=function(){var t=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.lightMap=this.lightMap,t.specularMap=this.specularMap,t.alphaMap=this.alphaMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t},THREE.MeshLambertMaterial=function(t){THREE.Material.call(this),this.type="MeshLambertMaterial",this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial,THREE.MeshLambertMaterial.prototype.clone=function(){var t=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.ambient.copy(this.ambient),t.emissive.copy(this.emissive),t.wrapAround=this.wrapAround,t.wrapRGB.copy(this.wrapRGB),t.map=this.map,t.lightMap=this.lightMap,t.specularMap=this.specularMap,t.alphaMap=this.alphaMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},THREE.MeshPhongMaterial=function(t){THREE.Material.call(this),this.type="MeshPhongMaterial",this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.wrapAround=this.metal=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.bumpMap=this.lightMap=this.map=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.envMap=this.alphaMap=this.specularMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial,THREE.MeshPhongMaterial.prototype.clone=function(){var t=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.ambient.copy(this.ambient),t.emissive.copy(this.emissive),t.specular.copy(this.specular),t.shininess=this.shininess,t.metal=this.metal,t.wrapAround=this.wrapAround,t.wrapRGB.copy(this.wrapRGB),t.map=this.map,t.lightMap=this.lightMap,t.bumpMap=this.bumpMap,t.bumpScale=this.bumpScale,t.normalMap=this.normalMap,t.normalScale.copy(this.normalScale),t.specularMap=this.specularMap,t.alphaMap=this.alphaMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},THREE.MeshDepthMaterial=function(t){THREE.Material.call(this),this.type="MeshDepthMaterial",this.wireframe=this.morphTargets=!1,this.wireframeLinewidth=1,this.setValues(t)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial,THREE.MeshDepthMaterial.prototype.clone=function(){var t=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,t),t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t},THREE.MeshNormalMaterial=function(t){THREE.Material.call(this,t),this.type="MeshNormalMaterial",this.shading=THREE.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(t)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial,THREE.MeshNormalMaterial.prototype.clone=function(){var t=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,t),t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t},THREE.MeshFaceMaterial=function(t){this.uuid=THREE.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=t instanceof Array?t:[]},THREE.MeshFaceMaterial.prototype={constructor:THREE.MeshFaceMaterial,toJSON:function(){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},e=0,r=this.materials.length;r>e;e++)t.materials.push(this.materials[e].toJSON());return t},clone:function(){for(var t=new THREE.MeshFaceMaterial,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t}},THREE.PointCloudMaterial=function(t){THREE.Material.call(this),this.type="PointCloudMaterial",this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(t)},THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype),THREE.PointCloudMaterial.prototype.constructor=THREE.PointCloudMaterial,THREE.PointCloudMaterial.prototype.clone=function(){var t=new THREE.PointCloudMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.size=this.size,t.sizeAttenuation=this.sizeAttenuation,t.vertexColors=this.vertexColors,t.fog=this.fog,t},THREE.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(t)},THREE.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(t)},THREE.ShaderMaterial=function(t){THREE.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(t)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial,THREE.ShaderMaterial.prototype.clone=function(){var t=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,t),t.fragmentShader=this.fragmentShader,t.vertexShader=this.vertexShader,t.uniforms=THREE.UniformsUtils.clone(this.uniforms),t.attributes=this.attributes,t.defines=this.defines,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.fog=this.fog,t.lights=this.lights,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},THREE.RawShaderMaterial=function(t){THREE.ShaderMaterial.call(this,t),this.type="RawShaderMaterial"},THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial,THREE.RawShaderMaterial.prototype.clone=function(){var t=new THREE.RawShaderMaterial;return THREE.ShaderMaterial.prototype.clone.call(this,t),t},THREE.SpriteMaterial=function(t){THREE.Material.call(this),this.type="SpriteMaterial",this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(t)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial,THREE.SpriteMaterial.prototype.clone=function(){var t=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.rotation=this.rotation,t.fog=this.fog,t},THREE.Texture=function(t,e,r,n,i,o,a,s,u){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.image=void 0!==t?t:THREE.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:THREE.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==n?n:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==i?i:THREE.LinearFilter,this.minFilter=void 0!==o?o:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:THREE.RGBAFormat,this.type=void 0!==s?s:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},THREE.Texture.DEFAULT_IMAGE=void 0,THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping,THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){!0===t&&this.update(),this._needsUpdate=t},clone:function(t){return void 0===t&&(t=new THREE.Texture),t.image=this.image,t.mipmaps=this.mipmaps.slice(0),t.mapping=this.mapping,t.wrapS=this.wrapS,t.wrapT=this.wrapT,t.magFilter=this.magFilter,t.minFilter=this.minFilter,t.anisotropy=this.anisotropy,t.format=this.format,t.type=this.type,t.offset.copy(this.offset),t.repeat.copy(this.repeat),t.generateMipmaps=this.generateMipmaps,t.premultiplyAlpha=this.premultiplyAlpha,t.flipY=this.flipY,t.unpackAlignment=this.unpackAlignment,t},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CubeTexture=function(t,e,r,n,i,o,a,s,u){e=void 0!==e?e:THREE.CubeReflectionMapping,THREE.Texture.call(this,t,e,r,n,i,o,a,s,u),this.images=t},THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CubeTexture.prototype.constructor=THREE.CubeTexture,THREE.CubeTexture.clone=function(t){return void 0===t&&(t=new THREE.CubeTexture),THREE.Texture.prototype.clone.call(this,t),t.images=this.images,t},THREE.CompressedTexture=function(t,e,r,n,i,o,a,s,u,h,l){THREE.Texture.call(this,null,o,a,s,u,h,n,i,l),this.image={width:e,height:r},this.mipmaps=t,this.generateMipmaps=this.flipY=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture,THREE.CompressedTexture.prototype.clone=function(){var t=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,t),t},THREE.DataTexture=function(t,e,r,n,i,o,a,s,u,h,l){THREE.Texture.call(this,null,o,a,s,u,h,n,i,l),this.image={data:t,width:e,height:r}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.constructor=THREE.DataTexture,THREE.DataTexture.prototype.clone=function(){var t=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,t),t},THREE.VideoTexture=function(t,e,r,n,i,o,a,s,u){THREE.Texture.call(this,t,e,r,n,i,o,a,s,u),this.generateMipmaps=!1;var h=this,l=function(){requestAnimationFrame(l),t.readyState===t.HAVE_ENOUGH_DATA&&(h.needsUpdate=!0)};l()},THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype),THREE.VideoTexture.prototype.constructor=THREE.VideoTexture,THREE.Group=function(){THREE.Object3D.call(this),this.type="Group"},THREE.Group.prototype=Object.create(THREE.Object3D.prototype),THREE.Group.prototype.constructor=THREE.Group,THREE.PointCloud=function(t,e){THREE.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==t?t:new THREE.Geometry,this.material=void 0!==e?e:new THREE.PointCloudMaterial({color:16777215*Math.random()})},THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype),THREE.PointCloud.prototype.constructor=THREE.PointCloud,THREE.PointCloud.prototype.raycast=function(){var t=new THREE.Matrix4,e=new THREE.Ray;return function(r,n){var i=this,o=i.geometry,a=r.params.PointCloud.threshold;if(t.getInverse(this.matrixWorld),e.copy(r.ray).applyMatrix4(t),null===o.boundingBox||!1!==e.isIntersectionBox(o.boundingBox)){var s=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=new THREE.Vector3,a=function(t,o){var a=e.distanceToPoint(t);if(s>a){var u=e.closestPointToPoint(t);u.applyMatrix4(i.matrixWorld);var h=r.ray.origin.distanceTo(u);n.push({distance:h,distanceToRay:a,point:u.clone(),index:o,face:null,object:i})}};if(o instanceof THREE.BufferGeometry){var h=o.attributes,l=h.position.array;if(void 0!==h.index){var h=h.index.array,c=o.offsets;0===c.length&&(c=[{start:0,count:h.length,index:0}]);for(var f=0,p=c.length;p>f;++f)for(var d=c[f].start,m=c[f].index,o=d,d=d+c[f].count;d>o;o++){var g=m+h[o];u.fromArray(l,3*g),
a(u,g)}}else for(h=l.length/3,o=0;h>o;o++)u.set(l[3*o],l[3*o+1],l[3*o+2]),a(u,o)}else for(u=this.geometry.vertices,o=0;o<u.length;o++)a(u[o],o)}}}(),THREE.PointCloud.prototype.clone=function(t){return void 0===t&&(t=new THREE.PointCloud(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,t),t},THREE.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new THREE.PointCloud(t,e)},THREE.Line=function(t,e,r){THREE.Object3D.call(this),this.type="Line",this.geometry=void 0!==t?t:new THREE.Geometry,this.material=void 0!==e?e:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==r?r:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.constructor=THREE.Line,THREE.Line.prototype.raycast=function(){var t=new THREE.Matrix4,e=new THREE.Ray,r=new THREE.Sphere;return function(n,i){var o=n.linePrecision,o=o*o,a=this.geometry;if(null===a.boundingSphere&&a.computeBoundingSphere(),r.copy(a.boundingSphere),r.applyMatrix4(this.matrixWorld),!1!==n.ray.isIntersectionSphere(r)){t.getInverse(this.matrixWorld),e.copy(n.ray).applyMatrix4(t);var s=new THREE.Vector3,u=new THREE.Vector3,h=new THREE.Vector3,l=new THREE.Vector3,c=this.mode===THREE.LineStrip?1:2;if(a instanceof THREE.BufferGeometry){var f=a.attributes;if(void 0!==f.index){var p=f.index.array,f=f.position.array,d=a.offsets;0===d.length&&(d=[{start:0,count:p.length,index:0}]);for(var m=0;m<d.length;m++)for(var g=d[m].start,v=d[m].count,E=d[m].index,a=g;g+v-1>a;a+=c){var y=E+p[a+1];s.fromArray(f,3*(E+p[a])),u.fromArray(f,3*y),y=e.distanceSqToSegment(s,u,l,h),y>o||(y=e.origin.distanceTo(l),y<n.near||y>n.far||i.push({distance:y,point:h.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this}))}}else for(f=f.position.array,a=0;a<f.length/3-1;a+=c)s.fromArray(f,3*a),u.fromArray(f,3*a+3),y=e.distanceSqToSegment(s,u,l,h),y>o||(y=e.origin.distanceTo(l),y<n.near||y>n.far||i.push({distance:y,point:h.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this}))}else if(a instanceof THREE.Geometry)for(s=a.vertices,u=s.length,a=0;u-1>a;a+=c)y=e.distanceSqToSegment(s[a],s[a+1],l,h),y>o||(y=e.origin.distanceTo(l),y<n.near||y>n.far||i.push({distance:y,point:h.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this}))}}}(),THREE.Line.prototype.clone=function(t){return void 0===t&&(t=new THREE.Line(this.geometry,this.material,this.mode)),THREE.Object3D.prototype.clone.call(this,t),t},THREE.Mesh=function(t,e){THREE.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new THREE.Geometry,this.material=void 0!==e?e:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.constructor=THREE.Mesh,THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,e=this.geometry.morphTargets.length;e>t;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[t].name]=t}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(t){return void 0!==this.morphTargetDictionary[t]?this.morphTargetDictionary[t]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+t+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.raycast=function(){var t=new THREE.Matrix4,e=new THREE.Ray,r=new THREE.Sphere,n=new THREE.Vector3,i=new THREE.Vector3,o=new THREE.Vector3;return function(a,s){var u=this.geometry;if(null===u.boundingSphere&&u.computeBoundingSphere(),r.copy(u.boundingSphere),r.applyMatrix4(this.matrixWorld),!1!==a.ray.isIntersectionSphere(r)&&(t.getInverse(this.matrixWorld),e.copy(a.ray).applyMatrix4(t),null===u.boundingBox||!1!==e.isIntersectionBox(u.boundingBox)))if(u instanceof THREE.BufferGeometry){var h=this.material;if(void 0!==h){var l,c,f=u.attributes,p=a.precision;if(void 0!==f.index){var d=f.index.array,m=f.position.array,g=u.offsets;0===g.length&&(g=[{start:0,count:d.length,index:0}]);for(var v=0,E=g.length;E>v;++v)for(var f=g[v].start,y=g[v].index,u=f,x=f+g[v].count;x>u;u+=3){f=y+d[u],l=y+d[u+1],c=y+d[u+2],n.fromArray(m,3*f),i.fromArray(m,3*l),o.fromArray(m,3*c);var T=h.side===THREE.BackSide?e.intersectTriangle(o,i,n,!0):e.intersectTriangle(n,i,o,h.side!==THREE.DoubleSide);if(null!==T){T.applyMatrix4(this.matrixWorld);var R=a.ray.origin.distanceTo(T);p>R||R<a.near||R>a.far||s.push({distance:R,point:T,face:new THREE.Face3(f,l,c,THREE.Triangle.normal(n,i,o)),faceIndex:null,object:this})}}}else for(m=f.position.array,d=u=0,x=m.length;x>u;u+=3,d+=9)f=u,l=u+1,c=u+2,n.fromArray(m,d),i.fromArray(m,d+3),o.fromArray(m,d+6),T=h.side===THREE.BackSide?e.intersectTriangle(o,i,n,!0):e.intersectTriangle(n,i,o,h.side!==THREE.DoubleSide),null!==T&&(T.applyMatrix4(this.matrixWorld),R=a.ray.origin.distanceTo(T),p>R||R<a.near||R>a.far||s.push({distance:R,point:T,face:new THREE.Face3(f,l,c,THREE.Triangle.normal(n,i,o)),faceIndex:null,object:this}))}}else if(u instanceof THREE.Geometry)for(d=this.material instanceof THREE.MeshFaceMaterial,m=!0===d?this.material.materials:null,p=a.precision,g=u.vertices,v=0,E=u.faces.length;E>v;v++)if(y=u.faces[v],h=!0===d?m[y.materialIndex]:this.material,void 0!==h){if(f=g[y.a],l=g[y.b],c=g[y.c],!0===h.morphTargets){T=u.morphTargets,R=this.morphTargetInfluences,n.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var x=0,b=T.length;b>x;x++){var _=R[x];if(0!==_){var w=T[x].vertices;n.x+=(w[y.a].x-f.x)*_,n.y+=(w[y.a].y-f.y)*_,n.z+=(w[y.a].z-f.z)*_,i.x+=(w[y.b].x-l.x)*_,i.y+=(w[y.b].y-l.y)*_,i.z+=(w[y.b].z-l.z)*_,o.x+=(w[y.c].x-c.x)*_,o.y+=(w[y.c].y-c.y)*_,o.z+=(w[y.c].z-c.z)*_}}n.add(f),i.add(l),o.add(c),f=n,l=i,c=o}T=h.side===THREE.BackSide?e.intersectTriangle(c,l,f,!0):e.intersectTriangle(f,l,c,h.side!==THREE.DoubleSide),null!==T&&(T.applyMatrix4(this.matrixWorld),R=a.ray.origin.distanceTo(T),p>R||R<a.near||R>a.far||s.push({distance:R,point:T,face:y,faceIndex:v,object:this}))}}}(),THREE.Mesh.prototype.clone=function(t,e){return void 0===t&&(t=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,t,e),t},THREE.Bone=function(t){THREE.Object3D.call(this),this.skin=t},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.constructor=THREE.Bone,THREE.Skeleton=function(t,e,r){if(this.useVertexTexture=void 0!==r?r:!0,this.identityMatrix=new THREE.Matrix4,t=t||[],this.bones=t.slice(0),this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=t=256<this.bones.length?64:64<this.bones.length?32:16<this.bones.length?16:8,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],e=0,t=this.bones.length;t>e;e++)this.boneInverses.push(new THREE.Matrix4)},THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var t=0,e=this.bones.length;e>t;t++){var r=new THREE.Matrix4;this.bones[t]&&r.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(r)}},THREE.Skeleton.prototype.pose=function(){for(var t,e=0,r=this.bones.length;r>e;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,r=this.bones.length;r>e;e++)(t=this.bones[e])&&(t.parent?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},THREE.Skeleton.prototype.update=function(){var t=new THREE.Matrix4;return function(){for(var e=0,r=this.bones.length;r>e;e++)t.multiplyMatrices(this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix,this.boneInverses[e]),t.flattenToArrayOffset(this.boneMatrices,16*e);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.SkinnedMesh=function(t,e,r){if(THREE.Mesh.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4,t=[],this.geometry&&void 0!==this.geometry.bones){for(var n,i,o,a,s=0,u=this.geometry.bones.length;u>s;++s)n=this.geometry.bones[s],i=n.pos,o=n.rotq,a=n.scl,e=new THREE.Bone(this),t.push(e),e.name=n.name,e.position.set(i[0],i[1],i[2]),e.quaternion.set(o[0],o[1],o[2],o[3]),void 0!==a?e.scale.set(a[0],a[1],a[2]):e.scale.set(1,1,1);for(s=0,u=this.geometry.bones.length;u>s;++s)n=this.geometry.bones[s],-1!==n.parent?t[n.parent].add(t[s]):this.add(t[s])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new THREE.Skeleton(t,void 0,r))},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.constructor=THREE.SkinnedMesh,THREE.SkinnedMesh.prototype.bind=function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var t=0;t<this.geometry.skinIndices.length;t++){var e=this.geometry.skinWeights[t],r=1/e.lengthManhattan();1/0!==r?e.multiplyScalar(r):e.set(1)}},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(t){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},THREE.SkinnedMesh.prototype.clone=function(t){return void 0===t&&(t=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,t),t},THREE.MorphAnimMesh=function(t,e){THREE.Mesh.call(this,t,e),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.currentKeyframe=this.lastKeyframe=this.time=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.constructor=THREE.MorphAnimMesh,THREE.MorphAnimMesh.prototype.setFrameRange=function(t,e){this.startKeyframe=t,this.endKeyframe=e,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var t=this.geometry;t.animations||(t.animations={});for(var e,r=t.animations,n=/([a-z]+)_?(\d+)/,i=0,o=t.morphTargets.length;o>i;i++){var a=t.morphTargets[i].name.match(n);if(a&&1<a.length){a=a[1],r[a]||(r[a]={start:1/0,end:-(1/0)});var s=r[a];i<s.start&&(s.start=i),i>s.end&&(s.end=i),e||(e=a)}}t.firstAnimation=e},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(t,e,r){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[t]={start:e,end:r}},THREE.MorphAnimMesh.prototype.playAnimation=function(t,e){var r=this.geometry.animations[t];r?(this.setFrameRange(r.start,r.end),this.duration=(r.end-r.start)/e*1e3,this.time=0):console.warn("animation["+t+"] undefined")},THREE.MorphAnimMesh.prototype.updateAnimation=function(t){var e=this.duration/this.length;this.time+=this.direction*t,this.mirroredLoop?(this.time>this.duration||0>this.time)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)):(this.time%=this.duration,0>this.time&&(this.time+=this.duration)),t=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/e),0,this.length-1),t!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[t]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=t),e=this.time%e/e,this.directionBackwards&&(e=1-e),this.morphTargetInfluences[this.currentKeyframe]=e,this.morphTargetInfluences[this.lastKeyframe]=1-e},THREE.MorphAnimMesh.prototype.interpolateTargets=function(t,e,r){for(var n=this.morphTargetInfluences,i=0,o=n.length;o>i;i++)n[i]=0;t>-1&&(n[t]=1-r),e>-1&&(n[e]=r)},THREE.MorphAnimMesh.prototype.clone=function(t){return void 0===t&&(t=new THREE.MorphAnimMesh(this.geometry,this.material)),t.duration=this.duration,t.mirroredLoop=this.mirroredLoop,t.time=this.time,t.lastKeyframe=this.lastKeyframe,t.currentKeyframe=this.currentKeyframe,t.direction=this.direction,t.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,t),t},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.constructor=THREE.LOD,THREE.LOD.prototype.addLevel=function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var r=0;r<this.objects.length&&!(e<this.objects[r].distance);r++);this.objects.splice(r,0,{distance:e,object:t}),this.add(t)},THREE.LOD.prototype.getObjectForDistance=function(t){for(var e=1,r=this.objects.length;r>e&&!(t<this.objects[e].distance);e++);return this.objects[e-1].object},THREE.LOD.prototype.raycast=function(){var t=new THREE.Vector3;return function(e,r){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(t);this.getObjectForDistance(n).raycast(e,r)}}(),THREE.LOD.prototype.update=function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(r){if(1<this.objects.length){t.setFromMatrixPosition(r.matrixWorld),e.setFromMatrixPosition(this.matrixWorld),r=t.distanceTo(e),this.objects[0].object.visible=!0;for(var n=1,i=this.objects.length;i>n&&r>=this.objects[n].distance;n++)this.objects[n-1].object.visible=!1,this.objects[n].object.visible=!0;for(;i>n;n++)this.objects[n].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(t){void 0===t&&(t=new THREE.LOD),THREE.Object3D.prototype.clone.call(this,t);for(var e=0,r=this.objects.length;r>e;e++){var n=this.objects[e].object.clone();n.visible=0===e,t.addLevel(n,this.objects[e].distance)}return t},THREE.Sprite=function(){var t=new Uint16Array([0,1,2,0,2,3]),e=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),r=new Float32Array([0,0,1,0,1,1,0,1]),n=new THREE.BufferGeometry;return n.addAttribute("index",new THREE.BufferAttribute(t,1)),n.addAttribute("position",new THREE.BufferAttribute(e,3)),n.addAttribute("uv",new THREE.BufferAttribute(r,2)),function(t){THREE.Object3D.call(this),this.type="Sprite",this.geometry=n,this.material=void 0!==t?t:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.constructor=THREE.Sprite,THREE.Sprite.prototype.raycast=function(){var t=new THREE.Vector3;return function(e,r){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceToPoint(t);n>this.scale.x||r.push({distance:n,point:this.position,face:null,object:this})}}(),THREE.Sprite.prototype.clone=function(t){return void 0===t&&(t=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,t),t},THREE.Particle=THREE.Sprite,THREE.LensFlare=function(t,e,r,n,i){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,r,n,i)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.constructor=THREE.LensFlare,THREE.LensFlare.prototype.add=function(t,e,r,n,i,o){void 0===e&&(e=-1),void 0===r&&(r=0),void 0===o&&(o=1),void 0===i&&(i=new THREE.Color(16777215)),void 0===n&&(n=THREE.NormalBlending),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:t,size:e,distance:r,x:0,y:0,z:0,scale:1,rotation:1,opacity:o,color:i,blending:n})},THREE.LensFlare.prototype.updateLensFlares=function(){var t,e,r=this.lensFlares.length,n=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(t=0;r>t;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+n*e.distance,e.y=this.positionScreen.y+i*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)},THREE.Scene=function(){THREE.Object3D.call(this),this.type="Scene",this.overrideMaterial=this.fog=null,this.autoUpdate=!0},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.constructor=THREE.Scene,THREE.Scene.prototype.clone=function(t){return void 0===t&&(t=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,t),null!==this.fog&&(t.fog=this.fog.clone()),null!==this.overrideMaterial&&(t.overrideMaterial=this.overrideMaterial.clone()),t.autoUpdate=this.autoUpdate,t.matrixAutoUpdate=this.matrixAutoUpdate,t},THREE.Fog=function(t,e,r){this.name="",this.color=new THREE.Color(t),this.near=void 0!==e?e:1,this.far=void 0!==r?r:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(t,e){this.name="",this.color=new THREE.Color(t),this.density=void 0!==e?e:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.ShaderChunk={},THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n",THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n	vec3 dirVector = normalize( lDirection.xyz );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float lDistance = 1.0;\n			if ( spotLightDistance[ i ] > 0.0 )\n				lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif",THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",THREE.ShaderChunk.default_vertex="#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n	vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",THREE.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",THREE.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif",THREE.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n	normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	vec3 pointDiffuse = vec3( 0.0 );\n	vec3 pointSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n				// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		pointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	vec3 spotDiffuse = vec3( 0.0 );\n	vec3 spotSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( spotLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n					// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n					// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	vec3 dirDiffuse = vec3( 0.0 );\n	vec3 dirSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n		vec3 dirVector = normalize( lDirection.xyz );\n\n				// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		dirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	vec3 hemiDiffuse = vec3( 0.0 );\n	vec3 hemiSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		hemiDiffuse += diffuse * hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n	totalDiffuse += dirDiffuse;\n	totalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	totalDiffuse += hemiDiffuse;\n	totalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	totalDiffuse += pointDiffuse;\n	totalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	totalDiffuse += spotDiffuse;\n	totalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif",THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n			// Per-Pixel Tangent Space Normal Mapping\n			// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif",THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif",THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	#ifdef GAMMA_INPUT\n\n		texelColor.xyz *= texelColor.xyz;\n\n	#endif\n\n	gl_FragColor = gl_FragColor * texelColor;\n\n#endif",THREE.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif",THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif",THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	#ifdef GAMMA_INPUT\n\n		vColor = color * color;\n\n	#else\n\n		vColor = color;\n\n	#endif\n\n#endif",THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n",THREE.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n	gl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif",THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n",THREE.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n		// Transforming Normal Vectors with the Inverse Transformation\n\n		vec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = clamp( flipNormal * reflectVec.y * 0.5 + 0.5, 0.0, 1.0);\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * 0.15915494309189533576888376337251 + 0.5; // reciprocal( 2 PI ) + 0.5\n		vec4 envColor = texture2D( envMap, sampleUV );\n		\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	#ifdef GAMMA_INPUT\n\n		envColor.xyz *= envColor.xyz;\n\n	#endif\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		gl_FragColor.xyz += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		const float LOG2 = 1.442695;\n		float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n		fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif",THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n			// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n			//	http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n			// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif",THREE.ShaderChunk.defaultnormal_vertex="#ifdef USE_SKINNING\n\n	vec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n	vec3 objectNormal = morphedNormal;\n\n#else\n\n	vec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",THREE.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif",THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif",THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif",THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n	worldNormal = normalize( worldNormal );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	#ifdef GAMMA_OUTPUT\n\n		shadowColor *= shadowColor;\n\n	#endif\n\n	gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n",THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#elif defined( USE_MORPHTARGETS )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif",THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	gl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",THREE.UniformsUtils={merge:function(t){for(var e={},r=0;r<t.length;r++){var n,i=this.clone(t[r]);for(n in i)e[n]=i[n]}return e},clone:function(t){var e,r={};for(e in t){r[e]={};for(var n in t[e]){var i=t[e][n];r[e][n]=i instanceof THREE.Color||i instanceof THREE.Vector2||i instanceof THREE.Vector3||i instanceof THREE.Vector4||i instanceof THREE.Matrix4||i instanceof THREE.Texture?i.clone():i instanceof Array?i.slice():i}}return r}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED\n		if ( gl_FrontFacing )\n			gl_FragColor.xyz *= vLightFront;\n		else\n			gl_FragColor.xyz *= vLightBack;\n	#else\n		gl_FragColor.xyz *= vLightFront;\n	#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),
fragmentShader:["#define PHONG\nuniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n	#else\n		gl_PointSize = size;\n	#endif\n	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	float color = 1.0 - smoothstep( mNear, mFar, depth );\n	gl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n	vWorldPosition = worldPosition.xyz;\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n	vWorldPosition = worldPosition.xyz;\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = clamp( tFlip * direction.y * -0.5 + 0.5, 0.0, 1.0);\nsampleUV.x = atan( direction.z, direction.x ) * 0.15915494309189533576888376337251 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n	res -= res.xxyz * bit_mask;\n	return res;\n}\nvoid main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT\n		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n	#else\n		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n	#endif\n}"].join("\n")}},THREE.WebGLRenderer=function(t){function e(t){var e=t.geometry;t=t.material;var r=e.vertices.length;if(t.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var n in t.attributes){var i=t.attributes[n];if(!i.__webglInitialized||i.createUniqueBuffers){i.__webglInitialized=!0;var o=1;"v2"===i.type?o=2:"v3"===i.type?o=3:"v4"===i.type?o=4:"c"===i.type&&(o=3),i.size=o,i.array=new Float32Array(r*o),i.buffer=At.createBuffer(),i.buffer.belongsToAttribute=n,i.needsUpdate=!0}e.__webglCustomAttributesList.push(i)}}}function r(t,e){var r=e.geometry,i=t.faces3,o=3*i.length,a=1*i.length,s=3*i.length,i=n(e,t);t.__vertexArray=new Float32Array(3*o),t.__normalArray=new Float32Array(3*o),t.__colorArray=new Float32Array(3*o),t.__uvArray=new Float32Array(2*o),1<r.faceVertexUvs.length&&(t.__uv2Array=new Float32Array(2*o)),r.hasTangents&&(t.__tangentArray=new Float32Array(4*o)),e.geometry.skinWeights.length&&e.geometry.skinIndices.length&&(t.__skinIndexArray=new Float32Array(4*o),t.__skinWeightArray=new Float32Array(4*o)),r=null!==Nt.get("OES_element_index_uint")&&a>21845?Uint32Array:Uint16Array,t.__typeArray=r,t.__faceArray=new r(3*a),t.__lineArray=new r(2*s);var u=t.numMorphTargets;if(u)for(t.__morphTargetsArrays=[],r=0;u>r;r++)t.__morphTargetsArrays.push(new Float32Array(3*o));if(u=t.numMorphNormals)for(t.__morphNormalsArrays=[],r=0;u>r;r++)t.__morphNormalsArrays.push(new Float32Array(3*o));if(t.__webglFaceCount=3*a,t.__webglLineCount=2*s,i.attributes){void 0===t.__webglCustomAttributesList&&(t.__webglCustomAttributesList=[]);for(var h in i.attributes){var l,a=i.attributes[h],s={};for(l in a)s[l]=a[l];(!s.__webglInitialized||s.createUniqueBuffers)&&(s.__webglInitialized=!0,r=1,"v2"===s.type?r=2:"v3"===s.type?r=3:"v4"===s.type?r=4:"c"===s.type&&(r=3),s.size=r,s.array=new Float32Array(o*r),s.buffer=At.createBuffer(),s.buffer.belongsToAttribute=h,a.needsUpdate=!0,s.__original=a),t.__webglCustomAttributesList.push(s)}}t.__inittedArrays=!0}function n(t,e){return t.material instanceof THREE.MeshFaceMaterial?t.material.materials[e.materialIndex]:t.material}function i(t,e,r,n){r=r.attributes;var i=e.attributes;e=e.attributesKeys;for(var o=0,u=e.length;u>o;o++){var h=e[o],l=i[h];if(l>=0){var c=r[h];void 0!==c?(h=c.itemSize,At.bindBuffer(At.ARRAY_BUFFER,c.buffer),a(l),At.vertexAttribPointer(l,h,At.FLOAT,!1,0,n*h*4)):void 0!==t.defaultAttributeValues&&(2===t.defaultAttributeValues[h].length?At.vertexAttrib2fv(l,t.defaultAttributeValues[h]):3===t.defaultAttributeValues[h].length&&At.vertexAttrib3fv(l,t.defaultAttributeValues[h]))}}s()}function o(){for(var t=0,e=Mt.length;e>t;t++)Mt[t]=0}function a(t){Mt[t]=1,0===Ht[t]&&(At.enableVertexAttribArray(t),Ht[t]=1)}function s(){for(var t=0,e=Ht.length;e>t;t++)Ht[t]!==Mt[t]&&(At.disableVertexAttribArray(t),Ht[t]=0)}function u(t,e){return t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function h(t,e){return t.z!==e.z?e.z-t.z:t.id-e.id}function l(t,e){return e[0]-t[0]}function c(t){if(!1!==t.visible){if(!(t instanceof THREE.Scene||t instanceof THREE.Group)){void 0===t.__webglInit&&(t.__webglInit=!0,t._modelViewMatrix=new THREE.Matrix4,t._normalMatrix=new THREE.Matrix3,t.addEventListener("removed",re));var r=t.geometry;if(void 0!==r&&void 0===r.__webglInit)if(r.__webglInit=!0,r.addEventListener("dispose",ne),r instanceof THREE.BufferGeometry)tt.info.memory.geometries++;else if(t instanceof THREE.Mesh)m(t,r);else if(t instanceof THREE.Line){if(void 0===r.__webglVertexBuffer){r.__webglVertexBuffer=At.createBuffer(),r.__webglColorBuffer=At.createBuffer(),r.__webglLineDistanceBuffer=At.createBuffer(),tt.info.memory.geometries++;var n=r.vertices.length;r.__vertexArray=new Float32Array(3*n),r.__colorArray=new Float32Array(3*n),r.__lineDistanceArray=new Float32Array(1*n),r.__webglLineCount=n,e(t),r.verticesNeedUpdate=!0,r.colorsNeedUpdate=!0,r.lineDistancesNeedUpdate=!0}}else t instanceof THREE.PointCloud&&void 0===r.__webglVertexBuffer&&(r.__webglVertexBuffer=At.createBuffer(),r.__webglColorBuffer=At.createBuffer(),tt.info.memory.geometries++,n=r.vertices.length,r.__vertexArray=new Float32Array(3*n),r.__colorArray=new Float32Array(3*n),r.__sortArray=[],r.__webglParticleCount=n,e(t),r.verticesNeedUpdate=!0,r.colorsNeedUpdate=!0);if(void 0===t.__webglActive)if(t.__webglActive=!0,t instanceof THREE.Mesh){if(r instanceof THREE.BufferGeometry)g(Y,r,t);else if(r instanceof THREE.Geometry)for(var r=he[r.id],n=0,i=r.length;i>n;n++)g(Y,r[n],t)}else t instanceof THREE.Line||t instanceof THREE.PointCloud?g(Y,r,t):(t instanceof THREE.ImmediateRenderObject||t.immediateRenderCallback)&&K.push({id:null,object:t,opaque:null,transparent:null,z:0});if(t instanceof THREE.Light)q.push(t);else if(t instanceof THREE.Sprite)$.push(t);else if(t instanceof THREE.LensFlare)J.push(t);else if((r=Y[t.id])&&(!1===t.frustumCulled||!0===St.intersectsObject(t)))for(n=0,i=r.length;i>n;n++){var o=r[n],a=o,s=a.object,u=a.buffer,h=s.geometry,s=s.material;s instanceof THREE.MeshFaceMaterial?(s=s.materials[h instanceof THREE.BufferGeometry?0:u.materialIndex],a.material=s,s.transparent?Q.push(a):Z.push(a)):s&&(a.material=s,s.transparent?Q.push(a):Z.push(a)),o.render=!0,!0===tt.sortObjects&&(Lt.setFromMatrixPosition(t.matrixWorld),Lt.applyProjection(Ct),o.z=Lt.z)}}for(n=0,i=t.children.length;i>n;n++)c(t.children[n])}}function f(t,e,r,n,i,o){for(var a,s=0,u=t.length;u>s;s++){a=t[s];var h=a.object,l=a.buffer;if(b(h,e),o)a=o;else{if(a=a.material,!a)continue;i&&tt.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst),tt.setDepthTest(a.depthTest),tt.setDepthWrite(a.depthWrite),H(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}tt.setMaterialFaces(a),l instanceof THREE.BufferGeometry?tt.renderBufferDirect(e,r,n,a,l,h):tt.renderBuffer(e,r,n,a,l,h)}}function p(t,e,r,n,i,o,a){for(var s,u=0,h=t.length;h>u;u++){s=t[u];var l=s.object;if(l.visible){if(a)s=a;else{if(s=s[e],!s)continue;o&&tt.setBlending(s.blending,s.blendEquation,s.blendSrc,s.blendDst),tt.setDepthTest(s.depthTest),tt.setDepthWrite(s.depthWrite),H(s.polygonOffset,s.polygonOffsetFactor,s.polygonOffsetUnits)}tt.renderImmediateObject(r,n,i,s,l)}}}function d(t){var e=t.object.material;e.transparent?(t.transparent=e,t.opaque=null):(t.opaque=e,t.transparent=null)}function m(t,e){var n=t.material,i=!1;if(void 0===he[e.id]||!0===e.groupsNeedUpdate){delete Y[t.id];for(var o,a,s=he,u=e.id,n=n instanceof THREE.MeshFaceMaterial,h=Nt.get("OES_element_index_uint")?4294967296:65535,i={},l=e.morphTargets.length,c=e.morphNormals.length,f={},p=[],d=0,m=e.faces.length;m>d;d++){o=e.faces[d];var v=n?o.materialIndex:0;v in i||(i[v]={hash:v,counter:0}),o=i[v].hash+"_"+i[v].counter,o in f||(a={id:le++,faces3:[],materialIndex:v,vertices:0,numMorphTargets:l,numMorphNormals:c},f[o]=a,p.push(a)),f[o].vertices+3>h&&(i[v].counter+=1,o=i[v].hash+"_"+i[v].counter,o in f||(a={id:le++,faces3:[],materialIndex:v,vertices:0,numMorphTargets:l,numMorphNormals:c},f[o]=a,p.push(a))),f[o].faces3.push(d),f[o].vertices+=3}s[u]=p,e.groupsNeedUpdate=!1}for(s=he[e.id],u=0,n=s.length;n>u;u++){if(h=s[u],void 0===h.__webglVertexBuffer){if(i=h,i.__webglVertexBuffer=At.createBuffer(),i.__webglNormalBuffer=At.createBuffer(),i.__webglTangentBuffer=At.createBuffer(),i.__webglColorBuffer=At.createBuffer(),i.__webglUVBuffer=At.createBuffer(),i.__webglUV2Buffer=At.createBuffer(),i.__webglSkinIndicesBuffer=At.createBuffer(),i.__webglSkinWeightsBuffer=At.createBuffer(),i.__webglFaceBuffer=At.createBuffer(),i.__webglLineBuffer=At.createBuffer(),c=i.numMorphTargets)for(i.__webglMorphTargetsBuffers=[],l=0;c>l;l++)i.__webglMorphTargetsBuffers.push(At.createBuffer());if(c=i.numMorphNormals)for(i.__webglMorphNormalsBuffers=[],l=0;c>l;l++)i.__webglMorphNormalsBuffers.push(At.createBuffer());tt.info.memory.geometries++,r(h,t),e.verticesNeedUpdate=!0,e.morphTargetsNeedUpdate=!0,e.elementsNeedUpdate=!0,e.uvsNeedUpdate=!0,e.normalsNeedUpdate=!0,e.tangentsNeedUpdate=!0,i=e.colorsNeedUpdate=!0}else i=!1;(i||void 0===t.__webglActive)&&g(Y,h,t)}t.__webglActive=!0}function g(t,e,r){var n=r.id;t[n]=t[n]||[],t[n].push({id:n,buffer:e,object:r,material:null,z:0})}function v(t){var e=t.geometry;if(e instanceof THREE.BufferGeometry)for(var i=e.attributes,o=e.attributesKeys,a=0,s=o.length;s>a;a++){var u=o[a],h=i[u];if(void 0===h.buffer&&(h.buffer=At.createBuffer(),h.needsUpdate=!0),!0===h.needsUpdate){var l="index"===u?At.ELEMENT_ARRAY_BUFFER:At.ARRAY_BUFFER;At.bindBuffer(l,h.buffer),At.bufferData(l,h.array,At.STATIC_DRAW),h.needsUpdate=!1}}else if(t instanceof THREE.Mesh){!0===e.groupsNeedUpdate&&m(t,e);for(var c=he[e.id],a=0,f=c.length;f>a;a++){var p=c[a],d=n(t,p);!0===e.groupsNeedUpdate&&r(p,t);var g=d.attributes&&E(d);if(e.verticesNeedUpdate||e.morphTargetsNeedUpdate||e.elementsNeedUpdate||e.uvsNeedUpdate||e.normalsNeedUpdate||e.colorsNeedUpdate||e.tangentsNeedUpdate||g){var v=p,x=t,T=At.DYNAMIC_DRAW,R=!e.dynamic,b=d;if(v.__inittedArrays){var _=b&&void 0!==b.shading&&b.shading===THREE.SmoothShading,w=void 0,M=void 0,H=void 0,S=void 0,C=void 0,A=void 0,L=void 0,P=void 0,F=void 0,D=void 0,B=void 0,O=void 0,N=void 0,k=void 0,U=void 0,I=void 0,z=void 0,V=void 0,j=void 0,G=void 0,W=void 0,X=void 0,q=void 0,Y=void 0,K=void 0,Z=void 0,Q=void 0,$=void 0,J=void 0,tt=void 0,et=void 0,rt=void 0,nt=void 0,it=void 0,ot=void 0,at=void 0,st=void 0,ut=void 0,ht=void 0,lt=void 0,ct=0,ft=0,pt=0,dt=0,mt=0,gt=0,vt=0,Et=0,yt=0,xt=0,Tt=0,Rt=0,bt=void 0,_t=v.__vertexArray,wt=v.__uvArray,Mt=v.__uv2Array,Ht=v.__normalArray,St=v.__tangentArray,Ct=v.__colorArray,Lt=v.__skinIndexArray,Pt=v.__skinWeightArray,Ft=v.__morphTargetsArrays,Dt=v.__morphNormalsArrays,Bt=v.__webglCustomAttributesList,Ot=void 0,Nt=v.__faceArray,kt=v.__lineArray,Ut=x.geometry,It=Ut.elementsNeedUpdate,zt=Ut.uvsNeedUpdate,Vt=Ut.normalsNeedUpdate,jt=Ut.tangentsNeedUpdate,Gt=Ut.colorsNeedUpdate,Wt=Ut.morphTargetsNeedUpdate,Xt=Ut.vertices,qt=v.faces3,Yt=Ut.faces,Kt=Ut.faceVertexUvs[0],Zt=Ut.faceVertexUvs[1],Qt=Ut.skinIndices,$t=Ut.skinWeights,Jt=Ut.morphTargets,te=Ut.morphNormals;if(Ut.verticesNeedUpdate){for(w=0,M=qt.length;M>w;w++)S=Yt[qt[w]],O=Xt[S.a],N=Xt[S.b],k=Xt[S.c],_t[ft]=O.x,_t[ft+1]=O.y,_t[ft+2]=O.z,_t[ft+3]=N.x,_t[ft+4]=N.y,_t[ft+5]=N.z,_t[ft+6]=k.x,_t[ft+7]=k.y,_t[ft+8]=k.z,ft+=9;At.bindBuffer(At.ARRAY_BUFFER,v.__webglVertexBuffer),At.bufferData(At.ARRAY_BUFFER,_t,T)}if(Wt)for(ot=0,at=Jt.length;at>ot;ot++){for(w=Tt=0,M=qt.length;M>w;w++)ht=qt[w],S=Yt[ht],O=Jt[ot].vertices[S.a],N=Jt[ot].vertices[S.b],k=Jt[ot].vertices[S.c],st=Ft[ot],st[Tt]=O.x,st[Tt+1]=O.y,st[Tt+2]=O.z,st[Tt+3]=N.x,st[Tt+4]=N.y,st[Tt+5]=N.z,st[Tt+6]=k.x,st[Tt+7]=k.y,st[Tt+8]=k.z,b.morphNormals&&(_?(lt=te[ot].vertexNormals[ht],V=lt.a,j=lt.b,G=lt.c):G=j=V=te[ot].faceNormals[ht],ut=Dt[ot],ut[Tt]=V.x,ut[Tt+1]=V.y,ut[Tt+2]=V.z,ut[Tt+3]=j.x,ut[Tt+4]=j.y,ut[Tt+5]=j.z,ut[Tt+6]=G.x,ut[Tt+7]=G.y,ut[Tt+8]=G.z),Tt+=9;At.bindBuffer(At.ARRAY_BUFFER,v.__webglMorphTargetsBuffers[ot]),At.bufferData(At.ARRAY_BUFFER,Ft[ot],T),b.morphNormals&&(At.bindBuffer(At.ARRAY_BUFFER,v.__webglMorphNormalsBuffers[ot]),At.bufferData(At.ARRAY_BUFFER,Dt[ot],T))}if($t.length){for(w=0,M=qt.length;M>w;w++)S=Yt[qt[w]],Y=$t[S.a],K=$t[S.b],Z=$t[S.c],Pt[xt]=Y.x,Pt[xt+1]=Y.y,Pt[xt+2]=Y.z,Pt[xt+3]=Y.w,Pt[xt+4]=K.x,Pt[xt+5]=K.y,Pt[xt+6]=K.z,Pt[xt+7]=K.w,Pt[xt+8]=Z.x,Pt[xt+9]=Z.y,Pt[xt+10]=Z.z,Pt[xt+11]=Z.w,Q=Qt[S.a],$=Qt[S.b],J=Qt[S.c],Lt[xt]=Q.x,Lt[xt+1]=Q.y,Lt[xt+2]=Q.z,Lt[xt+3]=Q.w,Lt[xt+4]=$.x,Lt[xt+5]=$.y,Lt[xt+6]=$.z,Lt[xt+7]=$.w,Lt[xt+8]=J.x,Lt[xt+9]=J.y,Lt[xt+10]=J.z,Lt[xt+11]=J.w,xt+=12;xt>0&&(At.bindBuffer(At.ARRAY_BUFFER,v.__webglSkinIndicesBuffer),At.bufferData(At.ARRAY_BUFFER,Lt,T),At.bindBuffer(At.ARRAY_BUFFER,v.__webglSkinWeightsBuffer),At.bufferData(At.ARRAY_BUFFER,Pt,T))}if(Gt){for(w=0,M=qt.length;M>w;w++)S=Yt[qt[w]],L=S.vertexColors,P=S.color,3===L.length&&b.vertexColors===THREE.VertexColors?(W=L[0],X=L[1],q=L[2]):q=X=W=P,Ct[yt]=W.r,Ct[yt+1]=W.g,Ct[yt+2]=W.b,Ct[yt+3]=X.r,Ct[yt+4]=X.g,Ct[yt+5]=X.b,Ct[yt+6]=q.r,Ct[yt+7]=q.g,Ct[yt+8]=q.b,yt+=9;yt>0&&(At.bindBuffer(At.ARRAY_BUFFER,v.__webglColorBuffer),At.bufferData(At.ARRAY_BUFFER,Ct,T))}if(jt&&Ut.hasTangents){for(w=0,M=qt.length;M>w;w++)S=Yt[qt[w]],F=S.vertexTangents,U=F[0],I=F[1],z=F[2],St[vt]=U.x,St[vt+1]=U.y,St[vt+2]=U.z,St[vt+3]=U.w,St[vt+4]=I.x,St[vt+5]=I.y,St[vt+6]=I.z,St[vt+7]=I.w,St[vt+8]=z.x,St[vt+9]=z.y,St[vt+10]=z.z,St[vt+11]=z.w,vt+=12;At.bindBuffer(At.ARRAY_BUFFER,v.__webglTangentBuffer),At.bufferData(At.ARRAY_BUFFER,St,T)}if(Vt){for(w=0,M=qt.length;M>w;w++)if(S=Yt[qt[w]],C=S.vertexNormals,A=S.normal,3===C.length&&_)for(tt=0;3>tt;tt++)rt=C[tt],Ht[gt]=rt.x,Ht[gt+1]=rt.y,Ht[gt+2]=rt.z,gt+=3;else for(tt=0;3>tt;tt++)Ht[gt]=A.x,Ht[gt+1]=A.y,Ht[gt+2]=A.z,gt+=3;At.bindBuffer(At.ARRAY_BUFFER,v.__webglNormalBuffer),At.bufferData(At.ARRAY_BUFFER,Ht,T)}if(zt&&Kt){for(w=0,M=qt.length;M>w;w++)if(H=qt[w],D=Kt[H],void 0!==D)for(tt=0;3>tt;tt++)nt=D[tt],wt[pt]=nt.x,wt[pt+1]=nt.y,pt+=2;pt>0&&(At.bindBuffer(At.ARRAY_BUFFER,v.__webglUVBuffer),At.bufferData(At.ARRAY_BUFFER,wt,T))}if(zt&&Zt){for(w=0,M=qt.length;M>w;w++)if(H=qt[w],B=Zt[H],void 0!==B)for(tt=0;3>tt;tt++)it=B[tt],Mt[dt]=it.x,Mt[dt+1]=it.y,dt+=2;dt>0&&(At.bindBuffer(At.ARRAY_BUFFER,v.__webglUV2Buffer),At.bufferData(At.ARRAY_BUFFER,Mt,T))}if(It){for(w=0,M=qt.length;M>w;w++)Nt[mt]=ct,Nt[mt+1]=ct+1,Nt[mt+2]=ct+2,mt+=3,kt[Et]=ct,kt[Et+1]=ct+1,kt[Et+2]=ct,kt[Et+3]=ct+2,kt[Et+4]=ct+1,kt[Et+5]=ct+2,Et+=6,ct+=3;At.bindBuffer(At.ELEMENT_ARRAY_BUFFER,v.__webglFaceBuffer),At.bufferData(At.ELEMENT_ARRAY_BUFFER,Nt,T),At.bindBuffer(At.ELEMENT_ARRAY_BUFFER,v.__webglLineBuffer),At.bufferData(At.ELEMENT_ARRAY_BUFFER,kt,T)}if(Bt)for(tt=0,et=Bt.length;et>tt;tt++)if(Ot=Bt[tt],Ot.__original.needsUpdate){if(Rt=0,1===Ot.size){if(void 0===Ot.boundTo||"vertices"===Ot.boundTo)for(w=0,M=qt.length;M>w;w++)S=Yt[qt[w]],Ot.array[Rt]=Ot.value[S.a],Ot.array[Rt+1]=Ot.value[S.b],Ot.array[Rt+2]=Ot.value[S.c],Rt+=3;else if("faces"===Ot.boundTo)for(w=0,M=qt.length;M>w;w++)bt=Ot.value[qt[w]],Ot.array[Rt]=bt,Ot.array[Rt+1]=bt,Ot.array[Rt+2]=bt,Rt+=3}else if(2===Ot.size){if(void 0===Ot.boundTo||"vertices"===Ot.boundTo)for(w=0,M=qt.length;M>w;w++)S=Yt[qt[w]],O=Ot.value[S.a],N=Ot.value[S.b],k=Ot.value[S.c],Ot.array[Rt]=O.x,Ot.array[Rt+1]=O.y,Ot.array[Rt+2]=N.x,Ot.array[Rt+3]=N.y,Ot.array[Rt+4]=k.x,Ot.array[Rt+5]=k.y,Rt+=6;else if("faces"===Ot.boundTo)for(w=0,M=qt.length;M>w;w++)k=N=O=bt=Ot.value[qt[w]],Ot.array[Rt]=O.x,Ot.array[Rt+1]=O.y,Ot.array[Rt+2]=N.x,Ot.array[Rt+3]=N.y,Ot.array[Rt+4]=k.x,Ot.array[Rt+5]=k.y,Rt+=6}else if(3===Ot.size){var ee;if(ee="c"===Ot.type?["r","g","b"]:["x","y","z"],void 0===Ot.boundTo||"vertices"===Ot.boundTo)for(w=0,M=qt.length;M>w;w++)S=Yt[qt[w]],O=Ot.value[S.a],N=Ot.value[S.b],k=Ot.value[S.c],Ot.array[Rt]=O[ee[0]],Ot.array[Rt+1]=O[ee[1]],Ot.array[Rt+2]=O[ee[2]],Ot.array[Rt+3]=N[ee[0]],Ot.array[Rt+4]=N[ee[1]],Ot.array[Rt+5]=N[ee[2]],Ot.array[Rt+6]=k[ee[0]],Ot.array[Rt+7]=k[ee[1]],Ot.array[Rt+8]=k[ee[2]],Rt+=9;else if("faces"===Ot.boundTo)for(w=0,M=qt.length;M>w;w++)k=N=O=bt=Ot.value[qt[w]],Ot.array[Rt]=O[ee[0]],Ot.array[Rt+1]=O[ee[1]],Ot.array[Rt+2]=O[ee[2]],Ot.array[Rt+3]=N[ee[0]],Ot.array[Rt+4]=N[ee[1]],Ot.array[Rt+5]=N[ee[2]],Ot.array[Rt+6]=k[ee[0]],Ot.array[Rt+7]=k[ee[1]],Ot.array[Rt+8]=k[ee[2]],Rt+=9;else if("faceVertices"===Ot.boundTo)for(w=0,M=qt.length;M>w;w++)bt=Ot.value[qt[w]],O=bt[0],N=bt[1],k=bt[2],Ot.array[Rt]=O[ee[0]],Ot.array[Rt+1]=O[ee[1]],Ot.array[Rt+2]=O[ee[2]],Ot.array[Rt+3]=N[ee[0]],Ot.array[Rt+4]=N[ee[1]],Ot.array[Rt+5]=N[ee[2]],Ot.array[Rt+6]=k[ee[0]],Ot.array[Rt+7]=k[ee[1]],Ot.array[Rt+8]=k[ee[2]],Rt+=9}else if(4===Ot.size)if(void 0===Ot.boundTo||"vertices"===Ot.boundTo)for(w=0,M=qt.length;M>w;w++)S=Yt[qt[w]],O=Ot.value[S.a],N=Ot.value[S.b],k=Ot.value[S.c],Ot.array[Rt]=O.x,Ot.array[Rt+1]=O.y,Ot.array[Rt+2]=O.z,Ot.array[Rt+3]=O.w,Ot.array[Rt+4]=N.x,Ot.array[Rt+5]=N.y,Ot.array[Rt+6]=N.z,Ot.array[Rt+7]=N.w,Ot.array[Rt+8]=k.x,Ot.array[Rt+9]=k.y,Ot.array[Rt+10]=k.z,Ot.array[Rt+11]=k.w,Rt+=12;else if("faces"===Ot.boundTo)for(w=0,M=qt.length;M>w;w++)k=N=O=bt=Ot.value[qt[w]],Ot.array[Rt]=O.x,Ot.array[Rt+1]=O.y,Ot.array[Rt+2]=O.z,Ot.array[Rt+3]=O.w,Ot.array[Rt+4]=N.x,Ot.array[Rt+5]=N.y,Ot.array[Rt+6]=N.z,Ot.array[Rt+7]=N.w,Ot.array[Rt+8]=k.x,Ot.array[Rt+9]=k.y,Ot.array[Rt+10]=k.z,Ot.array[Rt+11]=k.w,Rt+=12;else if("faceVertices"===Ot.boundTo)for(w=0,M=qt.length;M>w;w++)bt=Ot.value[qt[w]],O=bt[0],N=bt[1],k=bt[2],Ot.array[Rt]=O.x,Ot.array[Rt+1]=O.y,Ot.array[Rt+2]=O.z,Ot.array[Rt+3]=O.w,Ot.array[Rt+4]=N.x,Ot.array[Rt+5]=N.y,Ot.array[Rt+6]=N.z,Ot.array[Rt+7]=N.w,Ot.array[Rt+8]=k.x,Ot.array[Rt+9]=k.y,Ot.array[Rt+10]=k.z,Ot.array[Rt+11]=k.w,Rt+=12;At.bindBuffer(At.ARRAY_BUFFER,Ot.buffer),At.bufferData(At.ARRAY_BUFFER,Ot.array,T)}R&&(delete v.__inittedArrays,delete v.__colorArray,delete v.__normalArray,delete v.__tangentArray,delete v.__uvArray,delete v.__uv2Array,delete v.__faceArray,delete v.__vertexArray,delete v.__lineArray,delete v.__skinIndexArray,delete v.__skinWeightArray)}}}e.verticesNeedUpdate=!1,e.morphTargetsNeedUpdate=!1,e.elementsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.tangentsNeedUpdate=!1,d.attributes&&y(d)}else if(t instanceof THREE.Line){if(d=n(t,e),g=d.attributes&&E(d),e.verticesNeedUpdate||e.colorsNeedUpdate||e.lineDistancesNeedUpdate||g){var re,ne,ie,oe,ae,se,ue,le,ce,fe,pe,de,me=At.DYNAMIC_DRAW,ge=e.vertices,ve=e.colors,Ee=e.lineDistances,ye=ge.length,xe=ve.length,Te=Ee.length,Re=e.__vertexArray,be=e.__colorArray,_e=e.__lineDistanceArray,we=e.colorsNeedUpdate,Me=e.lineDistancesNeedUpdate,He=e.__webglCustomAttributesList;if(e.verticesNeedUpdate){for(re=0;ye>re;re++)oe=ge[re],ae=3*re,Re[ae]=oe.x,Re[ae+1]=oe.y,Re[ae+2]=oe.z;At.bindBuffer(At.ARRAY_BUFFER,e.__webglVertexBuffer),At.bufferData(At.ARRAY_BUFFER,Re,me)}if(we){for(ne=0;xe>ne;ne++)se=ve[ne],ae=3*ne,be[ae]=se.r,be[ae+1]=se.g,be[ae+2]=se.b;At.bindBuffer(At.ARRAY_BUFFER,e.__webglColorBuffer),At.bufferData(At.ARRAY_BUFFER,be,me)}if(Me){for(ie=0;Te>ie;ie++)_e[ie]=Ee[ie];At.bindBuffer(At.ARRAY_BUFFER,e.__webglLineDistanceBuffer),At.bufferData(At.ARRAY_BUFFER,_e,me)}if(He)for(ue=0,le=He.length;le>ue;ue++)if(de=He[ue],de.needsUpdate&&(void 0===de.boundTo||"vertices"===de.boundTo)){if(ae=0,fe=de.value.length,1===de.size)for(ce=0;fe>ce;ce++)de.array[ce]=de.value[ce];else if(2===de.size)for(ce=0;fe>ce;ce++)pe=de.value[ce],de.array[ae]=pe.x,de.array[ae+1]=pe.y,ae+=2;else if(3===de.size)if("c"===de.type)for(ce=0;fe>ce;ce++)pe=de.value[ce],de.array[ae]=pe.r,de.array[ae+1]=pe.g,de.array[ae+2]=pe.b,ae+=3;else for(ce=0;fe>ce;ce++)pe=de.value[ce],de.array[ae]=pe.x,de.array[ae+1]=pe.y,de.array[ae+2]=pe.z,ae+=3;else if(4===de.size)for(ce=0;fe>ce;ce++)pe=de.value[ce],de.array[ae]=pe.x,de.array[ae+1]=pe.y,de.array[ae+2]=pe.z,de.array[ae+3]=pe.w,ae+=4;At.bindBuffer(At.ARRAY_BUFFER,de.buffer),At.bufferData(At.ARRAY_BUFFER,de.array,me),de.needsUpdate=!1}}e.verticesNeedUpdate=!1,e.colorsNeedUpdate=!1,e.lineDistancesNeedUpdate=!1,d.attributes&&y(d)}else if(t instanceof THREE.PointCloud){if(d=n(t,e),g=d.attributes&&E(d),e.verticesNeedUpdate||e.colorsNeedUpdate||g){var Se,Ce,Ae,Le,Pe,Fe,De,Be,Oe,Ne,ke,Ue=At.DYNAMIC_DRAW,Ie=e.vertices,ze=Ie.length,Ve=e.colors,je=Ve.length,Ge=e.__vertexArray,We=e.__colorArray,Xe=e.colorsNeedUpdate,qe=e.__webglCustomAttributesList;if(e.verticesNeedUpdate){for(Se=0;ze>Se;Se++)Ae=Ie[Se],Le=3*Se,Ge[Le]=Ae.x,Ge[Le+1]=Ae.y,Ge[Le+2]=Ae.z;At.bindBuffer(At.ARRAY_BUFFER,e.__webglVertexBuffer),At.bufferData(At.ARRAY_BUFFER,Ge,Ue)}if(Xe){for(Ce=0;je>Ce;Ce++)Pe=Ve[Ce],Le=3*Ce,We[Le]=Pe.r,We[Le+1]=Pe.g,We[Le+2]=Pe.b;At.bindBuffer(At.ARRAY_BUFFER,e.__webglColorBuffer),At.bufferData(At.ARRAY_BUFFER,We,Ue)}if(qe)for(Fe=0,De=qe.length;De>Fe;Fe++){if(ke=qe[Fe],ke.needsUpdate&&(void 0===ke.boundTo||"vertices"===ke.boundTo))if(Oe=ke.value.length,Le=0,1===ke.size)for(Be=0;Oe>Be;Be++)ke.array[Be]=ke.value[Be];else if(2===ke.size)for(Be=0;Oe>Be;Be++)Ne=ke.value[Be],ke.array[Le]=Ne.x,ke.array[Le+1]=Ne.y,Le+=2;else if(3===ke.size)if("c"===ke.type)for(Be=0;Oe>Be;Be++)Ne=ke.value[Be],ke.array[Le]=Ne.r,ke.array[Le+1]=Ne.g,ke.array[Le+2]=Ne.b,Le+=3;else for(Be=0;Oe>Be;Be++)Ne=ke.value[Be],ke.array[Le]=Ne.x,ke.array[Le+1]=Ne.y,ke.array[Le+2]=Ne.z,Le+=3;else if(4===ke.size)for(Be=0;Oe>Be;Be++)Ne=ke.value[Be],ke.array[Le]=Ne.x,ke.array[Le+1]=Ne.y,ke.array[Le+2]=Ne.z,ke.array[Le+3]=Ne.w,Le+=4;At.bindBuffer(At.ARRAY_BUFFER,ke.buffer),At.bufferData(At.ARRAY_BUFFER,ke.array,Ue),ke.needsUpdate=!1}}e.verticesNeedUpdate=!1,e.colorsNeedUpdate=!1,d.attributes&&y(d)}}function E(t){for(var e in t.attributes)if(t.attributes[e].needsUpdate)return!0;return!1}function y(t){for(var e in t.attributes)t.attributes[e].needsUpdate=!1}function x(t,e,r,n,i){var o,a,s,u;if(st=0,n.needsUpdate){n.program&&ue(n),n.addEventListener("dispose",ae);var h=ce[n.type];if(h){var l=THREE.ShaderLib[h];n.__webglShader={uniforms:THREE.UniformsUtils.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else n.__webglShader={uniforms:n.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader};for(var c=0,f=0,p=0,d=0,m=0,g=e.length;g>m;m++){var v=e[m];v.onlyShadow||!1===v.visible||(v instanceof THREE.DirectionalLight&&c++,v instanceof THREE.PointLight&&f++,v instanceof THREE.SpotLight&&p++,v instanceof THREE.HemisphereLight&&d++)}o=c,a=f,s=p,u=d;for(var E,y=0,x=0,b=e.length;b>x;x++){var M=e[x];M.castShadow&&(M instanceof THREE.SpotLight&&y++,M instanceof THREE.DirectionalLight&&!M.shadowCascade&&y++)}E=y;var H;if(Wt&&i&&i.skeleton&&i.skeleton.useVertexTexture)H=1024;else{var A=At.getParameter(At.MAX_VERTEX_UNIFORM_VECTORS),L=Math.floor((A-20)/4);void 0!==i&&i instanceof THREE.SkinnedMesh&&(L=Math.min(i.skeleton.bones.length,L),L<i.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+i.skeleton.bones.length+", this GPU supports just "+L+" (try OpenGL instead of ANGLE)")),H=L}var P={precision:N,supportsVertexTextures:Gt,map:!!n.map,envMap:!!n.envMap,envMapMode:n.envMap&&n.envMap.mapping,lightMap:!!n.lightMap,bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,combine:n.combine,vertexColors:n.vertexColors,fog:r,useFog:n.fog,fogExp:r instanceof THREE.FogExp2,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:G,skinning:n.skinning,maxBones:H,useVertexTexture:Wt&&i&&i.skeleton&&i.skeleton.useVertexTexture,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:tt.maxMorphTargets,maxMorphNormals:tt.maxMorphNormals,maxDirLights:o,maxPointLights:a,maxSpotLights:s,maxHemiLights:u,maxShadows:E,shadowMapEnabled:tt.shadowMapEnabled&&i.receiveShadow&&E>0,shadowMapType:tt.shadowMapType,shadowMapDebug:tt.shadowMapDebug,shadowMapCascade:tt.shadowMapCascade,alphaTest:n.alphaTest,metal:n.metal,wrapAround:n.wrapAround,doubleSided:n.side===THREE.DoubleSide,flipSided:n.side===THREE.BackSide},B=[];if(h?B.push(h):(B.push(n.fragmentShader),B.push(n.vertexShader)),void 0!==n.defines)for(var O in n.defines)B.push(O),B.push(n.defines[O]);for(O in P)B.push(O),B.push(P[O]);for(var k,U=B.join(),I=0,z=et.length;z>I;I++){var V=et[I];if(V.code===U){k=V,k.usedTimes++;break}}void 0===k&&(k=new THREE.WebGLProgram(tt,U,n,P),et.push(k),tt.info.memory.programs=et.length),n.program=k;var j=k.attributes;if(n.morphTargets){n.numSupportedMorphTargets=0;for(var W,X="morphTarget",q=0;q<tt.maxMorphTargets;q++)W=X+q,0<=j[W]&&n.numSupportedMorphTargets++}if(n.morphNormals)for(n.numSupportedMorphNormals=0,X="morphNormal",q=0;q<tt.maxMorphNormals;q++)W=X+q,0<=j[W]&&n.numSupportedMorphNormals++;n.uniformsList=[];for(var Y in n.__webglShader.uniforms){var K=n.program.uniforms[Y];K&&n.uniformsList.push([n.__webglShader.uniforms[Y],K])}n.needsUpdate=!1}n.morphTargets&&!i.__webglMorphTargetInfluences&&(i.__webglMorphTargetInfluences=new Float32Array(tt.maxMorphTargets));var Z=!1,Q=!1,$=!1,J=n.program,nt=J.uniforms,ot=n.__webglShader.uniforms;if(J.id!==rt&&(At.useProgram(J.program),rt=J.id,$=Q=Z=!0),n.id!==it&&(-1===it&&($=!0),it=n.id,Q=!0),(Z||t!==at)&&(At.uniformMatrix4fv(nt.projectionMatrix,!1,t.projectionMatrix.elements),G&&At.uniform1f(nt.logDepthBufFC,2/(Math.log(t.far+1)/Math.LN2)),t!==at&&(at=t),(n instanceof THREE.ShaderMaterial||n instanceof THREE.MeshPhongMaterial||n.envMap)&&null!==nt.cameraPosition&&(Lt.setFromMatrixPosition(t.matrixWorld),At.uniform3f(nt.cameraPosition,Lt.x,Lt.y,Lt.z)),(n instanceof THREE.MeshPhongMaterial||n instanceof THREE.MeshLambertMaterial||n instanceof THREE.MeshBasicMaterial||n instanceof THREE.ShaderMaterial||n.skinning)&&null!==nt.viewMatrix&&At.uniformMatrix4fv(nt.viewMatrix,!1,t.matrixWorldInverse.elements)),
n.skinning)if(i.bindMatrix&&null!==nt.bindMatrix&&At.uniformMatrix4fv(nt.bindMatrix,!1,i.bindMatrix.elements),i.bindMatrixInverse&&null!==nt.bindMatrixInverse&&At.uniformMatrix4fv(nt.bindMatrixInverse,!1,i.bindMatrixInverse.elements),Wt&&i.skeleton&&i.skeleton.useVertexTexture){if(null!==nt.boneTexture){var ut=R();At.uniform1i(nt.boneTexture,ut),tt.setTexture(i.skeleton.boneTexture,ut)}null!==nt.boneTextureWidth&&At.uniform1i(nt.boneTextureWidth,i.skeleton.boneTextureWidth),null!==nt.boneTextureHeight&&At.uniform1i(nt.boneTextureHeight,i.skeleton.boneTextureHeight)}else i.skeleton&&i.skeleton.boneMatrices&&null!==nt.boneGlobalMatrices&&At.uniformMatrix4fv(nt.boneGlobalMatrices,!1,i.skeleton.boneMatrices);if(Q){if(r&&n.fog&&(ot.fogColor.value=r.color,r instanceof THREE.Fog?(ot.fogNear.value=r.near,ot.fogFar.value=r.far):r instanceof THREE.FogExp2&&(ot.fogDensity.value=r.density)),n instanceof THREE.MeshPhongMaterial||n instanceof THREE.MeshLambertMaterial||n.lights){if(Ft){var ht,lt,ct,ft,pt,dt,mt,gt,vt,$=!0,Et=0,yt=0,xt=0,Tt=Dt,Rt=Tt.directional.colors,bt=Tt.directional.positions,_t=Tt.point.colors,wt=Tt.point.positions,Mt=Tt.point.distances,Ht=Tt.spot.colors,St=Tt.spot.positions,Ct=Tt.spot.distances,Bt=Tt.spot.directions,Ot=Tt.spot.anglesCos,Nt=Tt.spot.exponents,kt=Tt.hemi.skyColors,Ut=Tt.hemi.groundColors,It=Tt.hemi.positions,zt=0,Vt=0,Xt=0,qt=0,Yt=0,Kt=0,Qt=0,$t=0,Jt=0,te=0,ee=0,re=0;for(ht=0,lt=e.length;lt>ht;ht++)ct=e[ht],ct.onlyShadow||(ft=ct.color,mt=ct.intensity,vt=ct.distance,ct instanceof THREE.AmbientLight?ct.visible&&(tt.gammaInput?(Et+=ft.r*ft.r,yt+=ft.g*ft.g,xt+=ft.b*ft.b):(Et+=ft.r,yt+=ft.g,xt+=ft.b)):ct instanceof THREE.DirectionalLight?(Yt+=1,ct.visible&&(Pt.setFromMatrixPosition(ct.matrixWorld),Lt.setFromMatrixPosition(ct.target.matrixWorld),Pt.sub(Lt),Pt.normalize(),Jt=3*zt,bt[Jt]=Pt.x,bt[Jt+1]=Pt.y,bt[Jt+2]=Pt.z,tt.gammaInput?_(Rt,Jt,ft,mt*mt):w(Rt,Jt,ft,mt),zt+=1)):ct instanceof THREE.PointLight?(Kt+=1,ct.visible&&(te=3*Vt,tt.gammaInput?_(_t,te,ft,mt*mt):w(_t,te,ft,mt),Lt.setFromMatrixPosition(ct.matrixWorld),wt[te]=Lt.x,wt[te+1]=Lt.y,wt[te+2]=Lt.z,Mt[Vt]=vt,Vt+=1)):ct instanceof THREE.SpotLight?(Qt+=1,ct.visible&&(ee=3*Xt,tt.gammaInput?_(Ht,ee,ft,mt*mt):w(Ht,ee,ft,mt),Pt.setFromMatrixPosition(ct.matrixWorld),St[ee]=Pt.x,St[ee+1]=Pt.y,St[ee+2]=Pt.z,Ct[Xt]=vt,Lt.setFromMatrixPosition(ct.target.matrixWorld),Pt.sub(Lt),Pt.normalize(),Bt[ee]=Pt.x,Bt[ee+1]=Pt.y,Bt[ee+2]=Pt.z,Ot[Xt]=Math.cos(ct.angle),Nt[Xt]=ct.exponent,Xt+=1)):ct instanceof THREE.HemisphereLight&&($t+=1,ct.visible&&(Pt.setFromMatrixPosition(ct.matrixWorld),Pt.normalize(),re=3*qt,It[re]=Pt.x,It[re+1]=Pt.y,It[re+2]=Pt.z,pt=ct.color,dt=ct.groundColor,tt.gammaInput?(gt=mt*mt,_(kt,re,pt,gt),_(Ut,re,dt,gt)):(w(kt,re,pt,mt),w(Ut,re,dt,mt)),qt+=1)));for(ht=3*zt,lt=Math.max(Rt.length,3*Yt);lt>ht;ht++)Rt[ht]=0;for(ht=3*Vt,lt=Math.max(_t.length,3*Kt);lt>ht;ht++)_t[ht]=0;for(ht=3*Xt,lt=Math.max(Ht.length,3*Qt);lt>ht;ht++)Ht[ht]=0;for(ht=3*qt,lt=Math.max(kt.length,3*$t);lt>ht;ht++)kt[ht]=0;for(ht=3*qt,lt=Math.max(Ut.length,3*$t);lt>ht;ht++)Ut[ht]=0;Tt.directional.length=zt,Tt.point.length=Vt,Tt.spot.length=Xt,Tt.hemi.length=qt,Tt.ambient[0]=Et,Tt.ambient[1]=yt,Tt.ambient[2]=xt,Ft=!1}if($){var ne=Dt;ot.ambientLightColor.value=ne.ambient,ot.directionalLightColor.value=ne.directional.colors,ot.directionalLightDirection.value=ne.directional.positions,ot.pointLightColor.value=ne.point.colors,ot.pointLightPosition.value=ne.point.positions,ot.pointLightDistance.value=ne.point.distances,ot.spotLightColor.value=ne.spot.colors,ot.spotLightPosition.value=ne.spot.positions,ot.spotLightDistance.value=ne.spot.distances,ot.spotLightDirection.value=ne.spot.directions,ot.spotLightAngleCos.value=ne.spot.anglesCos,ot.spotLightExponent.value=ne.spot.exponents,ot.hemisphereLightSkyColor.value=ne.hemi.skyColors,ot.hemisphereLightGroundColor.value=ne.hemi.groundColors,ot.hemisphereLightDirection.value=ne.hemi.positions,T(ot,!0)}else T(ot,!1)}if(n instanceof THREE.MeshBasicMaterial||n instanceof THREE.MeshLambertMaterial||n instanceof THREE.MeshPhongMaterial){ot.opacity.value=n.opacity,tt.gammaInput?ot.diffuse.value.copyGammaToLinear(n.color):ot.diffuse.value=n.color,ot.map.value=n.map,ot.lightMap.value=n.lightMap,ot.specularMap.value=n.specularMap,ot.alphaMap.value=n.alphaMap,n.bumpMap&&(ot.bumpMap.value=n.bumpMap,ot.bumpScale.value=n.bumpScale),n.normalMap&&(ot.normalMap.value=n.normalMap,ot.normalScale.value.copy(n.normalScale));var oe;if(n.map?oe=n.map:n.specularMap?oe=n.specularMap:n.normalMap?oe=n.normalMap:n.bumpMap?oe=n.bumpMap:n.alphaMap&&(oe=n.alphaMap),void 0!==oe){var se=oe.offset,he=oe.repeat;ot.offsetRepeat.value.set(se.x,se.y,he.x,he.y)}ot.envMap.value=n.envMap,ot.flipEnvMap.value=n.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,ot.reflectivity.value=n.reflectivity,ot.refractionRatio.value=n.refractionRatio}if(n instanceof THREE.LineBasicMaterial?(ot.diffuse.value=n.color,ot.opacity.value=n.opacity):n instanceof THREE.LineDashedMaterial?(ot.diffuse.value=n.color,ot.opacity.value=n.opacity,ot.dashSize.value=n.dashSize,ot.totalSize.value=n.dashSize+n.gapSize,ot.scale.value=n.scale):n instanceof THREE.PointCloudMaterial?(ot.psColor.value=n.color,ot.opacity.value=n.opacity,ot.size.value=n.size,ot.scale.value=D.height/2,ot.map.value=n.map):n instanceof THREE.MeshPhongMaterial?(ot.shininess.value=n.shininess,tt.gammaInput?(ot.ambient.value.copyGammaToLinear(n.ambient),ot.emissive.value.copyGammaToLinear(n.emissive),ot.specular.value.copyGammaToLinear(n.specular)):(ot.ambient.value=n.ambient,ot.emissive.value=n.emissive,ot.specular.value=n.specular),n.wrapAround&&ot.wrapRGB.value.copy(n.wrapRGB)):n instanceof THREE.MeshLambertMaterial?(tt.gammaInput?(ot.ambient.value.copyGammaToLinear(n.ambient),ot.emissive.value.copyGammaToLinear(n.emissive)):(ot.ambient.value=n.ambient,ot.emissive.value=n.emissive),n.wrapAround&&ot.wrapRGB.value.copy(n.wrapRGB)):n instanceof THREE.MeshDepthMaterial?(ot.mNear.value=t.near,ot.mFar.value=t.far,ot.opacity.value=n.opacity):n instanceof THREE.MeshNormalMaterial&&(ot.opacity.value=n.opacity),i.receiveShadow&&!n._shadowPass&&ot.shadowMatrix)for(var le=0,fe=0,pe=e.length;pe>fe;fe++){var de=e[fe];de.castShadow&&(de instanceof THREE.SpotLight||de instanceof THREE.DirectionalLight&&!de.shadowCascade)&&(ot.shadowMap.value[le]=de.shadowMap,ot.shadowMapSize.value[le]=de.shadowMapSize,ot.shadowMatrix.value[le]=de.shadowMatrix,ot.shadowDarkness.value[le]=de.shadowDarkness,ot.shadowBias.value[le]=de.shadowBias,le++)}for(var me,ge,ve,Ee=n.uniformsList,ye=0,xe=Ee.length;xe>ye;ye++){var Te=Ee[ye][0];if(!1!==Te.needsUpdate){var Re=Te.type,be=Te.value,_e=Ee[ye][1];switch(Re){case"1i":At.uniform1i(_e,be);break;case"1f":At.uniform1f(_e,be);break;case"2f":At.uniform2f(_e,be[0],be[1]);break;case"3f":At.uniform3f(_e,be[0],be[1],be[2]);break;case"4f":At.uniform4f(_e,be[0],be[1],be[2],be[3]);break;case"1iv":At.uniform1iv(_e,be);break;case"3iv":At.uniform3iv(_e,be);break;case"1fv":At.uniform1fv(_e,be);break;case"2fv":At.uniform2fv(_e,be);break;case"3fv":At.uniform3fv(_e,be);break;case"4fv":At.uniform4fv(_e,be);break;case"Matrix3fv":At.uniformMatrix3fv(_e,!1,be);break;case"Matrix4fv":At.uniformMatrix4fv(_e,!1,be);break;case"i":At.uniform1i(_e,be);break;case"f":At.uniform1f(_e,be);break;case"v2":At.uniform2f(_e,be.x,be.y);break;case"v3":At.uniform3f(_e,be.x,be.y,be.z);break;case"v4":At.uniform4f(_e,be.x,be.y,be.z,be.w);break;case"c":At.uniform3f(_e,be.r,be.g,be.b);break;case"iv1":At.uniform1iv(_e,be);break;case"iv":At.uniform3iv(_e,be);break;case"fv1":At.uniform1fv(_e,be);break;case"fv":At.uniform3fv(_e,be);break;case"v2v":void 0===Te._array&&(Te._array=new Float32Array(2*be.length));for(var we=0,Me=be.length;Me>we;we++)ve=2*we,Te._array[ve]=be[we].x,Te._array[ve+1]=be[we].y;At.uniform2fv(_e,Te._array);break;case"v3v":for(void 0===Te._array&&(Te._array=new Float32Array(3*be.length)),we=0,Me=be.length;Me>we;we++)ve=3*we,Te._array[ve]=be[we].x,Te._array[ve+1]=be[we].y,Te._array[ve+2]=be[we].z;At.uniform3fv(_e,Te._array);break;case"v4v":for(void 0===Te._array&&(Te._array=new Float32Array(4*be.length)),we=0,Me=be.length;Me>we;we++)ve=4*we,Te._array[ve]=be[we].x,Te._array[ve+1]=be[we].y,Te._array[ve+2]=be[we].z,Te._array[ve+3]=be[we].w;At.uniform4fv(_e,Te._array);break;case"m3":At.uniformMatrix3fv(_e,!1,be.elements);break;case"m3v":for(void 0===Te._array&&(Te._array=new Float32Array(9*be.length)),we=0,Me=be.length;Me>we;we++)be[we].flattenToArrayOffset(Te._array,9*we);At.uniformMatrix3fv(_e,!1,Te._array);break;case"m4":At.uniformMatrix4fv(_e,!1,be.elements);break;case"m4v":for(void 0===Te._array&&(Te._array=new Float32Array(16*be.length)),we=0,Me=be.length;Me>we;we++)be[we].flattenToArrayOffset(Te._array,16*we);At.uniformMatrix4fv(_e,!1,Te._array);break;case"t":if(me=be,ge=R(),At.uniform1i(_e,ge),!me)continue;if(me instanceof THREE.CubeTexture||me.image instanceof Array&&6===me.image.length){var He=me,Se=ge;if(6===He.image.length)if(He.needsUpdate){He.image.__webglTextureCube||(He.addEventListener("dispose",ie),He.image.__webglTextureCube=At.createTexture(),tt.info.memory.textures++),At.activeTexture(At.TEXTURE0+Se),At.bindTexture(At.TEXTURE_CUBE_MAP,He.image.__webglTextureCube),At.pixelStorei(At.UNPACK_FLIP_Y_WEBGL,He.flipY);for(var Ce=He instanceof THREE.CompressedTexture,Ae=He.image[0]instanceof THREE.DataTexture,Le=[],Pe=0;6>Pe;Pe++)Le[Pe]=!tt.autoScaleCubemaps||Ce||Ae?Ae?He.image[Pe].image:He.image[Pe]:C(He.image[Pe],jt);var Fe=Le[0],De=THREE.Math.isPowerOfTwo(Fe.width)&&THREE.Math.isPowerOfTwo(Fe.height),Be=F(He.format),Oe=F(He.type);for(S(At.TEXTURE_CUBE_MAP,He,De),Pe=0;6>Pe;Pe++)if(Ce)for(var Ne,ke=Le[Pe].mipmaps,Ue=0,Ie=ke.length;Ie>Ue;Ue++)Ne=ke[Ue],He.format!==THREE.RGBAFormat&&He.format!==THREE.RGBFormat?-1<Zt().indexOf(Be)?At.compressedTexImage2D(At.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,Ue,Be,Ne.width,Ne.height,0,Ne.data):console.warn("Attempt to load unsupported compressed texture format"):At.texImage2D(At.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,Ue,Be,Ne.width,Ne.height,0,Be,Oe,Ne.data);else Ae?At.texImage2D(At.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,Be,Le[Pe].width,Le[Pe].height,0,Be,Oe,Le[Pe].data):At.texImage2D(At.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,Be,Be,Oe,Le[Pe]);He.generateMipmaps&&De&&At.generateMipmap(At.TEXTURE_CUBE_MAP),He.needsUpdate=!1,He.onUpdate&&He.onUpdate()}else At.activeTexture(At.TEXTURE0+Se),At.bindTexture(At.TEXTURE_CUBE_MAP,He.image.__webglTextureCube)}else if(me instanceof THREE.WebGLRenderTargetCube){var ze=me;At.activeTexture(At.TEXTURE0+ge),At.bindTexture(At.TEXTURE_CUBE_MAP,ze.__webglTexture)}else tt.setTexture(me,ge);break;case"tv":for(void 0===Te._array&&(Te._array=[]),we=0,Me=Te.value.length;Me>we;we++)Te._array[we]=R();for(At.uniform1iv(_e,Te._array),we=0,Me=Te.value.length;Me>we;we++)me=Te.value[we],ge=Te._array[we],me&&tt.setTexture(me,ge);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+Re)}}}}return At.uniformMatrix4fv(nt.modelViewMatrix,!1,i._modelViewMatrix.elements),nt.normalMatrix&&At.uniformMatrix3fv(nt.normalMatrix,!1,i._normalMatrix.elements),null!==nt.modelMatrix&&At.uniformMatrix4fv(nt.modelMatrix,!1,i.matrixWorld.elements),J}function T(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLightColor.needsUpdate=e,t.directionalLightDirection.needsUpdate=e,t.pointLightColor.needsUpdate=e,t.pointLightPosition.needsUpdate=e,t.pointLightDistance.needsUpdate=e,t.spotLightColor.needsUpdate=e,t.spotLightPosition.needsUpdate=e,t.spotLightDistance.needsUpdate=e,t.spotLightDirection.needsUpdate=e,t.spotLightAngleCos.needsUpdate=e,t.spotLightExponent.needsUpdate=e,t.hemisphereLightSkyColor.needsUpdate=e,t.hemisphereLightGroundColor.needsUpdate=e,t.hemisphereLightDirection.needsUpdate=e}function R(){var t=st;return t>=It&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+It),st+=1,t}function b(t,e){t._modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,t.matrixWorld),t._normalMatrix.getNormalMatrix(t._modelViewMatrix)}function _(t,e,r,n){t[e]=r.r*r.r*n,t[e+1]=r.g*r.g*n,t[e+2]=r.b*r.b*n}function w(t,e,r,n){t[e]=r.r*n,t[e+1]=r.g*n,t[e+2]=r.b*n}function M(t){t*=O,t!==yt&&(At.lineWidth(t),yt=t)}function H(t,e,r){gt!==t&&(t?At.enable(At.POLYGON_OFFSET_FILL):At.disable(At.POLYGON_OFFSET_FILL),gt=t),!t||vt===e&&Et===r||(At.polygonOffset(e,r),vt=e,Et=r)}function S(t,e,r){r?(At.texParameteri(t,At.TEXTURE_WRAP_S,F(e.wrapS)),At.texParameteri(t,At.TEXTURE_WRAP_T,F(e.wrapT)),At.texParameteri(t,At.TEXTURE_MAG_FILTER,F(e.magFilter)),At.texParameteri(t,At.TEXTURE_MIN_FILTER,F(e.minFilter))):(At.texParameteri(t,At.TEXTURE_WRAP_S,At.CLAMP_TO_EDGE),At.texParameteri(t,At.TEXTURE_WRAP_T,At.CLAMP_TO_EDGE),e.wrapS===THREE.ClampToEdgeWrapping&&e.wrapT===THREE.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT is set to THREE.ClampToEdgeWrapping. ( "+e.sourceFile+" )"),At.texParameteri(t,At.TEXTURE_MAG_FILTER,P(e.magFilter)),At.texParameteri(t,At.TEXTURE_MIN_FILTER,P(e.minFilter)),e.minFilter!==THREE.NearestFilter&&e.minFilter!==THREE.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter is set to THREE.LinearFilter or THREE.NearestFilter. ( "+e.sourceFile+" )")),(r=Nt.get("EXT_texture_filter_anisotropic"))&&e.type!==THREE.FloatType&&(1<e.anisotropy||e.__oldAnisotropy)&&(At.texParameterf(t,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,tt.getMaxAnisotropy())),e.__oldAnisotropy=e.anisotropy)}function C(t,e){if(t.width>e||t.height>e){var r=e/Math.max(t.width,t.height),n=document.createElement("canvas");return n.width=Math.floor(t.width*r),n.height=Math.floor(t.height*r),n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),console.log("THREE.WebGLRenderer:",t,"is too big ("+t.width+"x"+t.height+"). Resized to "+n.width+"x"+n.height+"."),n}return t}function A(t,e){At.bindRenderbuffer(At.RENDERBUFFER,t),e.depthBuffer&&!e.stencilBuffer?(At.renderbufferStorage(At.RENDERBUFFER,At.DEPTH_COMPONENT16,e.width,e.height),At.framebufferRenderbuffer(At.FRAMEBUFFER,At.DEPTH_ATTACHMENT,At.RENDERBUFFER,t)):e.depthBuffer&&e.stencilBuffer?(At.renderbufferStorage(At.RENDERBUFFER,At.DEPTH_STENCIL,e.width,e.height),At.framebufferRenderbuffer(At.FRAMEBUFFER,At.DEPTH_STENCIL_ATTACHMENT,At.RENDERBUFFER,t)):At.renderbufferStorage(At.RENDERBUFFER,At.RGBA4,e.width,e.height)}function L(t){t instanceof THREE.WebGLRenderTargetCube?(At.bindTexture(At.TEXTURE_CUBE_MAP,t.__webglTexture),At.generateMipmap(At.TEXTURE_CUBE_MAP),At.bindTexture(At.TEXTURE_CUBE_MAP,null)):(At.bindTexture(At.TEXTURE_2D,t.__webglTexture),At.generateMipmap(At.TEXTURE_2D),At.bindTexture(At.TEXTURE_2D,null))}function P(t){return t===THREE.NearestFilter||t===THREE.NearestMipMapNearestFilter||t===THREE.NearestMipMapLinearFilter?At.NEAREST:At.LINEAR}function F(t){var e;if(t===THREE.RepeatWrapping)return At.REPEAT;if(t===THREE.ClampToEdgeWrapping)return At.CLAMP_TO_EDGE;if(t===THREE.MirroredRepeatWrapping)return At.MIRRORED_REPEAT;if(t===THREE.NearestFilter)return At.NEAREST;if(t===THREE.NearestMipMapNearestFilter)return At.NEAREST_MIPMAP_NEAREST;if(t===THREE.NearestMipMapLinearFilter)return At.NEAREST_MIPMAP_LINEAR;if(t===THREE.LinearFilter)return At.LINEAR;if(t===THREE.LinearMipMapNearestFilter)return At.LINEAR_MIPMAP_NEAREST;if(t===THREE.LinearMipMapLinearFilter)return At.LINEAR_MIPMAP_LINEAR;if(t===THREE.UnsignedByteType)return At.UNSIGNED_BYTE;if(t===THREE.UnsignedShort4444Type)return At.UNSIGNED_SHORT_4_4_4_4;if(t===THREE.UnsignedShort5551Type)return At.UNSIGNED_SHORT_5_5_5_1;if(t===THREE.UnsignedShort565Type)return At.UNSIGNED_SHORT_5_6_5;if(t===THREE.ByteType)return At.BYTE;if(t===THREE.ShortType)return At.SHORT;if(t===THREE.UnsignedShortType)return At.UNSIGNED_SHORT;if(t===THREE.IntType)return At.INT;if(t===THREE.UnsignedIntType)return At.UNSIGNED_INT;if(t===THREE.FloatType)return At.FLOAT;if(t===THREE.AlphaFormat)return At.ALPHA;if(t===THREE.RGBFormat)return At.RGB;if(t===THREE.RGBAFormat)return At.RGBA;if(t===THREE.LuminanceFormat)return At.LUMINANCE;if(t===THREE.LuminanceAlphaFormat)return At.LUMINANCE_ALPHA;if(t===THREE.AddEquation)return At.FUNC_ADD;if(t===THREE.SubtractEquation)return At.FUNC_SUBTRACT;if(t===THREE.ReverseSubtractEquation)return At.FUNC_REVERSE_SUBTRACT;if(t===THREE.ZeroFactor)return At.ZERO;if(t===THREE.OneFactor)return At.ONE;if(t===THREE.SrcColorFactor)return At.SRC_COLOR;if(t===THREE.OneMinusSrcColorFactor)return At.ONE_MINUS_SRC_COLOR;if(t===THREE.SrcAlphaFactor)return At.SRC_ALPHA;if(t===THREE.OneMinusSrcAlphaFactor)return At.ONE_MINUS_SRC_ALPHA;if(t===THREE.DstAlphaFactor)return At.DST_ALPHA;if(t===THREE.OneMinusDstAlphaFactor)return At.ONE_MINUS_DST_ALPHA;if(t===THREE.DstColorFactor)return At.DST_COLOR;if(t===THREE.OneMinusDstColorFactor)return At.ONE_MINUS_DST_COLOR;if(t===THREE.SrcAlphaSaturateFactor)return At.SRC_ALPHA_SATURATE;if(e=Nt.get("WEBGL_compressed_texture_s3tc"),null!==e){if(t===THREE.RGB_S3TC_DXT1_Format)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===THREE.RGBA_S3TC_DXT1_Format)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===THREE.RGBA_S3TC_DXT3_Format)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===THREE.RGBA_S3TC_DXT5_Format)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e=Nt.get("WEBGL_compressed_texture_pvrtc"),null!==e){if(t===THREE.RGB_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===THREE.RGB_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===THREE.RGBA_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===THREE.RGBA_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e=Nt.get("EXT_blend_minmax"),null!==e){if(t===THREE.MinEquation)return e.MIN_EXT;if(t===THREE.MaxEquation)return e.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION),t=t||{};var D=void 0!==t.canvas?t.canvas:document.createElement("canvas"),B=void 0!==t.context?t.context:null,O=1,N=void 0!==t.precision?t.precision:"highp",k=void 0!==t.alpha?t.alpha:!1,U=void 0!==t.depth?t.depth:!0,I=void 0!==t.stencil?t.stencil:!0,z=void 0!==t.antialias?t.antialias:!1,V=void 0!==t.premultipliedAlpha?t.premultipliedAlpha:!0,j=void 0!==t.preserveDrawingBuffer?t.preserveDrawingBuffer:!1,G=void 0!==t.logarithmicDepthBuffer?t.logarithmicDepthBuffer:!1,W=new THREE.Color(0),X=0,q=[],Y={},K=[],Z=[],Q=[],$=[],J=[];this.domElement=D,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.shadowMapEnabled=this.gammaOutput=this.gammaInput=!1,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapCascade=this.shadowMapDebug=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var tt=this,et=[],rt=null,nt=null,it=-1,ot="",at=null,st=0,ut=-1,ht=-1,lt=-1,ct=-1,ft=-1,pt=-1,dt=-1,mt=-1,gt=null,vt=null,Et=null,yt=null,xt=0,Tt=0,Rt=D.width,bt=D.height,_t=0,wt=0,Mt=new Uint8Array(16),Ht=new Uint8Array(16),St=new THREE.Frustum,Ct=new THREE.Matrix4;new THREE.Matrix4;var At,Lt=new THREE.Vector3,Pt=new THREE.Vector3,Ft=!0,Dt={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};try{var Bt={alpha:k,depth:U,stencil:I,antialias:z,premultipliedAlpha:V,preserveDrawingBuffer:j};if(At=B||D.getContext("webgl",Bt)||D.getContext("experimental-webgl",Bt),null===At){if(null!==D.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context."}D.addEventListener("webglcontextlost",function(t){t.preventDefault(),Ut(),kt(),Y={}},!1)}catch(Ot){console.error(Ot)}void 0===At.getShaderPrecisionFormat&&(At.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var Nt=new THREE.WebGLExtensions(At);Nt.get("OES_texture_float"),Nt.get("OES_texture_float_linear"),Nt.get("OES_standard_derivatives"),G&&Nt.get("EXT_frag_depth");var kt=function(){At.clearColor(0,0,0,1),At.clearDepth(1),At.clearStencil(0),At.enable(At.DEPTH_TEST),At.depthFunc(At.LEQUAL),At.frontFace(At.CCW),At.cullFace(At.BACK),At.enable(At.CULL_FACE),At.enable(At.BLEND),At.blendEquation(At.FUNC_ADD),At.blendFunc(At.SRC_ALPHA,At.ONE_MINUS_SRC_ALPHA),At.viewport(xt,Tt,Rt,bt),At.clearColor(W.r,W.g,W.b,X)},Ut=function(){at=rt=null,ht=ut=mt=dt=lt=-1,ot="",it=-1,Ft=!0;for(var t=0;t<Ht.length;t++)Ht[t]=0};kt(),this.context=At;var It=At.getParameter(At.MAX_TEXTURE_IMAGE_UNITS),zt=At.getParameter(At.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Vt=At.getParameter(At.MAX_TEXTURE_SIZE),jt=At.getParameter(At.MAX_CUBE_MAP_TEXTURE_SIZE),Gt=zt>0,Wt=Gt&&Nt.get("OES_texture_float"),Xt=At.getShaderPrecisionFormat(At.VERTEX_SHADER,At.HIGH_FLOAT),qt=At.getShaderPrecisionFormat(At.VERTEX_SHADER,At.MEDIUM_FLOAT);At.getShaderPrecisionFormat(At.VERTEX_SHADER,At.LOW_FLOAT);var Yt=At.getShaderPrecisionFormat(At.FRAGMENT_SHADER,At.HIGH_FLOAT),Kt=At.getShaderPrecisionFormat(At.FRAGMENT_SHADER,At.MEDIUM_FLOAT);At.getShaderPrecisionFormat(At.FRAGMENT_SHADER,At.LOW_FLOAT);var Zt=function(){var t;return function(){if(void 0!==t)return t;if(t=[],Nt.get("WEBGL_compressed_texture_pvrtc")||Nt.get("WEBGL_compressed_texture_s3tc"))for(var e=At.getParameter(At.COMPRESSED_TEXTURE_FORMATS),r=0;r<e.length;r++)t.push(e[r]);return t}}(),Qt=0<Xt.precision&&0<Yt.precision,$t=0<qt.precision&&0<Kt.precision;"highp"!==N||Qt||($t?(N="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(N="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==N||$t||(N="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var Jt=new THREE.ShadowMapPlugin(this,q,Y,K),te=new THREE.SpritePlugin(this,$),ee=new THREE.LensFlarePlugin(this,J);this.getContext=function(){return At},this.forceContextLoss=function(){Nt.get("WEBGL_lose_context").loseContext()},this.supportsVertexTextures=function(){return Gt},this.supportsFloatTextures=function(){return Nt.get("OES_texture_float")},this.supportsStandardDerivatives=function(){return Nt.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return Nt.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return Nt.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return Nt.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){var t;return function(){if(void 0!==t)return t;var e=Nt.get("EXT_texture_filter_anisotropic");return t=null!==e?At.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return N},this.getPixelRatio=function(){return O},this.setPixelRatio=function(t){O=t},this.setSize=function(t,e,r){D.width=t*O,D.height=e*O,!1!==r&&(D.style.width=t+"px",D.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,r,n){xt=t*O,Tt=e*O,Rt=r*O,bt=n*O,At.viewport(xt,Tt,Rt,bt)},this.setScissor=function(t,e,r,n){At.scissor(t*O,e*O,r*O,n*O)},this.enableScissorTest=function(t){t?At.enable(At.SCISSOR_TEST):At.disable(At.SCISSOR_TEST)},this.getClearColor=function(){return W},this.setClearColor=function(t,e){W.set(t),X=void 0!==e?e:1,At.clearColor(W.r,W.g,W.b,X)},this.getClearAlpha=function(){return X},this.setClearAlpha=function(t){X=t,At.clearColor(W.r,W.g,W.b,X)},this.clear=function(t,e,r){var n=0;(void 0===t||t)&&(n|=At.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=At.DEPTH_BUFFER_BIT),(void 0===r||r)&&(n|=At.STENCIL_BUFFER_BIT),At.clear(n)},this.clearColor=function(){At.clear(At.COLOR_BUFFER_BIT)},this.clearDepth=function(){At.clear(At.DEPTH_BUFFER_BIT)},this.clearStencil=function(){At.clear(At.STENCIL_BUFFER_BIT)},this.clearTarget=function(t,e,r,n){this.setRenderTarget(t),this.clear(e,r,n)},this.resetGLState=Ut;var re=function(t){t.target.traverse(function(t){if(t.removeEventListener("remove",re),t instanceof THREE.Mesh||t instanceof THREE.PointCloud||t instanceof THREE.Line)delete Y[t.id];else if(t instanceof THREE.ImmediateRenderObject||t.immediateRenderCallback)for(var e=K,r=e.length-1;r>=0;r--)e[r].object===t&&e.splice(r,1);delete t.__webglInit,delete t._modelViewMatrix,delete t._normalMatrix,delete t.__webglActive})},ne=function(t){if(t=t.target,t.removeEventListener("dispose",ne),delete t.__webglInit,t instanceof THREE.BufferGeometry){for(var e in t.attributes){var r=t.attributes[e];void 0!==r.buffer&&(At.deleteBuffer(r.buffer),delete r.buffer)}tt.info.memory.geometries--}else if(e=he[t.id],void 0!==e){for(var r=0,n=e.length;n>r;r++){var i=e[r];if(void 0!==i.numMorphTargets){for(var o=0,a=i.numMorphTargets;a>o;o++)At.deleteBuffer(i.__webglMorphTargetsBuffers[o]);delete i.__webglMorphTargetsBuffers}if(void 0!==i.numMorphNormals){for(o=0,a=i.numMorphNormals;a>o;o++)At.deleteBuffer(i.__webglMorphNormalsBuffers[o]);delete i.__webglMorphNormalsBuffers}se(i)}delete he[t.id]}else se(t);ot=""},ie=function(t){t=t.target,t.removeEventListener("dispose",ie),t.image&&t.image.__webglTextureCube?(At.deleteTexture(t.image.__webglTextureCube),delete t.image.__webglTextureCube):void 0!==t.__webglInit&&(At.deleteTexture(t.__webglTexture),delete t.__webglTexture,delete t.__webglInit),tt.info.memory.textures--},oe=function(t){if(t=t.target,t.removeEventListener("dispose",oe),t&&void 0!==t.__webglTexture){if(At.deleteTexture(t.__webglTexture),delete t.__webglTexture,t instanceof THREE.WebGLRenderTargetCube)for(var e=0;6>e;e++)At.deleteFramebuffer(t.__webglFramebuffer[e]),At.deleteRenderbuffer(t.__webglRenderbuffer[e]);else At.deleteFramebuffer(t.__webglFramebuffer),At.deleteRenderbuffer(t.__webglRenderbuffer);delete t.__webglFramebuffer,delete t.__webglRenderbuffer}tt.info.memory.textures--},ae=function(t){t=t.target,t.removeEventListener("dispose",ae),ue(t)},se=function(t){for(var e="__webglVertexBuffer __webglNormalBuffer __webglTangentBuffer __webglColorBuffer __webglUVBuffer __webglUV2Buffer __webglSkinIndicesBuffer __webglSkinWeightsBuffer __webglFaceBuffer __webglLineBuffer __webglLineDistanceBuffer".split(" "),r=0,n=e.length;n>r;r++){var i=e[r];void 0!==t[i]&&(At.deleteBuffer(t[i]),delete t[i])}if(void 0!==t.__webglCustomAttributesList){for(i in t.__webglCustomAttributesList)At.deleteBuffer(t.__webglCustomAttributesList[i].buffer);delete t.__webglCustomAttributesList}tt.info.memory.geometries--},ue=function(t){var e=t.program.program;if(void 0!==e){t.program=void 0;var r,n,i=!1;for(t=0,r=et.length;r>t;t++)if(n=et[t],n.program===e){n.usedTimes--,0===n.usedTimes&&(i=!0);break}if(!0===i){for(i=[],t=0,r=et.length;r>t;t++)n=et[t],n.program!==e&&i.push(n);et=i,At.deleteProgram(e),tt.info.memory.programs--}}};this.renderBufferImmediate=function(t,e,r){if(o(),t.hasPositions&&!t.__webglVertexBuffer&&(t.__webglVertexBuffer=At.createBuffer()),t.hasNormals&&!t.__webglNormalBuffer&&(t.__webglNormalBuffer=At.createBuffer()),t.hasUvs&&!t.__webglUvBuffer&&(t.__webglUvBuffer=At.createBuffer()),t.hasColors&&!t.__webglColorBuffer&&(t.__webglColorBuffer=At.createBuffer()),t.hasPositions&&(At.bindBuffer(At.ARRAY_BUFFER,t.__webglVertexBuffer),At.bufferData(At.ARRAY_BUFFER,t.positionArray,At.DYNAMIC_DRAW),a(e.attributes.position),At.vertexAttribPointer(e.attributes.position,3,At.FLOAT,!1,0,0)),t.hasNormals){if(At.bindBuffer(At.ARRAY_BUFFER,t.__webglNormalBuffer),r.shading===THREE.FlatShading){var n,i,u,h,l,c,f,p,d,m,g,v=3*t.count;for(g=0;v>g;g+=9)m=t.normalArray,n=m[g],i=m[g+1],u=m[g+2],h=m[g+3],c=m[g+4],p=m[g+5],l=m[g+6],f=m[g+7],d=m[g+8],n=(n+h+l)/3,i=(i+c+f)/3,u=(u+p+d)/3,m[g]=n,m[g+1]=i,m[g+2]=u,m[g+3]=n,m[g+4]=i,m[g+5]=u,m[g+6]=n,m[g+7]=i,m[g+8]=u}At.bufferData(At.ARRAY_BUFFER,t.normalArray,At.DYNAMIC_DRAW),a(e.attributes.normal),At.vertexAttribPointer(e.attributes.normal,3,At.FLOAT,!1,0,0)}t.hasUvs&&r.map&&(At.bindBuffer(At.ARRAY_BUFFER,t.__webglUvBuffer),At.bufferData(At.ARRAY_BUFFER,t.uvArray,At.DYNAMIC_DRAW),a(e.attributes.uv),At.vertexAttribPointer(e.attributes.uv,2,At.FLOAT,!1,0,0)),t.hasColors&&r.vertexColors!==THREE.NoColors&&(At.bindBuffer(At.ARRAY_BUFFER,t.__webglColorBuffer),At.bufferData(At.ARRAY_BUFFER,t.colorArray,At.DYNAMIC_DRAW),a(e.attributes.color),At.vertexAttribPointer(e.attributes.color,3,At.FLOAT,!1,0,0)),s(),At.drawArrays(At.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,r,n,a,s){if(!1!==n.visible)if(v(s),t=x(t,e,r,n,s),e=!1,r="direct_"+a.id+"_"+t.id+"_"+(n.wireframe?1:0),r!==ot&&(ot=r,e=!0),e&&o(),s instanceof THREE.Mesh){s=!0===n.wireframe?At.LINES:At.TRIANGLES;var u=a.attributes.index;if(u){var h,l;if(u.array instanceof Uint32Array&&Nt.get("OES_element_index_uint")?(h=At.UNSIGNED_INT,l=4):(h=At.UNSIGNED_SHORT,l=2),r=a.offsets,0===r.length)e&&(i(n,t,a,0),At.bindBuffer(At.ELEMENT_ARRAY_BUFFER,u.buffer)),At.drawElements(s,u.array.length,h,0),tt.info.render.calls++,tt.info.render.vertices+=u.array.length,tt.info.render.faces+=u.array.length/3;else{e=!0;for(var c=0,f=r.length;f>c;c++){var p=r[c].index;e&&(i(n,t,a,p),At.bindBuffer(At.ELEMENT_ARRAY_BUFFER,u.buffer)),At.drawElements(s,r[c].count,h,r[c].start*l),tt.info.render.calls++,tt.info.render.vertices+=r[c].count,tt.info.render.faces+=r[c].count/3}}}else e&&i(n,t,a,0),n=a.attributes.position,At.drawArrays(s,0,n.array.length/3),tt.info.render.calls++,tt.info.render.vertices+=n.array.length/3,tt.info.render.faces+=n.array.length/9}else if(s instanceof THREE.PointCloud)if(s=At.POINTS,u=a.attributes.index)if(u.array instanceof Uint32Array&&Nt.get("OES_element_index_uint")?(h=At.UNSIGNED_INT,l=4):(h=At.UNSIGNED_SHORT,l=2),r=a.offsets,0===r.length)e&&(i(n,t,a,0),At.bindBuffer(At.ELEMENT_ARRAY_BUFFER,u.buffer)),At.drawElements(s,u.array.length,h,0),tt.info.render.calls++,tt.info.render.points+=u.array.length;else for(1<r.length&&(e=!0),c=0,f=r.length;f>c;c++)p=r[c].index,e&&(i(n,t,a,p),At.bindBuffer(At.ELEMENT_ARRAY_BUFFER,u.buffer)),At.drawElements(s,r[c].count,h,r[c].start*l),tt.info.render.calls++,tt.info.render.points+=r[c].count;else if(e&&i(n,t,a,0),n=a.attributes.position,r=a.offsets,0===r.length)At.drawArrays(s,0,n.array.length/3),tt.info.render.calls++,tt.info.render.points+=n.array.length/3;else for(c=0,f=r.length;f>c;c++)At.drawArrays(s,r[c].index,r[c].count),tt.info.render.calls++,tt.info.render.points+=r[c].count;else if(s instanceof THREE.Line)if(s=s.mode===THREE.LineStrip?At.LINE_STRIP:At.LINES,M(n.linewidth),u=a.attributes.index)if(u.array instanceof Uint32Array?(h=At.UNSIGNED_INT,l=4):(h=At.UNSIGNED_SHORT,l=2),r=a.offsets,0===r.length)e&&(i(n,t,a,0),At.bindBuffer(At.ELEMENT_ARRAY_BUFFER,u.buffer)),At.drawElements(s,u.array.length,h,0),tt.info.render.calls++,tt.info.render.vertices+=u.array.length;else for(1<r.length&&(e=!0),c=0,f=r.length;f>c;c++)p=r[c].index,e&&(i(n,t,a,p),At.bindBuffer(At.ELEMENT_ARRAY_BUFFER,u.buffer)),At.drawElements(s,r[c].count,h,r[c].start*l),tt.info.render.calls++,tt.info.render.vertices+=r[c].count;else if(e&&i(n,t,a,0),n=a.attributes.position,r=a.offsets,0===r.length)At.drawArrays(s,0,n.array.length/3),tt.info.render.calls++,tt.info.render.vertices+=n.array.length/3;else for(c=0,f=r.length;f>c;c++)At.drawArrays(s,r[c].index,r[c].count),tt.info.render.calls++,tt.info.render.vertices+=r[c].count},this.renderBuffer=function(t,e,r,n,i,u){if(!1!==n.visible){if(v(u),r=x(t,e,r,n,u),e=r.attributes,t=!1,r=i.id+"_"+r.id+"_"+(n.wireframe?1:0),r!==ot&&(ot=r,t=!0),t&&o(),!n.morphTargets&&0<=e.position)t&&(At.bindBuffer(At.ARRAY_BUFFER,i.__webglVertexBuffer),a(e.position),At.vertexAttribPointer(e.position,3,At.FLOAT,!1,0,0));else if(u.morphTargetBase){if(r=n.program.attributes,-1!==u.morphTargetBase&&0<=r.position?(At.bindBuffer(At.ARRAY_BUFFER,i.__webglMorphTargetsBuffers[u.morphTargetBase]),a(r.position),At.vertexAttribPointer(r.position,3,At.FLOAT,!1,0,0)):0<=r.position&&(At.bindBuffer(At.ARRAY_BUFFER,i.__webglVertexBuffer),a(r.position),At.vertexAttribPointer(r.position,3,At.FLOAT,!1,0,0)),u.morphTargetForcedOrder.length)for(var h,c=0,f=u.morphTargetForcedOrder,p=u.morphTargetInfluences;c<n.numSupportedMorphTargets&&c<f.length;)h=r["morphTarget"+c],
h>=0&&(At.bindBuffer(At.ARRAY_BUFFER,i.__webglMorphTargetsBuffers[f[c]]),a(h),At.vertexAttribPointer(h,3,At.FLOAT,!1,0,0)),h=r["morphNormal"+c],h>=0&&n.morphNormals&&(At.bindBuffer(At.ARRAY_BUFFER,i.__webglMorphNormalsBuffers[f[c]]),a(h),At.vertexAttribPointer(h,3,At.FLOAT,!1,0,0)),u.__webglMorphTargetInfluences[c]=p[f[c]],c++;else{for(f=[],p=u.morphTargetInfluences,c=0,h=p.length;h>c;c++)f.push([p[c],c]);f.length>n.numSupportedMorphTargets?(f.sort(l),f.length=n.numSupportedMorphTargets):f.length>n.numSupportedMorphNormals?f.sort(l):0===f.length&&f.push([0,0]);for(var c=0,d=n.numSupportedMorphTargets;d>c;c++)if(f[c]){var m=f[c][1];h=r["morphTarget"+c],h>=0&&(At.bindBuffer(At.ARRAY_BUFFER,i.__webglMorphTargetsBuffers[m]),a(h),At.vertexAttribPointer(h,3,At.FLOAT,!1,0,0)),h=r["morphNormal"+c],h>=0&&n.morphNormals&&(At.bindBuffer(At.ARRAY_BUFFER,i.__webglMorphNormalsBuffers[m]),a(h),At.vertexAttribPointer(h,3,At.FLOAT,!1,0,0)),u.__webglMorphTargetInfluences[c]=p[m]}else u.__webglMorphTargetInfluences[c]=0}null!==n.program.uniforms.morphTargetInfluences&&At.uniform1fv(n.program.uniforms.morphTargetInfluences,u.__webglMorphTargetInfluences)}if(t){if(i.__webglCustomAttributesList)for(r=0,p=i.__webglCustomAttributesList.length;p>r;r++)f=i.__webglCustomAttributesList[r],0<=e[f.buffer.belongsToAttribute]&&(At.bindBuffer(At.ARRAY_BUFFER,f.buffer),a(e[f.buffer.belongsToAttribute]),At.vertexAttribPointer(e[f.buffer.belongsToAttribute],f.size,At.FLOAT,!1,0,0));0<=e.color&&(0<u.geometry.colors.length||0<u.geometry.faces.length?(At.bindBuffer(At.ARRAY_BUFFER,i.__webglColorBuffer),a(e.color),At.vertexAttribPointer(e.color,3,At.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&At.vertexAttrib3fv(e.color,n.defaultAttributeValues.color)),0<=e.normal&&(At.bindBuffer(At.ARRAY_BUFFER,i.__webglNormalBuffer),a(e.normal),At.vertexAttribPointer(e.normal,3,At.FLOAT,!1,0,0)),0<=e.tangent&&(At.bindBuffer(At.ARRAY_BUFFER,i.__webglTangentBuffer),a(e.tangent),At.vertexAttribPointer(e.tangent,4,At.FLOAT,!1,0,0)),0<=e.uv&&(u.geometry.faceVertexUvs[0]?(At.bindBuffer(At.ARRAY_BUFFER,i.__webglUVBuffer),a(e.uv),At.vertexAttribPointer(e.uv,2,At.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&At.vertexAttrib2fv(e.uv,n.defaultAttributeValues.uv)),0<=e.uv2&&(u.geometry.faceVertexUvs[1]?(At.bindBuffer(At.ARRAY_BUFFER,i.__webglUV2Buffer),a(e.uv2),At.vertexAttribPointer(e.uv2,2,At.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&At.vertexAttrib2fv(e.uv2,n.defaultAttributeValues.uv2)),n.skinning&&0<=e.skinIndex&&0<=e.skinWeight&&(At.bindBuffer(At.ARRAY_BUFFER,i.__webglSkinIndicesBuffer),a(e.skinIndex),At.vertexAttribPointer(e.skinIndex,4,At.FLOAT,!1,0,0),At.bindBuffer(At.ARRAY_BUFFER,i.__webglSkinWeightsBuffer),a(e.skinWeight),At.vertexAttribPointer(e.skinWeight,4,At.FLOAT,!1,0,0)),0<=e.lineDistance&&(At.bindBuffer(At.ARRAY_BUFFER,i.__webglLineDistanceBuffer),a(e.lineDistance),At.vertexAttribPointer(e.lineDistance,1,At.FLOAT,!1,0,0))}s(),u instanceof THREE.Mesh?(u=i.__typeArray===Uint32Array?At.UNSIGNED_INT:At.UNSIGNED_SHORT,n.wireframe?(M(n.wireframeLinewidth),t&&At.bindBuffer(At.ELEMENT_ARRAY_BUFFER,i.__webglLineBuffer),At.drawElements(At.LINES,i.__webglLineCount,u,0)):(t&&At.bindBuffer(At.ELEMENT_ARRAY_BUFFER,i.__webglFaceBuffer),At.drawElements(At.TRIANGLES,i.__webglFaceCount,u,0)),tt.info.render.calls++,tt.info.render.vertices+=i.__webglFaceCount,tt.info.render.faces+=i.__webglFaceCount/3):u instanceof THREE.Line?(u=u.mode===THREE.LineStrip?At.LINE_STRIP:At.LINES,M(n.linewidth),At.drawArrays(u,0,i.__webglLineCount),tt.info.render.calls++):u instanceof THREE.PointCloud&&(At.drawArrays(At.POINTS,0,i.__webglParticleCount),tt.info.render.calls++,tt.info.render.points+=i.__webglParticleCount)}},this.render=function(t,e,r,n){if(!1==e instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var i=t.fog;ot="",it=-1,at=null,Ft=!0,!0===t.autoUpdate&&t.updateMatrixWorld(),void 0===e.parent&&e.updateMatrixWorld(),t.traverse(function(t){t instanceof THREE.SkinnedMesh&&t.skeleton.update()}),e.matrixWorldInverse.getInverse(e.matrixWorld),Ct.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),St.setFromMatrix(Ct),q.length=0,Z.length=0,Q.length=0,$.length=0,J.length=0,c(t),!0===tt.sortObjects&&(Z.sort(u),Q.sort(h)),Jt.render(t,e),tt.info.render.calls=0,tt.info.render.vertices=0,tt.info.render.faces=0,tt.info.render.points=0,this.setRenderTarget(r),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),n=0;for(var o=K.length;o>n;n++){var a=K[n],s=a.object;s.visible&&(b(s,e),d(a))}t.overrideMaterial?(n=t.overrideMaterial,this.setBlending(n.blending,n.blendEquation,n.blendSrc,n.blendDst),this.setDepthTest(n.depthTest),this.setDepthWrite(n.depthWrite),H(n.polygonOffset,n.polygonOffsetFactor,n.polygonOffsetUnits),f(Z,e,q,i,!0,n),f(Q,e,q,i,!0,n),p(K,"",e,q,i,!1,n)):(n=null,this.setBlending(THREE.NoBlending),f(Z,e,q,i,!1,n),p(K,"opaque",e,q,i,!1,n),f(Q,e,q,i,!0,n),p(K,"transparent",e,q,i,!0,n)),te.render(t,e),ee.render(t,e,_t,wt),r&&r.generateMipmaps&&r.minFilter!==THREE.NearestFilter&&r.minFilter!==THREE.LinearFilter&&L(r),this.setDepthTest(!0),this.setDepthWrite(!0)}},this.renderImmediateObject=function(t,e,r,n,i){var o=x(t,e,r,n,i);ot="",tt.setMaterialFaces(n),i.immediateRenderCallback?i.immediateRenderCallback(o,At,St):i.render(function(t){tt.renderBufferImmediate(t,o,n)})};var he={},le=0,ce={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointCloudMaterial:"particle_basic"};this.setFaceCulling=function(t,e){t===THREE.CullFaceNone?At.disable(At.CULL_FACE):(At.frontFace(e===THREE.FrontFaceDirectionCW?At.CW:At.CCW),At.cullFace(t===THREE.CullFaceBack?At.BACK:t===THREE.CullFaceFront?At.FRONT:At.FRONT_AND_BACK),At.enable(At.CULL_FACE))},this.setMaterialFaces=function(t){var e=t.side===THREE.DoubleSide;t=t.side===THREE.BackSide,ut!==e&&(e?At.disable(At.CULL_FACE):At.enable(At.CULL_FACE),ut=e),ht!==t&&(At.frontFace(t?At.CW:At.CCW),ht=t)},this.setDepthTest=function(t){dt!==t&&(t?At.enable(At.DEPTH_TEST):At.disable(At.DEPTH_TEST),dt=t)},this.setDepthWrite=function(t){mt!==t&&(At.depthMask(t),mt=t)},this.setBlending=function(t,e,r,n){t!==lt&&(t===THREE.NoBlending?At.disable(At.BLEND):t===THREE.AdditiveBlending?(At.enable(At.BLEND),At.blendEquation(At.FUNC_ADD),At.blendFunc(At.SRC_ALPHA,At.ONE)):t===THREE.SubtractiveBlending?(At.enable(At.BLEND),At.blendEquation(At.FUNC_ADD),At.blendFunc(At.ZERO,At.ONE_MINUS_SRC_COLOR)):t===THREE.MultiplyBlending?(At.enable(At.BLEND),At.blendEquation(At.FUNC_ADD),At.blendFunc(At.ZERO,At.SRC_COLOR)):t===THREE.CustomBlending?At.enable(At.BLEND):(At.enable(At.BLEND),At.blendEquationSeparate(At.FUNC_ADD,At.FUNC_ADD),At.blendFuncSeparate(At.SRC_ALPHA,At.ONE_MINUS_SRC_ALPHA,At.ONE,At.ONE_MINUS_SRC_ALPHA)),lt=t),t===THREE.CustomBlending?(e!==ct&&(At.blendEquation(F(e)),ct=e),(r!==ft||n!==pt)&&(At.blendFunc(F(r),F(n)),ft=r,pt=n)):pt=ft=ct=null},this.uploadTexture=function(t){void 0===t.__webglInit&&(t.__webglInit=!0,t.addEventListener("dispose",ie),t.__webglTexture=At.createTexture(),tt.info.memory.textures++),At.bindTexture(At.TEXTURE_2D,t.__webglTexture),At.pixelStorei(At.UNPACK_FLIP_Y_WEBGL,t.flipY),At.pixelStorei(At.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),At.pixelStorei(At.UNPACK_ALIGNMENT,t.unpackAlignment),t.image=C(t.image,Vt);var e=t.image,r=THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height),n=F(t.format),i=F(t.type);S(At.TEXTURE_2D,t,r);var o=t.mipmaps;if(t instanceof THREE.DataTexture)if(0<o.length&&r){for(var a=0,s=o.length;s>a;a++)e=o[a],At.texImage2D(At.TEXTURE_2D,a,n,e.width,e.height,0,n,i,e.data);t.generateMipmaps=!1}else At.texImage2D(At.TEXTURE_2D,0,n,e.width,e.height,0,n,i,e.data);else if(t instanceof THREE.CompressedTexture)for(a=0,s=o.length;s>a;a++)e=o[a],t.format!==THREE.RGBAFormat&&t.format!==THREE.RGBFormat?-1<Zt().indexOf(n)?At.compressedTexImage2D(At.TEXTURE_2D,a,n,e.width,e.height,0,e.data):console.warn("Attempt to load unsupported compressed texture format"):At.texImage2D(At.TEXTURE_2D,a,n,e.width,e.height,0,n,i,e.data);else if(0<o.length&&r){for(a=0,s=o.length;s>a;a++)e=o[a],At.texImage2D(At.TEXTURE_2D,a,n,n,i,e);t.generateMipmaps=!1}else At.texImage2D(At.TEXTURE_2D,0,n,n,i,t.image);t.generateMipmaps&&r&&At.generateMipmap(At.TEXTURE_2D),t.needsUpdate=!1,t.onUpdate&&t.onUpdate()},this.setTexture=function(t,e){At.activeTexture(At.TEXTURE0+e),t.needsUpdate?tt.uploadTexture(t):At.bindTexture(At.TEXTURE_2D,t.__webglTexture)},this.setRenderTarget=function(t){var e=t instanceof THREE.WebGLRenderTargetCube;if(t&&void 0===t.__webglFramebuffer){void 0===t.depthBuffer&&(t.depthBuffer=!0),void 0===t.stencilBuffer&&(t.stencilBuffer=!0),t.addEventListener("dispose",oe),t.__webglTexture=At.createTexture(),tt.info.memory.textures++;var r=THREE.Math.isPowerOfTwo(t.width)&&THREE.Math.isPowerOfTwo(t.height),n=F(t.format),i=F(t.type);if(e){t.__webglFramebuffer=[],t.__webglRenderbuffer=[],At.bindTexture(At.TEXTURE_CUBE_MAP,t.__webglTexture),S(At.TEXTURE_CUBE_MAP,t,r);for(var o=0;6>o;o++){t.__webglFramebuffer[o]=At.createFramebuffer(),t.__webglRenderbuffer[o]=At.createRenderbuffer(),At.texImage2D(At.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,n,t.width,t.height,0,n,i,null);var a=t,s=At.TEXTURE_CUBE_MAP_POSITIVE_X+o;At.bindFramebuffer(At.FRAMEBUFFER,t.__webglFramebuffer[o]),At.framebufferTexture2D(At.FRAMEBUFFER,At.COLOR_ATTACHMENT0,s,a.__webglTexture,0),A(t.__webglRenderbuffer[o],t)}r&&At.generateMipmap(At.TEXTURE_CUBE_MAP)}else t.__webglFramebuffer=At.createFramebuffer(),t.__webglRenderbuffer=t.shareDepthFrom?t.shareDepthFrom.__webglRenderbuffer:At.createRenderbuffer(),At.bindTexture(At.TEXTURE_2D,t.__webglTexture),S(At.TEXTURE_2D,t,r),At.texImage2D(At.TEXTURE_2D,0,n,t.width,t.height,0,n,i,null),n=At.TEXTURE_2D,At.bindFramebuffer(At.FRAMEBUFFER,t.__webglFramebuffer),At.framebufferTexture2D(At.FRAMEBUFFER,At.COLOR_ATTACHMENT0,n,t.__webglTexture,0),t.shareDepthFrom?t.depthBuffer&&!t.stencilBuffer?At.framebufferRenderbuffer(At.FRAMEBUFFER,At.DEPTH_ATTACHMENT,At.RENDERBUFFER,t.__webglRenderbuffer):t.depthBuffer&&t.stencilBuffer&&At.framebufferRenderbuffer(At.FRAMEBUFFER,At.DEPTH_STENCIL_ATTACHMENT,At.RENDERBUFFER,t.__webglRenderbuffer):A(t.__webglRenderbuffer,t),r&&At.generateMipmap(At.TEXTURE_2D);e?At.bindTexture(At.TEXTURE_CUBE_MAP,null):At.bindTexture(At.TEXTURE_2D,null),At.bindRenderbuffer(At.RENDERBUFFER,null),At.bindFramebuffer(At.FRAMEBUFFER,null)}t?(e=e?t.__webglFramebuffer[t.activeCubeFace]:t.__webglFramebuffer,r=t.width,t=t.height,i=n=0):(e=null,r=Rt,t=bt,n=xt,i=Tt),e!==nt&&(At.bindFramebuffer(At.FRAMEBUFFER,e),At.viewport(n,i,r,t),nt=e),_t=r,wt=t},this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},THREE.WebGLRenderTarget=function(t,e,r){this.width=t,this.height=e,r=r||{},this.wrapS=void 0!==r.wrapS?r.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==r.wrapT?r.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==r.magFilter?r.magFilter:THREE.LinearFilter,this.minFilter=void 0!==r.minFilter?r.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==r.format?r.format:THREE.RGBAFormat,this.type=void 0!==r.type?r.type:THREE.UnsignedByteType,this.depthBuffer=void 0!==r.depthBuffer?r.depthBuffer:!0,this.stencilBuffer=void 0!==r.stencilBuffer?r.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(t,e){this.width=t,this.height=e},clone:function(){var t=new THREE.WebGLRenderTarget(this.width,this.height);return t.wrapS=this.wrapS,t.wrapT=this.wrapT,t.magFilter=this.magFilter,t.minFilter=this.minFilter,t.anisotropy=this.anisotropy,t.offset.copy(this.offset),t.repeat.copy(this.repeat),t.format=this.format,t.type=this.type,t.depthBuffer=this.depthBuffer,t.stencilBuffer=this.stencilBuffer,t.generateMipmaps=this.generateMipmaps,t.shareDepthFrom=this.shareDepthFrom,t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(t,e,r){THREE.WebGLRenderTarget.call(this,t,e,r),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube,THREE.WebGLExtensions=function(t){var e={};this.get=function(r){if(void 0!==e[r])return e[r];var n;switch(r){case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(r)}return null===n&&console.log("THREE.WebGLRenderer: "+r+" extension not supported."),e[r]=n}},THREE.WebGLProgram=function(){var t=0;return function(e,r,n,i){var o=e.context,a=n.defines,s=n.__webglShader.uniforms,u=n.attributes,h=n.__webglShader.vertexShader,l=n.__webglShader.fragmentShader,c=n.index0AttributeName;void 0===c&&!0===i.morphTargets&&(c="position");var f="SHADOWMAP_TYPE_BASIC";i.shadowMapType===THREE.PCFShadowMap?f="SHADOWMAP_TYPE_PCF":i.shadowMapType===THREE.PCFSoftShadowMap&&(f="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",m="ENVMAP_BLENDING_MULTIPLY";if(i.envMap){switch(n.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:p="ENVMAP_TYPE_CUBE";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:p="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:p="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:d="ENVMAP_MODE_REFRACTION"}switch(n.combine){case THREE.MultiplyOperation:m="ENVMAP_BLENDING_MULTIPLY";break;case THREE.MixOperation:m="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:m="ENVMAP_BLENDING_ADD"}}var g,v;g=[];for(var E in a)v=a[E],!1!==v&&(v="#define "+E+" "+v,g.push(v));g=g.join("\n"),a=o.createProgram(),n instanceof THREE.RawShaderMaterial?e=n="":(n=["precision "+i.precision+" float;","precision "+i.precision+" int;",g,i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.gammaInput?"#define GAMMA_INPUT":"",e.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+i.maxDirLights,"#define MAX_POINT_LIGHTS "+i.maxPointLights,"#define MAX_SPOT_LIGHTS "+i.maxSpotLights,"#define MAX_HEMI_LIGHTS "+i.maxHemiLights,"#define MAX_SHADOWS "+i.maxShadows,"#define MAX_BONES "+i.maxBones,i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals?"#define USE_MORPHNORMALS":"",i.wrapAround?"#define WRAP_AROUND":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+f:"",i.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",i.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n	attribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n	attribute vec3 morphTarget0;\n	attribute vec3 morphTarget1;\n	attribute vec3 morphTarget2;\n	attribute vec3 morphTarget3;\n	#ifdef USE_MORPHNORMALS\n		attribute vec3 morphNormal0;\n		attribute vec3 morphNormal1;\n		attribute vec3 morphNormal2;\n		attribute vec3 morphNormal3;\n	#else\n		attribute vec3 morphTarget4;\n		attribute vec3 morphTarget5;\n		attribute vec3 morphTarget6;\n		attribute vec3 morphTarget7;\n	#endif\n#endif\n#ifdef USE_SKINNING\n	attribute vec4 skinIndex;\n	attribute vec4 skinWeight;\n#endif\n"].join("\n"),e=["precision "+i.precision+" float;","precision "+i.precision+" int;",i.bumpMap||i.normalMap?"#extension GL_OES_standard_derivatives : enable":"",g,"#define MAX_DIR_LIGHTS "+i.maxDirLights,"#define MAX_POINT_LIGHTS "+i.maxPointLights,"#define MAX_SPOT_LIGHTS "+i.maxSpotLights,"#define MAX_HEMI_LIGHTS "+i.maxHemiLights,"#define MAX_SHADOWS "+i.maxShadows,i.alphaTest?"#define ALPHATEST "+i.alphaTest:"",e.gammaInput?"#define GAMMA_INPUT":"",e.gammaOutput?"#define GAMMA_OUTPUT":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+p:"",i.envMap?"#define "+d:"",i.envMap?"#define "+m:"",i.lightMap?"#define USE_LIGHTMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.metal?"#define METAL":"",i.wrapAround?"#define WRAP_AROUND":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+f:"",i.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",i.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n")),h=new THREE.WebGLShader(o,o.VERTEX_SHADER,n+h),l=new THREE.WebGLShader(o,o.FRAGMENT_SHADER,e+l),o.attachShader(a,h),o.attachShader(a,l),void 0!==c&&o.bindAttribLocation(a,0,c),o.linkProgram(a),!1===o.getProgramParameter(a,o.LINK_STATUS)&&(console.error("THREE.WebGLProgram: Could not initialise shader."),console.error("gl.VALIDATE_STATUS",o.getProgramParameter(a,o.VALIDATE_STATUS)),console.error("gl.getError()",o.getError())),""!==o.getProgramInfoLog(a)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",o.getProgramInfoLog(a)),o.deleteShader(h),o.deleteShader(l),c="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences bindMatrix bindMatrixInverse".split(" "),i.useVertexTexture?(c.push("boneTexture"),c.push("boneTextureWidth"),c.push("boneTextureHeight")):c.push("boneGlobalMatrices"),i.logarithmicDepthBuffer&&c.push("logDepthBufFC");for(var y in s)c.push(y);for(s=c,y={},c=0,e=s.length;e>c;c++)f=s[c],y[f]=o.getUniformLocation(a,f);for(this.uniforms=y,c="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" "),s=0;s<i.maxMorphTargets;s++)c.push("morphTarget"+s);for(s=0;s<i.maxMorphNormals;s++)c.push("morphNormal"+s);for(var x in u)c.push(x);for(i=c,u={},x=0,s=i.length;s>x;x++)y=i[x],u[y]=o.getAttribLocation(a,y);return this.attributes=u,this.attributesKeys=Object.keys(this.attributes),this.id=t++,this.code=r,this.usedTimes=1,this.program=a,this.vertexShader=h,this.fragmentShader=l,this}}(),THREE.WebGLShader=function(){var t=function(t){t=t.split("\n");for(var e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")};return function(e,r,n){return r=e.createShader(r),e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e.getShaderInfoLog(r)),console.warn(t(n))),r}}(),THREE.LensFlarePlugin=function(t,e){var r,n,i,o,a,s,u,h,l,c,f,p,d,m,g,v,E=t.context;this.render=function(y,x,T,R){if(0!==e.length){y=new THREE.Vector3;var b=R/T,_=.5*T,w=.5*R,M=16/R,H=new THREE.Vector2(M*b,M),S=new THREE.Vector3(1,1,0),C=new THREE.Vector2(1,1);if(void 0===d){var M=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),A=new Uint16Array([0,1,2,0,2,3]);f=E.createBuffer(),p=E.createBuffer(),E.bindBuffer(E.ARRAY_BUFFER,f),E.bufferData(E.ARRAY_BUFFER,M,E.STATIC_DRAW),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,p),E.bufferData(E.ELEMENT_ARRAY_BUFFER,A,E.STATIC_DRAW),g=E.createTexture(),v=E.createTexture(),E.bindTexture(E.TEXTURE_2D,g),E.texImage2D(E.TEXTURE_2D,0,E.RGB,16,16,0,E.RGB,E.UNSIGNED_BYTE,null),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.bindTexture(E.TEXTURE_2D,v),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,16,16,0,E.RGBA,E.UNSIGNED_BYTE,null),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST);var M=(m=0<E.getParameter(E.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},A=E.createProgram(),L=E.createShader(E.FRAGMENT_SHADER),P=E.createShader(E.VERTEX_SHADER),F="precision "+t.getPrecision()+" float;\n";E.shaderSource(L,F+M.fragmentShader),E.shaderSource(P,F+M.vertexShader),E.compileShader(L),E.compileShader(P),E.attachShader(A,L),E.attachShader(A,P),E.linkProgram(A),d=A,l=E.getAttribLocation(d,"position"),c=E.getAttribLocation(d,"uv"),r=E.getUniformLocation(d,"renderType"),n=E.getUniformLocation(d,"map"),i=E.getUniformLocation(d,"occlusionMap"),o=E.getUniformLocation(d,"opacity"),a=E.getUniformLocation(d,"color"),s=E.getUniformLocation(d,"scale"),u=E.getUniformLocation(d,"rotation"),h=E.getUniformLocation(d,"screenPosition")}for(E.useProgram(d),E.enableVertexAttribArray(l),E.enableVertexAttribArray(c),E.uniform1i(i,0),E.uniform1i(n,1),E.bindBuffer(E.ARRAY_BUFFER,f),E.vertexAttribPointer(l,2,E.FLOAT,!1,16,0),E.vertexAttribPointer(c,2,E.FLOAT,!1,16,8),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,p),E.disable(E.CULL_FACE),E.depthMask(!1),A=0,L=e.length;L>A;A++)if(M=16/R,H.set(M*b,M),P=e[A],y.set(P.matrixWorld.elements[12],P.matrixWorld.elements[13],P.matrixWorld.elements[14]),y.applyMatrix4(x.matrixWorldInverse),y.applyProjection(x.projectionMatrix),S.copy(y),C.x=S.x*_+_,C.y=S.y*w+w,m||0<C.x&&C.x<T&&0<C.y&&C.y<R){E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,g),E.copyTexImage2D(E.TEXTURE_2D,0,E.RGB,C.x-8,C.y-8,16,16,0),E.uniform1i(r,0),E.uniform2f(s,H.x,H.y),E.uniform3f(h,S.x,S.y,S.z),E.disable(E.BLEND),E.enable(E.DEPTH_TEST),E.drawElements(E.TRIANGLES,6,E.UNSIGNED_SHORT,0),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,v),E.copyTexImage2D(E.TEXTURE_2D,0,E.RGBA,C.x-8,C.y-8,16,16,0),E.uniform1i(r,1),E.disable(E.DEPTH_TEST),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,g),E.drawElements(E.TRIANGLES,6,E.UNSIGNED_SHORT,0),P.positionScreen.copy(S),P.customUpdateCallback?P.customUpdateCallback(P):P.updateLensFlares(),E.uniform1i(r,2),E.enable(E.BLEND);for(var F=0,D=P.lensFlares.length;D>F;F++){var B=P.lensFlares[F];.001<B.opacity&&.001<B.scale&&(S.x=B.x,S.y=B.y,S.z=B.z,M=B.size*B.scale/R,H.x=M*b,H.y=M,E.uniform3f(h,S.x,S.y,S.z),E.uniform2f(s,H.x,H.y),E.uniform1f(u,B.rotation),E.uniform1f(o,B.opacity),E.uniform3f(a,B.color.r,B.color.g,B.color.b),t.setBlending(B.blending,B.blendEquation,B.blendSrc,B.blendDst),t.setTexture(B.texture,1),E.drawElements(E.TRIANGLES,6,E.UNSIGNED_SHORT,0))}}E.enable(E.CULL_FACE),E.enable(E.DEPTH_TEST),E.depthMask(!0),t.resetGLState()}}},THREE.ShadowMapPlugin=function(t,e,r,n){function i(t,e,n){if(e.visible){var o=r[e.id];if(o&&e.castShadow&&(!1===e.frustumCulled||!0===l.intersectsObject(e)))for(var a=0,s=o.length;s>a;a++){var u=o[a];e._modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),m.push(u)}for(a=0,s=e.children.length;s>a;a++)i(t,e.children[a],n)}}var o,a,s,u,h=t.context,l=new THREE.Frustum,c=new THREE.Matrix4,f=new THREE.Vector3,p=new THREE.Vector3,d=new THREE.Vector3,m=[],g=THREE.ShaderLib.depthRGBA,v=THREE.UniformsUtils.clone(g.uniforms);o=new THREE.ShaderMaterial({uniforms:v,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader}),a=new THREE.ShaderMaterial({uniforms:v,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader,morphTargets:!0}),s=new THREE.ShaderMaterial({uniforms:v,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader,skinning:!0}),u=new THREE.ShaderMaterial({uniforms:v,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader,morphTargets:!0,skinning:!0}),o._shadowPass=!0,a._shadowPass=!0,s._shadowPass=!0,u._shadowPass=!0,this.render=function(r,g){if(!1!==t.shadowMapEnabled){var v,E,y,x,T,R,b,_,w=[];for(x=0,h.clearColor(1,1,1,1),h.disable(h.BLEND),h.enable(h.CULL_FACE),h.frontFace(h.CCW),h.cullFace(t.shadowMapCullFace===THREE.CullFaceFront?h.FRONT:h.BACK),t.setDepthTest(!0),v=0,E=e.length;E>v;v++)if(y=e[v],y.castShadow)if(y instanceof THREE.DirectionalLight&&y.shadowCascade)for(T=0;T<y.shadowCascadeCount;T++){var M;if(y.shadowCascadeArray[T])M=y.shadowCascadeArray[T];else{b=y;var H=T;M=new THREE.DirectionalLight,M.isVirtual=!0,M.onlyShadow=!0,M.castShadow=!0,M.shadowCameraNear=b.shadowCameraNear,M.shadowCameraFar=b.shadowCameraFar,M.shadowCameraLeft=b.shadowCameraLeft,M.shadowCameraRight=b.shadowCameraRight,M.shadowCameraBottom=b.shadowCameraBottom,M.shadowCameraTop=b.shadowCameraTop,M.shadowCameraVisible=b.shadowCameraVisible,M.shadowDarkness=b.shadowDarkness,M.shadowBias=b.shadowCascadeBias[H],M.shadowMapWidth=b.shadowCascadeWidth[H],M.shadowMapHeight=b.shadowCascadeHeight[H],M.pointsWorld=[],M.pointsFrustum=[],_=M.pointsWorld,R=M.pointsFrustum;for(var S=0;8>S;S++)_[S]=new THREE.Vector3,R[S]=new THREE.Vector3;_=b.shadowCascadeNearZ[H],b=b.shadowCascadeFarZ[H],R[0].set(-1,-1,_),R[1].set(1,-1,_),R[2].set(-1,1,_),R[3].set(1,1,_),R[4].set(-1,-1,b),R[5].set(1,-1,b),R[6].set(-1,1,b),R[7].set(1,1,b),M.originalCamera=g,R=new THREE.Gyroscope,R.position.copy(y.shadowCascadeOffset),R.add(M),R.add(M.target),g.add(R),y.shadowCascadeArray[T]=M,console.log("Created virtualLight",M)}H=y,_=T,b=H.shadowCascadeArray[_],b.position.copy(H.position),b.target.position.copy(H.target.position),b.lookAt(b.target),b.shadowCameraVisible=H.shadowCameraVisible,b.shadowDarkness=H.shadowDarkness,b.shadowBias=H.shadowCascadeBias[_],R=H.shadowCascadeNearZ[_],H=H.shadowCascadeFarZ[_],b=b.pointsFrustum,b[0].z=R,b[1].z=R,b[2].z=R,b[3].z=R,b[4].z=H,b[5].z=H,b[6].z=H,b[7].z=H,w[x]=M,x++}else w[x]=y,x++;for(v=0,E=w.length;E>v;v++){if(y=w[v],y.shadowMap||(T=THREE.LinearFilter,t.shadowMapType===THREE.PCFSoftShadowMap&&(T=THREE.NearestFilter),y.shadowMap=new THREE.WebGLRenderTarget(y.shadowMapWidth,y.shadowMapHeight,{minFilter:T,magFilter:T,format:THREE.RGBAFormat}),y.shadowMapSize=new THREE.Vector2(y.shadowMapWidth,y.shadowMapHeight),y.shadowMatrix=new THREE.Matrix4),!y.shadowCamera){if(y instanceof THREE.SpotLight)y.shadowCamera=new THREE.PerspectiveCamera(y.shadowCameraFov,y.shadowMapWidth/y.shadowMapHeight,y.shadowCameraNear,y.shadowCameraFar);else{if(!(y instanceof THREE.DirectionalLight)){console.error("Unsupported light type for shadow");continue}y.shadowCamera=new THREE.OrthographicCamera(y.shadowCameraLeft,y.shadowCameraRight,y.shadowCameraTop,y.shadowCameraBottom,y.shadowCameraNear,y.shadowCameraFar)}r.add(y.shadowCamera),!0===r.autoUpdate&&r.updateMatrixWorld()}if(y.shadowCameraVisible&&!y.cameraHelper&&(y.cameraHelper=new THREE.CameraHelper(y.shadowCamera),r.add(y.cameraHelper)),y.isVirtual&&M.originalCamera==g){for(T=g,x=y.shadowCamera,R=y.pointsFrustum,b=y.pointsWorld,f.set(1/0,1/0,1/0),p.set(-(1/0),-(1/0),-(1/0)),H=0;8>H;H++)_=b[H],_.copy(R[H]),_.unproject(T),_.applyMatrix4(x.matrixWorldInverse),_.x<f.x&&(f.x=_.x),_.x>p.x&&(p.x=_.x),_.y<f.y&&(f.y=_.y),_.y>p.y&&(p.y=_.y),_.z<f.z&&(f.z=_.z),_.z>p.z&&(p.z=_.z);x.left=f.x,x.right=p.x,x.top=p.y,x.bottom=f.y,x.updateProjectionMatrix()}for(x=y.shadowMap,R=y.shadowMatrix,T=y.shadowCamera,T.position.setFromMatrixPosition(y.matrixWorld),d.setFromMatrixPosition(y.target.matrixWorld),T.lookAt(d),T.updateMatrixWorld(),T.matrixWorldInverse.getInverse(T.matrixWorld),y.cameraHelper&&(y.cameraHelper.visible=y.shadowCameraVisible),
y.shadowCameraVisible&&y.cameraHelper.update(),R.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),R.multiply(T.projectionMatrix),R.multiply(T.matrixWorldInverse),c.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),l.setFromMatrix(c),t.setRenderTarget(x),t.clear(),m.length=0,i(r,r,T),y=0,x=m.length;x>y;y++)b=m[y],R=b.object,b=b.buffer,H=R.material instanceof THREE.MeshFaceMaterial?R.material.materials[0]:R.material,_=void 0!==R.geometry.morphTargets&&0<R.geometry.morphTargets.length&&H.morphTargets,S=R instanceof THREE.SkinnedMesh&&H.skinning,_=R.customDepthMaterial?R.customDepthMaterial:S?_?u:s:_?a:o,t.setMaterialFaces(H),b instanceof THREE.BufferGeometry?t.renderBufferDirect(T,e,null,_,b,R):t.renderBuffer(T,e,null,_,b,R);for(y=0,x=n.length;x>y;y++)b=n[y],R=b.object,R.visible&&R.castShadow&&(R._modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,R.matrixWorld),t.renderImmediateObject(T,e,null,o,R))}v=t.getClearColor(),E=t.getClearAlpha(),h.clearColor(v.r,v.g,v.b,E),h.enable(h.BLEND),t.shadowMapCullFace===THREE.CullFaceFront&&h.cullFace(h.BACK),t.resetGLState()}}},THREE.SpritePlugin=function(t,e){function r(t,e){return t.z!==e.z?e.z-t.z:e.id-t.id}var n,i,o,a,s,u,h,l,c,f,p,d,m,g,v,E,y,x,T,R,b,_=t.context,w=new THREE.Vector3,M=new THREE.Quaternion,H=new THREE.Vector3;this.render=function(S,C){if(0!==e.length){if(void 0===R){var A=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),L=new Uint16Array([0,1,2,0,2,3]);x=_.createBuffer(),T=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,x),_.bufferData(_.ARRAY_BUFFER,A,_.STATIC_DRAW),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,T),_.bufferData(_.ELEMENT_ARRAY_BUFFER,L,_.STATIC_DRAW);var A=_.createProgram(),L=_.createShader(_.VERTEX_SHADER),P=_.createShader(_.FRAGMENT_SHADER);_.shaderSource(L,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),_.shaderSource(P,["precision "+t.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),_.compileShader(L),_.compileShader(P),_.attachShader(A,L),_.attachShader(A,P),_.linkProgram(A),R=A,E=_.getAttribLocation(R,"position"),y=_.getAttribLocation(R,"uv"),n=_.getUniformLocation(R,"uvOffset"),i=_.getUniformLocation(R,"uvScale"),o=_.getUniformLocation(R,"rotation"),a=_.getUniformLocation(R,"scale"),s=_.getUniformLocation(R,"color"),u=_.getUniformLocation(R,"map"),h=_.getUniformLocation(R,"opacity"),l=_.getUniformLocation(R,"modelViewMatrix"),c=_.getUniformLocation(R,"projectionMatrix"),f=_.getUniformLocation(R,"fogType"),p=_.getUniformLocation(R,"fogDensity"),d=_.getUniformLocation(R,"fogNear"),m=_.getUniformLocation(R,"fogFar"),g=_.getUniformLocation(R,"fogColor"),v=_.getUniformLocation(R,"alphaTest"),A=document.createElement("canvas"),A.width=8,A.height=8,L=A.getContext("2d"),L.fillStyle="white",L.fillRect(0,0,8,8),b=new THREE.Texture(A),b.needsUpdate=!0}_.useProgram(R),_.enableVertexAttribArray(E),_.enableVertexAttribArray(y),_.disable(_.CULL_FACE),_.enable(_.BLEND),_.bindBuffer(_.ARRAY_BUFFER,x),_.vertexAttribPointer(E,2,_.FLOAT,!1,16,0),_.vertexAttribPointer(y,2,_.FLOAT,!1,16,8),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,T),_.uniformMatrix4fv(c,!1,C.projectionMatrix.elements),_.activeTexture(_.TEXTURE0),_.uniform1i(u,0),L=A=0,(P=S.fog)?(_.uniform3f(g,P.color.r,P.color.g,P.color.b),P instanceof THREE.Fog?(_.uniform1f(d,P.near),_.uniform1f(m,P.far),_.uniform1i(f,1),L=A=1):P instanceof THREE.FogExp2&&(_.uniform1f(p,P.density),_.uniform1i(f,2),L=A=2)):(_.uniform1i(f,0),L=A=0);for(var P=0,F=e.length;F>P;P++){var D=e[P];D._modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,D.matrixWorld),D.z=-D._modelViewMatrix.elements[14]}e.sort(r);for(var B=[],P=0,F=e.length;F>P;P++){var D=e[P],O=D.material;_.uniform1f(v,O.alphaTest),_.uniformMatrix4fv(l,!1,D._modelViewMatrix.elements),D.matrixWorld.decompose(w,M,H),B[0]=H.x,B[1]=H.y,D=0,S.fog&&O.fog&&(D=L),A!==D&&(_.uniform1i(f,D),A=D),null!==O.map?(_.uniform2f(n,O.map.offset.x,O.map.offset.y),_.uniform2f(i,O.map.repeat.x,O.map.repeat.y)):(_.uniform2f(n,0,0),_.uniform2f(i,1,1)),_.uniform1f(h,O.opacity),_.uniform3f(s,O.color.r,O.color.g,O.color.b),_.uniform1f(o,O.rotation),_.uniform2fv(a,B),t.setBlending(O.blending,O.blendEquation,O.blendSrc,O.blendDst),t.setDepthTest(O.depthTest),t.setDepthWrite(O.depthWrite),O.map&&O.map.image&&O.map.image.width?t.setTexture(O.map,0):t.setTexture(b,0),_.drawElements(_.TRIANGLES,6,_.UNSIGNED_SHORT,0)}_.enable(_.CULL_FACE),t.resetGLState()}}},THREE.GeometryUtils={merge:function(t,e,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;e instanceof THREE.Mesh&&(e.matrixAutoUpdate&&e.updateMatrix(),n=e.matrix,e=e.geometry),t.merge(e,n,r)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,r,n){var i=new THREE.ImageLoader;i.crossOrigin=this.crossOrigin;var o=new THREE.Texture(void 0,e);return i.load(t,function(t){o.image=t,o.needsUpdate=!0,r&&r(o)},void 0,function(t){n&&n(t)}),o.sourceFile=t,o},loadTextureCube:function(t,e,r,n){var i=new THREE.ImageLoader;i.crossOrigin=this.crossOrigin;var o=new THREE.CubeTexture([],e);o.flipY=!1;var a=0;e=function(e){i.load(t[e],function(t){o.images[e]=t,a+=1,6===a&&(o.needsUpdate=!0,r&&r(o))},void 0,n)};for(var s=0,u=t.length;u>s;++s)e(s);return o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(t,e){var r=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return[t[0]/e,t[1]/e,t[2]/e]};e|=1;var n=t.width,i=t.height,o=document.createElement("canvas");o.width=n,o.height=i;var a=o.getContext("2d");a.drawImage(t,0,0);for(var s=a.getImageData(0,0,n,i).data,u=a.createImageData(n,i),h=u.data,l=0;n>l;l++)for(var c=0;i>c;c++){var f=0>c-1?0:c-1,p=c+1>i-1?i-1:c+1,d=0>l-1?0:l-1,m=l+1>n-1?n-1:l+1,g=[],v=[0,0,s[4*(c*n+l)]/255*e];for(g.push([-1,0,s[4*(c*n+d)]/255*e]),g.push([-1,-1,s[4*(f*n+d)]/255*e]),g.push([0,-1,s[4*(f*n+l)]/255*e]),g.push([1,-1,s[4*(f*n+m)]/255*e]),g.push([1,0,s[4*(c*n+m)]/255*e]),g.push([1,1,s[4*(p*n+m)]/255*e]),g.push([0,1,s[4*(p*n+l)]/255*e]),g.push([-1,1,s[4*(p*n+d)]/255*e]),f=[],d=g.length,p=0;d>p;p++){var m=g[p],E=g[(p+1)%d],m=[m[0]-v[0],m[1]-v[1],m[2]-v[2]],E=[E[0]-v[0],E[1]-v[1],E[2]-v[2]];f.push(r([m[1]*E[2]-m[2]*E[1],m[2]*E[0]-m[0]*E[2],m[0]*E[1]-m[1]*E[0]]))}for(g=[0,0,0],p=0;p<f.length;p++)g[0]+=f[p][0],g[1]+=f[p][1],g[2]+=f[p][2];g[0]/=f.length,g[1]/=f.length,g[2]/=f.length,v=4*(c*n+l),h[v]=(g[0]+1)/2*255|0,h[v+1]=(g[1]+1)/2*255|0,h[v+2]=255*g[2]|0,h[v+3]=255}return a.putImageData(u,0,0),o},generateDataTexture:function(t,e,r){var n=t*e,i=new Uint8Array(3*n),o=Math.floor(255*r.r),a=Math.floor(255*r.g);r=Math.floor(255*r.b);for(var s=0;n>s;s++)i[3*s]=o,i[3*s+1]=a,i[3*s+2]=r;return t=new THREE.DataTexture(i,t,e,THREE.RGBFormat),t.needsUpdate=!0,t}},THREE.SceneUtils={createMultiMaterialObject:function(t,e){for(var r=new THREE.Object3D,n=0,i=e.length;i>n;n++)r.add(new THREE.Mesh(t,e[n]));return r},detach:function(t,e,r){t.applyMatrix(e.matrixWorld),e.remove(t),r.add(t)},attach:function(t,e,r){var n=new THREE.Matrix4;n.getInverse(r.matrixWorld),t.applyMatrix(n),e.remove(t),r.add(t)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(t){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(t){var e=t.familyName.toLowerCase();return this.faces[e]=this.faces[e]||{},this.faces[e][t.cssFontWeight]=this.faces[e][t.cssFontWeight]||{},this.faces[e][t.cssFontWeight][t.cssFontStyle]=t,this.faces[e][t.cssFontWeight][t.cssFontStyle]=t},drawText:function(t){var e=this.getFace(),r=this.size/e.resolution,n=0,i=String(t).split(""),o=i.length,a=[];for(t=0;o>t;t++){var s=new THREE.Path,s=this.extractGlyphPoints(i[t],e,r,n,s),n=n+s.offset;a.push(s.path)}return{paths:a,offset:n/2}},extractGlyphPoints:function(t,e,r,n,i){var o,a,s,u,h,l,c,f,p,d,m,g=[],v=e.glyphs[t]||e.glyphs["?"];if(v){if(v.o)for(e=v._cachedOutline||(v._cachedOutline=v.o.split(" ")),u=e.length,t=0;u>t;)switch(s=e[t++]){case"m":s=e[t++]*r+n,h=e[t++]*r,i.moveTo(s,h);break;case"l":s=e[t++]*r+n,h=e[t++]*r,i.lineTo(s,h);break;case"q":if(s=e[t++]*r+n,h=e[t++]*r,f=e[t++]*r+n,p=e[t++]*r,i.quadraticCurveTo(f,p,s,h),o=g[g.length-1])for(l=o.x,c=o.y,o=1,a=this.divisions;a>=o;o++){var E=o/a;THREE.Shape.Utils.b2(E,l,f,s),THREE.Shape.Utils.b2(E,c,p,h)}break;case"b":if(s=e[t++]*r+n,h=e[t++]*r,f=e[t++]*r+n,p=e[t++]*r,d=e[t++]*r+n,m=e[t++]*r,i.bezierCurveTo(f,p,d,m,s,h),o=g[g.length-1])for(l=o.x,c=o.y,o=1,a=this.divisions;a>=o;o++)E=o/a,THREE.Shape.Utils.b3(E,l,f,d,s),THREE.Shape.Utils.b3(E,c,p,m,h)}return{offset:v.ha*r,path:i}}}},THREE.FontUtils.generateShapes=function(t,e){e=e||{};var r=void 0!==e.curveSegments?e.curveSegments:4,n=void 0!==e.font?e.font:"helvetiker",i=void 0!==e.weight?e.weight:"normal",o=void 0!==e.style?e.style:"normal";for(THREE.FontUtils.size=void 0!==e.size?e.size:100,THREE.FontUtils.divisions=r,THREE.FontUtils.face=n,THREE.FontUtils.weight=i,THREE.FontUtils.style=o,r=THREE.FontUtils.drawText(t).paths,n=[],i=0,o=r.length;o>i;i++)Array.prototype.push.apply(n,r[i].toShapes());return n},function(t){var e=function(t){for(var e=t.length,r=0,n=e-1,i=0;e>i;n=i++)r+=t[n].x*t[i].y-t[i].x*t[n].y;return.5*r};return t.Triangulate=function(t,r){var n=t.length;if(3>n)return null;var i,o,a,s=[],u=[],h=[];if(0<e(t))for(o=0;n>o;o++)u[o]=o;else for(o=0;n>o;o++)u[o]=n-1-o;var l=2*n;for(o=n-1;n>2;){if(0>=l--){console.log("Warning, unable to triangulate polygon!");break}i=o,i>=n&&(i=0),o=i+1,o>=n&&(o=0),a=o+1,a>=n&&(a=0);var c;t:{var f=c=void 0,p=void 0,d=void 0,m=void 0,g=void 0,v=void 0,E=void 0,y=void 0,f=t[u[i]].x,p=t[u[i]].y,d=t[u[o]].x,m=t[u[o]].y,g=t[u[a]].x,v=t[u[a]].y;if(1e-10>(d-f)*(v-p)-(m-p)*(g-f))c=!1;else{var x=void 0,T=void 0,R=void 0,b=void 0,_=void 0,w=void 0,M=void 0,H=void 0,S=void 0,C=void 0,S=H=M=y=E=void 0,x=g-d,T=v-m,R=f-g,b=p-v,_=d-f,w=m-p;for(c=0;n>c;c++)if(E=t[u[c]].x,y=t[u[c]].y,!(E===f&&y===p||E===d&&y===m||E===g&&y===v)&&(M=E-f,H=y-p,S=E-d,C=y-m,E-=g,y-=v,S=x*C-T*S,M=_*H-w*M,H=R*y-b*E,S>=-1e-10&&H>=-1e-10&&M>=-1e-10)){c=!1;break t}c=!0}}if(c){for(s.push([t[u[i]],t[u[o]],t[u[a]]]),h.push([u[i],u[o],u[a]]),i=o,a=o+1;n>a;i++,a++)u[i]=u[a];n--,l=2*n}}return r?h:s},t.Triangulate.area=e,t}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Audio=function(t){THREE.Object3D.call(this),this.type="Audio",this.context=t.context,this.source=this.context.createBufferSource(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},THREE.Audio.prototype=Object.create(THREE.Object3D.prototype),THREE.Audio.prototype.constructor=THREE.Audio,THREE.Audio.prototype.load=function(t){var e=this,r=new XMLHttpRequest;return r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(t){e.context.decodeAudioData(this.response,function(t){e.source.buffer=t,e.source.connect(e.panner),e.source.start(0)})},r.send(),this},THREE.Audio.prototype.setLoop=function(t){this.source.loop=t},THREE.Audio.prototype.setRefDistance=function(t){this.panner.refDistance=t},THREE.Audio.prototype.setRolloffFactor=function(t){this.panner.rolloffFactor=t},THREE.Audio.prototype.updateMatrixWorld=function(){var t=new THREE.Vector3;return function(e){THREE.Object3D.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}(),THREE.AudioListener=function(){THREE.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype),THREE.AudioListener.prototype.constructor=THREE.AudioListener,THREE.AudioListener.prototype.updateMatrixWorld=function(){var t=new THREE.Vector3,e=new THREE.Quaternion,r=new THREE.Vector3,n=new THREE.Vector3,i=new THREE.Vector3,o=new THREE.Vector3;return function(a){THREE.Object3D.prototype.updateMatrixWorld.call(this,a),a=this.context.listener;var s=this.up;this.matrixWorld.decompose(t,e,r),n.set(0,0,-1).applyQuaternion(e),i.subVectors(t,o),a.setPosition(t.x,t.y,t.z),a.setOrientation(n.x,n.y,n.z,s.x,s.y,s.z),a.setVelocity(i.x,i.y,i.z),o.copy(t)}}(),THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(t){return console.log("Warning, getPoint() not implemented!"),null},THREE.Curve.prototype.getPointAt=function(t){return t=this.getUtoTmapping(t),this.getPoint(t)},THREE.Curve.prototype.getPoints=function(t){t||(t=5);var e,r=[];for(e=0;t>=e;e++)r.push(this.getPoint(e/t));return r},THREE.Curve.prototype.getSpacedPoints=function(t){t||(t=5);var e,r=[];for(e=0;t>=e;e++)r.push(this.getPointAt(e/t));return r},THREE.Curve.prototype.getLength=function(){var t=this.getLengths();return t[t.length-1]},THREE.Curve.prototype.getLengths=function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,r,n=[],i=this.getPoint(0),o=0;for(n.push(0),r=1;t>=r;r++)e=this.getPoint(r/t),o+=e.distanceTo(i),n.push(o),i=e;return this.cacheArcLengths=n},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(t,e){var r,n=this.getLengths(),i=0,o=n.length;r=e?e:t*n[o-1];for(var a,s=0,u=o-1;u>=s;)if(i=Math.floor(s+(u-s)/2),a=n[i]-r,0>a)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}return i=u,n[i]==r?i/(o-1):(s=n[i],n=(i+(r-s)/(n[i+1]-s))/(o-1))},THREE.Curve.prototype.getTangent=function(t){var e=t-1e-4;return t+=1e-4,0>e&&(e=0),t>1&&(t=1),e=this.getPoint(e),this.getPoint(t).clone().sub(e).normalize()},THREE.Curve.prototype.getTangentAt=function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},THREE.Curve.Utils={tangentQuadraticBezier:function(t,e,r,n){return 2*(1-t)*(r-e)+2*t*(n-r)},tangentCubicBezier:function(t,e,r,n,i){return-3*e*(1-t)*(1-t)+3*r*(1-t)*(1-t)-6*t*r*(1-t)+6*t*n*(1-t)-3*t*t*n+3*t*t*i},tangentSpline:function(t,e,r,n,i){return 6*t*t-6*t+(3*t*t-4*t+1)+(-6*t*t+6*t)+(3*t*t-2*t)},interpolate:function(t,e,r,n,i){t=.5*(r-t),n=.5*(n-e);var o=i*i;return(2*e-2*r+t+n)*i*o+(-3*e+3*r-2*t-n)*o+t*i+e}},THREE.Curve.create=function(t,e){return t.prototype=Object.create(THREE.Curve.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.constructor=THREE.CurvePath,THREE.CurvePath.prototype.add=function(t){this.curves.push(t)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new THREE.LineCurve(e,t))},THREE.CurvePath.prototype.getPoint=function(t){var e=t*this.getLength(),r=this.getCurveLengths();for(t=0;t<r.length;){if(r[t]>=e)return e=r[t]-e,t=this.curves[t],e=1-e/t.getLength(),t.getPointAt(e);t++}return null},THREE.CurvePath.prototype.getLength=function(){var t=this.getCurveLengths();return t[t.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var t,e=[],r=0,n=this.curves.length;for(t=0;n>t;t++)r+=this.curves[t].getLength(),e.push(r);return this.cacheLengths=e},THREE.CurvePath.prototype.getBoundingBox=function(){var t,e,r,n,i,o,a=this.getPoints();t=e=Number.NEGATIVE_INFINITY,n=i=Number.POSITIVE_INFINITY;var s,u,h,l,c=a[0]instanceof THREE.Vector3;for(l=c?new THREE.Vector3:new THREE.Vector2,u=0,h=a.length;h>u;u++)s=a[u],s.x>t?t=s.x:s.x<n&&(n=s.x),s.y>e?e=s.y:s.y<i&&(i=s.y),c&&(s.z>r?r=s.z:s.z<o&&(o=s.z)),l.add(s);return a={minX:n,minY:i,maxX:t,maxY:e},c&&(a.maxZ=r,a.minZ=o),a},THREE.CurvePath.prototype.createPointsGeometry=function(t){return t=this.getPoints(t,!0),this.createGeometry(t)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(t){return t=this.getSpacedPoints(t,!0),this.createGeometry(t)},THREE.CurvePath.prototype.createGeometry=function(t){for(var e=new THREE.Geometry,r=0;r<t.length;r++)e.vertices.push(new THREE.Vector3(t[r].x,t[r].y,t[r].z||0));return e},THREE.CurvePath.prototype.addWrapPath=function(t){this.bends.push(t)},THREE.CurvePath.prototype.getTransformedPoints=function(t,e){var r,n,i=this.getPoints(t);for(e||(e=this.bends),r=0,n=e.length;n>r;r++)i=this.getWrapPoints(i,e[r]);return i},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(t,e){var r,n,i=this.getSpacedPoints(t);for(e||(e=this.bends),r=0,n=e.length;n>r;r++)i=this.getWrapPoints(i,e[r]);return i},THREE.CurvePath.prototype.getWrapPoints=function(t,e){var r,n,i,o,a,s,u=this.getBoundingBox();for(r=0,n=t.length;n>r;r++)i=t[r],o=i.x,a=i.y,s=o/u.maxX,s=e.getUtoTmapping(s,o),o=e.getPoint(s),s=e.getTangent(s),s.set(-s.y,s.x).multiplyScalar(a),i.x=o.x+s.x,i.y=o.y+s.y;return t},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.constructor=THREE.Gyroscope,THREE.Gyroscope.prototype.updateMatrixWorld=function(){var t=new THREE.Vector3,e=new THREE.Quaternion,r=new THREE.Vector3,n=new THREE.Vector3,i=new THREE.Quaternion,o=new THREE.Vector3;return function(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(n,i,o),this.matrix.decompose(t,e,r),this.matrixWorld.compose(n,e,o)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var s=0,u=this.children.length;u>s;s++)this.children[s].updateMatrixWorld(a)}}(),THREE.Path=function(t){THREE.CurvePath.call(this),this.actions=[],t&&this.fromPoints(t)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.Path.prototype.constructor=THREE.Path,THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,r=t.length;r>e;e++)this.lineTo(t[e].x,t[e].y)},THREE.Path.prototype.moveTo=function(t,e){var r=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:r})},THREE.Path.prototype.lineTo=function(t,e){var r=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,n=new THREE.LineCurve(new THREE.Vector2(n[n.length-2],n[n.length-1]),new THREE.Vector2(t,e));this.curves.push(n),this.actions.push({action:THREE.PathActions.LINE_TO,args:r})},THREE.Path.prototype.quadraticCurveTo=function(t,e,r,n){var i=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,o=new THREE.QuadraticBezierCurve(new THREE.Vector2(o[o.length-2],o[o.length-1]),new THREE.Vector2(t,e),new THREE.Vector2(r,n));this.curves.push(o),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:i})},THREE.Path.prototype.bezierCurveTo=function(t,e,r,n,i,o){var a=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,s=new THREE.CubicBezierCurve(new THREE.Vector2(s[s.length-2],s[s.length-1]),new THREE.Vector2(t,e),new THREE.Vector2(r,n),new THREE.Vector2(i,o));this.curves.push(s),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:a})},THREE.Path.prototype.splineThru=function(t){var e=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,r=[new THREE.Vector2(r[r.length-2],r[r.length-1])];Array.prototype.push.apply(r,t),r=new THREE.SplineCurve(r),this.curves.push(r),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:e})},THREE.Path.prototype.arc=function(t,e,r,n,i,o){var a=this.actions[this.actions.length-1].args;this.absarc(t+a[a.length-2],e+a[a.length-1],r,n,i,o)},THREE.Path.prototype.absarc=function(t,e,r,n,i,o){this.absellipse(t,e,r,r,n,i,o)},THREE.Path.prototype.ellipse=function(t,e,r,n,i,o,a){var s=this.actions[this.actions.length-1].args;this.absellipse(t+s[s.length-2],e+s[s.length-1],r,n,i,o,a)},THREE.Path.prototype.absellipse=function(t,e,r,n,i,o,a){var s=Array.prototype.slice.call(arguments),u=new THREE.EllipseCurve(t,e,r,n,i,o,a);this.curves.push(u),u=u.getPoint(1),s.push(u.x),s.push(u.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:s})},THREE.Path.prototype.getSpacedPoints=function(t,e){t||(t=40);for(var r=[],n=0;t>n;n++)r.push(this.getPoint(n/t));return r},THREE.Path.prototype.getPoints=function(t,e){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(t,e);t=t||12;var r,n,i,o,a,s,u,h,l,c,f,p,d,m=[];for(r=0,n=this.actions.length;n>r;r++)switch(i=this.actions[r],o=i.action,i=i.args,o){case THREE.PathActions.MOVE_TO:m.push(new THREE.Vector2(i[0],i[1]));break;case THREE.PathActions.LINE_TO:m.push(new THREE.Vector2(i[0],i[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(a=i[2],s=i[3],l=i[0],c=i[1],0<m.length?(o=m[m.length-1],f=o.x,p=o.y):(o=this.actions[r-1].args,f=o[o.length-2],p=o[o.length-1]),i=1;t>=i;i++)d=i/t,o=THREE.Shape.Utils.b2(d,f,l,a),d=THREE.Shape.Utils.b2(d,p,c,s),m.push(new THREE.Vector2(o,d));break;case THREE.PathActions.BEZIER_CURVE_TO:for(a=i[4],s=i[5],l=i[0],c=i[1],u=i[2],h=i[3],0<m.length?(o=m[m.length-1],f=o.x,p=o.y):(o=this.actions[r-1].args,f=o[o.length-2],p=o[o.length-1]),i=1;t>=i;i++)d=i/t,o=THREE.Shape.Utils.b3(d,f,l,u,a),d=THREE.Shape.Utils.b3(d,p,c,h,s),m.push(new THREE.Vector2(o,d));break;case THREE.PathActions.CSPLINE_THRU:for(o=this.actions[r-1].args,d=[new THREE.Vector2(o[o.length-2],o[o.length-1])],o=t*i[0].length,d=d.concat(i[0]),d=new THREE.SplineCurve(d),i=1;o>=i;i++)m.push(d.getPointAt(i/o));break;case THREE.PathActions.ARC:for(a=i[0],s=i[1],c=i[2],u=i[3],o=i[4],l=!!i[5],f=o-u,p=2*t,i=1;p>=i;i++)d=i/p,l||(d=1-d),d=u+d*f,o=a+c*Math.cos(d),d=s+c*Math.sin(d),m.push(new THREE.Vector2(o,d));break;case THREE.PathActions.ELLIPSE:for(a=i[0],s=i[1],c=i[2],h=i[3],u=i[4],o=i[5],l=!!i[6],f=o-u,p=2*t,i=1;p>=i;i++)d=i/p,l||(d=1-d),d=u+d*f,o=a+c*Math.cos(d),d=s+h*Math.sin(d),m.push(new THREE.Vector2(o,d))}return r=m[m.length-1],1e-10>Math.abs(r.x-m[0].x)&&1e-10>Math.abs(r.y-m[0].y)&&m.splice(m.length-1,1),e&&m.push(m[0]),m},THREE.Path.prototype.toShapes=function(t,e){function r(t){for(var e=[],r=0,n=t.length;n>r;r++){var i=t[r],o=new THREE.Shape;o.actions=i.actions,o.curves=i.curves,e.push(o)}return e}function n(t,e){for(var r=e.length,n=!1,i=r-1,o=0;r>o;i=o++){var a=e[i],s=e[o],u=s.x-a.x,h=s.y-a.y;if(1e-10<Math.abs(h)){if(0>h&&(a=e[o],u=-u,s=e[i],h=-h),!(t.y<a.y||t.y>s.y))if(t.y==a.y){if(t.x==a.x)return!0}else{if(i=h*(t.x-a.x)-u*(t.y-a.y),0==i)return!0;0>i||(n=!n)}}else if(t.y==a.y&&(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x))return!0}return n}var i=function(t){var e,r,n,i,o=[],a=new THREE.Path;for(e=0,r=t.length;r>e;e++)n=t[e],i=n.args,n=n.action,n==THREE.PathActions.MOVE_TO&&0!=a.actions.length&&(o.push(a),a=new THREE.Path),a[n].apply(a,i);return 0!=a.actions.length&&o.push(a),o}(this.actions);if(0==i.length)return[];if(!0===e)return r(i);var o,a,s,u=[];if(1==i.length)return a=i[0],s=new THREE.Shape,s.actions=a.actions,s.curves=a.curves,u.push(s),u;var h=!THREE.Shape.Utils.isClockWise(i[0].getPoints()),h=t?!h:h;s=[];var l,c=[],f=[],p=0;c[p]=void 0,f[p]=[];var d,m;for(d=0,m=i.length;m>d;d++)a=i[d],l=a.getPoints(),o=THREE.Shape.Utils.isClockWise(l),(o=t?!o:o)?(!h&&c[p]&&p++,c[p]={s:new THREE.Shape,p:l},c[p].s.actions=a.actions,c[p].s.curves=a.curves,h&&p++,f[p]=[]):f[p].push({h:a,p:l[0]});if(!c[0])return r(i);if(1<c.length){for(d=!1,m=[],a=0,i=c.length;i>a;a++)s[a]=[];for(a=0,i=c.length;i>a;a++)for(o=f[a],h=0;h<o.length;h++){p=o[h],l=!0;for(var g=0;g<c.length;g++)n(p.p,c[g].p)&&(a!=g&&m.push({froms:a,tos:g,hole:h}),l?(l=!1,s[g].push(p)):d=!0);l&&s[a].push(p)}0<m.length&&(d||(f=s))}for(d=0,m=c.length;m>d;d++)for(s=c[d].s,u.push(s),a=f[d],i=0,o=a.length;o>i;i++)s.holes.push(a[i].h);return u},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.constructor=THREE.Shape,THREE.Shape.prototype.extrude=function(t){return new THREE.ExtrudeGeometry(this,t)},THREE.Shape.prototype.makeGeometry=function(t){return new THREE.ShapeGeometry(this,t)},THREE.Shape.prototype.getPointsHoles=function(t){var e,r=this.holes.length,n=[];for(e=0;r>e;e++)n[e]=this.holes[e].getTransformedPoints(t,this.bends);return n},THREE.Shape.prototype.getSpacedPointsHoles=function(t){var e,r=this.holes.length,n=[];for(e=0;r>e;e++)n[e]=this.holes[e].getTransformedSpacedPoints(t,this.bends);return n},THREE.Shape.prototype.extractAllPoints=function(t){return{shape:this.getTransformedPoints(t),holes:this.getPointsHoles(t)}},THREE.Shape.prototype.extractPoints=function(t){return this.useSpacedPoints?this.extractAllSpacedPoints(t):this.extractAllPoints(t)},THREE.Shape.prototype.extractAllSpacedPoints=function(t){return{shape:this.getTransformedSpacedPoints(t),holes:this.getSpacedPointsHoles(t)}},THREE.Shape.Utils={triangulateShape:function(t,e){function r(t,e,r){return t.x!=e.x?t.x<e.x?t.x<=r.x&&r.x<=e.x:e.x<=r.x&&r.x<=t.x:t.y<e.y?t.y<=r.y&&r.y<=e.y:e.y<=r.y&&r.y<=t.y}function n(t,e,n,i,o){var a=e.x-t.x,s=e.y-t.y,u=i.x-n.x,h=i.y-n.y,l=t.x-n.x,c=t.y-n.y,f=s*u-a*h,p=s*l-a*c;if(1e-10<Math.abs(f)){if(f>0){if(0>p||p>f)return[];if(u=h*l-u*c,0>u||u>f)return[]}else{if(p>0||f>p)return[];if(u=h*l-u*c,u>0||f>u)return[]}return 0==u?!o||0!=p&&p!=f?[t]:[]:u==f?!o||0!=p&&p!=f?[e]:[]:0==p?[n]:p==f?[i]:(o=u/f,[{x:t.x+o*a,y:t.y+o*s}])}return 0!=p||h*l!=u*c?[]:(s=0==a&&0==s,u=0==u&&0==h,s&&u?t.x!=n.x||t.y!=n.y?[]:[t]:s?r(n,i,t)?[t]:[]:u?r(t,e,n)?[n]:[]:(0!=a?(t.x<e.x?(a=t,u=t.x,s=e,t=e.x):(a=e,u=e.x,s=t,t=t.x),n.x<i.x?(e=n,f=n.x,h=i,n=i.x):(e=i,f=i.x,h=n,n=n.x)):(t.y<e.y?(a=t,u=t.y,s=e,t=e.y):(a=e,u=e.y,s=t,t=t.y),n.y<i.y?(e=n,f=n.y,h=i,n=i.y):(e=i,f=i.y,h=n,n=n.y)),f>=u?f>t?[]:t==f?o?[]:[e]:n>=t?[e,s]:[e,h]:u>n?[]:u==n?o?[]:[a]:n>=t?[a,s]:[a,h]))}function i(t,e,r,n){var i=e.x-t.x,o=e.y-t.y;e=r.x-t.x,r=r.y-t.y;var a=n.x-t.x;return n=n.y-t.y,t=i*r-o*e,i=i*n-o*a,1e-10<Math.abs(t)?(e=a*r-n*e,t>0?i>=0&&e>=0:i>=0||e>=0):i>0}var o,a,s,u,h,l={};for(s=t.concat(),o=0,a=e.length;a>o;o++)Array.prototype.push.apply(s,e[o]);for(o=0,a=s.length;a>o;o++)h=s[o].x+":"+s[o].y,void 0!==l[h]&&console.log("Duplicate point",h),l[h]=o;o=function(t,e){function r(t,e){var r=g.length-1,n=t-1;0>n&&(n=r);var o=t+1;return o>r&&(o=0),(r=i(g[t],g[n],g[o],s[e]))?(r=s.length-1,n=e-1,0>n&&(n=r),o=e+1,o>r&&(o=0),(r=i(s[e],s[n],s[o],g[t]))?!0:!1):!1}function o(t,e){var r,i;for(r=0;r<g.length;r++)if(i=r+1,i%=g.length,i=n(t,e,g[r],g[i],!0),0<i.length)return!0;return!1}function a(t,r){var i,o,a,s;for(i=0;i<v.length;i++)for(o=e[v[i]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,s=n(t,r,o[a],o[s],!0),0<s.length)return!0;return!1}var s,u,h,l,c,f,p,d,m,g=t.concat(),v=[],E=[],y=0;for(u=e.length;u>y;y++)v.push(y);p=0;for(var x=2*v.length;0<v.length;){if(x--,0>x){console.log("Infinite Loop! Holes left:"+v.length+", Probably Hole outside Shape!");break}for(h=p;h<g.length;h++){for(l=g[h],u=-1,y=0;y<v.length;y++)if(c=v[y],f=l.x+":"+l.y+":"+c,void 0===E[f]){for(s=e[c],d=0;d<s.length;d++)if(c=s[d],r(h,d)&&!o(l,c)&&!a(l,c)){u=d,v.splice(y,1),p=g.slice(0,h+1),c=g.slice(h),d=s.slice(u),m=s.slice(0,u+1),g=p.concat(d).concat(m).concat(c),p=h;break}if(u>=0)break;E[f]=!0}if(u>=0)break}}return g}(t,e);var c=THREE.FontUtils.Triangulate(o,!1);for(o=0,a=c.length;a>o;o++)for(u=c[o],s=0;3>s;s++)h=u[s].x+":"+u[s].y,h=l[h],void 0!==h&&(u[s]=h);return c.concat()},isClockWise:function(t){return 0>THREE.FontUtils.Triangulate.area(t)},b2p0:function(t,e){var r=1-t;return r*r*e},b2p1:function(t,e){return 2*(1-t)*t*e},b2p2:function(t,e){return t*t*e},b2:function(t,e,r,n){return this.b2p0(t,e)+this.b2p1(t,r)+this.b2p2(t,n)},b3p0:function(t,e){var r=1-t;return r*r*r*e},b3p1:function(t,e){var r=1-t;return 3*r*r*t*e},b3p2:function(t,e){return 3*(1-t)*t*t*e},b3p3:function(t,e){return t*t*t*e},b3:function(t,e,r,n,i){return this.b3p0(t,e)+this.b3p1(t,r)+this.b3p2(t,n)+this.b3p3(t,i)}},THREE.LineCurve=function(t,e){this.v1=t,this.v2=e},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.constructor=THREE.LineCurve,THREE.LineCurve.prototype.getPoint=function(t){var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},THREE.LineCurve.prototype.getPointAt=function(t){return this.getPoint(t)},THREE.LineCurve.prototype.getTangent=function(t){return this.v2.clone().sub(this.v1).normalize()},THREE.QuadraticBezierCurve=function(t,e,r){this.v0=t,this.v1=e,this.v2=r},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve,THREE.QuadraticBezierCurve.prototype.getPoint=function(t){var e=new THREE.Vector2;return e.x=THREE.Shape.Utils.b2(t,this.v0.x,this.v1.x,this.v2.x),e.y=THREE.Shape.Utils.b2(t,this.v0.y,this.v1.y,this.v2.y),e},THREE.QuadraticBezierCurve.prototype.getTangent=function(t){var e=new THREE.Vector2;return e.x=THREE.Curve.Utils.tangentQuadraticBezier(t,this.v0.x,this.v1.x,this.v2.x),e.y=THREE.Curve.Utils.tangentQuadraticBezier(t,this.v0.y,this.v1.y,this.v2.y),e.normalize()},THREE.CubicBezierCurve=function(t,e,r,n){this.v0=t,this.v1=e,this.v2=r,this.v3=n},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve,THREE.CubicBezierCurve.prototype.getPoint=function(t){var e;return e=THREE.Shape.Utils.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t=THREE.Shape.Utils.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(e,t)},THREE.CubicBezierCurve.prototype.getTangent=function(t){var e;return e=THREE.Curve.Utils.tangentCubicBezier(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t=THREE.Curve.Utils.tangentCubicBezier(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e=new THREE.Vector2(e,t),e.normalize(),e},THREE.SplineCurve=function(t){
this.points=void 0==t?[]:t},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.constructor=THREE.SplineCurve,THREE.SplineCurve.prototype.getPoint=function(t){var e=this.points;t*=e.length-1;var r=Math.floor(t);t-=r;var n=e[0==r?r:r-1],i=e[r],o=e[r>e.length-2?e.length-1:r+1],e=e[r>e.length-3?e.length-1:r+2],r=new THREE.Vector2;return r.x=THREE.Curve.Utils.interpolate(n.x,i.x,o.x,e.x,t),r.y=THREE.Curve.Utils.interpolate(n.y,i.y,o.y,e.y,t),r},THREE.EllipseCurve=function(t,e,r,n,i,o,a){this.aX=t,this.aY=e,this.xRadius=r,this.yRadius=n,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve,THREE.EllipseCurve.prototype.getPoint=function(t){var e=this.aEndAngle-this.aStartAngle;return 0>e&&(e+=2*Math.PI),e>2*Math.PI&&(e-=2*Math.PI),t=!0===this.aClockwise?this.aEndAngle+(1-t)*(2*Math.PI-e):this.aStartAngle+t*e,e=new THREE.Vector2,e.x=this.aX+this.xRadius*Math.cos(t),e.y=this.aY+this.yRadius*Math.sin(t),e},THREE.ArcCurve=function(t,e,r,n,i,o){THREE.EllipseCurve.call(this,t,e,r,r,n,i,o)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.ArcCurve.prototype.constructor=THREE.ArcCurve,THREE.LineCurve3=THREE.Curve.create(function(t,e){this.v1=t,this.v2=e},function(t){var e=new THREE.Vector3;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(t,e,r){this.v0=t,this.v1=e,this.v2=r},function(t){var e=new THREE.Vector3;return e.x=THREE.Shape.Utils.b2(t,this.v0.x,this.v1.x,this.v2.x),e.y=THREE.Shape.Utils.b2(t,this.v0.y,this.v1.y,this.v2.y),e.z=THREE.Shape.Utils.b2(t,this.v0.z,this.v1.z,this.v2.z),e}),THREE.CubicBezierCurve3=THREE.Curve.create(function(t,e,r,n){this.v0=t,this.v1=e,this.v2=r,this.v3=n},function(t){var e=new THREE.Vector3;return e.x=THREE.Shape.Utils.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e.y=THREE.Shape.Utils.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e.z=THREE.Shape.Utils.b3(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z),e}),THREE.SplineCurve3=THREE.Curve.create(function(t){this.points=void 0==t?[]:t},function(t){var e=this.points;t*=e.length-1;var r=Math.floor(t);t-=r;var n=e[0==r?r:r-1],i=e[r],o=e[r>e.length-2?e.length-1:r+1],e=e[r>e.length-3?e.length-1:r+2],r=new THREE.Vector3;return r.x=THREE.Curve.Utils.interpolate(n.x,i.x,o.x,e.x,t),r.y=THREE.Curve.Utils.interpolate(n.y,i.y,o.y,e.y,t),r.z=THREE.Curve.Utils.interpolate(n.z,i.z,o.z,e.z,t),r}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(t){this.points=void 0==t?[]:t},function(t){var e=this.points;t*=e.length-0;var r=Math.floor(t);t-=r;var r=r+(r>0?0:(Math.floor(Math.abs(r)/e.length)+1)*e.length),n=e[(r-1)%e.length],i=e[r%e.length],o=e[(r+1)%e.length],e=e[(r+2)%e.length],r=new THREE.Vector3;return r.x=THREE.Curve.Utils.interpolate(n.x,i.x,o.x,e.x,t),r.y=THREE.Curve.Utils.interpolate(n.y,i.y,o.y,e.y,t),r.z=THREE.Curve.Utils.interpolate(n.z,i.z,o.z,e.z,t),r}),THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(t){if(!0===t.initialized)return t;for(var e=0;e<t.hierarchy.length;e++){for(var r=0;r<t.hierarchy[e].keys.length;r++)if(0>t.hierarchy[e].keys[r].time&&(t.hierarchy[e].keys[r].time=0),void 0!==t.hierarchy[e].keys[r].rot&&!(t.hierarchy[e].keys[r].rot instanceof THREE.Quaternion)){var n=t.hierarchy[e].keys[r].rot;t.hierarchy[e].keys[r].rot=(new THREE.Quaternion).fromArray(n)}if(t.hierarchy[e].keys.length&&void 0!==t.hierarchy[e].keys[0].morphTargets){for(n={},r=0;r<t.hierarchy[e].keys.length;r++)for(var i=0;i<t.hierarchy[e].keys[r].morphTargets.length;i++){var o=t.hierarchy[e].keys[r].morphTargets[i];n[o]=-1}for(t.hierarchy[e].usedMorphTargets=n,r=0;r<t.hierarchy[e].keys.length;r++){var a={};for(o in n){for(i=0;i<t.hierarchy[e].keys[r].morphTargets.length;i++)if(t.hierarchy[e].keys[r].morphTargets[i]===o){a[o]=t.hierarchy[e].keys[r].morphTargetsInfluences[i];break}i===t.hierarchy[e].keys[r].morphTargets.length&&(a[o]=0)}t.hierarchy[e].keys[r].morphTargetsInfluences=a}}for(r=1;r<t.hierarchy[e].keys.length;r++)t.hierarchy[e].keys[r].time===t.hierarchy[e].keys[r-1].time&&(t.hierarchy[e].keys.splice(r,1),r--);for(r=0;r<t.hierarchy[e].keys.length;r++)t.hierarchy[e].keys[r].index=r}return t.initialized=!0,t},parse:function(t){var e=function(t,r){r.push(t);for(var n=0;n<t.children.length;n++)e(t.children[n],r)},r=[];if(t instanceof THREE.SkinnedMesh)for(var n=0;n<t.skeleton.bones.length;n++)r.push(t.skeleton.bones[n]);else e(t,r);return r},play:function(t){-1===this.animations.indexOf(t)&&this.animations.push(t)},stop:function(t){t=this.animations.indexOf(t),-1!==t&&this.animations.splice(t,1)},update:function(t){for(var e=0;e<this.animations.length;e++)this.animations[e].resetBlendWeights();for(e=0;e<this.animations.length;e++)this.animations[e].update(t)}},THREE.Animation=function(t,e){this.root=t,this.data=THREE.AnimationHandler.init(e),this.hierarchy=THREE.AnimationHandler.parse(t),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=THREE.AnimationHandler.LINEAR},THREE.Animation.prototype.keyTypes=["pos","rot","scl"],THREE.Animation.prototype.play=function(t,e){this.currentTime=void 0!==t?t:0,this.weight=void 0!==e?e:1,this.isPlaying=!0,this.reset(),THREE.AnimationHandler.play(this)},THREE.Animation.prototype.stop=function(){this.isPlaying=!1,THREE.AnimationHandler.stop(this)},THREE.Animation.prototype.reset=function(){for(var t=0,e=this.hierarchy.length;e>t;t++){var r=this.hierarchy[t];void 0===r.animationCache&&(r.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}}),void 0===r.animationCache.animations[this.data.name]&&(r.animationCache.animations[this.data.name]={},r.animationCache.animations[this.data.name].prevKey={pos:0,rot:0,scl:0},r.animationCache.animations[this.data.name].nextKey={pos:0,rot:0,scl:0},r.animationCache.animations[this.data.name].originalMatrix=r.matrix);for(var r=r.animationCache.animations[this.data.name],n=0;3>n;n++){for(var i=this.keyTypes[n],o=this.data.hierarchy[t].keys[0],a=this.getNextKeyWith(i,t,1);a.time<this.currentTime&&a.index>o.index;)o=a,a=this.getNextKeyWith(i,t,a.index+1);r.prevKey[i]=o,r.nextKey[i]=a}}},THREE.Animation.prototype.resetBlendWeights=function(){for(var t=0,e=this.hierarchy.length;e>t;t++){var r=this.hierarchy[t];void 0!==r.animationCache&&(r.animationCache.blending.positionWeight=0,r.animationCache.blending.quaternionWeight=0,r.animationCache.blending.scaleWeight=0)}},THREE.Animation.prototype.update=function(){var t=[],e=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Quaternion,i=function(t,e){var r,n,i,a,s,u,h=[],l=[];return r=(t.length-1)*e,n=Math.floor(r),r-=n,h[0]=0===n?n:n-1,h[1]=n,h[2]=n>t.length-2?n:n+1,h[3]=n>t.length-3?n:n+2,n=t[h[0]],a=t[h[1]],s=t[h[2]],u=t[h[3]],h=r*r,i=r*h,l[0]=o(n[0],a[0],s[0],u[0],r,h,i),l[1]=o(n[1],a[1],s[1],u[1],r,h,i),l[2]=o(n[2],a[2],s[2],u[2],r,h,i),l},o=function(t,e,r,n,i,o,a){return t=.5*(r-t),n=.5*(n-e),(2*(e-r)+t+n)*a+(-3*(e-r)-2*t-n)*o+t*i+e};return function(o){if(!1!==this.isPlaying&&(this.currentTime+=o*this.timeScale,0!==this.weight)){o=this.data.length,(this.currentTime>o||0>this.currentTime)&&(this.loop?(this.currentTime%=o,0>this.currentTime&&(this.currentTime+=o),this.reset()):this.stop()),o=0;for(var a=this.hierarchy.length;a>o;o++)for(var s=this.hierarchy[o],u=s.animationCache.animations[this.data.name],h=s.animationCache.blending,l=0;3>l;l++){var c=this.keyTypes[l],f=u.prevKey[c],p=u.nextKey[c];if(0<this.timeScale&&p.time<=this.currentTime||0>this.timeScale&&f.time>=this.currentTime){for(f=this.data.hierarchy[o].keys[0],p=this.getNextKeyWith(c,o,1);p.time<this.currentTime&&p.index>f.index;)f=p,p=this.getNextKeyWith(c,o,p.index+1);u.prevKey[c]=f,u.nextKey[c]=p}var d=(this.currentTime-f.time)/(p.time-f.time),m=f[c],g=p[c];0>d&&(d=0),d>1&&(d=1),"pos"===c?this.interpolationType===THREE.AnimationHandler.LINEAR?(r.x=m[0]+(g[0]-m[0])*d,r.y=m[1]+(g[1]-m[1])*d,r.z=m[2]+(g[2]-m[2])*d,f=this.weight/(this.weight+h.positionWeight),s.position.lerp(r,f),h.positionWeight+=this.weight):(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)&&(t[0]=this.getPrevKeyWith("pos",o,f.index-1).pos,t[1]=m,t[2]=g,t[3]=this.getNextKeyWith("pos",o,p.index+1).pos,d=.33*d+.33,p=i(t,d),f=this.weight/(this.weight+h.positionWeight),h.positionWeight+=this.weight,c=s.position,c.x+=(p[0]-c.x)*f,c.y+=(p[1]-c.y)*f,c.z+=(p[2]-c.z)*f,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(d=i(t,1.01*d),e.set(d[0],d[1],d[2]),e.sub(c),e.y=0,e.normalize(),d=Math.atan2(e.x,e.z),s.rotation.set(0,d,0))):"rot"===c?(THREE.Quaternion.slerp(m,g,n,d),0===h.quaternionWeight?(s.quaternion.copy(n),h.quaternionWeight=this.weight):(f=this.weight/(this.weight+h.quaternionWeight),THREE.Quaternion.slerp(s.quaternion,n,s.quaternion,f),h.quaternionWeight+=this.weight)):"scl"===c&&(r.x=m[0]+(g[0]-m[0])*d,r.y=m[1]+(g[1]-m[1])*d,r.z=m[2]+(g[2]-m[2])*d,f=this.weight/(this.weight+h.scaleWeight),s.scale.lerp(r,f),h.scaleWeight+=this.weight)}return!0}}}(),THREE.Animation.prototype.getNextKeyWith=function(t,e,r){var n=this.data.hierarchy[e].keys;for(r=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?r<n.length-1?r:n.length-1:r%n.length;r<n.length;r++)if(void 0!==n[r][t])return n[r];return this.data.hierarchy[e].keys[0]},THREE.Animation.prototype.getPrevKeyWith=function(t,e,r){var n=this.data.hierarchy[e].keys;for(r=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?r>0?r:0:r>=0?r:r+n.length;r>=0;r--)if(void 0!==n[r][t])return n[r];return this.data.hierarchy[e].keys[n.length-1]},THREE.KeyFrameAnimation=function(t){this.root=t.node,this.data=THREE.AnimationHandler.init(t),this.hierarchy=THREE.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.loop=this.isPaused=!0,t=0;for(var e=this.hierarchy.length;e>t;t++){var r=this.data.hierarchy[t].sids,n=this.hierarchy[t];if(this.data.hierarchy[t].keys.length&&r){for(var i=0;i<r.length;i++){var o=r[i],a=this.getNextKeyWith(o,t,0);a&&a.apply(o)}n.matrixAutoUpdate=!1,this.data.hierarchy[t].node.updateMatrix(),n.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype.play=function(t){if(this.currentTime=void 0!==t?t:0,!1===this.isPlaying){this.isPlaying=!0;var e,r,n=this.hierarchy.length;for(t=0;n>t;t++)e=this.hierarchy[t],r=this.data.hierarchy[t],void 0===r.animationCache&&(r.animationCache={},r.animationCache.prevKey=null,r.animationCache.nextKey=null,r.animationCache.originalMatrix=e.matrix),e=this.data.hierarchy[t].keys,e.length&&(r.animationCache.prevKey=e[0],r.animationCache.nextKey=e[1],this.startTime=Math.min(e[0].time,this.startTime),this.endTime=Math.max(e[e.length-1].time,this.endTime));this.update(0)}this.isPaused=!1,THREE.AnimationHandler.play(this)},THREE.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1,THREE.AnimationHandler.stop(this);for(var t=0;t<this.data.hierarchy.length;t++){var e=this.hierarchy[t],r=this.data.hierarchy[t];if(void 0!==r.animationCache){var n=r.animationCache.originalMatrix;n.copy(e.matrix),e.matrix=n,delete r.animationCache}}},THREE.KeyFrameAnimation.prototype.update=function(t){if(!1!==this.isPlaying){this.currentTime+=t*this.timeScale,t=this.data.length,!0===this.loop&&this.currentTime>t&&(this.currentTime%=t),this.currentTime=Math.min(this.currentTime,t),t=0;for(var e=this.hierarchy.length;e>t;t++){var r=this.hierarchy[t],n=this.data.hierarchy[t],i=n.keys,n=n.animationCache;if(i.length){var o=n.prevKey,a=n.nextKey;if(a.time<=this.currentTime){for(;a.time<this.currentTime&&a.index>o.index;)o=a,a=i[o.index+1];n.prevKey=o,n.nextKey=a}a.time>=this.currentTime?o.interpolate(a,this.currentTime):o.interpolate(a,a.time),this.data.hierarchy[t].node.updateMatrix(),r.matrixWorldNeedsUpdate=!0}}}},THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(t,e,r){for(e=this.data.hierarchy[e].keys,r%=e.length;r<e.length;r++)if(e[r].hasTarget(t))return e[r];return e[0]},THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(t,e,r){for(e=this.data.hierarchy[e].keys,r=r>=0?r:r+e.length;r>=0;r--)if(e[r].hasTarget(t))return e[r];return e[e.length-1]},THREE.MorphAnimation=function(t){this.mesh=t,this.frames=t.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.currentFrame=this.lastFrame=0,this.isPlaying=!1},THREE.MorphAnimation.prototype={constructor:THREE.MorphAnimation,play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(t){if(!1!==this.isPlaying){this.currentTime+=t,!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration),t=this.duration/this.frames;var e=Math.floor(this.currentTime/t);e!=this.currentFrame&&(this.mesh.morphTargetInfluences[this.lastFrame]=0,this.mesh.morphTargetInfluences[this.currentFrame]=1,this.mesh.morphTargetInfluences[e]=0,this.lastFrame=this.currentFrame,this.currentFrame=e),this.mesh.morphTargetInfluences[e]=this.currentTime%t/t,this.mesh.morphTargetInfluences[this.lastFrame]=1-this.mesh.morphTargetInfluences[e]}}},THREE.BoxGeometry=function(t,e,r,n,i,o){function a(t,e,r,n,i,o,a,u){var h,l=s.widthSegments,c=s.heightSegments,f=i/2,p=o/2,d=s.vertices.length;"x"===t&&"y"===e||"y"===t&&"x"===e?h="z":"x"===t&&"z"===e||"z"===t&&"x"===e?(h="y",c=s.depthSegments):("z"===t&&"y"===e||"y"===t&&"z"===e)&&(h="x",l=s.depthSegments);var m=l+1,g=c+1,v=i/l,E=o/c,y=new THREE.Vector3;for(y[h]=a>0?1:-1,i=0;g>i;i++)for(o=0;m>o;o++){var x=new THREE.Vector3;x[t]=(o*v-f)*r,x[e]=(i*E-p)*n,x[h]=a,s.vertices.push(x)}for(i=0;c>i;i++)for(o=0;l>o;o++)p=o+m*i,t=o+m*(i+1),e=o+1+m*(i+1),r=o+1+m*i,n=new THREE.Vector2(o/l,1-i/c),a=new THREE.Vector2(o/l,1-(i+1)/c),h=new THREE.Vector2((o+1)/l,1-(i+1)/c),f=new THREE.Vector2((o+1)/l,1-i/c),p=new THREE.Face3(p+d,t+d,r+d),p.normal.copy(y),p.vertexNormals.push(y.clone(),y.clone(),y.clone()),p.materialIndex=u,s.faces.push(p),s.faceVertexUvs[0].push([n,a,f]),p=new THREE.Face3(t+d,e+d,r+d),p.normal.copy(y),p.vertexNormals.push(y.clone(),y.clone(),y.clone()),p.materialIndex=u,s.faces.push(p),s.faceVertexUvs[0].push([a.clone(),h,f.clone()])}THREE.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:r,widthSegments:n,heightSegments:i,depthSegments:o},this.widthSegments=n||1,this.heightSegments=i||1,this.depthSegments=o||1;var s=this;n=t/2,i=e/2,o=r/2,a("z","y",-1,-1,r,e,n,0),a("z","y",1,-1,r,e,-n,1),a("x","z",1,1,t,r,i,2),a("x","z",1,-1,t,r,-i,3),a("x","y",1,-1,t,e,o,4),a("x","y",-1,-1,t,e,-o,5),this.mergeVertices()},THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry,THREE.CircleGeometry=function(t,e,r,n){THREE.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:n},t=t||50,e=void 0!==e?Math.max(3,e):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var i,o=[];i=new THREE.Vector3;var a=new THREE.Vector2(.5,.5);for(this.vertices.push(i),o.push(a),i=0;e>=i;i++){var s=new THREE.Vector3,u=r+i/e*n;s.x=t*Math.cos(u),s.y=t*Math.sin(u),this.vertices.push(s),o.push(new THREE.Vector2((s.x/t+1)/2,(s.y/t+1)/2))}for(r=new THREE.Vector3(0,0,1),i=1;e>=i;i++)this.faces.push(new THREE.Face3(i,i+1,0,[r.clone(),r.clone(),r.clone()])),this.faceVertexUvs[0].push([o[i].clone(),o[i+1].clone(),a.clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,t)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry,THREE.CubeGeometry=function(t,e,r,n,i,o){return console.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new THREE.BoxGeometry(t,e,r,n,i,o)},THREE.CylinderGeometry=function(t,e,r,n,i,o,a,s){THREE.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},t=void 0!==t?t:20,e=void 0!==e?e:20,r=void 0!==r?r:100,n=n||8,i=i||1,o=void 0!==o?o:!1,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var u,h,l=r/2,c=[],f=[];for(h=0;i>=h;h++){var p=[],d=[],m=h/i,g=m*(e-t)+t;for(u=0;n>=u;u++){var v=u/n,E=new THREE.Vector3;E.x=g*Math.sin(v*s+a),E.y=-m*r+l,E.z=g*Math.cos(v*s+a),this.vertices.push(E),p.push(this.vertices.length-1),d.push(new THREE.Vector2(v,1-m))}c.push(p),f.push(d)}for(r=(e-t)/r,u=0;n>u;u++)for(0!==t?(a=this.vertices[c[0][u]].clone(),s=this.vertices[c[0][u+1]].clone()):(a=this.vertices[c[1][u]].clone(),s=this.vertices[c[1][u+1]].clone()),a.setY(Math.sqrt(a.x*a.x+a.z*a.z)*r).normalize(),s.setY(Math.sqrt(s.x*s.x+s.z*s.z)*r).normalize(),h=0;i>h;h++){var p=c[h][u],d=c[h+1][u],m=c[h+1][u+1],g=c[h][u+1],v=a.clone(),E=a.clone(),y=s.clone(),x=s.clone(),T=f[h][u].clone(),R=f[h+1][u].clone(),b=f[h+1][u+1].clone(),_=f[h][u+1].clone();this.faces.push(new THREE.Face3(p,d,g,[v,E,x])),this.faceVertexUvs[0].push([T,R,_]),this.faces.push(new THREE.Face3(d,m,g,[E.clone(),y,x.clone()])),this.faceVertexUvs[0].push([R.clone(),b,_.clone()])}if(!1===o&&t>0)for(this.vertices.push(new THREE.Vector3(0,l,0)),u=0;n>u;u++)p=c[0][u],d=c[0][u+1],m=this.vertices.length-1,v=new THREE.Vector3(0,1,0),E=new THREE.Vector3(0,1,0),y=new THREE.Vector3(0,1,0),T=f[0][u].clone(),R=f[0][u+1].clone(),b=new THREE.Vector2(R.x,0),this.faces.push(new THREE.Face3(p,d,m,[v,E,y])),this.faceVertexUvs[0].push([T,R,b]);if(!1===o&&e>0)for(this.vertices.push(new THREE.Vector3(0,-l,0)),u=0;n>u;u++)p=c[i][u+1],d=c[i][u],m=this.vertices.length-1,v=new THREE.Vector3(0,-1,0),E=new THREE.Vector3(0,-1,0),y=new THREE.Vector3(0,-1,0),T=f[i][u+1].clone(),R=f[i][u].clone(),b=new THREE.Vector2(R.x,1),this.faces.push(new THREE.Face3(p,d,m,[v,E,y])),this.faceVertexUvs[0].push([T,R,b]);this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry,THREE.ExtrudeGeometry=function(t,e){"undefined"!=typeof t&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",t=t instanceof Array?t:[t],this.addShapeList(t,e),this.computeFaceNormals())},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry,THREE.ExtrudeGeometry.prototype.addShapeList=function(t,e){for(var r=t.length,n=0;r>n;n++)this.addShape(t[n],e)},THREE.ExtrudeGeometry.prototype.addShape=function(t,e){function r(t,e,r){return e||console.log("die"),e.clone().multiplyScalar(r).add(t)}function n(t,e,r){var n=1,n=t.x-e.x,i=t.y-e.y,o=r.x-t.x,a=r.y-t.y,s=n*n+i*i;if(1e-10<Math.abs(n*a-i*o)){var u=Math.sqrt(s),h=Math.sqrt(o*o+a*a),s=e.x-i/u;if(e=e.y+n/u,o=((r.x-a/h-s)*a-(r.y+o/h-e)*o)/(n*a-i*o),r=s+n*o-t.x,t=e+i*o-t.y,n=r*r+t*t,2>=n)return new THREE.Vector2(r,t);n=Math.sqrt(n/2)}else t=!1,n>1e-10?o>1e-10&&(t=!0):-1e-10>n?-1e-10>o&&(t=!0):Math.sign(i)==Math.sign(a)&&(t=!0),t?(r=-i,t=n,n=Math.sqrt(s)):(r=n,t=i,n=Math.sqrt(s/2));return new THREE.Vector2(r/n,t/n)}function i(t,e){var r,n;for(I=t.length;0<=--I;){r=I,n=I-1,0>n&&(n=t.length-1);for(var i=0,o=E+2*m,i=0;o>i;i++){var a=k*i,s=k*(i+1),u=e+r+a,a=e+n+a,h=e+n+s,s=e+r+s,u=u+S,a=a+S,h=h+S,s=s+S;H.faces.push(new THREE.Face3(u,a,s,null,null,R)),H.faces.push(new THREE.Face3(a,h,s,null,null,R)),u=b.generateSideWallUV(H,u,a,h,s),H.faceVertexUvs[0].push([u[0],u[1],u[3]]),H.faceVertexUvs[0].push([u[1],u[2],u[3]])}}}function o(t,e,r){H.vertices.push(new THREE.Vector3(t,e,r))}function a(t,e,r){t+=S,e+=S,r+=S,H.faces.push(new THREE.Face3(t,e,r,null,null,T)),t=b.generateTopUV(H,t,e,r),H.faceVertexUvs[0].push(t)}var s,u,h,l,c,f=void 0!==e.amount?e.amount:100,p=void 0!==e.bevelThickness?e.bevelThickness:6,d=void 0!==e.bevelSize?e.bevelSize:p-2,m=void 0!==e.bevelSegments?e.bevelSegments:3,g=void 0!==e.bevelEnabled?e.bevelEnabled:!0,v=void 0!==e.curveSegments?e.curveSegments:12,E=void 0!==e.steps?e.steps:1,y=e.extrudePath,x=!1,T=e.material,R=e.extrudeMaterial,b=void 0!==e.UVGenerator?e.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;y&&(s=y.getSpacedPoints(E),x=!0,g=!1,u=void 0!==e.frames?e.frames:new THREE.TubeGeometry.FrenetFrames(y,E,!1),h=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3),g||(d=p=m=0);var _,w,M,H=this,S=this.vertices.length,y=t.extractPoints(v),v=y.shape,C=y.holes;if(y=!THREE.Shape.Utils.isClockWise(v)){for(v=v.reverse(),w=0,M=C.length;M>w;w++)_=C[w],THREE.Shape.Utils.isClockWise(_)&&(C[w]=_.reverse());y=!1}var A=THREE.Shape.Utils.triangulateShape(v,C),L=v;for(w=0,M=C.length;M>w;w++)_=C[w],v=v.concat(_);var P,F,D,B,O,N,k=v.length,U=A.length,y=[],I=0;for(D=L.length,P=D-1,F=I+1;D>I;I++,P++,F++)P===D&&(P=0),F===D&&(F=0),y[I]=n(L[I],L[P],L[F]);var z,V=[],j=y.concat();for(w=0,M=C.length;M>w;w++){for(_=C[w],z=[],I=0,D=_.length,P=D-1,F=I+1;D>I;I++,P++,F++)P===D&&(P=0),F===D&&(F=0),z[I]=n(_[I],_[P],_[F]);V.push(z),j=j.concat(z)}for(P=0;m>P;P++){for(D=P/m,B=p*(1-D),F=d*Math.sin(D*Math.PI/2),I=0,D=L.length;D>I;I++)O=r(L[I],y[I],F),o(O.x,O.y,-B);for(w=0,M=C.length;M>w;w++)for(_=C[w],z=V[w],I=0,D=_.length;D>I;I++)O=r(_[I],z[I],F),o(O.x,O.y,-B)}for(F=d,I=0;k>I;I++)O=g?r(v[I],j[I],F):v[I],x?(l.copy(u.normals[0]).multiplyScalar(O.x),h.copy(u.binormals[0]).multiplyScalar(O.y),c.copy(s[0]).add(l).add(h),o(c.x,c.y,c.z)):o(O.x,O.y,0);for(D=1;E>=D;D++)for(I=0;k>I;I++)O=g?r(v[I],j[I],F):v[I],x?(l.copy(u.normals[D]).multiplyScalar(O.x),h.copy(u.binormals[D]).multiplyScalar(O.y),c.copy(s[D]).add(l).add(h),o(c.x,c.y,c.z)):o(O.x,O.y,f/E*D);for(P=m-1;P>=0;P--){for(D=P/m,B=p*(1-D),F=d*Math.sin(D*Math.PI/2),I=0,D=L.length;D>I;I++)O=r(L[I],y[I],F),o(O.x,O.y,f+B);for(w=0,M=C.length;M>w;w++)for(_=C[w],z=V[w],I=0,D=_.length;D>I;I++)O=r(_[I],z[I],F),x?o(O.x,O.y+s[E-1].y,s[E-1].x+B):o(O.x,O.y,f+B)}!function(){if(g){var t;for(t=0*k,I=0;U>I;I++)N=A[I],a(N[2]+t,N[1]+t,N[0]+t);for(t=E+2*m,t*=k,I=0;U>I;I++)N=A[I],a(N[0]+t,N[1]+t,N[2]+t)}else{for(I=0;U>I;I++)N=A[I],a(N[2],N[1],N[0]);for(I=0;U>I;I++)N=A[I],a(N[0]+k*E,N[1]+k*E,N[2]+k*E)}}(),function(){var t=0;for(i(L,t),t+=L.length,w=0,M=C.length;M>w;w++)_=C[w],i(_,t),t+=_.length}()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(t,e,r,n){return t=t.vertices,e=t[e],r=t[r],n=t[n],[new THREE.Vector2(e.x,e.y),new THREE.Vector2(r.x,r.y),new THREE.Vector2(n.x,n.y)]},generateSideWallUV:function(t,e,r,n,i){return t=t.vertices,e=t[e],r=t[r],n=t[n],i=t[i],.01>Math.abs(e.y-r.y)?[new THREE.Vector2(e.x,1-e.z),new THREE.Vector2(r.x,1-r.z),new THREE.Vector2(n.x,1-n.z),new THREE.Vector2(i.x,1-i.z)]:[new THREE.Vector2(e.y,1-e.z),new THREE.Vector2(r.y,1-r.z),new THREE.Vector2(n.y,1-n.z),new THREE.Vector2(i.y,1-i.z)]}},THREE.ShapeGeometry=function(t,e){THREE.Geometry.call(this),this.type="ShapeGeometry",!1==t instanceof Array&&(t=[t]),this.addShapeList(t,e),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry,THREE.ShapeGeometry.prototype.addShapeList=function(t,e){for(var r=0,n=t.length;n>r;r++)this.addShape(t[r],e);return this},THREE.ShapeGeometry.prototype.addShape=function(t,e){void 0===e&&(e={});var r,n,i,o=e.material,a=void 0===e.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:e.UVGenerator,s=this.vertices.length;r=t.extractPoints(void 0!==e.curveSegments?e.curveSegments:12);var u=r.shape,h=r.holes;if(!THREE.Shape.Utils.isClockWise(u))for(u=u.reverse(),r=0,n=h.length;n>r;r++)i=h[r],THREE.Shape.Utils.isClockWise(i)&&(h[r]=i.reverse());var l=THREE.Shape.Utils.triangulateShape(u,h);for(r=0,n=h.length;n>r;r++)i=h[r],u=u.concat(i);for(h=u.length,n=l.length,r=0;h>r;r++)i=u[r],this.vertices.push(new THREE.Vector3(i.x,i.y,0));for(r=0;n>r;r++)h=l[r],u=h[0]+s,i=h[1]+s,h=h[2]+s,this.faces.push(new THREE.Face3(u,i,h,null,null,o)),this.faceVertexUvs[0].push(a.generateTopUV(this,u,i,h))},THREE.LatheGeometry=function(t,e,r,n){THREE.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:r,phiLength:n},e=e||12,r=r||0,n=n||2*Math.PI;for(var i=1/(t.length-1),o=1/e,a=0,s=e;s>=a;a++)for(var u=r+a*o*n,h=Math.cos(u),l=Math.sin(u),u=0,c=t.length;c>u;u++){var f=t[u],p=new THREE.Vector3;p.x=h*f.x-l*f.y,p.y=l*f.x+h*f.y,p.z=f.z,this.vertices.push(p)}for(r=t.length,a=0,s=e;s>a;a++)for(u=0,c=t.length-1;c>u;u++){e=l=u+r*a,n=l+r;var h=l+1+r,l=l+1,f=a*o,p=u*i,d=f+o,m=p+i;this.faces.push(new THREE.Face3(e,n,l)),this.faceVertexUvs[0].push([new THREE.Vector2(f,p),new THREE.Vector2(d,p),new THREE.Vector2(f,m)]),this.faces.push(new THREE.Face3(n,h,l)),this.faceVertexUvs[0].push([new THREE.Vector2(d,p),new THREE.Vector2(d,m),new THREE.Vector2(f,m)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry,THREE.PlaneGeometry=function(t,e,r,n){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),THREE.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new THREE.PlaneBufferGeometry(t,e,r,n))},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry,THREE.PlaneBufferGeometry=function(t,e,r,n){THREE.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:n};var i=t/2,o=e/2;r=r||1,n=n||1;var a=r+1,s=n+1,u=t/r,h=e/n;e=new Float32Array(a*s*3),t=new Float32Array(a*s*3);for(var l=new Float32Array(a*s*2),c=0,f=0,p=0;s>p;p++)for(var d=p*h-o,m=0;a>m;m++)e[c]=m*u-i,e[c+1]=-d,t[c+2]=1,l[f]=m/r,l[f+1]=1-p/n,c+=3,f+=2;for(c=0,i=new(65535<e.length/3?Uint32Array:Uint16Array)(r*n*6),p=0;n>p;p++)for(m=0;r>m;m++)o=m+a*(p+1),s=m+1+a*(p+1),u=m+1+a*p,i[c]=m+a*p,i[c+1]=o,i[c+2]=u,i[c+3]=o,i[c+4]=s,i[c+5]=u,c+=6;this.addAttribute("index",new THREE.BufferAttribute(i,1)),this.addAttribute("position",new THREE.BufferAttribute(e,3)),this.addAttribute("normal",new THREE.BufferAttribute(t,3)),this.addAttribute("uv",new THREE.BufferAttribute(l,2))},THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry,THREE.RingGeometry=function(t,e,r,n,i,o){THREE.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o},t=t||0,e=e||50,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,r=void 0!==r?Math.max(3,r):8,n=void 0!==n?Math.max(1,n):8;var a,s=[],u=t,h=(e-t)/n;for(t=0;n+1>t;t++){for(a=0;r+1>a;a++){var l=new THREE.Vector3,c=i+a/r*o;l.x=u*Math.cos(c),l.y=u*Math.sin(c),this.vertices.push(l),s.push(new THREE.Vector2((l.x/e+1)/2,(l.y/e+1)/2))}u+=h}for(e=new THREE.Vector3(0,0,1),t=0;n>t;t++)for(i=t*(r+1),a=0;r>a;a++)o=c=a+i,h=c+r+1,l=c+r+2,this.faces.push(new THREE.Face3(o,h,l,[e.clone(),e.clone(),e.clone()])),this.faceVertexUvs[0].push([s[o].clone(),s[h].clone(),s[l].clone()]),o=c,h=c+r+2,l=c+1,this.faces.push(new THREE.Face3(o,h,l,[e.clone(),e.clone(),e.clone()])),this.faceVertexUvs[0].push([s[o].clone(),s[h].clone(),s[l].clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,u)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.RingGeometry.prototype.constructor=THREE.RingGeometry,THREE.SphereGeometry=function(t,e,r,n,i,o,a){THREE.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a},t=t||50,e=Math.max(3,Math.floor(e)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,u,h=[],l=[];for(u=0;r>=u;u++){var c=[],f=[];for(s=0;e>=s;s++){var p=s/e,d=u/r,m=new THREE.Vector3;m.x=-t*Math.cos(n+p*i)*Math.sin(o+d*a),m.y=t*Math.cos(o+d*a),m.z=t*Math.sin(n+p*i)*Math.sin(o+d*a),this.vertices.push(m),c.push(this.vertices.length-1),f.push(new THREE.Vector2(p,1-d))}h.push(c),l.push(f)}for(u=0;r>u;u++)for(s=0;e>s;s++){n=h[u][s+1],i=h[u][s],o=h[u+1][s],a=h[u+1][s+1];var c=this.vertices[n].clone().normalize(),f=this.vertices[i].clone().normalize(),p=this.vertices[o].clone().normalize(),d=this.vertices[a].clone().normalize(),m=l[u][s+1].clone(),g=l[u][s].clone(),v=l[u+1][s].clone(),E=l[u+1][s+1].clone();Math.abs(this.vertices[n].y)===t?(m.x=(m.x+g.x)/2,this.faces.push(new THREE.Face3(n,o,a,[c,p,d])),this.faceVertexUvs[0].push([m,v,E])):Math.abs(this.vertices[o].y)===t?(v.x=(v.x+E.x)/2,this.faces.push(new THREE.Face3(n,i,o,[c,f,p])),this.faceVertexUvs[0].push([m,g,v])):(this.faces.push(new THREE.Face3(n,i,a,[c,f,d])),this.faceVertexUvs[0].push([m,g,E]),this.faces.push(new THREE.Face3(i,o,a,[f.clone(),p,d.clone()])),this.faceVertexUvs[0].push([g.clone(),v,E.clone()]))}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,t)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry,THREE.TextGeometry=function(t,e){e=e||{};var r=THREE.FontUtils.generateShapes(t,e);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,r,e),this.type="TextGeometry"},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TextGeometry.prototype.constructor=THREE.TextGeometry,THREE.TorusGeometry=function(t,e,r,n,i){THREE.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:n,arc:i},t=t||100,e=e||40,r=r||8,n=n||6,i=i||2*Math.PI;for(var o=new THREE.Vector3,a=[],s=[],u=0;r>=u;u++)for(var h=0;n>=h;h++){var l=h/n*i,c=u/r*Math.PI*2;o.x=t*Math.cos(l),o.y=t*Math.sin(l);var f=new THREE.Vector3;f.x=(t+e*Math.cos(c))*Math.cos(l),f.y=(t+e*Math.cos(c))*Math.sin(l),f.z=e*Math.sin(c),this.vertices.push(f),a.push(new THREE.Vector2(h/n,u/r)),s.push(f.clone().sub(o).normalize())}for(u=1;r>=u;u++)for(h=1;n>=h;h++)t=(n+1)*u+h-1,e=(n+1)*(u-1)+h-1,i=(n+1)*(u-1)+h,o=(n+1)*u+h,l=new THREE.Face3(t,e,o,[s[t].clone(),s[e].clone(),s[o].clone()]),this.faces.push(l),this.faceVertexUvs[0].push([a[t].clone(),a[e].clone(),a[o].clone()]),l=new THREE.Face3(e,i,o,[s[e].clone(),s[i].clone(),s[o].clone()]),this.faces.push(l),this.faceVertexUvs[0].push([a[e].clone(),a[i].clone(),a[o].clone()]);this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry,THREE.TorusKnotGeometry=function(t,e,r,n,i,o,a){function s(t,e,r,n,i){var o=Math.cos(t),a=Math.sin(t);return t*=e/r,e=Math.cos(t),o*=n*(2+e)*.5,a=n*(2+e)*a*.5,n=i*n*Math.sin(t)*.5,new THREE.Vector3(o,a,n)}THREE.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:n,p:i,q:o,heightScale:a},t=t||100,e=e||40,r=r||64,n=n||8,i=i||2,o=o||3,a=a||1;for(var u=Array(r),h=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,f=0;r>f;++f){u[f]=Array(n);var p=f/r*2*i*Math.PI,d=s(p,o,i,t,a),p=s(p+.01,o,i,t,a);for(h.subVectors(p,d),l.addVectors(p,d),c.crossVectors(h,l),l.crossVectors(c,h),c.normalize(),l.normalize(),p=0;n>p;++p){var m=p/n*2*Math.PI,g=-e*Math.cos(m),m=e*Math.sin(m),v=new THREE.Vector3;v.x=d.x+g*l.x+m*c.x,v.y=d.y+g*l.y+m*c.y,v.z=d.z+g*l.z+m*c.z,
u[f][p]=this.vertices.push(v)-1}}for(f=0;r>f;++f)for(p=0;n>p;++p)i=(f+1)%r,o=(p+1)%n,t=u[f][p],e=u[i][p],i=u[i][o],o=u[f][o],a=new THREE.Vector2(f/r,p/n),h=new THREE.Vector2((f+1)/r,p/n),l=new THREE.Vector2((f+1)/r,(p+1)/n),c=new THREE.Vector2(f/r,(p+1)/n),this.faces.push(new THREE.Face3(t,e,o)),this.faceVertexUvs[0].push([a,h,c]),this.faces.push(new THREE.Face3(e,i,o)),this.faceVertexUvs[0].push([h.clone(),l,c.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry,THREE.TubeGeometry=function(t,e,r,n,i,o){THREE.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:t,segments:e,radius:r,radialSegments:n,closed:i},e=e||64,r=r||1,n=n||8,i=i||!1,o=o||THREE.TubeGeometry.NoTaper;var a,s,u,h,l,c,f,p,d,m,g=[],v=e+1,E=new THREE.Vector3;for(p=new THREE.TubeGeometry.FrenetFrames(t,e,i),d=p.normals,m=p.binormals,this.tangents=p.tangents,this.normals=d,this.binormals=m,p=0;v>p;p++)for(g[p]=[],u=p/(v-1),f=t.getPointAt(u),a=d[p],s=m[p],l=r*o(u),u=0;n>u;u++)h=u/n*2*Math.PI,c=-l*Math.cos(h),h=l*Math.sin(h),E.copy(f),E.x+=c*a.x+h*s.x,E.y+=c*a.y+h*s.y,E.z+=c*a.z+h*s.z,g[p][u]=this.vertices.push(new THREE.Vector3(E.x,E.y,E.z))-1;for(p=0;e>p;p++)for(u=0;n>u;u++)o=i?(p+1)%e:p+1,v=(u+1)%n,t=g[p][u],r=g[o][u],o=g[o][v],v=g[p][v],E=new THREE.Vector2(p/e,u/n),d=new THREE.Vector2((p+1)/e,u/n),m=new THREE.Vector2((p+1)/e,(u+1)/n),a=new THREE.Vector2(p/e,(u+1)/n),this.faces.push(new THREE.Face3(t,r,v)),this.faceVertexUvs[0].push([E,d,a]),this.faces.push(new THREE.Face3(r,o,v)),this.faceVertexUvs[0].push([d.clone(),m,a.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry,THREE.TubeGeometry.NoTaper=function(t){return 1},THREE.TubeGeometry.SinusoidalTaper=function(t){return Math.sin(Math.PI*t)},THREE.TubeGeometry.FrenetFrames=function(t,e,r){new THREE.Vector3;var n=new THREE.Vector3;new THREE.Vector3;var i=[],o=[],a=[],s=new THREE.Vector3,u=new THREE.Matrix4;e+=1;var h,l,c;for(this.tangents=i,this.normals=o,this.binormals=a,h=0;e>h;h++)l=h/(e-1),i[h]=t.getTangentAt(l),i[h].normalize();for(o[0]=new THREE.Vector3,a[0]=new THREE.Vector3,t=Number.MAX_VALUE,h=Math.abs(i[0].x),l=Math.abs(i[0].y),c=Math.abs(i[0].z),t>=h&&(t=h,n.set(1,0,0)),t>=l&&(t=l,n.set(0,1,0)),t>=c&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),o[0].crossVectors(i[0],s),a[0].crossVectors(i[0],o[0]),h=1;e>h;h++)o[h]=o[h-1].clone(),a[h]=a[h-1].clone(),s.crossVectors(i[h-1],i[h]),1e-4<s.length()&&(s.normalize(),n=Math.acos(THREE.Math.clamp(i[h-1].dot(i[h]),-1,1)),o[h].applyMatrix4(u.makeRotationAxis(s,n))),a[h].crossVectors(i[h],o[h]);if(r)for(n=Math.acos(THREE.Math.clamp(o[0].dot(o[e-1]),-1,1)),n/=e-1,0<i[0].dot(s.crossVectors(o[0],o[e-1]))&&(n=-n),h=1;e>h;h++)o[h].applyMatrix4(u.makeRotationAxis(i[h],n*h)),a[h].crossVectors(i[h],o[h])},THREE.PolyhedronGeometry=function(t,e,r,n){function i(t){var e=t.normalize().clone();e.index=u.vertices.push(e)-1;var r=Math.atan2(t.z,-t.x)/2/Math.PI+.5;return t=Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5,e.uv=new THREE.Vector2(r,1-t),e}function o(t,e,r){var n=new THREE.Face3(t.index,e.index,r.index,[t.clone(),e.clone(),r.clone()]);u.faces.push(n),g.copy(t).add(e).add(r).divideScalar(3),n=Math.atan2(g.z,-g.x),u.faceVertexUvs[0].push([s(t.uv,t,n),s(e.uv,e,n),s(r.uv,r,n)])}function a(t,e){var r=Math.pow(2,e);Math.pow(4,e);for(var n=i(u.vertices[t.a]),a=i(u.vertices[t.b]),s=i(u.vertices[t.c]),h=[],l=0;r>=l;l++){h[l]=[];for(var c=i(n.clone().lerp(s,l/r)),f=i(a.clone().lerp(s,l/r)),p=r-l,d=0;p>=d;d++)h[l][d]=0==d&&l==r?c:i(c.clone().lerp(f,d/p))}for(l=0;r>l;l++)for(d=0;2*(r-l)-1>d;d++)n=Math.floor(d/2),0==d%2?o(h[l][n+1],h[l+1][n],h[l][n]):o(h[l][n+1],h[l+1][n+1],h[l+1][n])}function s(t,e,r){return 0>r&&1===t.x&&(t=new THREE.Vector2(t.x-1,t.y)),0===e.x&&0===e.z&&(t=new THREE.Vector2(r/2/Math.PI+.5,t.y)),t.clone()}THREE.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:r,detail:n},r=r||1,n=n||0;for(var u=this,h=0,l=t.length;l>h;h+=3)i(new THREE.Vector3(t[h],t[h+1],t[h+2]));t=this.vertices;for(var c=[],f=h=0,l=e.length;l>h;h+=3,f++){var p=t[e[h]],d=t[e[h+1]],m=t[e[h+2]];c[f]=new THREE.Face3(p.index,d.index,m.index,[p.clone(),d.clone(),m.clone()])}for(var g=new THREE.Vector3,h=0,l=c.length;l>h;h++)a(c[h],n);for(h=0,l=this.faceVertexUvs[0].length;l>h;h++)e=this.faceVertexUvs[0][h],n=e[0].x,t=e[1].x,c=e[2].x,f=Math.max(n,Math.max(t,c)),p=Math.min(n,Math.min(t,c)),f>.9&&.1>p&&(.2>n&&(e[0].x+=1),.2>t&&(e[1].x+=1),.2>c&&(e[2].x+=1));for(h=0,l=this.vertices.length;l>h;h++)this.vertices[h].multiplyScalar(r);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,r)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry,THREE.DodecahedronGeometry=function(t,e){this.parameters={radius:t,detail:e};var r=(1+Math.sqrt(5))/2,n=1/r;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e)},THREE.DodecahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry,THREE.IcosahedronGeometry=function(t,e){var r=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry,THREE.OctahedronGeometry=function(t,e){this.parameters={radius:t,detail:e},THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry,THREE.TetrahedronGeometry=function(t,e){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry,THREE.ParametricGeometry=function(t,e,r){THREE.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:r};var n,i,o,a,s=this.vertices,u=this.faces,h=this.faceVertexUvs[0],l=e+1;for(n=0;r>=n;n++)for(a=n/r,i=0;e>=i;i++)o=i/e,o=t(o,a),s.push(o);var c,f,p,d;for(n=0;r>n;n++)for(i=0;e>i;i++)t=n*l+i,s=n*l+i+1,a=(n+1)*l+i+1,o=(n+1)*l+i,c=new THREE.Vector2(i/e,n/r),f=new THREE.Vector2((i+1)/e,n/r),p=new THREE.Vector2((i+1)/e,(n+1)/r),d=new THREE.Vector2(i/e,(n+1)/r),u.push(new THREE.Face3(t,s,o)),h.push([c,f,d]),u.push(new THREE.Face3(s,a,o)),h.push([f.clone(),p,d.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry,THREE.AxisHelper=function(t){t=t||1;var e=new Float32Array([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t]),r=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);t=new THREE.BufferGeometry,t.addAttribute("position",new THREE.BufferAttribute(e,3)),t.addAttribute("color",new THREE.BufferAttribute(r,3)),e=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors}),THREE.Line.call(this,t,e,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.AxisHelper.prototype.constructor=THREE.AxisHelper,THREE.ArrowHelper=function(){var t=new THREE.Geometry;t.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var e=new THREE.CylinderGeometry(0,.5,1,5,1);return e.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),function(r,n,i,o,a,s){THREE.Object3D.call(this),void 0===o&&(o=16776960),void 0===i&&(i=1),void 0===a&&(a=.2*i),void 0===s&&(s=.2*a),this.position.copy(n),this.line=new THREE.Line(t,new THREE.LineBasicMaterial({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new THREE.Mesh(e,new THREE.MeshBasicMaterial({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(r),this.setLength(i,a,s)}}(),THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper,THREE.ArrowHelper.prototype.setDirection=function(){var t,e=new THREE.Vector3;return function(r){.99999<r.y?this.quaternion.set(0,0,0,1):-.99999>r.y?this.quaternion.set(1,0,0,0):(e.set(r.z,0,-r.x).normalize(),t=Math.acos(r.y),this.quaternion.setFromAxisAngle(e,t))}}(),THREE.ArrowHelper.prototype.setLength=function(t,e,r){void 0===e&&(e=.2*t),void 0===r&&(r=.2*e),this.line.scale.set(1,t-e,1),this.line.updateMatrix(),this.cone.scale.set(r,e,r),this.cone.position.y=t,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},THREE.BoxHelper=function(t){var e=new THREE.BufferGeometry;e.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3)),THREE.Line.call(this,e,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),void 0!==t&&this.update(t)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.constructor=THREE.BoxHelper,THREE.BoxHelper.prototype.update=function(t){var e=t.geometry;null===e.boundingBox&&e.computeBoundingBox();var r=e.boundingBox.min,e=e.boundingBox.max,n=this.geometry.attributes.position.array;n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=r.x,n[4]=e.y,n[5]=e.z,n[6]=r.x,n[7]=e.y,n[8]=e.z,n[9]=r.x,n[10]=r.y,n[11]=e.z,n[12]=r.x,n[13]=r.y,n[14]=e.z,n[15]=e.x,n[16]=r.y,n[17]=e.z,n[18]=e.x,n[19]=r.y,n[20]=e.z,n[21]=e.x,n[22]=e.y,n[23]=e.z,n[24]=e.x,n[25]=e.y,n[26]=r.z,n[27]=r.x,n[28]=e.y,n[29]=r.z,n[30]=r.x,n[31]=e.y,n[32]=r.z,n[33]=r.x,n[34]=r.y,n[35]=r.z,n[36]=r.x,n[37]=r.y,n[38]=r.z,n[39]=e.x,n[40]=r.y,n[41]=r.z,n[42]=e.x,n[43]=r.y,n[44]=r.z,n[45]=e.x,n[46]=e.y,n[47]=r.z,n[48]=e.x,n[49]=e.y,n[50]=e.z,n[51]=e.x,n[52]=e.y,n[53]=r.z,n[54]=r.x,n[55]=e.y,n[56]=e.z,n[57]=r.x,n[58]=e.y,n[59]=r.z,n[60]=r.x,n[61]=r.y,n[62]=e.z,n[63]=r.x,n[64]=r.y,n[65]=r.z,n[66]=e.x,n[67]=r.y,n[68]=e.z,n[69]=e.x,n[70]=r.y,n[71]=r.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},THREE.BoundingBoxHelper=function(t,e){var r=void 0!==e?e:8947848;this.object=t,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:r,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper,THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(t){function e(t,e,n){r(t,n),r(e,n)}function r(t,e){n.vertices.push(new THREE.Vector3),n.colors.push(new THREE.Color(e)),void 0===o[t]&&(o[t]=[]),o[t].push(n.vertices.length-1)}var n=new THREE.Geometry,i=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),o={};e("n1","n2",16755200),e("n2","n4",16755200),e("n4","n3",16755200),e("n3","n1",16755200),e("f1","f2",16755200),e("f2","f4",16755200),e("f4","f3",16755200),e("f3","f1",16755200),e("n1","f1",16755200),e("n2","f2",16755200),e("n3","f3",16755200),e("n4","f4",16755200),e("p","n1",16711680),e("p","n2",16711680),e("p","n3",16711680),e("p","n4",16711680),e("u1","u2",43775),e("u2","u3",43775),e("u3","u1",43775),e("c","t",16777215),e("p","c",3355443),e("cn1","cn2",3355443),e("cn3","cn4",3355443),e("cf1","cf2",3355443),e("cf3","cf4",3355443),THREE.Line.call(this,n,i,THREE.LinePieces),this.camera=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.constructor=THREE.CameraHelper,THREE.CameraHelper.prototype.update=function(){var t,e,r=new THREE.Vector3,n=new THREE.Camera,i=function(i,o,a,s){if(r.set(o,a,s).unproject(n),i=e[i],void 0!==i)for(o=0,a=i.length;a>o;o++)t.vertices[i[o]].copy(r)};return function(){t=this.geometry,e=this.pointMap,n.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),t.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(t,e){THREE.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,e=e||1;var r=new THREE.Geometry;r.vertices.push(new THREE.Vector3(-e,e,0),new THREE.Vector3(e,e,0),new THREE.Vector3(e,-e,0),new THREE.Vector3(-e,-e,0),new THREE.Vector3(-e,e,0));var n=new THREE.LineBasicMaterial({fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Line(r,n),this.add(this.lightPlane),r=new THREE.Geometry,r.vertices.push(new THREE.Vector3,new THREE.Vector3),n=new THREE.LineBasicMaterial({fog:!1}),n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(r,n),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper,THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var t=new THREE.Vector3,e=new THREE.Vector3,r=new THREE.Vector3;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(e,t),this.lightPlane.lookAt(r),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(r),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(t,e){var r=void 0!==e?e:16777215,n=[0,0],i={},o=function(t,e){return t-e},a=["a","b","c"],s=new THREE.BufferGeometry,u=t.geometry.clone();u.mergeVertices(),u.computeFaceNormals();for(var h=u.vertices,u=u.faces,l=0,c=0,f=u.length;f>c;c++)for(var p=u[c],d=0;3>d;d++){n[0]=p[a[d]],n[1]=p[a[(d+1)%3]],n.sort(o);var m=n.toString();void 0===i[m]?(i[m]={vert1:n[0],vert2:n[1],face1:c,face2:void 0},l++):i[m].face2=c}n=new Float32Array(6*l),o=0;for(m in i)a=i[m],(void 0===a.face2||.9999>u[a.face1].normal.dot(u[a.face2].normal))&&(l=h[a.vert1],n[o++]=l.x,n[o++]=l.y,n[o++]=l.z,l=h[a.vert2],n[o++]=l.x,n[o++]=l.y,n[o++]=l.z);s.addAttribute("position",new THREE.BufferAttribute(n,3)),THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:r}),THREE.LinePieces),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype),THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper,THREE.FaceNormalsHelper=function(t,e,r,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==r?r:16776960,n=void 0!==n?n:1,e=new THREE.Geometry,r=0;for(var i=this.object.geometry.faces.length;i>r;r++)e.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,e,new THREE.LineBasicMaterial({color:t,linewidth:n}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper,THREE.FaceNormalsHelper.prototype.update=function(){var t=this.geometry.vertices,e=this.object,r=e.geometry.vertices,n=e.geometry.faces,i=e.matrixWorld;e.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(i);for(var o=e=0,a=n.length;a>e;e++,o+=2){var s=n[e];t[o].copy(r[s.a]).add(r[s.b]).add(r[s.c]).divideScalar(3).applyMatrix4(i),t[o+1].copy(s.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(t[o])}return this.geometry.verticesNeedUpdate=!0,this},THREE.GridHelper=function(t,e){var r=new THREE.Geometry,n=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var i=-t;t>=i;i+=e){r.vertices.push(new THREE.Vector3(-t,0,i),new THREE.Vector3(t,0,i),new THREE.Vector3(i,0,-t),new THREE.Vector3(i,0,t));var o=0===i?this.color1:this.color2;r.colors.push(o,o,o,o)}THREE.Line.call(this,r,n,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.constructor=THREE.GridHelper,THREE.GridHelper.prototype.setColors=function(t,e){this.color1.set(t),this.color2.set(e),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(t,e,r,n){for(THREE.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color],t=new THREE.SphereGeometry(e,4,2),t.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2)),e=0;8>e;e++)t.faces[e].color=this.colors[4>e?0:1];e=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0}),this.lightSphere=new THREE.Mesh(t,e),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper,THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var t=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(t,e){this.light=t,this.light.updateMatrixWorld();var r=new THREE.SphereGeometry(e,4,2),n=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,r,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper,THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SkeletonHelper=function(t){this.bones=this.getBoneList(t);for(var e=new THREE.Geometry,r=0;r<this.bones.length;r++)this.bones[r].parent instanceof THREE.Bone&&(e.vertices.push(new THREE.Vector3),e.vertices.push(new THREE.Vector3),e.colors.push(new THREE.Color(0,0,1)),e.colors.push(new THREE.Color(0,1,0)));r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0}),THREE.Line.call(this,e,r,THREE.LinePieces),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()},THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype),THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper,THREE.SkeletonHelper.prototype.getBoneList=function(t){var e=[];t instanceof THREE.Bone&&e.push(t);for(var r=0;r<t.children.length;r++)e.push.apply(e,this.getBoneList(t.children[r]));return e},THREE.SkeletonHelper.prototype.update=function(){for(var t=this.geometry,e=(new THREE.Matrix4).getInverse(this.root.matrixWorld),r=new THREE.Matrix4,n=0,i=0;i<this.bones.length;i++){var o=this.bones[i];o.parent instanceof THREE.Bone&&(r.multiplyMatrices(e,o.matrixWorld),t.vertices[n].setFromMatrixPosition(r),r.multiplyMatrices(e,o.parent.matrixWorld),t.vertices[n+1].setFromMatrixPosition(r),n+=2)}t.verticesNeedUpdate=!0,t.computeBoundingSphere()},THREE.SpotLightHelper=function(t){THREE.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,t=new THREE.CylinderGeometry(0,1,1,8,1,!0),t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var e=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(t,e),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper,THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(){var r=this.light.distance?this.light.distance:1e4,n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(t,e,r,n){this.object=t,this.size=void 0!==e?e:1,e=void 0!==r?r:16711680,n=void 0!==n?n:1,r=new THREE.Geometry,t=t.geometry.faces;for(var i=0,o=t.length;o>i;i++)for(var a=0,s=t[i].vertexNormals.length;s>a;a++)r.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,r,new THREE.LineBasicMaterial({color:e,linewidth:n}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper,THREE.VertexNormalsHelper.prototype.update=function(t){var e=new THREE.Vector3;return function(t){t=["a","b","c","d"],this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var r=this.geometry.vertices,n=this.object.geometry.vertices,i=this.object.geometry.faces,o=this.object.matrixWorld,a=0,s=0,u=i.length;u>s;s++)for(var h=i[s],l=0,c=h.vertexNormals.length;c>l;l++){var f=h.vertexNormals[l];r[a].copy(n[h[t[l]]]).applyMatrix4(o),e.copy(f).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),e.add(r[a]),a+=1,r[a].copy(e),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(t,e,r,n){this.object=t,this.size=void 0!==e?e:1,e=void 0!==r?r:255,n=void 0!==n?n:1,r=new THREE.Geometry,t=t.geometry.faces;for(var i=0,o=t.length;o>i;i++)for(var a=0,s=t[i].vertexTangents.length;s>a;a++)r.vertices.push(new THREE.Vector3),r.vertices.push(new THREE.Vector3);THREE.Line.call(this,r,new THREE.LineBasicMaterial({color:e,linewidth:n}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.constructor=THREE.VertexTangentsHelper,THREE.VertexTangentsHelper.prototype.update=function(t){var e=new THREE.Vector3;return function(t){t=["a","b","c","d"],this.object.updateMatrixWorld(!0);for(var r=this.geometry.vertices,n=this.object.geometry.vertices,i=this.object.geometry.faces,o=this.object.matrixWorld,a=0,s=0,u=i.length;u>s;s++)for(var h=i[s],l=0,c=h.vertexTangents.length;c>l;l++){var f=h.vertexTangents[l];r[a].copy(n[h[t[l]]]).applyMatrix4(o),e.copy(f).transformDirection(o).multiplyScalar(this.size),e.add(r[a]),a+=1,r[a].copy(e),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(t,e){var r=void 0!==e?e:16777215,n=[0,0],i={},o=function(t,e){return t-e},a=["a","b","c"],s=new THREE.BufferGeometry;if(t.geometry instanceof THREE.Geometry){for(var u=t.geometry.vertices,h=t.geometry.faces,l=0,c=new Uint32Array(6*h.length),f=0,p=h.length;p>f;f++)for(var d=h[f],m=0;3>m;m++){n[0]=d[a[m]],n[1]=d[a[(m+1)%3]],n.sort(o);var g=n.toString();void 0===i[g]&&(c[2*l]=n[0],c[2*l+1]=n[1],i[g]=!0,l++)}for(n=new Float32Array(6*l),f=0,p=l;p>f;f++)for(m=0;2>m;m++)l=u[c[2*f+m]],a=6*f+3*m,n[a+0]=l.x,n[a+1]=l.y,n[a+2]=l.z;s.addAttribute("position",new THREE.BufferAttribute(n,3))}else if(t.geometry instanceof THREE.BufferGeometry){if(void 0!==t.geometry.attributes.index){u=t.geometry.attributes.position.array,p=t.geometry.attributes.index.array,h=t.geometry.drawcalls,l=0,0===h.length&&(h=[{count:p.length,index:0,start:0}]);for(var c=new Uint32Array(2*p.length),d=0,v=h.length;v>d;++d)for(var m=h[d].start,g=h[d].count,a=h[d].index,f=m,E=m+g;E>f;f+=3)for(m=0;3>m;m++)n[0]=a+p[f+m],n[1]=a+p[f+(m+1)%3],n.sort(o),g=n.toString(),void 0===i[g]&&(c[2*l]=n[0],c[2*l+1]=n[1],i[g]=!0,l++);for(n=new Float32Array(6*l),f=0,p=l;p>f;f++)for(m=0;2>m;m++)a=6*f+3*m,l=3*c[2*f+m],n[a+0]=u[l],n[a+1]=u[l+1],n[a+2]=u[l+2]}else for(u=t.geometry.attributes.position.array,l=u.length/3,c=l/3,n=new Float32Array(6*l),f=0,p=c;p>f;f++)for(m=0;3>m;m++)a=18*f+6*m,c=9*f+3*m,n[a+0]=u[c],n[a+1]=u[c+1],n[a+2]=u[c+2],l=9*f+(m+1)%3*3,n[a+3]=u[l],n[a+4]=u[l+1],n[a+5]=u[l+2];s.addAttribute("position",new THREE.BufferAttribute(n,3))}THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:r}),THREE.LinePieces),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper,THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(t){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject,THREE.MorphBlendMesh=function(t,e){THREE.Mesh.call(this,t,e),this.animationsMap={},this.animationsList=[];var r=this.geometry.morphTargets.length;this.createAnimation("__default",0,r-1,r/1),this.setAnimationWeight("__default",1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh,THREE.MorphBlendMesh.prototype.createAnimation=function(t,e,r,n){e={startFrame:e,endFrame:r,length:r-e+1,fps:n,duration:(r-e)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1},this.animationsMap[t]=e,this.animationsList.push(e)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(t){for(var e,r=/([a-z]+)_?(\d+)/,n={},i=this.geometry,o=0,a=i.morphTargets.length;a>o;o++){var s=i.morphTargets[o].name.match(r);if(s&&1<s.length){var u=s[1];n[u]||(n[u]={start:1/0,end:-(1/0)}),s=n[u],o<s.start&&(s.start=o),o>s.end&&(s.end=o),e||(e=u)}}for(u in n)s=n[u],this.createAnimation(u,s.start,s.end,t);this.firstAnimation=e},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(t){(t=this.animationsMap[t])&&(t.direction=1,t.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(t){(t=this.animationsMap[t])&&(t.direction=-1,t.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(t,e){var r=this.animationsMap[t];r&&(r.fps=e,r.duration=(r.end-r.start)/r.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(t,e){var r=this.animationsMap[t];r&&(r.duration=e,r.fps=(r.end-r.start)/r.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(t,e){var r=this.animationsMap[t];r&&(r.weight=e)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(t,e){var r=this.animationsMap[t];r&&(r.time=e)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(t){var e=0;return(t=this.animationsMap[t])&&(e=t.time),e},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(t){var e=-1;return(t=this.animationsMap[t])&&(e=t.duration),e},THREE.MorphBlendMesh.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("animation["+t+"] undefined")},THREE.MorphBlendMesh.prototype.stopAnimation=function(t){(t=this.animationsMap[t])&&(t.active=!1)},THREE.MorphBlendMesh.prototype.update=function(t){for(var e=0,r=this.animationsList.length;r>e;e++){var n=this.animationsList[e];if(n.active){var i=n.duration/n.length;n.time+=n.direction*t,n.mirroredLoop?(n.time>n.duration||0>n.time)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),0>n.time&&(n.time=0,n.directionBackwards=!1)):(n.time%=n.duration,0>n.time&&(n.time+=n.duration));var o=n.startFrame+THREE.Math.clamp(Math.floor(n.time/i),0,n.length-1),a=n.weight;o!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*a,this.morphTargetInfluences[o]=0,n.lastFrame=n.currentFrame,n.currentFrame=o),i=n.time%i/i,n.directionBackwards&&(i=1-i),this.morphTargetInfluences[n.currentFrame]=i*a,this.morphTargetInfluences[n.lastFrame]=(1-i)*a}}},function(){function t(t,e){if(t!==e){var r=null===t,n=t===T,i=t===t,o=null===e,a=e===T,s=e===e;if(t>e&&!o||!i||r&&!a&&s||n&&s)return 1;if(e>t&&!r||!s||o&&!n&&i||a&&i)return-1}return 0}function e(t,e,r){for(var n=t.length,i=r?n:-1;r?i--:++i<n;)if(e(t[i],i,t))return i;return-1}function r(t,e,r){if(e!==e)return f(t,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function n(t){return"function"==typeof t||!1}function i(t){return"string"==typeof t?t:null==t?"":t+""}function o(t,e){for(var r=-1,n=t.length;++r<n&&e.indexOf(t.charAt(r))>-1;);return r}function a(t,e){for(var r=t.length;r--&&e.indexOf(t.charAt(r))>-1;);return r}function s(e,r){return t(e.criteria,r.criteria)||e.index-r.index}function u(e,r,n){for(var i=-1,o=e.criteria,a=r.criteria,s=o.length,u=n.length;++i<s;){var h=t(o[i],a[i]);if(h)return i>=u?h:h*(n[i]?1:-1)}return e.index-r.index}function h(t){return Vt[t]}function l(t){return jt[t]}function c(t){return"\\"+Xt[t]}function f(t,e,r){for(var n=t.length,i=e+(r?0:-1);r?i--:++i<n;){var o=t[i];if(o!==o)return i}return-1}function p(t){return!!t&&"object"==typeof t}function d(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function m(t,e){for(var r=-1,n=t.length,i=-1,o=[];++r<n;)t[r]===e&&(t[r]=I,o[++i]=r);return o}function g(t,e){for(var r,n=-1,i=t.length,o=-1,a=[];++n<i;){var s=t[n],u=e?e(s,n,t):s;n&&r===u||(r=u,a[++o]=s)}return a}function v(t){for(var e=-1,r=t.length;++e<r&&d(t.charCodeAt(e)););return e}function E(t){for(var e=t.length;e--&&d(t.charCodeAt(e)););return e}function y(t){return Gt[t]}function x(d){function q(t){if(p(t)&&!Hs(t)&&!(t instanceof Vt)){if(t instanceof J)return t;if(Ko.call(t,"__chain__")&&Ko.call(t,"__wrapped__"))return hn(t)}return new J(t)}function Q(){}function J(t,e,r){this.__wrapped__=t,this.__actions__=r||[],this.__chain__=!!e}function Vt(t){this.__wrapped__=t,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=wa,this.__views__=null}function jt(){var t=this.__actions__,e=this.__iteratees__,r=this.__views__,n=new Vt(this.__wrapped__);return n.__actions__=t?re(t):null,
n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=e?re(e):null,n.__takeCount__=this.__takeCount__,n.__views__=r?re(r):null,n}function Gt(){if(this.__filtered__){var t=new Vt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Wt(){var t=this.__wrapped__.value();if(!Hs(t))return er(t,this.__actions__);var e=this.__dir__,r=0>e,n=zr(0,t.length,this.__views__),i=n.start,o=n.end,a=o-i,s=r?o:i-1,u=ya(a,this.__takeCount__),h=this.__iteratees__,l=h?h.length:0,c=0,f=[];t:for(;a--&&u>c;){s+=e;for(var p=-1,d=t[s];++p<l;){var m=h[p],g=m.iteratee,v=m.type;if(v==O){if(m.done&&(r?s>m.index:s<m.index)&&(m.count=0,m.done=!1),m.index=s,!m.done){var E=m.limit;if(!(m.done=E>-1?m.count++>=E:!g(d)))continue t}}else{var y=g(d);if(v==k)d=y;else if(!y){if(v==N)continue t;break t}}}f[c++]=d}return f}function Xt(){this.__data__={}}function qt(t){return this.has(t)&&delete this.__data__[t]}function Yt(t){return"__proto__"==t?T:this.__data__[t]}function Kt(t){return"__proto__"!=t&&Ko.call(this.__data__,t)}function Zt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Qt(t){var e=t?t.length:0;for(this.data={hash:da(null),set:new ua};e--;)this.push(t[e])}function $t(t,e){var r=t.data,n="string"==typeof e||Si(e)?r.set.has(e):r.hash[e];return n?0:-1}function ee(t){var e=this.data;"string"==typeof t||Si(t)?e.set.add(t):e.hash[t]=!0}function re(t,e){var r=-1,n=t.length;for(e||(e=Do(n));++r<n;)e[r]=t[r];return e}function ne(t,e){for(var r=-1,n=t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function ie(t,e){for(var r=t.length;r--&&e(t[r],r,t)!==!1;);return t}function oe(t,e){for(var r=-1,n=t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function ae(t,e,r,n){for(var i=-1,o=t.length,a=n,s=a;++i<o;){var u=t[i],h=+e(u);r(h,a)&&(a=h,s=u)}return s}function se(t,e){for(var r=-1,n=t.length,i=-1,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[++i]=a)}return o}function ue(t,e){for(var r=-1,n=t.length,i=Do(n);++r<n;)i[r]=e(t[r],r,t);return i}function he(t,e,r,n){var i=-1,o=t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function le(t,e,r,n){var i=t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function ce(t,e){for(var r=-1,n=t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function fe(t){for(var e=t.length,r=0;e--;)r+=+t[e]||0;return r}function pe(t,e){return t===T?e:t}function de(t,e,r,n){return t!==T&&Ko.call(n,r)?t:e}function me(t,e,r){for(var n=-1,i=Us(e),o=i.length;++n<o;){var a=i[n],s=t[a],u=r(s,e[a],a,t,e);(u===u?u===s:s!==s)&&(s!==T||a in t)||(t[a]=u)}return t}function ge(t,e){return null==e?t:Ee(e,Us(e),t)}function ve(t,e){for(var r=-1,n=null==t,i=!n&&Xr(t),o=i?t.length:0,a=e.length,s=Do(a);++r<a;){var u=e[r];s[r]=i?qr(u,o)?t[u]:T:n?T:t[u]}return s}function Ee(t,e,r){r||(r={});for(var n=-1,i=e.length;++n<i;){var o=e[n];r[o]=t[o]}return r}function ye(t,e,r){var n=typeof t;return"function"==n?e===T?t:ir(t,e,r):null==t?To:"object"==n?ke(t):e===T?Ho(t):Ue(t,e)}function xe(t,e,r,n,i,o,a){var s;if(r&&(s=i?r(t,n,i):r(t)),s!==T)return s;if(!Si(t))return t;var u=Hs(t);if(u){if(s=Vr(t),!e)return re(t,s)}else{var h=Qo.call(t),l=h==X;if(h!=K&&h!=z&&(!l||i))return It[h]?Gr(t,h,e):i?t:{};if(s=jr(l?{}:t),!e)return ge(s,t)}o||(o=[]),a||(a=[]);for(var c=o.length;c--;)if(o[c]==t)return a[c];return o.push(t),a.push(s),(u?ne:Ae)(t,function(n,i){s[i]=xe(n,e,r,i,t,o,a)}),s}function Te(t,e,r){if("function"!=typeof t)throw new jo(U);return ha(function(){t.apply(T,r)},e)}function Re(t,e){var n=t?t.length:0,i=[];if(!n)return i;var o=-1,a=kr(),s=a==r,u=s&&e.length>=200?Ia(e):null,h=e.length;u&&(a=$t,s=!1,e=u);t:for(;++o<n;){var l=t[o];if(s&&l===l){for(var c=h;c--;)if(e[c]===l)continue t;i.push(l)}else a(e,l,0)<0&&i.push(l)}return i}function be(t,e){var r=!0;return Ba(t,function(t,n,i){return r=!!e(t,n,i)}),r}function _e(t,e,r,n){var i=n,o=i;return Ba(t,function(t,a,s){var u=+e(t,a,s);(r(u,i)||u===n&&u===o)&&(i=u,o=t)}),o}function we(t,e,r,n){var i=t.length;for(r=null==r?0:+r||0,0>r&&(r=-r>i?0:i+r),n=n===T||n>i?i:+n||0,0>n&&(n+=i),i=r>n?0:n>>>0,r>>>=0;i>r;)t[r++]=e;return t}function Me(t,e){var r=[];return Ba(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r}function He(t,e,r,n){var i;return r(t,function(t,r,o){return e(t,r,o)?(i=n?r:t,!1):void 0}),i}function Se(t,e,r){for(var n=-1,i=t.length,o=-1,a=[];++n<i;){var s=t[n];if(p(s)&&Xr(s)&&(r||Hs(s)||Ti(s))){e&&(s=Se(s,e,r));for(var u=-1,h=s.length;++u<h;)a[++o]=s[u]}else r||(a[++o]=s)}return a}function Ce(t,e){return Na(t,e,qi)}function Ae(t,e){return Na(t,e,Us)}function Le(t,e){return ka(t,e,Us)}function Pe(t,e){for(var r=-1,n=e.length,i=-1,o=[];++r<n;){var a=e[r];Cs(t[a])&&(o[++i]=a)}return o}function Fe(t,e,r){if(null!=t){r!==T&&r in sn(t)&&(e=[r]);for(var n=0,i=e.length;null!=t&&i>n;)t=t[e[n++]];return n&&n==i?t:T}}function De(t,e,r,n,i,o){return t===e?!0:null==t||null==e||!Si(t)&&!p(e)?t!==t&&e!==e:Be(t,e,De,r,n,i,o)}function Be(t,e,r,n,i,o,a){var s=Hs(t),u=Hs(e),h=V,l=V;s||(h=Qo.call(t),h==z?h=K:h!=K&&(s=Oi(t))),u||(l=Qo.call(e),l==z?l=K:l!=K&&(u=Oi(e)));var c=h==K,f=l==K,p=h==l;if(p&&!s&&!c)return Dr(t,e,h);if(!i){var d=c&&Ko.call(t,"__wrapped__"),m=f&&Ko.call(e,"__wrapped__");if(d||m)return r(d?t.value():t,m?e.value():e,n,i,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var g=o.length;g--;)if(o[g]==t)return a[g]==e;o.push(t),a.push(e);var v=(s?Fr:Br)(t,e,r,n,i,o,a);return o.pop(),a.pop(),v}function Oe(t,e,r){var n=e.length,i=n,o=!r;if(null==t)return!i;for(t=sn(t);n--;){var a=e[n];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++n<i;){a=e[n];var s=a[0],u=t[s],h=a[1];if(o&&a[2]){if(u===T&&!(s in t))return!1}else{var l=r?r(u,h,s):T;if(!(l===T?De(h,u,r,!0):l))return!1}}return!0}function Ne(t,e){var r=-1,n=Xr(t)?Do(t.length):[];return Ba(t,function(t,i,o){n[++r]=e(t,i,o)}),n}function ke(t){var e=Ur(t);if(1==e.length&&e[0][2]){var r=e[0][0],n=e[0][1];return function(t){return null==t?!1:t[r]===n&&(n!==T||r in sn(t))}}return function(t){return Oe(t,e)}}function Ue(t,e){var r=Hs(t),n=Kr(t)&&$r(e),i=t+"";return t=un(t),function(o){if(null==o)return!1;var a=i;if(o=sn(o),!(!r&&n||a in o)){if(o=1==t.length?o:Fe(o,qe(t,0,-1)),null==o)return!1;a=Rn(t),o=sn(o)}return o[a]===e?e!==T||a in o:De(e,o[a],T,!0)}}function Ie(t,e,r,n,i){if(!Si(t))return t;var o=Xr(e)&&(Hs(e)||Oi(e)),a=o?null:Us(e);return ne(a||e,function(s,u){if(a&&(u=s,s=e[u]),p(s))n||(n=[]),i||(i=[]),ze(t,e,u,Ie,r,n,i);else{var h=t[u],l=r?r(h,s,u,t,e):T,c=l===T;c&&(l=s),l===T&&(!o||u in t)||!c&&(l===l?l===h:h!==h)||(t[u]=l)}}),t}function ze(t,e,r,n,i,o,a){for(var s=o.length,u=e[r];s--;)if(o[s]==u)return void(t[r]=a[s]);var h=t[r],l=i?i(h,u,r,t,e):T,c=l===T;c&&(l=u,Xr(u)&&(Hs(u)||Oi(u))?l=Hs(h)?h:Xr(h)?re(h):[]:As(u)||Ti(u)?l=Ti(h)?zi(h):As(h)?h:{}:c=!1),o.push(u),a.push(l),c?t[r]=n(l,u,i,o,a):(l===l?l!==h:h===h)&&(t[r]=l)}function Ve(t){return function(e){return null==e?T:e[t]}}function je(t){var e=t+"";return t=un(t),function(r){return Fe(r,t,e)}}function Ge(t,e){for(var r=t?e.length:0;r--;){var n=e[r];if(n!=i&&qr(n)){var i=n;la.call(t,n,1)}}return t}function We(t,e){return t+ia(ba()*(e-t+1))}function Xe(t,e,r,n,i){return i(t,function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)}),r}function qe(t,e,r){var n=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),r=r===T||r>i?i:+r||0,0>r&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Do(i);++n<i;)o[n]=t[n+e];return o}function Ye(t,e){var r;return Ba(t,function(t,n,i){return r=e(t,n,i),!r}),!!r}function Ke(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}function Ze(t,e,r){var n=Or(),i=-1;e=ue(e,function(t){return n(t)});var o=Ne(t,function(t){var r=ue(e,function(e){return e(t)});return{criteria:r,index:++i,value:t}});return Ke(o,function(t,e){return u(t,e,r)})}function Qe(t,e){var r=0;return Ba(t,function(t,n,i){r+=+e(t,n,i)||0}),r}function $e(t,e){var n=-1,i=kr(),o=t.length,a=i==r,s=a&&o>=200,u=s?Ia():null,h=[];u?(i=$t,a=!1):(s=!1,u=e?[]:h);t:for(;++n<o;){var l=t[n],c=e?e(l,n,t):l;if(a&&l===l){for(var f=u.length;f--;)if(u[f]===c)continue t;e&&u.push(c),h.push(l)}else i(u,c,0)<0&&((e||s)&&u.push(c),h.push(l))}return h}function Je(t,e){for(var r=-1,n=e.length,i=Do(n);++r<n;)i[r]=t[e[r]];return i}function tr(t,e,r,n){for(var i=t.length,o=n?i:-1;(n?o--:++o<i)&&e(t[o],o,t););return r?qe(t,n?0:o,n?o+1:i):qe(t,n?o+1:0,n?i:o)}function er(t,e){var r=t;r instanceof Vt&&(r=r.value());for(var n=-1,i=e.length;++n<i;){var o=[r],a=e[n];sa.apply(o,a.args),r=a.func.apply(a.thisArg,o)}return r}function rr(t,e,r){var n=0,i=t?t.length:n;if("number"==typeof e&&e===e&&Sa>=i){for(;i>n;){var o=n+i>>>1,a=t[o];(r?e>=a:e>a)&&null!==a?n=o+1:i=o}return i}return nr(t,e,To,r)}function nr(t,e,r,n){e=r(e);for(var i=0,o=t?t.length:0,a=e!==e,s=null===e,u=e===T;o>i;){var h=ia((i+o)/2),l=r(t[h]),c=l!==T,f=l===l;if(a)var p=f||n;else p=s?f&&c&&(n||null!=l):u?f&&(n||c):null==l?!1:n?e>=l:e>l;p?i=h+1:o=h}return ya(o,Ha)}function ir(t,e,r){if("function"!=typeof t)return To;if(e===T)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)};case 5:return function(r,n,i,o,a){return t.call(e,r,n,i,o,a)}}return function(){return t.apply(e,arguments)}}function or(t){return ea.call(t,0)}function ar(t,e,r){for(var n=r.length,i=-1,o=Ea(t.length-n,0),a=-1,s=e.length,u=Do(o+s);++a<s;)u[a]=e[a];for(;++i<n;)u[r[i]]=t[i];for(;o--;)u[a++]=t[i++];return u}function sr(t,e,r){for(var n=-1,i=r.length,o=-1,a=Ea(t.length-i,0),s=-1,u=e.length,h=Do(a+u);++o<a;)h[o]=t[o];for(var l=o;++s<u;)h[l+s]=e[s];for(;++n<i;)h[l+r[n]]=t[o++];return h}function ur(t,e){return function(r,n,i){var o=e?e():{};if(n=Or(n,i,3),Hs(r))for(var a=-1,s=r.length;++a<s;){var u=r[a];t(o,u,n(u,a,r),r)}else Ba(r,function(e,r,i){t(o,e,n(e,r,i),i)});return o}}function hr(t){return pi(function(e,r){var n=-1,i=null==e?0:r.length,o=i>2?r[i-2]:T,a=i>2?r[2]:T,s=i>1?r[i-1]:T;for("function"==typeof o?(o=ir(o,s,5),i-=2):(o="function"==typeof s?s:T,i-=o?1:0),a&&Yr(r[0],r[1],a)&&(o=3>i?T:o,i=1);++n<i;){var u=r[n];u&&t(e,u,o)}return e})}function lr(t,e){return function(r,n){var i=r?Va(r):0;if(!Qr(i))return t(r,n);for(var o=e?i:-1,a=sn(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}function cr(t){return function(e,r,n){for(var i=sn(e),o=n(e),a=o.length,s=t?a:-1;t?s--:++s<a;){var u=o[s];if(r(i[u],u,i)===!1)break}return e}}function fr(t,e){function r(){var i=this&&this!==Jt&&this instanceof r?n:t;return i.apply(e,arguments)}var n=dr(t);return r}function pr(t){return function(e){for(var r=-1,n=Eo(no(e)),i=n.length,o="";++r<i;)o=t(o,n[r],r);return o}}function dr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4])}var r=Da(t.prototype),n=t.apply(r,e);return Si(n)?n:r}}function mr(t){function e(r,n,i){i&&Yr(r,n,i)&&(n=null);var o=Pr(r,t,null,null,null,null,null,n);return o.placeholder=e.placeholder,o}return e}function gr(t,e){return function(r,n,i){if(i&&Yr(r,n,i)&&(n=null),n=Or(n,i,3),1==n.length){r=an(r);var o=ae(r,n,t,e);if(!r.length||o!==e)return o}return _e(r,n,t,e)}}function vr(t,r){return function(n,i,o){if(i=Or(i,o,3),Hs(n)){var a=e(n,i,r);return a>-1?n[a]:T}return He(n,i,t)}}function Er(t){return function(r,n,i){return r&&r.length?(n=Or(n,i,3),e(r,n,t)):-1}}function yr(t){return function(e,r,n){return r=Or(r,n,3),He(e,r,t,!0)}}function xr(t){return function(){for(var e,r=arguments.length,n=t?r:-1,i=0,o=Do(r);t?n--:++n<r;){var a=o[i++]=arguments[n];if("function"!=typeof a)throw new jo(U);!e&&J.prototype.thru&&"wrapper"==Nr(a)&&(e=new J([]))}for(n=e?-1:r;++n<r;){a=o[n];var s=Nr(a),u="wrapper"==s?za(a):null;e=u&&Zr(u[0])&&u[1]==(A|M|S|L)&&!u[4].length&&1==u[9]?e[Nr(u[0])].apply(e,u[3]):1==a.length&&Zr(a)?e[s]():e.thru(a)}return function(){var t=arguments;if(e&&1==t.length&&Hs(t[0]))return e.plant(t[0]).value();for(var n=0,i=r?o[n].apply(this,t):t[0];++n<r;)i=o[n].call(this,i);return i}}}function Tr(t,e){return function(r,n,i){return"function"==typeof n&&i===T&&Hs(r)?t(r,n):e(r,ir(n,i,3))}}function Rr(t){return function(e,r,n){return("function"!=typeof r||n!==T)&&(r=ir(r,n,3)),t(e,r,qi)}}function br(t){return function(e,r,n){return("function"!=typeof r||n!==T)&&(r=ir(r,n,3)),t(e,r)}}function _r(t){return function(e,r,n){var i={};return r=Or(r,n,3),Ae(e,function(e,n,o){var a=r(e,n,o);n=t?a:n,e=t?e:a,i[n]=e}),i}}function wr(t){return function(e,r,n){return e=i(e),(t?e:"")+Cr(e,r,n)+(t?"":e)}}function Mr(t){var e=pi(function(r,n){var i=m(n,e.placeholder);return Pr(r,t,null,n,i)});return e}function Hr(t,e){return function(r,n,i,o){var a=arguments.length<3;return"function"==typeof n&&o===T&&Hs(r)?t(r,n,i,a):Xe(r,Or(n,o,4),i,a,e)}}function Sr(t,e,r,n,i,o,a,s,u,h){function l(){for(var y=arguments.length,x=y,R=Do(y);x--;)R[x]=arguments[x];if(n&&(R=ar(R,n,i)),o&&(R=sr(R,o,a)),d||v){var w=l.placeholder,M=m(R,w);if(y-=M.length,h>y){var H=s?re(s):null,A=Ea(h-y,0),L=d?M:null,P=d?null:M,F=d?R:null,D=d?null:R;e|=d?S:C,e&=~(d?C:S),g||(e&=~(b|_));var B=[t,e,r,F,L,D,P,H,u,A],O=Sr.apply(T,B);return Zr(t)&&ja(O,B),O.placeholder=w,O}}var N=f?r:this,k=p?N[t]:t;return s&&(R=rn(R,s)),c&&u<R.length&&(R.length=u),this&&this!==Jt&&this instanceof l&&(k=E||dr(t)),k.apply(N,R)}var c=e&A,f=e&b,p=e&_,d=e&M,g=e&w,v=e&H,E=p?null:dr(t);return l}function Cr(t,e,r){var n=t.length;if(e=+e,n>=e||!ga(e))return"";var i=e-n;return r=null==r?" ":r+"",ho(r,ra(i/r.length)).slice(0,i)}function Ar(t,e,r,n){function i(){for(var e=-1,s=arguments.length,u=-1,h=n.length,l=Do(s+h);++u<h;)l[u]=n[u];for(;s--;)l[u++]=arguments[++e];var c=this&&this!==Jt&&this instanceof i?a:t;return c.apply(o?r:this,l)}var o=e&b,a=dr(t);return i}function Lr(t){return function(e,r,n,i){var o=Or(n);return null==n&&o===ye?rr(e,r,t):nr(e,r,o(n,i,1),t)}}function Pr(t,e,r,n,i,o,a,s){var u=e&_;if(!u&&"function"!=typeof t)throw new jo(U);var h=n?n.length:0;if(h||(e&=~(S|C),n=i=null),h-=i?i.length:0,e&C){var l=n,c=i;n=i=null}var f=u?null:za(t),p=[t,e,r,n,i,l,c,o,a,s];if(f&&(Jr(p,f),e=p[1],s=p[9]),p[9]=null==s?u?0:t.length:Ea(s-h,0)||0,e==b)var d=fr(p[0],p[2]);else d=e!=S&&e!=(b|S)||p[4].length?Sr.apply(T,p):Ar.apply(T,p);var m=f?Ua:ja;return m(d,p)}function Fr(t,e,r,n,i,o,a){var s=-1,u=t.length,h=e.length;if(u!=h&&!(i&&h>u))return!1;for(;++s<u;){var l=t[s],c=e[s],f=n?n(i?c:l,i?l:c,s):T;if(f!==T){if(f)continue;return!1}if(i){if(!ce(e,function(t){return l===t||r(l,t,n,i,o,a)}))return!1}else if(l!==c&&!r(l,c,n,i,o,a))return!1}return!0}function Dr(t,e,r){switch(r){case j:case G:return+t==+e;case W:return t.name==e.name&&t.message==e.message;case Y:return t!=+t?e!=+e:t==+e;case Z:case $:return t==e+""}return!1}function Br(t,e,r,n,i,o,a){var s=Us(t),u=s.length,h=Us(e),l=h.length;if(u!=l&&!i)return!1;for(var c=u;c--;){var f=s[c];if(!(i?f in e:Ko.call(e,f)))return!1}for(var p=i;++c<u;){f=s[c];var d=t[f],m=e[f],g=n?n(i?m:d,i?d:m,f):T;if(!(g===T?r(d,m,n,i,o,a):g))return!1;p||(p="constructor"==f)}if(!p){var v=t.constructor,E=e.constructor;if(v!=E&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof E&&E instanceof E))return!1}return!0}function Or(t,e,r){var n=q.callback||yo;return n=n===yo?ye:n,r?n(t,e,r):n}function Nr(t){for(var e=t.name,r=Pa[e],n=r?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==t)return i.name}return e}function kr(t,e,n){var i=q.indexOf||xn;return i=i===xn?r:i,t?i(t,e,n):i}function Ur(t){for(var e=Yi(t),r=e.length;r--;)e[r][2]=$r(e[r][1]);return e}function Ir(t,e){var r=null==t?T:t[e];return Li(r)?r:T}function zr(t,e,r){for(var n=-1,i=r?r.length:0;++n<i;){var o=r[n],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=ya(e,t+a);break;case"takeRight":t=Ea(t,e-a)}}return{start:t,end:e}}function Vr(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Ko.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function jr(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Io),new e}function Gr(t,e,r){var n=t.constructor;switch(e){case tt:return or(t);case j:case G:return new n(+t);case et:case rt:case nt:case it:case ot:case at:case st:case ut:case ht:var i=t.buffer;return new n(r?or(i):i,t.byteOffset,t.length);case Y:case $:return new n(t);case Z:var o=new n(t.source,St.exec(t));o.lastIndex=t.lastIndex}return o}function Wr(t,e,r){null==t||Kr(e,t)||(e=un(e),t=1==e.length?t:Fe(t,qe(e,0,-1)),e=Rn(e));var n=null==t?t:t[e];return null==n?T:n.apply(t,r)}function Xr(t){return null!=t&&Qr(Va(t))}function qr(t,e){return t="number"==typeof t||Lt.test(t)?+t:-1,e=null==e?Aa:e,t>-1&&t%1==0&&e>t}function Yr(t,e,r){if(!Si(r))return!1;var n=typeof e;if("number"==n?Xr(r)&&qr(e,r.length):"string"==n&&e in r){var i=r[e];return t===t?t===i:i!==i}return!1}function Kr(t,e){var r=typeof t;if("string"==r&&Tt.test(t)||"number"==r)return!0;if(Hs(t))return!1;var n=!xt.test(t);return n||null!=e&&t in sn(e)}function Zr(t){var e=Nr(t);if(!(e in Vt.prototype))return!1;var r=q[e];if(t===r)return!0;var n=za(r);return!!n&&t===n[0]}function Qr(t){return"number"==typeof t&&t>-1&&t%1==0&&Aa>=t}function $r(t){return t===t&&!Si(t)}function Jr(t,e){var r=t[1],n=e[1],i=r|n,o=A>i,a=n==A&&r==M||n==A&&r==L&&t[7].length<=e[8]||n==(A|L)&&r==M;if(!o&&!a)return t;n&b&&(t[2]=e[2],i|=r&b?0:w);var s=e[3];if(s){var u=t[3];t[3]=u?ar(u,s,e[4]):re(s),t[4]=u?m(t[3],I):re(e[4])}return s=e[5],s&&(u=t[5],t[5]=u?sr(u,s,e[6]):re(s),t[6]=u?m(t[5],I):re(e[6])),s=e[7],s&&(t[7]=re(s)),n&A&&(t[8]=null==t[8]?e[8]:ya(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function tn(t,e){t=sn(t);for(var r=-1,n=e.length,i={};++r<n;){var o=e[r];o in t&&(i[o]=t[o])}return i}function en(t,e){var r={};return Ce(t,function(t,n,i){e(t,n,i)&&(r[n]=t)}),r}function rn(t,e){for(var r=t.length,n=ya(e.length,r),i=re(t);n--;){var o=e[n];t[n]=qr(o,r)?i[o]:T}return t}function nn(t){{var e;q.support}if(!p(t)||Qo.call(t)!=K||!Ko.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var r;return Ce(t,function(t,e){r=e}),r===T||Ko.call(t,r)}function on(t){for(var e=qi(t),r=e.length,n=r&&t.length,i=!!n&&Qr(n)&&(Hs(t)||Ti(t)),o=-1,a=[];++o<r;){var s=e[o];(i&&qr(s,n)||Ko.call(t,s))&&a.push(s)}return a}function an(t){return null==t?[]:Xr(t)?Si(t)?t:Io(t):$i(t)}function sn(t){return Si(t)?t:Io(t)}function un(t){if(Hs(t))return t;var e=[];return i(t).replace(Rt,function(t,r,n,i){e.push(n?i.replace(Mt,"$1"):r||t)}),e}function hn(t){return t instanceof Vt?t.clone():new J(t.__wrapped__,t.__chain__,re(t.__actions__))}function ln(t,e,r){e=(r?Yr(t,e,r):null==e)?1:Ea(+e||1,1);for(var n=0,i=t?t.length:0,o=-1,a=Do(ra(i/e));i>n;)a[++o]=qe(t,n,n+=e);return a}function cn(t){for(var e=-1,r=t?t.length:0,n=-1,i=[];++e<r;){var o=t[e];o&&(i[++n]=o)}return i}function fn(t,e,r){var n=t?t.length:0;return n?((r?Yr(t,e,r):null==e)&&(e=1),qe(t,0>e?0:e)):[]}function pn(t,e,r){var n=t?t.length:0;return n?((r?Yr(t,e,r):null==e)&&(e=1),e=n-(+e||0),qe(t,0,0>e?0:e)):[]}function dn(t,e,r){return t&&t.length?tr(t,Or(e,r,3),!0,!0):[]}function mn(t,e,r){return t&&t.length?tr(t,Or(e,r,3),!0):[]}function gn(t,e,r,n){var i=t?t.length:0;return i?(r&&"number"!=typeof r&&Yr(t,e,r)&&(r=0,n=i),we(t,e,r,n)):[]}function vn(t){return t?t[0]:T}function En(t,e,r){var n=t?t.length:0;return r&&Yr(t,e,r)&&(e=!1),n?Se(t,e):[]}function yn(t){var e=t?t.length:0;return e?Se(t,!0):[]}function xn(t,e,n){var i=t?t.length:0;if(!i)return-1;if("number"==typeof n)n=0>n?Ea(i+n,0):n;else if(n){var o=rr(t,e),a=t[o];return(e===e?e===a:a!==a)?o:-1}return r(t,e,n||0)}function Tn(t){return pn(t,1)}function Rn(t){var e=t?t.length:0;return e?t[e-1]:T}function bn(t,e,r){var n=t?t.length:0;if(!n)return-1;var i=n;if("number"==typeof r)i=(0>r?Ea(n+r,0):ya(r||0,n-1))+1;else if(r){i=rr(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return f(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function _n(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var r=0,n=kr(),i=t.length;++r<i;)for(var o=0,a=t[r];(o=n(e,a,o))>-1;)la.call(e,o,1);return e}function wn(t,e,r){var n=[];if(!t||!t.length)return n;var i=-1,o=[],a=t.length;for(e=Or(e,r,3);++i<a;){var s=t[i];e(s,i,t)&&(n.push(s),o.push(i))}return Ge(t,o),n}function Mn(t){return fn(t,1)}function Hn(t,e,r){var n=t?t.length:0;return n?(r&&"number"!=typeof r&&Yr(t,e,r)&&(e=0,r=n),qe(t,e,r)):[]}function Sn(t,e,r){var n=t?t.length:0;return n?((r?Yr(t,e,r):null==e)&&(e=1),qe(t,0,0>e?0:e)):[]}function Cn(t,e,r){var n=t?t.length:0;return n?((r?Yr(t,e,r):null==e)&&(e=1),e=n-(+e||0),qe(t,0>e?0:e)):[]}function An(t,e,r){return t&&t.length?tr(t,Or(e,r,3),!1,!0):[]}function Ln(t,e,r){return t&&t.length?tr(t,Or(e,r,3)):[]}function Pn(t,e,n,i){var o=t?t.length:0;if(!o)return[];null!=e&&"boolean"!=typeof e&&(i=n,n=Yr(t,e,i)?null:e,e=!1);var a=Or();return(null!=n||a!==ye)&&(n=a(n,i,3)),e&&kr()==r?g(t,n):$e(t,n)}function Fn(t){if(!t||!t.length)return[];var e=-1,r=0;t=se(t,function(t){return Xr(t)?(r=Ea(t.length,r),!0):void 0});for(var n=Do(r);++e<r;)n[e]=ue(t,Ve(e));return n}function Dn(t,e,r){var n=t?t.length:0;if(!n)return[];var i=Fn(t);return null==e?i:(e=ir(e,r,4),ue(i,function(t){return he(t,e,T,!0)}))}function Bn(){for(var t=-1,e=arguments.length;++t<e;){var r=arguments[t];if(Xr(r))var n=n?Re(n,r).concat(Re(r,n)):r}return n?$e(n):[]}function On(t,e){var r=-1,n=t?t.length:0,i={};for(!n||e||Hs(t[0])||(e=[]);++r<n;){var o=t[r];e?i[o]=e[r]:o&&(i[o[0]]=o[1])}return i}function Nn(t){var e=q(t);return e.__chain__=!0,e}function kn(t,e,r){return e.call(r,t),t}function Un(t,e,r){return e.call(r,t)}function In(){return Nn(this)}function zn(){return new J(this.value(),this.__chain__)}function Vn(t){for(var e,r=this;r instanceof Q;){var n=hn(r);e?i.__wrapped__=n:e=n;var i=n;r=r.__wrapped__}return i.__wrapped__=t,e}function jn(){var t=this.__wrapped__;return t instanceof Vt?(this.__actions__.length&&(t=new Vt(this)),new J(t.reverse(),this.__chain__)):this.thru(function(t){return t.reverse()})}function Gn(){return this.value()+""}function Wn(){return er(this.__wrapped__,this.__actions__)}function Xn(t,e,r){var n=Hs(t)?oe:be;return r&&Yr(t,e,r)&&(e=null),("function"!=typeof e||r!==T)&&(e=Or(e,r,3)),n(t,e)}function qn(t,e,r){var n=Hs(t)?se:Me;return e=Or(e,r,3),n(t,e)}function Yn(t,e){return ns(t,ke(e))}function Kn(t,e,r,n){var i=t?Va(t):0;return Qr(i)||(t=$i(t),i=t.length),i?(r="number"!=typeof r||n&&Yr(e,r,n)?0:0>r?Ea(i+r,0):r||0,"string"==typeof t||!Hs(t)&&Bi(t)?i>r&&t.indexOf(e,r)>-1:kr(t,e,r)>-1):!1}function Zn(t,e,r){var n=Hs(t)?ue:Ne;return e=Or(e,r,3),n(t,e)}function Qn(t,e){return Zn(t,Ho(e))}function $n(t,e,r){var n=Hs(t)?se:Me;return e=Or(e,r,3),n(t,function(t,r,n){return!e(t,r,n)})}function Jn(t,e,r){if(r?Yr(t,e,r):null==e){t=an(t);var n=t.length;return n>0?t[We(0,n-1)]:T}var i=-1,o=Ii(t),n=o.length,a=n-1;for(e=ya(0>e?0:+e||0,n);++i<e;){var s=We(i,a),u=o[s];o[s]=o[i],o[i]=u}return o.length=e,o}function ti(t){return Jn(t,wa)}function ei(t){var e=t?Va(t):0;return Qr(e)?e:Us(t).length}function ri(t,e,r){var n=Hs(t)?ce:Ye;return r&&Yr(t,e,r)&&(e=null),("function"!=typeof e||r!==T)&&(e=Or(e,r,3)),n(t,e)}function ni(t,e,r){if(null==t)return[];r&&Yr(t,e,r)&&(e=null);var n=-1;e=Or(e,r,3);var i=Ne(t,function(t,r,i){return{criteria:e(t,r,i),index:++n,value:t}});return Ke(i,s)}function ii(t,e,r,n){return null==t?[]:(n&&Yr(e,r,n)&&(r=null),Hs(e)||(e=null==e?[]:[e]),Hs(r)||(r=null==r?[]:[r]),Ze(t,e,r))}function oi(t,e){return qn(t,ke(e))}function ai(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new jo(U);var r=t;t=e,e=r}return t=ga(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function si(t,e,r){return r&&Yr(t,e,r)&&(e=null),e=t&&null==e?t.length:Ea(+e||0,0),Pr(t,A,null,null,null,null,e)}function ui(t,e){var r;if("function"!=typeof e){if("function"!=typeof t)throw new jo(U);var n=t;t=e,e=n}return function(){return--t>0&&(r=e.apply(this,arguments)),1>=t&&(e=null),r}}function hi(t,e,r){function n(){f&&na(f),u&&na(u),u=f=p=T}function i(){var r=e-(ds()-l);if(0>=r||r>e){u&&na(u);var n=p;u=f=p=T,n&&(d=ds(),h=t.apply(c,s),f||u||(s=c=null))}else f=ha(i,r)}function o(){f&&na(f),u=f=p=T,(g||m!==e)&&(d=ds(),h=t.apply(c,s),f||u||(s=c=null))}function a(){if(s=arguments,l=ds(),c=this,p=g&&(f||!v),m===!1)var r=v&&!f;else{u||v||(d=l);var n=m-(l-d),a=0>=n||n>m;a?(u&&(u=na(u)),d=l,h=t.apply(c,s)):u||(u=ha(o,n))}return a&&f?f=na(f):f||e===m||(f=ha(i,e)),r&&(a=!0,h=t.apply(c,s)),!a||f||u||(s=c=null),h}var s,u,h,l,c,f,p,d=0,m=!1,g=!0;if("function"!=typeof t)throw new jo(U);if(e=0>e?0:+e||0,r===!0){var v=!0;g=!1}else Si(r)&&(v=r.leading,m="maxWait"in r&&Ea(+r.maxWait||0,e),g="trailing"in r?r.trailing:g);return a.cancel=n,a}function li(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new jo(U);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a),a};return r.cache=new li.Cache,r}function ci(t){if("function"!=typeof t)throw new jo(U);return function(){return!t.apply(this,arguments)}}function fi(t){return ui(2,t)}function pi(t,e){if("function"!=typeof t)throw new jo(U);return e=Ea(e===T?t.length-1:+e||0,0),function(){for(var r=arguments,n=-1,i=Ea(r.length-e,0),o=Do(i);++n<i;)o[n]=r[e+n];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,r[0],o);case 2:return t.call(this,r[0],r[1],o)}var a=Do(e+1);for(n=-1;++n<e;)a[n]=r[n];return a[e]=o,t.apply(this,a)}}function di(t){if("function"!=typeof t)throw new jo(U);return function(e){return t.apply(this,e)}}function mi(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new jo(U);return r===!1?n=!1:Si(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),zt.leading=n,zt.maxWait=+e,zt.trailing=i,hi(t,e,zt)}function gi(t,e){return e=null==e?To:e,Pr(e,S,null,[t],[])}function vi(t,e,r,n){return e&&"boolean"!=typeof e&&Yr(t,e,r)?e=!1:"function"==typeof e&&(n=r,r=e,e=!1),"function"==typeof r?xe(t,e,ir(r,n,1)):xe(t,e)}function Ei(t,e,r){return"function"==typeof e?xe(t,!0,ir(e,r,1)):xe(t,!0)}function yi(t,e){return t>e}function xi(t,e){return t>=e}function Ti(t){return p(t)&&Xr(t)&&Qo.call(t)==z}function Ri(t){return t===!0||t===!1||p(t)&&Qo.call(t)==j}function bi(t){return p(t)&&Qo.call(t)==G}function _i(t){return!!t&&1===t.nodeType&&p(t)&&Qo.call(t).indexOf("Element")>-1}function wi(t){return null==t?!0:Xr(t)&&(Hs(t)||Bi(t)||Ti(t)||p(t)&&Cs(t.splice))?!t.length:!Us(t).length}function Mi(t,e,r,n){r="function"==typeof r?ir(r,n,3):T;var i=r?r(t,e):T;return i===T?De(t,e,r):!!i}function Hi(t){return p(t)&&"string"==typeof t.message&&Qo.call(t)==W}function Si(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ci(t,e,r,n){return r="function"==typeof r?ir(r,n,3):T,Oe(t,Ur(e),r)}function Ai(t){return Fi(t)&&t!=+t}function Li(t){return null==t?!1:Qo.call(t)==X?Jo.test(Yo.call(t)):p(t)&&At.test(t)}function Pi(t){return null===t}function Fi(t){return"number"==typeof t||p(t)&&Qo.call(t)==Y}function Di(t){return p(t)&&Qo.call(t)==Z}function Bi(t){return"string"==typeof t||p(t)&&Qo.call(t)==$}function Oi(t){return p(t)&&Qr(t.length)&&!!Ut[Qo.call(t)]}function Ni(t){return t===T}function ki(t,e){return e>t}function Ui(t,e){return e>=t}function Ii(t){var e=t?Va(t):0;return Qr(e)?e?re(t):[]:$i(t)}function zi(t){return Ee(t,qi(t))}function Vi(t,e,r){var n=Da(t);return r&&Yr(t,e,r)&&(e=null),e?ge(n,e):n}function ji(t){return Pe(t,qi(t))}function Gi(t,e,r){var n=null==t?T:Fe(t,un(e),e+"");return n===T?r:n}function Wi(t,e){if(null==t)return!1;var r=Ko.call(t,e);if(!r&&!Kr(e)){if(e=un(e),t=1==e.length?t:Fe(t,qe(e,0,-1)),null==t)return!1;e=Rn(e),r=Ko.call(t,e)}return r||Qr(t.length)&&qr(e,t.length)&&(Hs(t)||Ti(t))}function Xi(t,e,r){r&&Yr(t,e,r)&&(e=null);for(var n=-1,i=Us(t),o=i.length,a={};++n<o;){var s=i[n],u=t[s];e?Ko.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function qi(t){if(null==t)return[];Si(t)||(t=Io(t));var e=t.length;e=e&&Qr(e)&&(Hs(t)||Ti(t))&&e||0;for(var r=t.constructor,n=-1,i="function"==typeof r&&r.prototype===t,o=Do(e),a=e>0;++n<e;)o[n]=n+"";for(var s in t)a&&qr(s,e)||"constructor"==s&&(i||!Ko.call(t,s))||o.push(s);return o}function Yi(t){t=sn(t);for(var e=-1,r=Us(t),n=r.length,i=Do(n);++e<n;){var o=r[e];i[e]=[o,t[o]]}return i}function Ki(t,e,r){var n=null==t?T:t[e];return n===T&&(null==t||Kr(e,t)||(e=un(e),t=1==e.length?t:Fe(t,qe(e,0,-1)),n=null==t?T:t[Rn(e)]),n=n===T?r:n),Cs(n)?n.call(t):n}function Zi(t,e,r){if(null==t)return t;var n=e+"";e=null!=t[n]||Kr(e,t)?[n]:un(e);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=e[i];Si(s)&&(i==a?s[u]=r:null==s[u]&&(s[u]=qr(e[i+1])?[]:{})),s=s[u]}return t}function Qi(t,e,r,n){var i=Hs(t)||Oi(t);if(e=Or(e,n,4),null==r)if(i||Si(t)){var o=t.constructor;r=i?Hs(t)?new o:[]:Da(Cs(o)?o.prototype:null)}else r={};return(i?ne:Ae)(t,function(t,n,i){return e(r,t,n,i)}),r}function $i(t){return Je(t,Us(t))}function Ji(t){return Je(t,qi(t))}function to(t,e,r){return e=+e||0,"undefined"==typeof r?(r=e,e=0):r=+r||0,t>=ya(e,r)&&t<Ea(e,r)}function eo(t,e,r){r&&Yr(t,e,r)&&(e=r=null);var n=null==t,i=null==e;if(null==r&&(i&&"boolean"==typeof t?(r=t,t=1):"boolean"==typeof e&&(r=e,i=!0)),n&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,r||t%1||e%1){var o=ba();return ya(t+o*(e-t+aa("1e-"+((o+"").length-1))),e)}return We(t,e)}function ro(t){return t=i(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function no(t){return t=i(t),t&&t.replace(Pt,h).replace(wt,"")}function io(t,e,r){t=i(t),e+="";var n=t.length;return r=r===T?n:ya(0>r?0:+r||0,n),r-=e.length,r>=0&&t.indexOf(e,r)==r}function oo(t){return t=i(t),t&&gt.test(t)?t.replace(dt,l):t}function ao(t){return t=i(t),t&&_t.test(t)?t.replace(bt,"\\$&"):t}function so(t,e,r){t=i(t),e=+e;var n=t.length;if(n>=e||!ga(e))return t;var o=(e-n)/2,a=ia(o),s=ra(o);return r=Cr("",s,r),r.slice(0,a)+t+r}function uo(t,e,r){return r&&Yr(t,e,r)&&(e=0),Ra(t,e)}function ho(t,e){var r="";if(t=i(t),e=+e,1>e||!t||!ga(e))return r;do e%2&&(r+=t),e=ia(e/2),t+=t;while(e);return r}function lo(t,e,r){return t=i(t),r=null==r?0:ya(0>r?0:+r||0,t.length),t.lastIndexOf(e,r)==r}function co(t,e,r){var n=q.templateSettings;r&&Yr(t,e,r)&&(e=r=null),t=i(t),e=me(ge({},r||e),n,de);var o,a,s=me(ge({},e.imports),n.imports,de),u=Us(s),h=Je(s,u),l=0,f=e.interpolate||Ft,p="__p += '",d=zo((e.escape||Ft).source+"|"+f.source+"|"+(f===yt?Ht:Ft).source+"|"+(e.evaluate||Ft).source+"|$","g"),m="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++kt+"]")+"\n";t.replace(d,function(e,r,n,i,s,u){return n||(n=i),p+=t.slice(l,u).replace(Dt,c),r&&(o=!0,p+="' +\n__e("+r+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),p+="';\n";var g=e.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(lt,""):p).replace(ct,"$1").replace(ft,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Qs(function(){return No(u,m+"return "+p).apply(T,h)});if(v.source=p,Hi(v))throw v;return v}function fo(t,e,r){var n=t;return(t=i(t))?(r?Yr(n,e,r):null==e)?t.slice(v(t),E(t)+1):(e+="",t.slice(o(t,e),a(t,e)+1)):t}function po(t,e,r){var n=t;return t=i(t),t?t.slice((r?Yr(n,e,r):null==e)?v(t):o(t,e+"")):t}function mo(t,e,r){var n=t;return t=i(t),t?(r?Yr(n,e,r):null==e)?t.slice(0,E(t)+1):t.slice(0,a(t,e+"")+1):t}function go(t,e,r){r&&Yr(t,e,r)&&(e=null);var n=P,o=F;if(null!=e)if(Si(e)){var a="separator"in e?e.separator:a;n="length"in e?+e.length||0:n,o="omission"in e?i(e.omission):o}else n=+e||0;if(t=i(t),n>=t.length)return t;var s=n-o.length;if(1>s)return o;var u=t.slice(0,s);if(null==a)return u+o;if(Di(a)){if(t.slice(s).search(a)){var h,l,c=t.slice(0,s);for(a.global||(a=zo(a.source,(St.exec(a)||"")+"g")),a.lastIndex=0;h=a.exec(c);)l=h.index;u=u.slice(0,null==l?s:l)}}else if(t.indexOf(a,s)!=s){var f=u.lastIndexOf(a);f>-1&&(u=u.slice(0,f))}return u+o}function vo(t){return t=i(t),t&&mt.test(t)?t.replace(pt,y):t}function Eo(t,e,r){return r&&Yr(t,e,r)&&(e=null),
t=i(t),t.match(e||Bt)||[]}function yo(t,e,r){return r&&Yr(t,e,r)&&(e=null),p(t)?Ro(t):ye(t,e)}function xo(t){return function(){return t}}function To(t){return t}function Ro(t){return ke(xe(t,!0))}function bo(t,e){return Ue(t,xe(e,!0))}function _o(t,e,r){if(null==r){var n=Si(e),i=n?Us(e):null,o=i&&i.length?Pe(e,i):null;(o?o.length:n)||(o=!1,r=e,e=t,t=this)}o||(o=Pe(e,Us(e)));var a=!0,s=-1,u=Cs(t),h=o.length;r===!1?a=!1:Si(r)&&"chain"in r&&(a=r.chain);for(;++s<h;){var l=o[s],c=e[l];t[l]=c,u&&(t.prototype[l]=function(e){return function(){var r=this.__chain__;if(a||r){var n=t(this.__wrapped__),i=n.__actions__=re(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),n.__chain__=r,n}var o=[this.value()];return sa.apply(o,arguments),e.apply(t,o)}}(c))}return t}function wo(){return d._=$o,this}function Mo(){}function Ho(t){return Kr(t)?Ve(t):je(t)}function So(t){return function(e){return Fe(t,un(e),e+"")}}function Co(t,e,r){r&&Yr(t,e,r)&&(e=r=null),t=+t||0,r=null==r?1:+r||0,null==e?(e=t,t=0):e=+e||0;for(var n=-1,i=Ea(ra((e-t)/(r||1)),0),o=Do(i);++n<i;)o[n]=t,t+=r;return o}function Ao(t,e,r){if(t=ia(t),1>t||!ga(t))return[];var n=-1,i=Do(ya(t,Ma));for(e=ir(e,r,1);++n<t;)Ma>n?i[n]=e(n):e(n);return i}function Lo(t){var e=++Zo;return i(t)+e}function Po(t,e){return(+t||0)+(+e||0)}function Fo(t,e,r){r&&Yr(t,e,r)&&(e=null);var n=Or(),i=null==e;return i&&n===ye||(i=!1,e=n(e,r,3)),i?fe(Hs(t)?t:an(t)):Qe(t,e)}d=d?te.defaults(Jt.Object(),d,te.pick(Jt,Nt)):Jt;var Do=d.Array,Bo=d.Date,Oo=d.Error,No=d.Function,ko=d.Math,Uo=d.Number,Io=d.Object,zo=d.RegExp,Vo=d.String,jo=d.TypeError,Go=Do.prototype,Wo=Io.prototype,Xo=Vo.prototype,qo=(qo=d.window)?qo.document:null,Yo=No.prototype.toString,Ko=Wo.hasOwnProperty,Zo=0,Qo=Wo.toString,$o=d._,Jo=zo("^"+ao(Yo.call(Ko)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ta=Ir(d,"ArrayBuffer"),ea=Ir(ta&&new ta(0),"slice"),ra=ko.ceil,na=d.clearTimeout,ia=ko.floor,oa=Ir(Io,"getPrototypeOf"),aa=d.parseFloat,sa=Go.push,ua=Ir(d,"Set"),ha=d.setTimeout,la=Go.splice,ca=Ir(d,"Uint8Array"),fa=Ir(d,"WeakMap"),pa=function(){try{var t=Ir(d,"Float64Array"),e=new t(new ta(10),0,1)&&t}catch(r){}return e||null}(),da=Ir(Io,"create"),ma=Ir(Do,"isArray"),ga=d.isFinite,va=Ir(Io,"keys"),Ea=ko.max,ya=ko.min,xa=Ir(Bo,"now"),Ta=Ir(Uo,"isFinite"),Ra=d.parseInt,ba=ko.random,_a=Uo.NEGATIVE_INFINITY,wa=Uo.POSITIVE_INFINITY,Ma=4294967295,Ha=Ma-1,Sa=Ma>>>1,Ca=pa?pa.BYTES_PER_ELEMENT:0,Aa=9007199254740991,La=fa&&new fa,Pa={},Fa=q.support={};!function(t){var e=function(){this.x=t},r=[];e.prototype={valueOf:t,y:t};for(var n in new e)r.push(n);try{Fa.dom=11===qo.createDocumentFragment().nodeType}catch(i){Fa.dom=!1}}(1,0),q.templateSettings={escape:vt,evaluate:Et,interpolate:yt,variable:"",imports:{_:q}};var Da=function(){function t(){}return function(e){if(Si(e)){t.prototype=e;var r=new t;t.prototype=null}return r||{}}}(),Ba=lr(Ae),Oa=lr(Le,!0),Na=cr(),ka=cr(!0),Ua=La?function(t,e){return La.set(t,e),t}:To;ea||(or=ta&&ca?function(t){var e=t.byteLength,r=pa?ia(e/Ca):0,n=r*Ca,i=new ta(e);if(r){var o=new pa(i,0,r);o.set(new pa(t,0,r))}return e!=n&&(o=new ca(i,n),o.set(new ca(t,n))),i}:xo(null));var Ia=da&&ua?function(t){return new Qt(t)}:xo(null),za=La?function(t){return La.get(t)}:Mo,Va=Ve("length"),ja=function(){var t=0,e=0;return function(r,n){var i=ds(),o=B-(i-e);if(e=i,o>0){if(++t>=D)return r}else t=0;return Ua(r,n)}}(),Ga=pi(function(t,e){return Xr(t)?Re(t,Se(e,!1,!0)):[]}),Wa=Er(),Xa=Er(!0),qa=pi(function(t){for(var e=t.length,n=e,i=Do(c),o=kr(),a=o==r,s=[];n--;){var u=t[n]=Xr(u=t[n])?u:[];i[n]=a&&u.length>=120?Ia(n&&u):null}var h=t[0],l=-1,c=h?h.length:0,f=i[0];t:for(;++l<c;)if(u=h[l],(f?$t(f,u):o(s,u,0))<0){for(var n=e;--n;){var p=i[n];if((p?$t(p,u):o(t[n],u,0))<0)continue t}f&&f.push(u),s.push(u)}return s}),Ya=pi(function(e,r){r=Se(r);var n=ve(e,r);return Ge(e,r.sort(t)),n}),Ka=Lr(),Za=Lr(!0),Qa=pi(function(t){return $e(Se(t,!1,!0))}),$a=pi(function(t,e){return Xr(t)?Re(t,e):[]}),Ja=pi(Fn),ts=pi(function(t){var e=t.length,r=e>2?t[e-2]:T,n=e>1?t[e-1]:T;return e>2&&"function"==typeof r?e-=2:(r=e>1&&"function"==typeof n?(--e,n):T,n=T),t.length=e,Dn(t,r,n)}),es=pi(function(t,e){return ve(t,Se(e))}),rs=ur(function(t,e,r){Ko.call(t,r)?++t[r]:t[r]=1}),ns=vr(Ba),is=vr(Oa,!0),os=Tr(ne,Ba),as=Tr(ie,Oa),ss=ur(function(t,e,r){Ko.call(t,r)?t[r].push(e):t[r]=[e]}),us=ur(function(t,e,r){t[r]=e}),hs=pi(function(t,e,r){var n=-1,i="function"==typeof e,o=Kr(e),a=Xr(t)?Do(t.length):[];return Ba(t,function(t){var s=i?e:o&&null!=t?t[e]:null;a[++n]=s?s.apply(t,r):Wr(t,e,r)}),a}),ls=ur(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),cs=Hr(he,Ba),fs=Hr(le,Oa),ps=pi(function(t,e){if(null==t)return[];var r=e[2];return r&&Yr(e[0],e[1],r)&&(e.length=1),Ze(t,Se(e),[])}),ds=xa||function(){return(new Bo).getTime()},ms=pi(function(t,e,r){var n=b;if(r.length){var i=m(r,ms.placeholder);n|=S}return Pr(t,n,e,r,i)}),gs=pi(function(t,e){e=e.length?Se(e):ji(t);for(var r=-1,n=e.length;++r<n;){var i=e[r];t[i]=Pr(t[i],b,t)}return t}),vs=pi(function(t,e,r){var n=b|_;if(r.length){var i=m(r,vs.placeholder);n|=S}return Pr(e,n,t,r,i)}),Es=mr(M),ys=mr(H),xs=pi(function(t,e){return Te(t,1,e)}),Ts=pi(function(t,e,r){return Te(t,e,r)}),Rs=xr(),bs=xr(!0),_s=Mr(S),ws=Mr(C),Ms=pi(function(t,e){return Pr(t,L,null,null,null,Se(e))}),Hs=ma||function(t){return p(t)&&Qr(t.length)&&Qo.call(t)==V};Fa.dom||(_i=function(t){return!!t&&1===t.nodeType&&p(t)&&!As(t)});var Ss=Ta||function(t){return"number"==typeof t&&ga(t)},Cs=n(/x/)||ca&&!n(ca)?function(t){return Qo.call(t)==X}:n,As=oa?function(t){if(!t||Qo.call(t)!=K)return!1;var e=Ir(t,"valueOf"),r=e&&(r=oa(e))&&oa(r);return r?t==r||oa(t)==r:nn(t)}:nn,Ls=hr(function(t,e,r){return r?me(t,e,r):ge(t,e)}),Ps=pi(function(t){var e=t[0];return null==e?e:(t.push(pe),Ls.apply(T,t))}),Fs=yr(Ae),Ds=yr(Le),Bs=Rr(Na),Os=Rr(ka),Ns=br(Ae),ks=br(Le),Us=va?function(t){var e=null==t?null:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Xr(t)?on(t):Si(t)?va(t):[]}:on,Is=_r(!0),zs=_r(),Vs=hr(Ie),js=pi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ue(Se(e),Vo);return tn(t,Re(qi(t),e))}var r=ir(e[0],e[1],3);return en(t,function(t,e,n){return!r(t,e,n)})}),Gs=pi(function(t,e){return null==t?{}:"function"==typeof e[0]?en(t,ir(e[0],e[1],3)):tn(t,Se(e))}),Ws=pr(function(t,e,r){return e=e.toLowerCase(),t+(r?e.charAt(0).toUpperCase()+e.slice(1):e)}),Xs=pr(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),qs=wr(),Ys=wr(!0);8!=Ra(Ot+"08")&&(uo=function(t,e,r){return(r?Yr(t,e,r):null==e)?e=0:e&&(e=+e),t=fo(t),Ra(t,e||(Ct.test(t)?16:10))});var Ks=pr(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),Zs=pr(function(t,e,r){return t+(r?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Qs=pi(function(t,e){try{return t.apply(T,e)}catch(r){return Hi(r)?r:new Oo(r)}}),$s=pi(function(t,e){return function(r){return Wr(r,t,e)}}),Js=pi(function(t,e){return function(r){return Wr(t,r,e)}}),tu=gr(yi,_a),eu=gr(ki,wa);return q.prototype=Q.prototype,J.prototype=Da(Q.prototype),J.prototype.constructor=J,Vt.prototype=Da(Q.prototype),Vt.prototype.constructor=Vt,Xt.prototype["delete"]=qt,Xt.prototype.get=Yt,Xt.prototype.has=Kt,Xt.prototype.set=Zt,Qt.prototype.push=ee,li.Cache=Xt,q.after=ai,q.ary=si,q.assign=Ls,q.at=es,q.before=ui,q.bind=ms,q.bindAll=gs,q.bindKey=vs,q.callback=yo,q.chain=Nn,q.chunk=ln,q.compact=cn,q.constant=xo,q.countBy=rs,q.create=Vi,q.curry=Es,q.curryRight=ys,q.debounce=hi,q.defaults=Ps,q.defer=xs,q.delay=Ts,q.difference=Ga,q.drop=fn,q.dropRight=pn,q.dropRightWhile=dn,q.dropWhile=mn,q.fill=gn,q.filter=qn,q.flatten=En,q.flattenDeep=yn,q.flow=Rs,q.flowRight=bs,q.forEach=os,q.forEachRight=as,q.forIn=Bs,q.forInRight=Os,q.forOwn=Ns,q.forOwnRight=ks,q.functions=ji,q.groupBy=ss,q.indexBy=us,q.initial=Tn,q.intersection=qa,q.invert=Xi,q.invoke=hs,q.keys=Us,q.keysIn=qi,q.map=Zn,q.mapKeys=Is,q.mapValues=zs,q.matches=Ro,q.matchesProperty=bo,q.memoize=li,q.merge=Vs,q.method=$s,q.methodOf=Js,q.mixin=_o,q.negate=ci,q.omit=js,q.once=fi,q.pairs=Yi,q.partial=_s,q.partialRight=ws,q.partition=ls,q.pick=Gs,q.pluck=Qn,q.property=Ho,q.propertyOf=So,q.pull=_n,q.pullAt=Ya,q.range=Co,q.rearg=Ms,q.reject=$n,q.remove=wn,q.rest=Mn,q.restParam=pi,q.set=Zi,q.shuffle=ti,q.slice=Hn,q.sortBy=ni,q.sortByAll=ps,q.sortByOrder=ii,q.spread=di,q.take=Sn,q.takeRight=Cn,q.takeRightWhile=An,q.takeWhile=Ln,q.tap=kn,q.throttle=mi,q.thru=Un,q.times=Ao,q.toArray=Ii,q.toPlainObject=zi,q.transform=Qi,q.union=Qa,q.uniq=Pn,q.unzip=Fn,q.unzipWith=Dn,q.values=$i,q.valuesIn=Ji,q.where=oi,q.without=$a,q.wrap=gi,q.xor=Bn,q.zip=Ja,q.zipObject=On,q.zipWith=ts,q.backflow=bs,q.collect=Zn,q.compose=bs,q.each=os,q.eachRight=as,q.extend=Ls,q.iteratee=yo,q.methods=ji,q.object=On,q.select=qn,q.tail=Mn,q.unique=Pn,_o(q,q),q.add=Po,q.attempt=Qs,q.camelCase=Ws,q.capitalize=ro,q.clone=vi,q.cloneDeep=Ei,q.deburr=no,q.endsWith=io,q.escape=oo,q.escapeRegExp=ao,q.every=Xn,q.find=ns,q.findIndex=Wa,q.findKey=Fs,q.findLast=is,q.findLastIndex=Xa,q.findLastKey=Ds,q.findWhere=Yn,q.first=vn,q.get=Gi,q.gt=yi,q.gte=xi,q.has=Wi,q.identity=To,q.includes=Kn,q.indexOf=xn,q.inRange=to,q.isArguments=Ti,q.isArray=Hs,q.isBoolean=Ri,q.isDate=bi,q.isElement=_i,q.isEmpty=wi,q.isEqual=Mi,q.isError=Hi,q.isFinite=Ss,q.isFunction=Cs,q.isMatch=Ci,q.isNaN=Ai,q.isNative=Li,q.isNull=Pi,q.isNumber=Fi,q.isObject=Si,q.isPlainObject=As,q.isRegExp=Di,q.isString=Bi,q.isTypedArray=Oi,q.isUndefined=Ni,q.kebabCase=Xs,q.last=Rn,q.lastIndexOf=bn,q.lt=ki,q.lte=Ui,q.max=tu,q.min=eu,q.noConflict=wo,q.noop=Mo,q.now=ds,q.pad=so,q.padLeft=qs,q.padRight=Ys,q.parseInt=uo,q.random=eo,q.reduce=cs,q.reduceRight=fs,q.repeat=ho,q.result=Ki,q.runInContext=x,q.size=ei,q.snakeCase=Ks,q.some=ri,q.sortedIndex=Ka,q.sortedLastIndex=Za,q.startCase=Zs,q.startsWith=lo,q.sum=Fo,q.template=co,q.trim=fo,q.trimLeft=po,q.trimRight=mo,q.trunc=go,q.unescape=vo,q.uniqueId=Lo,q.words=Eo,q.all=Xn,q.any=ri,q.contains=Kn,q.eq=Mi,q.detect=ns,q.foldl=cs,q.foldr=fs,q.head=vn,q.include=Kn,q.inject=cs,_o(q,function(){var t={};return Ae(q,function(e,r){q.prototype[r]||(t[r]=e)}),t}(),!1),q.sample=Jn,q.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return Jn(e,t)}):Jn(this.value())},q.VERSION=R,ne(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){q[t].placeholder=q}),ne(["dropWhile","filter","map","takeWhile"],function(t,e){var r=e!=k,n=e==O;Vt.prototype[t]=function(t,i){var o=this.__filtered__,a=o&&n?new Vt(this):this.clone(),s=a.__iteratees__||(a.__iteratees__=[]);return s.push({done:!1,count:0,index:0,iteratee:Or(t,i,1),limit:-1,type:e}),a.__filtered__=o||r,a}}),ne(["drop","take"],function(t,e){var r=t+"While";Vt.prototype[t]=function(r){var n=this.__filtered__,i=n&&!e?this.dropWhile():this.clone();if(r=null==r?1:Ea(ia(r)||0,0),n)e?i.__takeCount__=ya(i.__takeCount__,r):Rn(i.__iteratees__).limit=r;else{var o=i.__views__||(i.__views__=[]);o.push({size:r,type:t+(i.__dir__<0?"Right":"")})}return i},Vt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()},Vt.prototype[t+"RightWhile"]=function(t,e){return this.reverse()[r](t,e).reverse()}}),ne(["first","last"],function(t,e){var r="take"+(e?"Right":"");Vt.prototype[t]=function(){return this[r](1).value()[0]}}),ne(["initial","rest"],function(t,e){var r="drop"+(e?"":"Right");Vt.prototype[t]=function(){return this[r](1)}}),ne(["pluck","where"],function(t,e){var r=e?"filter":"map",n=e?ke:Ho;Vt.prototype[t]=function(t){return this[r](n(t))}}),Vt.prototype.compact=function(){return this.filter(To)},Vt.prototype.reject=function(t,e){return t=Or(t,e,1),this.filter(function(e){return!t(e)})},Vt.prototype.slice=function(t,e){t=null==t?0:+t||0;var r=this;return 0>t?r=this.takeRight(-t):t&&(r=this.drop(t)),e!==T&&(e=+e||0,r=0>e?r.dropRight(-e):r.take(e-t)),r},Vt.prototype.toArray=function(){return this.drop(0)},Ae(Vt.prototype,function(t,e){var r=q[e];if(r){var n=/^(?:filter|map|reject)|While$/.test(e),i=/^(?:first|last)$/.test(e);q.prototype[e]=function(){var e=arguments,o=this.__chain__,a=this.__wrapped__,s=!!this.__actions__.length,u=a instanceof Vt,h=e[0],l=u||Hs(a);l&&n&&"function"==typeof h&&1!=h.length&&(u=l=!1);var c=u&&!s;if(i&&!o)return c?t.call(a):r.call(q,this.value());var f=function(t){var n=[t];return sa.apply(n,e),r.apply(q,n)};if(l){var p=c?a:new Vt(this),d=t.apply(p,e);if(!i&&(s||d.__actions__)){var m=d.__actions__||(d.__actions__=[]);m.push({func:Un,args:[f],thisArg:q})}return new J(d,o)}return this.thru(f)}}}),ne(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?Xo:Go)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:join|pop|replace|shift)$/.test(t);q.prototype[t]=function(){var t=arguments;return n&&!this.__chain__?e.apply(this.value(),t):this[r](function(r){return e.apply(r,t)})}}),Ae(Vt.prototype,function(t,e){var r=q[e];if(r){var n=r.name,i=Pa[n]||(Pa[n]=[]);i.push({name:e,func:r})}}),Pa[Sr(null,_).name]=[{name:"wrapper",func:null}],Vt.prototype.clone=jt,Vt.prototype.reverse=Gt,Vt.prototype.value=Wt,q.prototype.chain=In,q.prototype.commit=zn,q.prototype.plant=Vn,q.prototype.reverse=jn,q.prototype.toString=Gn,q.prototype.run=q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=Wn,q.prototype.collect=q.prototype.map,q.prototype.head=q.prototype.first,q.prototype.select=q.prototype.filter,q.prototype.tail=q.prototype.rest,q}var T,R="3.9.3",b=1,_=2,w=4,M=8,H=16,S=32,C=64,A=128,L=256,P=30,F="...",D=150,B=16,O=0,N=1,k=2,U="Expected a function",I="__lodash_placeholder__",z="[object Arguments]",V="[object Array]",j="[object Boolean]",G="[object Date]",W="[object Error]",X="[object Function]",q="[object Map]",Y="[object Number]",K="[object Object]",Z="[object RegExp]",Q="[object Set]",$="[object String]",J="[object WeakMap]",tt="[object ArrayBuffer]",et="[object Float32Array]",rt="[object Float64Array]",nt="[object Int8Array]",it="[object Int16Array]",ot="[object Int32Array]",at="[object Uint8Array]",st="[object Uint8ClampedArray]",ut="[object Uint16Array]",ht="[object Uint32Array]",lt=/\b__p \+= '';/g,ct=/\b(__p \+=) '' \+/g,ft=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39|#96);/g,dt=/[&<>"'`]/g,mt=RegExp(pt.source),gt=RegExp(dt.source),vt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,yt=/<%=([\s\S]+?)%>/g,xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Tt=/^\w*$/,Rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,bt=/[.*+?^${}()|[\]\/\\]/g,_t=RegExp(bt.source),wt=/[\u0300-\u036f\ufe20-\ufe23]/g,Mt=/\\(\\)?/g,Ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,St=/\w*$/,Ct=/^0[xX]/,At=/^\[object .+?Constructor\]$/,Lt=/^\d+$/,Pt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ft=/($^)/,Dt=/['\n\r\u2028\u2029\\]/g,Bt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Ot=" 	\f\ufeff\n\r\u2028\u2029",Nt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],kt=-1,Ut={};Ut[et]=Ut[rt]=Ut[nt]=Ut[it]=Ut[ot]=Ut[at]=Ut[st]=Ut[ut]=Ut[ht]=!0,Ut[z]=Ut[V]=Ut[tt]=Ut[j]=Ut[G]=Ut[W]=Ut[X]=Ut[q]=Ut[Y]=Ut[K]=Ut[Z]=Ut[Q]=Ut[$]=Ut[J]=!1;var It={};It[z]=It[V]=It[tt]=It[j]=It[G]=It[et]=It[rt]=It[nt]=It[it]=It[ot]=It[Y]=It[K]=It[Z]=It[$]=It[at]=It[st]=It[ut]=It[ht]=!0,It[W]=It[X]=It[q]=It[Q]=It[J]=!1;var zt={leading:!1,maxWait:0,trailing:!1},Vt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Gt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Wt={"function":!0,object:!0},Xt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qt=Wt[typeof exports]&&exports&&!exports.nodeType&&exports,Yt=Wt[typeof module]&&module&&!module.nodeType&&module,Kt=qt&&Yt&&"object"==typeof global&&global&&global.Object&&global,Zt=Wt[typeof self]&&self&&self.Object&&self,Qt=Wt[typeof window]&&window&&window.Object&&window,$t=Yt&&Yt.exports===qt&&qt,Jt=Kt||Qt!==(this&&this.window)&&Qt||Zt||this,te=x();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Jt._=te,define(function(){return te})):qt&&Yt?$t?(Yt.exports=te)._=te:qt._=te:Jt._=te}.call(this),/*!
 * getStyleProperty v1.0.4
 * original by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 * MIT license
 */
function(t){"use strict";function e(t){if(t){if("string"==typeof n[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,i=0,o=r.length;o>i;i++)if(e=r[i]+t,"string"==typeof n[e])return e}}var r="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),/*!
 * eventie v1.0.6
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 * MIT license
 */
function(t){"use strict";function e(e){var r=t.event;return r.target=r.target||r.srcElement||e,r}var r=document.documentElement,n=function(){};r.addEventListener?n=function(t,e,r){t.addEventListener(e,r,!1)}:r.attachEvent&&(n=function(t,r,n){t[r+n]=n.handleEvent?function(){var r=e(t);n.handleEvent.call(n,r)}:function(){var r=e(t);n.call(t,r)},t.attachEvent("on"+r,t[r+n])});var i=function(){};r.removeEventListener?i=function(t,e,r){t.removeEventListener(e,r,!1)}:r.detachEvent&&(i=function(t,e,r){t.detachEvent("on"+e,t[e+r]);try{delete t[e+r]}catch(n){t[e+r]=void 0}});var o={bind:n,unbind:i};"function"==typeof define&&define.amd?define(o):"object"==typeof exports?module.exports=o:t.eventie=o}(window),function(){"use strict";function t(){}function e(t,e){for(var r=t.length;r--;)if(t[r].listener===e)return r;return-1}function r(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,i=this,o=i.EventEmitter;n.getListeners=function(t){var e,r,n=this._getEvents();if(t instanceof RegExp){e={};for(r in n)n.hasOwnProperty(r)&&t.test(r)&&(e[r]=n[r])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,r=[];for(e=0;e<t.length;e+=1)r.push(t[e].listener);return r},n.getListenersAsObject=function(t){var e,r=this.getListeners(t);return r instanceof Array&&(e={},e[t]=r),e||r},n.addListener=function(t,r){var n,i=this.getListenersAsObject(t),o="object"==typeof r;for(n in i)i.hasOwnProperty(n)&&-1===e(i[n],r)&&i[n].push(o?r:{listener:r,once:!1});return this},n.on=r("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=r("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,r){var n,i,o=this.getListenersAsObject(t);for(i in o)o.hasOwnProperty(i)&&(n=e(o[i],r),-1!==n&&o[i].splice(n,1));return this},n.off=r("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,r){var n,i,o=t?this.removeListener:this.addListener,a=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=r.length;n--;)o.call(this,e,r[n]);else for(n in e)e.hasOwnProperty(n)&&(i=e[n])&&("function"==typeof i?o.call(this,n,i):a.call(this,n,i));return this},n.removeEvent=function(t){var e,r=typeof t,n=this._getEvents();if("string"===r)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=r("removeEvent"),n.emitEvent=function(t,e){var r,n,i,o,a=this.getListenersAsObject(t);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].length;n--;)r=a[i][n],r.once===!0&&this.removeListener(t,r.listener),o=r.listener.apply(this,e||[]),o===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},n.trigger=r("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return i.EventEmitter=o,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:i.EventEmitter=t}.call(this),function(t){"use strict";function e(t,e){return t[a](e)}function r(t){if(!t.parentNode){var e=document.createDocumentFragment();e.appendChild(t)}}function n(t,e){r(t);for(var n=t.parentNode.querySelectorAll(e),i=0,o=n.length;o>i;i++)if(n[i]===t)return!0;return!1}function i(t,n){return r(t),e(t,n)}var o,a=function(){if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],r=0,n=e.length;n>r;r++){var i=e[r],o=i+"MatchesSelector";if(t[o])return o}}();if(a){var s=document.createElement("div"),u=e(s,"div");o=u?e:i}else o=n;"function"==typeof define&&define.amd?define(function(){return o}):"object"==typeof exports?module.exports=o:window.matchesSelector=o}(Element.prototype),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.PIXI=t()}}(function(){var t;return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){(function(r){t("./polyfill");var n=e.exports=t("./core");n.extras=t("./extras"),n.filters=t("./filters"),n.interaction=t("./interaction"),n.loaders=t("./loaders"),n.mesh=t("./mesh"),n.loader=new n.loaders.Loader,Object.assign(n,t("./deprecation")),r.PIXI=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core":29,"./deprecation":78,"./extras":85,"./filters":102,"./interaction":117,"./loaders":120,"./mesh":126,"./polyfill":130}],2:[function(e,r,n){(function(e){/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
!function(){function n(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(i,arguments)}}var i,o,a={};i=this,null!=i&&(o=i.async),a.noConflict=function(){return i.async=o,a};var s=Object.prototype.toString,u=Array.isArray||function(t){return"[object Array]"===s.call(t)},h=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r+=1)e(t[r],r,t)},l=function(t,e){if(t.map)return t.map(e);var r=[];return h(t,function(t,n,i){r.push(e(t,n,i))}),r},c=function(t,e,r){return t.reduce?t.reduce(e,r):(h(t,function(t,n,i){r=e(r,t,n,i)}),r)},f=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};"undefined"!=typeof e&&e.nextTick?(a.nextTick=e.nextTick,a.setImmediate="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:a.nextTick):"function"==typeof setImmediate?(a.nextTick=function(t){setImmediate(t)},a.setImmediate=a.nextTick):(a.nextTick=function(t){setTimeout(t,0)},a.setImmediate=a.nextTick),a.each=function(t,e,r){function i(e){e?(r(e),r=function(){}):(o+=1,o>=t.length&&r())}if(r=r||function(){},!t.length)return r();var o=0;h(t,function(t){e(t,n(i))})},a.forEach=a.each,a.eachSeries=function(t,e,r){if(r=r||function(){},!t.length)return r();var n=0,i=function(){e(t[n],function(e){e?(r(e),r=function(){}):(n+=1,n>=t.length?r():i())})};i()},a.forEachSeries=a.eachSeries,a.eachLimit=function(t,e,r,n){var i=p(e);i.apply(null,[t,r,n])},a.forEachLimit=a.eachLimit;var p=function(t){return function(e,r,n){if(n=n||function(){},!e.length||0>=t)return n();var i=0,o=0,a=0;!function s(){if(i>=e.length)return n();for(;t>a&&o<e.length;)o+=1,a+=1,r(e[o-1],function(t){t?(n(t),n=function(){}):(i+=1,a-=1,i>=e.length?n():s())})}()}},d=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[a.each].concat(e))}},m=function(t,e){return function(){var r=Array.prototype.slice.call(arguments);return e.apply(null,[p(t)].concat(r))}},g=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[a.eachSeries].concat(e))}},v=function(t,e,r,n){if(e=l(e,function(t,e){return{index:e,value:t}}),n){var i=[];t(e,function(t,e){r(t.value,function(r,n){i[t.index]=n,e(r)})},function(t){n(t,i)})}else t(e,function(t,e){r(t.value,function(t){e(t)})})};a.map=d(v),a.mapSeries=g(v),a.mapLimit=function(t,e,r,n){return E(e)(t,r,n)};var E=function(t){return m(t,v)};a.reduce=function(t,e,r,n){a.eachSeries(t,function(t,n){r(e,t,function(t,r){e=r,n(t)})},function(t){n(t,e)})},a.inject=a.reduce,a.foldl=a.reduce,a.reduceRight=function(t,e,r,n){var i=l(t,function(t){return t}).reverse();a.reduce(i,e,r,n)},a.foldr=a.reduceRight;var y=function(t,e,r,n){var i=[];e=l(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r&&i.push(t),e()})},function(t){n(l(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};a.filter=d(y),a.filterSeries=g(y),a.select=a.filter,a.selectSeries=a.filterSeries;var x=function(t,e,r,n){var i=[];e=l(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r||i.push(t),e()})},function(t){n(l(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};a.reject=d(x),a.rejectSeries=g(x);var T=function(t,e,r,n){t(e,function(t,e){r(t,function(r){r?(n(t),n=function(){}):e()})},function(t){n()})};a.detect=d(T),a.detectSeries=g(T),a.some=function(t,e,r){a.each(t,function(t,n){e(t,function(t){t&&(r(!0),r=function(){}),n()})},function(t){r(!1)})},a.any=a.some,a.every=function(t,e,r){a.each(t,function(t,n){e(t,function(t){t||(r(!1),r=function(){}),n()})},function(t){r(!0)})},a.all=a.every,a.sortBy=function(t,e,r){a.map(t,function(t,r){e(t,function(e,n){e?r(e):r(null,{value:t,criteria:n})})},function(t,e){if(t)return r(t);var n=function(t,e){var r=t.criteria,n=e.criteria;return n>r?-1:r>n?1:0};r(null,l(e.sort(n),function(t){return t.value}))})},a.auto=function(t,e){e=e||function(){};var r=f(t),n=r.length;if(!n)return e();var i={},o=[],s=function(t){o.unshift(t)},l=function(t){for(var e=0;e<o.length;e+=1)if(o[e]===t)return void o.splice(e,1)},p=function(){n--,h(o.slice(0),function(t){t()})};s(function(){if(!n){var t=e;e=function(){},t(null,i)}}),h(r,function(r){var n=u(t[r])?t[r]:[t[r]],o=function(t){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),t){var o={};h(f(i),function(t){o[t]=i[t]}),o[r]=n,e(t,o),e=function(){}}else i[r]=n,a.setImmediate(p)},d=n.slice(0,Math.abs(n.length-1))||[],m=function(){return c(d,function(t,e){return t&&i.hasOwnProperty(e)},!0)&&!i.hasOwnProperty(r)};if(m())n[n.length-1](o,i);else{var g=function(){m()&&(l(g),n[n.length-1](o,i))};s(g)}})},a.retry=function(t,e,r){var n=5,i=[];"function"==typeof t&&(r=e,e=t,t=n),t=parseInt(t,10)||n;var o=function(n,o){for(var s=function(t,e){return function(r){t(function(t,n){r(!t||e,{err:t,result:n})},o)}};t;)i.push(s(e,!(t-=1)));a.series(i,function(t,e){e=e[e.length-1],(n||r)(e.err,e.result)})};return r?o():o},a.waterfall=function(t,e){if(e=e||function(){},!u(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}if(!t.length)return e();var n=function(t){return function(r){if(r)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=t.next();i.push(o?n(o):e),a.setImmediate(function(){t.apply(null,i)})}}};n(a.iterator(t))()};var R=function(t,e,r){if(r=r||function(){},u(e))t.map(e,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},r);else{var n={};t.each(f(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,r(e)})},function(t){r(t,n)})}};a.parallel=function(t,e){R({map:a.map,each:a.each},t,e)},a.parallelLimit=function(t,e,r){R({map:E(e),each:p(e)},t,r)},a.series=function(t,e){if(e=e||function(){},u(t))a.mapSeries(t,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},e);else{var r={};a.eachSeries(f(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(t){e(t,r)})}},a.iterator=function(t){var e=function(r){var n=function(){return t.length&&t[r].apply(null,arguments),n.next()};return n.next=function(){return r<t.length-1?e(r+1):null},n};return e(0)},a.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var b=function(t,e,r,n){var i=[];t(e,function(t,e){r(t,function(t,r){i=i.concat(r||[]),e(t)})},function(t){n(t,i)})};a.concat=d(b),a.concatSeries=g(b),a.whilst=function(t,e,r){t()?e(function(n){return n?r(n):void a.whilst(t,e,r)}):r()},a.doWhilst=function(t,e,r){t(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?a.doWhilst(t,e,r):r()})},a.until=function(t,e,r){t()?r():e(function(n){return n?r(n):void a.until(t,e,r)})},a.doUntil=function(t,e,r){t(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?r():a.doUntil(t,e,r)})},a.queue=function(t,e){function r(t,e,r,n){return t.started||(t.started=!0),u(e)||(e=[e]),0==e.length?a.setImmediate(function(){t.drain&&t.drain()}):void h(e,function(e){var i={data:e,callback:"function"==typeof n?n:null};r?t.tasks.unshift(i):t.tasks.push(i),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),a.setImmediate(t.process)})}void 0===e&&(e=1);var i=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){r(o,t,!1,e)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(t,e){r(o,t,!0,e)},process:function(){if(!o.paused&&i<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),i+=1;var r=function(){i-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+i===0&&o.drain(),o.process()},a=n(r);t(e.data,a)}},length:function(){return o.tasks.length},running:function(){return i},idle:function(){return o.tasks.length+i===0},pause:function(){o.paused!==!0&&(o.paused=!0,o.process())},resume:function(){o.paused!==!1&&(o.paused=!1,o.process())}};return o},a.priorityQueue=function(t,e){function r(t,e){return t.priority-e.priority}function n(t,e,r){for(var n=-1,i=t.length-1;i>n;){var o=n+(i-n+1>>>1);r(e,t[o])>=0?n=o:i=o-1}return n}function i(t,e,i,o){return t.started||(t.started=!0),u(e)||(e=[e]),0==e.length?a.setImmediate(function(){t.drain&&t.drain()}):void h(e,function(e){var s={data:e,priority:i,callback:"function"==typeof o?o:null};t.tasks.splice(n(t.tasks,s,r)+1,0,s),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),a.setImmediate(t.process)})}var o=a.queue(t,e);return o.push=function(t,e,r){i(o,t,e,r)},delete o.unshift,o},a.cargo=function(t,e){var r=!1,n=[],i={tasks:n,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,r){u(t)||(t=[t]),h(t,function(t){n.push({data:t,callback:"function"==typeof r?r:null}),i.drained=!1,i.saturated&&n.length===e&&i.saturated()}),a.setImmediate(i.process)},process:function o(){if(!r){if(0===n.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var a="number"==typeof e?n.splice(0,e):n.splice(0,n.length),s=l(a,function(t){return t.data});i.empty&&i.empty(),r=!0,t(s,function(){r=!1;var t=arguments;h(a,function(e){e.callback&&e.callback.apply(null,t)}),o()})}},length:function(){return n.length},running:function(){return r}};return i};var _=function(t){return function(e){var r=Array.prototype.slice.call(arguments,1);e.apply(null,r.concat([function(e){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&h(r,function(e){console[t](e)}))}]))}};a.log=_("log"),a.dir=_("dir"),a.memoize=function(t,e){var r={},n={};e=e||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),s=e.apply(null,i);s in r?a.nextTick(function(){o.apply(null,r[s])}):s in n?n[s].push(o):(n[s]=[o],t.apply(null,i.concat([function(){r[s]=arguments;var t=n[s];delete n[s];for(var e=0,i=t.length;i>e;e++)t[e].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=t,i},a.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},a.times=function(t,e,r){for(var n=[],i=0;t>i;i++)n.push(i);return a.map(n,e,r)},a.timesSeries=function(t,e,r){for(var n=[],i=0;t>i;i++)n.push(i);return a.mapSeries(n,e,r)},a.seq=function(){var t=arguments;return function(){var e=this,r=Array.prototype.slice.call(arguments),n=r.pop();a.reduce(t,r,function(t,r,n){r.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);n(t,e)}]))},function(t,r){n.apply(e,[t].concat(r))})}},a.compose=function(){return a.seq.apply(null,Array.prototype.reverse.call(arguments))};var w=function(t,e){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop();return t(e,function(t,e){t.apply(r,n.concat([e]))},i)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)}return r};a.applyEach=d(w),a.applyEachSeries=g(w),a.forever=function(t,e){function r(n){if(n){if(e)return e(n);throw n}t(r)}r()},"undefined"!=typeof r&&r.exports?r.exports=a:"undefined"!=typeof t&&t.amd?t([],function(){return a}):i.async=a}()}).call(this,e("_process"))},{_process:4}],3:[function(t,e,r){(function(t){function e(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,i="/"===a.charAt(0))}return r=e(n(r.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(t){var i=r.isAbsolute(t),o="/"===a(t,-1);return t=e(n(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},r.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var i=n(t.split("/")),o=n(e.split("/")),a=Math.min(i.length,o.length),s=a,u=0;a>u;u++)if(i[u]!==o[u]){s=u;break}for(var h=[],u=s;u<i.length;u++)h.push("..");return h=h.concat(o.slice(s)),h.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},r.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return 0>e&&(e=t.length+e),t.substr(e,r)}}).call(this,t("_process"))},{_process:4}],4:[function(t,e,r){function n(){if(!s){s=!0;for(var t,e=a.length;e;){t=a,a=[];for(var r=-1;++r<e;)t[r]();e=a.length}s=!1}}function i(){}var o=e.exports={},a=[],s=!1;o.nextTick=function(t){a.push(t),s||setTimeout(n,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=i,o.addListener=i,o.once=i,o.off=i,o.removeListener=i,o.removeAllListeners=i,o.emit=i,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],5:[function(e,r,n){(function(e){!function(i){function o(t){throw RangeError(D[t])}function a(t,e){for(var r=t.length;r--;)t[r]=e(t[r]);return t}function s(t,e){return a(t.split(F),e).join(".")}function u(t){for(var e,r,n=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function h(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=N(t>>>10&1023|55296),t=56320|1023&t),e+=N(t)}).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:b}function c(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function f(t,e,r){var n=0;for(t=r?O(t/H):t>>1,t+=O(t/e);t>B*w>>1;n+=b)t=O(t/B);return O(n+(B+1)*t/(t+M))}function p(t){var e,r,n,i,a,s,u,c,p,d,m=[],g=t.length,v=0,E=C,y=S;for(r=t.lastIndexOf(A),0>r&&(r=0),n=0;r>n;++n)t.charCodeAt(n)>=128&&o("not-basic"),m.push(t.charCodeAt(n));for(i=r>0?r+1:0;g>i;){for(a=v,s=1,u=b;i>=g&&o("invalid-input"),c=l(t.charCodeAt(i++)),(c>=b||c>O((R-v)/s))&&o("overflow"),v+=c*s,p=y>=u?_:u>=y+w?w:u-y,!(p>c);u+=b)d=b-p,s>O(R/d)&&o("overflow"),s*=d;e=m.length+1,y=f(v-a,e,0==a),O(v/e)>R-E&&o("overflow"),E+=O(v/e),v%=e,m.splice(v++,0,E)}return h(m)}function d(t){var e,r,n,i,a,s,h,l,p,d,m,g,v,E,y,x=[];for(t=u(t),g=t.length,e=C,r=0,a=S,s=0;g>s;++s)m=t[s],128>m&&x.push(N(m));for(n=i=x.length,i&&x.push(A);g>n;){for(h=R,s=0;g>s;++s)m=t[s],m>=e&&h>m&&(h=m);for(v=n+1,h-e>O((R-r)/v)&&o("overflow"),r+=(h-e)*v,e=h,s=0;g>s;++s)if(m=t[s],e>m&&++r>R&&o("overflow"),m==e){for(l=r,p=b;d=a>=p?_:p>=a+w?w:p-a,!(d>l);p+=b)y=l-d,E=b-d,x.push(N(c(d+y%E,0))),l=O(y/E);x.push(N(c(l,0))),a=f(r,v,n==i),r=0,++n}++r,++e}return x.join("")}function m(t){return s(t,function(t){return L.test(t)?p(t.slice(4).toLowerCase()):t})}function g(t){return s(t,function(t){return P.test(t)?"xn--"+d(t):t})}var v="object"==typeof n&&n,E="object"==typeof r&&r&&r.exports==v&&r,y="object"==typeof e&&e;(y.global===y||y.window===y)&&(i=y);var x,T,R=2147483647,b=36,_=1,w=26,M=38,H=700,S=72,C=128,A="-",L=/^xn--/,P=/[^ -~]/,F=/\x2E|\u3002|\uFF0E|\uFF61/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=b-_,O=Math.floor,N=String.fromCharCode;if(x={version:"1.2.4",ucs2:{decode:u,encode:h},decode:p,encode:d,toASCII:g,toUnicode:m},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return x});else if(v&&!v.nodeType)if(E)E.exports=x;else for(T in x)x.hasOwnProperty(T)&&(v[T]=x[T]);else i.punycode=x}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,o){e=e||"&",r=r||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var h=t.length;u>0&&h>u&&(h=u);for(var l=0;h>l;++l){var c,f,p,d,m=t[l].replace(s,"%20"),g=m.indexOf(r);g>=0?(c=m.substr(0,g),f=m.substr(g+1)):(c=m,f=""),p=decodeURIComponent(c),d=decodeURIComponent(f),n(a,p)?i(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],7:[function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?n(a(t),function(a){var s=encodeURIComponent(i(a))+r;return o(t[a])?n(t[a],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[a]))}).join(e):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],8:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":6,"./encode":7}],9:[function(t,e,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&h(t)&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}function o(t){return u(t)&&(t=i(t)),t instanceof n?t.format():n.prototype.format.call(t)}function a(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function h(t){return"object"==typeof t&&null!==t}function l(t){return null===t}function c(t){return null==t}var f=t("punycode");r.parse=i,r.resolve=a,r.resolveObject=s,r.format=o,r.Url=n;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(g),E=["%","/","?",";","#"].concat(v),y=["/","?","#"],x=255,T=/^[a-z0-9A-Z_-]{0,63}$/,R=/^([a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},M=t("querystring");n.prototype.parse=function(t,e,r){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t;n=n.trim();var i=p.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||i&&_[i]||(n=n.substr(2),this.slashes=!0)}if(!_[i]&&(a||i&&!w[i])){for(var s=-1,h=0;h<y.length;h++){var l=n.indexOf(y[h]);-1!==l&&(-1===s||s>l)&&(s=l)}var c,d;d=-1===s?n.lastIndexOf("@"):n.lastIndexOf("@",s),-1!==d&&(c=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(c)),s=-1;for(var h=0;h<E.length;h++){var l=n.indexOf(E[h]);-1!==l&&(-1===s||s>l)&&(s=l)}-1===s&&(s=n.length),this.host=n.slice(0,s),n=n.slice(s),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),h=0,H=g.length;H>h;h++){var S=g[h];if(S&&!S.match(T)){for(var C="",A=0,L=S.length;L>A;A++)C+=S.charCodeAt(A)>127?"x":S[A];if(!C.match(T)){var P=g.slice(0,h),F=g.slice(h+1),D=S.match(R);D&&(P.push(D[1]),F.unshift(D[2])),F.length&&(n="/"+F.join(".")+n),this.hostname=P.join(".");break}}}if(this.hostname=this.hostname.length>x?"":this.hostname.toLowerCase(),!m){for(var B=this.hostname.split("."),O=[],h=0;h<B.length;++h){var N=B[h];O.push(N.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(N):N)}this.hostname=O.join(".")}var k=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+k,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!b[o])for(var h=0,H=v.length;H>h;h++){var I=v[h],z=encodeURIComponent(I);z===I&&(z=escape(I)),n=n.split(I).join(z)}var V=n.indexOf("#");-1!==V&&(this.hash=n.substr(V),n=n.slice(0,V));var j=n.indexOf("?");if(-1!==j?(this.search=n.substr(j),this.query=n.substr(j+1),e&&(this.query=M.parse(this.query)),n=n.slice(0,j)):e&&(this.search="",this.query={}),n&&(this.pathname=n),w[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var k=this.pathname||"",N=this.search||"";this.path=k+N}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&h(this.query)&&Object.keys(this.query).length&&(o=M.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||w[e])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+r+a+n},n.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(u(t)){var e=new n;e.parse(t,!1,!0),t=e}var r=new n;if(Object.keys(this).forEach(function(t){r[t]=this[t]},this),r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(r[e]=t[e])}),w[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(t.protocol&&t.protocol!==r.protocol){if(!w[t.protocol])return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.href=r.format(),r;if(r.protocol=t.protocol,t.host||_[t.protocol])r.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var o=r.pathname||"",a=r.search||"";r.path=o+a}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var s=r.pathname&&"/"===r.pathname.charAt(0),h=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=h||s||r.host&&t.pathname,p=f,d=r.pathname&&r.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],m=r.protocol&&!w[r.protocol];if(m&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),f=f&&(""===i[0]||""===d[0])),h)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),r.search=t.search,r.query=t.query;else if(!c(t.search)){if(m){r.hostname=r.host=d.shift();var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return r.search=t.search,r.query=t.query,l(r.pathname)&&l(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var v=d.slice(-1)[0],E=(r.host||t.host)&&("."===v||".."===v)||""===v,y=0,x=d.length;x>=0;x--)v=d[x],"."==v?d.splice(x,1):".."===v?(d.splice(x,1),y++):y&&(d.splice(x,1),y--);if(!f&&!p)for(;y--;y)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),E&&"/"!==d.join("/").substr(-1)&&d.push("");var T=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){r.hostname=r.host=T?"":d.length?d.shift():"";var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return f=f||r.host&&d.length,f&&!T&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),l(r.pathname)&&l(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:5,querystring:8}],10:[function(t,e,r){"use strict";function n(t,e,r){r=r||2;var n=e&&e.length,s=n?e[0]*r:t.length,u=o(t,i(t,0,s,r,!0)),h=[];if(!u)return h;var c,f,p,d,m,g,v;if(n&&(u=l(t,e,u,r)),t.length>80*r){c=p=t[0],f=d=t[1];for(var E=r;s>E;E+=r)m=t[E],g=t[E+1],c>m&&(c=m),f>g&&(f=g),m>p&&(p=m),g>d&&(d=g);v=Math.max(p-c,d-f)}return a(t,u,h,r,c,f,v),h}function i(t,e,r,n,i){var o,a,s,u=0;for(o=e,a=r-n;r>o;o+=n)u+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;if(i===u>0)for(o=e;r>o;o+=n)s=w(o,s);else for(o=r-n;o>=e;o-=n)s=w(o,s);return s}function o(t,e,r){r||(r=e);var n,i=e;do if(n=!1,y(t,i.i,i.next.i)||0===E(t,i.prev.i,i.i,i.next.i)){if(i.prev.next=i.next,i.next.prev=i.prev,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ),i=r=i.prev,i===i.next)return null;n=!0}else i=i.next;while(n||i!==r);return r}function a(t,e,r,n,i,l,c,f){if(e){f||void 0===i||p(t,e,i,l,c);for(var d,m,g=e;e.prev!==e.next;)if(d=e.prev,m=e.next,s(t,e,i,l,c))r.push(d.i/n),r.push(e.i/n),r.push(m.i/n),m.prev=d,d.next=m,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ),e=m.next,g=m.next;else if(e=m,e===g){f?1===f?(e=u(t,e,r,n),a(t,e,r,n,i,l,c,2)):2===f&&h(t,e,r,n,i,l,c):a(t,o(t,e),r,n,i,l,c,1);break}}}function s(t,e,r,n,i){var o=e.prev.i,a=e.i,s=e.next.i,u=t[o],h=t[o+1],l=t[a],c=t[a+1],f=t[s],p=t[s+1],d=u*c-h*l,g=u*p-h*f,v=f*c-p*l,E=d-g-v;if(0>=E)return!1;var y,x,T,R,b,_,w,M=p-h,H=u-f,S=h-c,C=l-u;if(void 0!==r){var A=l>u?f>u?u:f:f>l?l:f,L=c>h?p>h?h:p:p>c?c:p,P=u>l?u>f?u:f:l>f?l:f,F=h>c?h>p?h:p:c>p?c:p,D=m(A,L,r,n,i),B=m(P,F,r,n,i);for(w=e.nextZ;w&&w.z<=B;)if(y=w.i,w=w.nextZ,y!==o&&y!==s&&(x=t[y],T=t[y+1],R=M*x+H*T-g,R>=0&&(b=S*x+C*T+d,b>=0&&(_=E-R-b,_>=0&&(R&&b||R&&_||b&&_)))))return!1;for(w=e.prevZ;w&&w.z>=D;)if(y=w.i,w=w.prevZ,y!==o&&y!==s&&(x=t[y],T=t[y+1],R=M*x+H*T-g,R>=0&&(b=S*x+C*T+d,b>=0&&(_=E-R-b,_>=0&&(R&&b||R&&_||b&&_)))))return!1}else for(w=e.next.next;w!==e.prev;)if(y=w.i,w=w.next,x=t[y],T=t[y+1],R=M*x+H*T-g,R>=0&&(b=S*x+C*T+d,b>=0&&(_=E-R-b,_>=0&&(R&&b||R&&_||b&&_))))return!1;return!0}function u(t,e,r,n){var i=e;do{var o=i.prev,a=i.next.next;if(o.i!==a.i&&x(t,o.i,i.i,i.next.i,a.i)&&R(t,o,a)&&R(t,a,o)){r.push(o.i/n),r.push(i.i/n),r.push(a.i/n),o.next=a,a.prev=o;var s=i.prevZ,u=i.nextZ&&i.nextZ.nextZ;s&&(s.nextZ=u),u&&(u.prevZ=s),i=e=a}i=i.next}while(i!==e);return i}function h(t,e,r,n,i,s,u){var h=e;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&v(t,h,l)){var c=_(h,l);return h=o(t,h,h.next),c=o(t,c,c.next),a(t,h,r,n,i,s,u),void a(t,c,r,n,i,s,u)}l=l.next}h=h.next}while(h!==e)}function l(t,e,r,n){var a,s,u,h,l,f=[];for(a=0,s=e.length;s>a;a++)u=e[a]*n,h=s-1>a?e[a+1]*n:t.length,l=o(t,i(t,u,h,n,!1)),l&&f.push(g(t,l));for(f.sort(function(e,r){return t[e.i]-t[r.i]}),a=0;a<f.length;a++)c(t,f[a],r),r=o(t,r,r.next);return r}function c(t,e,r){if(r=f(t,e,r)){var n=_(r,e);o(t,n,n.next)}}function f(t,e,r){var n,i,o,a=r,s=e.i,u=t[s],h=t[s+1],l=-(1/0);do{if(i=a.i,o=a.next.i,h<=t[i+1]&&h>=t[o+1]){var c=t[i]+(h-t[i+1])*(t[o]-t[i])/(t[o+1]-t[i+1]);u>=c&&c>l&&(l=c,n=t[i]<t[o]?a:a.next)}a=a.next}while(a!==r);if(!n)return null;var f,p,d,m,g,v,E=t[n.i],y=t[n.i+1],x=u*y-h*E,T=u*h-h*l,b=h-h,_=u-l,w=h-y,M=E-u,H=x-T-(l*y-h*E),S=0>=H?-1:1,C=n,A=1/0;for(a=n.next;a!==C;)f=t[a.i],p=t[a.i+1],d=u-f,d>=0&&f>=E&&(m=(b*f+_*p-T)*S,m>=0&&(g=(w*f+M*p+x)*S,g>=0&&H*S-m-g>=0&&(v=Math.abs(h-p)/d,A>v&&R(t,a,e)&&(n=a,A=v)))),a=a.next;return n}function p(t,e,r,n,i){var o=e;do null===o.z&&(o.z=m(t[o.i],t[o.i+1],r,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,d(o)}function d(t){var e,r,n,i,o,a,s,u,h=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,n=r,s=0,e=0;h>e&&(s++,n=n.nextZ,n);e++);for(u=h;s>0||u>0&&n;)0===s?(i=n,n=n.nextZ,u--):0!==u&&n?r.z<=n.z?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,s--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,h*=2}while(a>1);return t}function m(t,e,r,n,i){return t=1e3*(t-r)/i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=1e3*(e-n)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function g(t,e){var r=e,n=e;do t[r.i]<t[n.i]&&(n=r),r=r.next;while(r!==e);return n}function v(t,e,r){return!T(t,e,e.i,r.i)&&R(t,e,r)&&R(t,r,e)&&b(t,e,e.i,r.i)}function E(t,e,r,n){var i=(t[r+1]-t[e+1])*(t[n]-t[r])-(t[r]-t[e])*(t[n+1]-t[r+1]);return i>0?1:0>i?-1:0}function y(t,e,r){return t[e]===t[r]&&t[e+1]===t[r+1]}function x(t,e,r,n,i){return E(t,e,r,n)!==E(t,e,r,i)&&E(t,n,i,e)!==E(t,n,i,r)}function T(t,e,r,n){var i=e;do{var o=i.i,a=i.next.i;if(o!==r&&a!==r&&o!==n&&a!==n&&x(t,o,a,r,n))return!0;i=i.next}while(i!==e);return!1}function R(t,e,r){return-1===E(t,e.prev.i,e.i,e.next.i)?-1!==E(t,e.i,r.i,e.next.i)&&-1!==E(t,e.i,e.prev.i,r.i):-1===E(t,e.i,r.i,e.prev.i)||-1===E(t,e.i,e.next.i,r.i)}function b(t,e,r,n){var i=e,o=!1,a=(t[r]+t[n])/2,s=(t[r+1]+t[n+1])/2;do{var u=i.i,h=i.next.i;t[u+1]>s!=t[h+1]>s&&a<(t[h]-t[u])*(s-t[u+1])/(t[h+1]-t[u+1])+t[u]&&(o=!o),i=i.next}while(i!==e);return o}function _(t,e){var r=new M(t.i),n=new M(e.i),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function w(t,e){var r=new M(t);return e?(r.next=e.next,r.prev=e,e.next.prev=r,e.next=r):(r.prev=r,r.next=r),r}function M(t){this.i=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null}e.exports=n},{}],11:[function(t,e,r){"use strict";function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(){}var o="function"!=typeof Object.create?"~":!1;i.prototype._events=void 0,i.prototype.listeners=function(t,e){var r=o?o+t:t,n=this._events&&this._events[r];if(e)return!!n;if(!n)return[];if(this._events[r].fn)return[this._events[r].fn];for(var i=0,a=this._events[r].length,s=new Array(a);a>i;i++)s[i]=this._events[r][i].fn;return s},i.prototype.emit=function(t,e,r,n,i,a){var s=o?o+t:t;if(!this._events||!this._events[s])return!1;var u,h,l=this._events[s],c=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,i),!0;case 6:return l.fn.call(l.context,e,r,n,i,a),!0}for(h=1,u=new Array(c-1);c>h;h++)u[h-1]=arguments[h];l.fn.apply(l.context,u)}else{var f,p=l.length;for(h=0;p>h;h++)switch(l[h].once&&this.removeListener(t,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,e);break;case 3:
l[h].fn.call(l[h].context,e,r);break;default:if(!u)for(f=1,u=new Array(c-1);c>f;f++)u[f-1]=arguments[f];l[h].fn.apply(l[h].context,u)}}return!0},i.prototype.on=function(t,e,r){var i=new n(e,r||this),a=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],i]:this._events[a].push(i):this._events[a]=i,this},i.prototype.once=function(t,e,r){var i=new n(e,r||this,!0),a=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],i]:this._events[a].push(i):this._events[a]=i,this},i.prototype.removeListener=function(t,e,r,n){var i=o?o+t:t;if(!this._events||!this._events[i])return this;var a=this._events[i],s=[];if(e)if(a.fn)(a.fn!==e||n&&!a.once||r&&a.context!==r)&&s.push(a);else for(var u=0,h=a.length;h>u;u++)(a[u].fn!==e||n&&!a[u].once||r&&a[u].context!==r)&&s.push(a[u]);return s.length?this._events[i]=1===s.length?s[0]:s:delete this._events[i],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[o?o+t:t]:this._events=o?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=o,e.exports=i},{}],12:[function(t,e,r){"use strict";function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=Object.assign||function(t,e){for(var r,i,o=n(t),a=1;a<arguments.length;a++){r=arguments[a],i=Object.keys(Object(r));for(var s=0;s<i.length;s++)o[i[s]]=r[i[s]]}return o}},{}],13:[function(e,r,n){(function(e){/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
!function(){function n(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(i,arguments)}}var i,o,a={};i=this,null!=i&&(o=i.async),a.noConflict=function(){return i.async=o,a};var s=Object.prototype.toString,u=Array.isArray||function(t){return"[object Array]"===s.call(t)},h=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r+=1)e(t[r],r,t)},l=function(t,e){if(t.map)return t.map(e);var r=[];return h(t,function(t,n,i){r.push(e(t,n,i))}),r},c=function(t,e,r){return t.reduce?t.reduce(e,r):(h(t,function(t,n,i){r=e(r,t,n,i)}),r)},f=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};"undefined"!=typeof e&&e.nextTick?(a.nextTick=e.nextTick,a.setImmediate="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:a.nextTick):"function"==typeof setImmediate?(a.nextTick=function(t){setImmediate(t)},a.setImmediate=a.nextTick):(a.nextTick=function(t){setTimeout(t,0)},a.setImmediate=a.nextTick),a.each=function(t,e,r){function i(e){e?(r(e),r=function(){}):(o+=1,o>=t.length&&r())}if(r=r||function(){},!t.length)return r();var o=0;h(t,function(t){e(t,n(i))})},a.forEach=a.each,a.eachSeries=function(t,e,r){if(r=r||function(){},!t.length)return r();var n=0,i=function(){e(t[n],function(e){e?(r(e),r=function(){}):(n+=1,n>=t.length?r():i())})};i()},a.forEachSeries=a.eachSeries,a.eachLimit=function(t,e,r,n){var i=p(e);i.apply(null,[t,r,n])},a.forEachLimit=a.eachLimit;var p=function(t){return function(e,r,n){if(n=n||function(){},!e.length||0>=t)return n();var i=0,o=0,a=0;!function s(){if(i>=e.length)return n();for(;t>a&&o<e.length;)o+=1,a+=1,r(e[o-1],function(t){t?(n(t),n=function(){}):(i+=1,a-=1,i>=e.length?n():s())})}()}},d=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[a.each].concat(e))}},m=function(t,e){return function(){var r=Array.prototype.slice.call(arguments);return e.apply(null,[p(t)].concat(r))}},g=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[a.eachSeries].concat(e))}},v=function(t,e,r,n){if(e=l(e,function(t,e){return{index:e,value:t}}),n){var i=[];t(e,function(t,e){r(t.value,function(r,n){i[t.index]=n,e(r)})},function(t){n(t,i)})}else t(e,function(t,e){r(t.value,function(t){e(t)})})};a.map=d(v),a.mapSeries=g(v),a.mapLimit=function(t,e,r,n){return E(e)(t,r,n)};var E=function(t){return m(t,v)};a.reduce=function(t,e,r,n){a.eachSeries(t,function(t,n){r(e,t,function(t,r){e=r,n(t)})},function(t){n(t,e)})},a.inject=a.reduce,a.foldl=a.reduce,a.reduceRight=function(t,e,r,n){var i=l(t,function(t){return t}).reverse();a.reduce(i,e,r,n)},a.foldr=a.reduceRight;var y=function(t,e,r,n){var i=[];e=l(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r&&i.push(t),e()})},function(t){n(l(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};a.filter=d(y),a.filterSeries=g(y),a.select=a.filter,a.selectSeries=a.filterSeries;var x=function(t,e,r,n){var i=[];e=l(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r||i.push(t),e()})},function(t){n(l(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};a.reject=d(x),a.rejectSeries=g(x);var T=function(t,e,r,n){t(e,function(t,e){r(t,function(r){r?(n(t),n=function(){}):e()})},function(t){n()})};a.detect=d(T),a.detectSeries=g(T),a.some=function(t,e,r){a.each(t,function(t,n){e(t,function(t){t&&(r(!0),r=function(){}),n()})},function(t){r(!1)})},a.any=a.some,a.every=function(t,e,r){a.each(t,function(t,n){e(t,function(t){t||(r(!1),r=function(){}),n()})},function(t){r(!0)})},a.all=a.every,a.sortBy=function(t,e,r){a.map(t,function(t,r){e(t,function(e,n){e?r(e):r(null,{value:t,criteria:n})})},function(t,e){if(t)return r(t);var n=function(t,e){var r=t.criteria,n=e.criteria;return n>r?-1:r>n?1:0};r(null,l(e.sort(n),function(t){return t.value}))})},a.auto=function(t,e){e=e||function(){};var r=f(t),n=r.length;if(!n)return e();var i={},o=[],s=function(t){o.unshift(t)},l=function(t){for(var e=0;e<o.length;e+=1)if(o[e]===t)return void o.splice(e,1)},p=function(){n--,h(o.slice(0),function(t){t()})};s(function(){if(!n){var t=e;e=function(){},t(null,i)}}),h(r,function(r){var n=u(t[r])?t[r]:[t[r]],o=function(t){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),t){var o={};h(f(i),function(t){o[t]=i[t]}),o[r]=n,e(t,o),e=function(){}}else i[r]=n,a.setImmediate(p)},d=n.slice(0,Math.abs(n.length-1))||[],m=function(){return c(d,function(t,e){return t&&i.hasOwnProperty(e)},!0)&&!i.hasOwnProperty(r)};if(m())n[n.length-1](o,i);else{var g=function(){m()&&(l(g),n[n.length-1](o,i))};s(g)}})},a.retry=function(t,e,r){var n=5,i=[];"function"==typeof t&&(r=e,e=t,t=n),t=parseInt(t,10)||n;var o=function(n,o){for(var s=function(t,e){return function(r){t(function(t,n){r(!t||e,{err:t,result:n})},o)}};t;)i.push(s(e,!(t-=1)));a.series(i,function(t,e){e=e[e.length-1],(n||r)(e.err,e.result)})};return r?o():o},a.waterfall=function(t,e){if(e=e||function(){},!u(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}if(!t.length)return e();var n=function(t){return function(r){if(r)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=t.next();i.push(o?n(o):e),a.setImmediate(function(){t.apply(null,i)})}}};n(a.iterator(t))()};var R=function(t,e,r){if(r=r||function(){},u(e))t.map(e,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},r);else{var n={};t.each(f(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,r(e)})},function(t){r(t,n)})}};a.parallel=function(t,e){R({map:a.map,each:a.each},t,e)},a.parallelLimit=function(t,e,r){R({map:E(e),each:p(e)},t,r)},a.series=function(t,e){if(e=e||function(){},u(t))a.mapSeries(t,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},e);else{var r={};a.eachSeries(f(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(t){e(t,r)})}},a.iterator=function(t){var e=function(r){var n=function(){return t.length&&t[r].apply(null,arguments),n.next()};return n.next=function(){return r<t.length-1?e(r+1):null},n};return e(0)},a.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var b=function(t,e,r,n){var i=[];t(e,function(t,e){r(t,function(t,r){i=i.concat(r||[]),e(t)})},function(t){n(t,i)})};a.concat=d(b),a.concatSeries=g(b),a.whilst=function(t,e,r){t()?e(function(n){return n?r(n):void a.whilst(t,e,r)}):r()},a.doWhilst=function(t,e,r){t(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?a.doWhilst(t,e,r):r()})},a.until=function(t,e,r){t()?r():e(function(n){return n?r(n):void a.until(t,e,r)})},a.doUntil=function(t,e,r){t(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?r():a.doUntil(t,e,r)})},a.queue=function(t,e){function r(t,e,r,n){return t.started||(t.started=!0),u(e)||(e=[e]),0==e.length?a.setImmediate(function(){t.drain&&t.drain()}):void h(e,function(e){var i={data:e,callback:"function"==typeof n?n:null};r?t.tasks.unshift(i):t.tasks.push(i),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),a.setImmediate(t.process)})}void 0===e&&(e=1);var i=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){r(o,t,!1,e)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(t,e){r(o,t,!0,e)},process:function(){if(!o.paused&&i<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),i+=1;var r=function(){i-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+i===0&&o.drain(),o.process()},a=n(r);t(e.data,a)}},length:function(){return o.tasks.length},running:function(){return i},idle:function(){return o.tasks.length+i===0},pause:function(){o.paused!==!0&&(o.paused=!0,o.process())},resume:function(){o.paused!==!1&&(o.paused=!1,o.process())}};return o},a.priorityQueue=function(t,e){function r(t,e){return t.priority-e.priority}function n(t,e,r){for(var n=-1,i=t.length-1;i>n;){var o=n+(i-n+1>>>1);r(e,t[o])>=0?n=o:i=o-1}return n}function i(t,e,i,o){return t.started||(t.started=!0),u(e)||(e=[e]),0==e.length?a.setImmediate(function(){t.drain&&t.drain()}):void h(e,function(e){var s={data:e,priority:i,callback:"function"==typeof o?o:null};t.tasks.splice(n(t.tasks,s,r)+1,0,s),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),a.setImmediate(t.process)})}var o=a.queue(t,e);return o.push=function(t,e,r){i(o,t,e,r)},delete o.unshift,o},a.cargo=function(t,e){var r=!1,n=[],i={tasks:n,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,r){u(t)||(t=[t]),h(t,function(t){n.push({data:t,callback:"function"==typeof r?r:null}),i.drained=!1,i.saturated&&n.length===e&&i.saturated()}),a.setImmediate(i.process)},process:function o(){if(!r){if(0===n.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var a="number"==typeof e?n.splice(0,e):n.splice(0,n.length),s=l(a,function(t){return t.data});i.empty&&i.empty(),r=!0,t(s,function(){r=!1;var t=arguments;h(a,function(e){e.callback&&e.callback.apply(null,t)}),o()})}},length:function(){return n.length},running:function(){return r}};return i};var _=function(t){return function(e){var r=Array.prototype.slice.call(arguments,1);e.apply(null,r.concat([function(e){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&h(r,function(e){console[t](e)}))}]))}};a.log=_("log"),a.dir=_("dir"),a.memoize=function(t,e){var r={},n={};e=e||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),s=e.apply(null,i);s in r?a.nextTick(function(){o.apply(null,r[s])}):s in n?n[s].push(o):(n[s]=[o],t.apply(null,i.concat([function(){r[s]=arguments;var t=n[s];delete n[s];for(var e=0,i=t.length;i>e;e++)t[e].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=t,i},a.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},a.times=function(t,e,r){for(var n=[],i=0;t>i;i++)n.push(i);return a.map(n,e,r)},a.timesSeries=function(t,e,r){for(var n=[],i=0;t>i;i++)n.push(i);return a.mapSeries(n,e,r)},a.seq=function(){var t=arguments;return function(){var e=this,r=Array.prototype.slice.call(arguments),n=r.pop();a.reduce(t,r,function(t,r,n){r.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);n(t,e)}]))},function(t,r){n.apply(e,[t].concat(r))})}},a.compose=function(){return a.seq.apply(null,Array.prototype.reverse.call(arguments))};var w=function(t,e){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop();return t(e,function(t,e){t.apply(r,n.concat([e]))},i)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)}return r};a.applyEach=d(w),a.applyEachSeries=g(w),a.forever=function(t,e){function r(n){if(n){if(e)return e(n);throw n}t(r)}r()},"undefined"!=typeof r&&r.exports?r.exports=a:"undefined"!=typeof t&&t.amd?t([],function(){return a}):i.async=a}()}).call(this,e("_process"))},{_process:4}],14:[function(t,e,r){arguments[4][11][0].apply(r,arguments)},{dup:11}],15:[function(t,e,r){function n(t,e){s.call(this),e=e||10,this.baseUrl=t||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._boundOnLoad=this._onLoad.bind(this),this._buffer=[],this._numToLoad=0,this._queue=i.queue(this._boundLoadResource,e),this.resources={}}var i=t("async"),o=t("url"),a=t("./Resource"),s=t("eventemitter3");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.add=n.prototype.enqueue=function(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"==typeof t&&(n=e||t.callback||t.onComplete,r=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(n=r,r=null),this.resources[t])throw new Error('Resource with name "'+t+'" already exists.');return e=this._handleBaseUrl(e),this.resources[t]=new a(t,e,r),"function"==typeof n&&this.resources[t].once("afterMiddleware",n),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=100/this._buffer.length),this},n.prototype._handleBaseUrl=function(t){var e=o.parse(t);return e.protocol||0===e.pathname.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.lastIndexOf("/")!==t.length-1?this.baseUrl+"/"+t:this.baseUrl+t},n.prototype.before=n.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},n.prototype.after=n.prototype.use=function(t){return this._afterMiddleware.push(t),this},n.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources={}},n.prototype.load=function(t){if("function"==typeof t&&this.once("complete",t),this._queue.started)return this;this.emit("start",this);for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},n.prototype._loadResource=function(t,e){var r=this;t._dequeue=e,this._runMiddleware(t,this._beforeMiddleware,function(){t.load(r._boundOnLoad)})},n.prototype._onComplete=function(){this.emit("complete",this,this.resources)},n.prototype._onLoad=function(t){this.progress+=this._progressChunk,this.emit("progress",this,t),t.error?this.emit("error",t.error,this,t):this.emit("load",this,t),this._runMiddleware(t,this._afterMiddleware,function(){t.emit("afterMiddleware",t),this._numToLoad--,0===this._numToLoad&&this._onComplete()}),t._dequeue()},n.prototype._runMiddleware=function(t,e,r){var n=this;i.eachSeries(e,function(e,r){e.call(n,t,r)},r.bind(this,t))},n.LOAD_TYPE=a.LOAD_TYPE,n.XHR_READY_STATE=a.XHR_READY_STATE,n.XHR_RESPONSE_TYPE=a.XHR_RESPONSE_TYPE},{"./Resource":16,async:13,eventemitter3:14,url:9}],16:[function(t,e,r){function n(t,e,r){if(a.call(this),r=r||{},"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=r.crossOrigin===!0?"anonymous":null,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function i(t){return t.toString().replace("object ","")}function o(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}var a=t("eventemitter3"),s=t("url"),u=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),h=null;n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.emit("complete",this)},n.prototype.load=function(t){switch(this.emit("start",this),t&&this.once("complete",t),"string"!=typeof this.crossOrigin&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this._loadImage();break;case n.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case n.LOAD_TYPE.VIDEO:this._loadElement("video");break;case n.LOAD_TYPE.XHR:default:u&&this.crossOrigin?this._loadXdr():this._loadXhr()}},n.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},n.prototype._loadElement=function(t){if(this.data=document.createElement(t),Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},n.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.responseType=this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?n.XHR_RESPONSE_TYPE.TEXT:this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},n.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){t.send()},0)},n.prototype._createSource=function(t,e,r){r||(r=t+"/"+e.substr(e.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=e,n.type=r,n},n.prototype._onError=function(t){this.error=new Error("Failed to load element using "+t.target.nodeName),this.complete()},n.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit("progress",this,t.loaded/t.total)},n.prototype._xhrOnError=function(){this.error=new Error(i(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"'),this.complete()},n.prototype._xhrOnAbort=function(){this.error=new Error(i(this.xhr)+" Request was aborted by the user."),this.complete()},n.prototype._xdrOnTimeout=function(){this.error=new Error(i(this.xhr)+" Request timed out."),this.complete()},n.prototype._xhrOnLoad=function(){var t=this.xhr,e=void 0!==t.status?t.status:200;if(200===e||204===e||0===e&&t.responseText.length>0)if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(r){this.error=new Error("Error trying to parse loaded json:",r)}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(t.responseText,"text/xml")}else{var o=document.createElement("div");o.innerHTML=t.responseText,this.data=o}this.isXml=!0}catch(r){this.error=new Error("Error trying to parse loaded xml:",r)}else this.data=t.response||t.responseText;else this.error=new Error("["+t.status+"]"+t.statusText+":"+t.responseURL);this.complete()},n.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,h||(h=document.createElement("a")),h.href=t,t=s.parse(h.href);var r=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this._getExtension()]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this._getExtension()]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(){var t,e=this.url;if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else t=e.substring(e.lastIndexOf(".")+1);return t},n.prototype._getMimeFromXhrType=function(t){switch(t){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";case n.XHR_RESPONSE_TYPE.DEFAULT:case n.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},n.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},n.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE},n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT},n.setExtensionLoadType=function(t,e){o(n._loadTypeMap,t,e)},n.setExtensionXhrType=function(t,e){o(n._xhrTypeMap,t,e)}},{eventemitter3:14,url:9}],17:[function(t,e,r){e.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(t){for(var e,r="",n=new Array(4),i=0,o=0,a=0;i<t.length;){for(e=new Array(3),o=0;o<e.length;o++)e[o]=i<t.length?255&t.charCodeAt(i++):0;switch(n[0]=e[0]>>2,n[1]=(3&e[0])<<4|e[1]>>4,n[2]=(15&e[1])<<2|e[2]>>6,n[3]=63&e[2],a=i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(o=0;o<n.length;o++)r+=this._keyStr.charAt(n[o])}return r}}},{}],18:[function(t,e,r){e.exports=t("./Loader"),e.exports.Resource=t("./Resource"),e.exports.middleware={caching:{memory:t("./middlewares/caching/memory")},parsing:{blob:t("./middlewares/parsing/blob")}}},{"./Loader":15,"./Resource":16,"./middlewares/caching/memory":19,"./middlewares/parsing/blob":20}],19:[function(t,e,r){var n={};e.exports=function(){return function(t,e){n[t.url]?(t.data=n[t.url],t.complete()):(t.once("complete",function(){n[this.url]=this.data}),e())}}},{}],20:[function(t,e,r){var n=t("../../Resource"),i=t("../../b64");window.URL=window.URL||window.webkitURL,e.exports=function(){return function(t,e){if(!t.data)return e();if(t.xhr&&t.xhrType===n.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=URL.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=r,t.isImage=!0,t.data.onload=function(){URL.revokeObjectURL(r),t.data.onload=null,e()}}}else{var o=t.xhr.getResponseHeader("content-type");o&&0===o.indexOf("image")&&(t.data=new Image,t.data.src="data:"+o+";base64,"+i.encodeBinary(t.xhr.responseText),t.isImage=!0,t.data.onload=function(){t.data.onload=null,e()})}else e()}}},{"../../Resource":16,"../../b64":17}],21:[function(t,e,r){e.exports={name:"pixi.js",version:"3.0.6",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/GoodBoyDigital/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/GoodBoyDigital/pixi.js.git"},scripts:{test:"gulp && testem ci",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},dependencies:{async:"^0.9.0",brfs:"^1.4.0",earcut:"^2.0.0",eventemitter3:"^1.1.0","object-assign":"^2.0.0","resource-loader":"^1.6.0"},devDependencies:{browserify:"^9.0.8",chai:"^2.2.0",del:"^1.1.1",gulp:"^3.8.11","gulp-cached":"^1.0.4","gulp-concat":"^2.5.2","gulp-debug":"^2.0.1","gulp-jshint":"^1.10.0","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.0","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.2.0","gulp-util":"^3.0.4","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.0-beta3","jshint-summary":"^0.4.0",minimist:"^1.1.1",mocha:"^2.2.4","require-dir":"^0.3.0","run-sequence":"^1.0.2",testem:"^0.8.2","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.1.2"},browserify:{transform:["brfs"]}}},{}],22:[function(t,e,r){var n={VERSION:t("../../package.json").version,PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};e.exports=n},{"../../package.json":21}],23:[function(t,e,r){function n(){o.call(this),this.children=[]}var i=t("../math"),o=t("./DisplayObject"),a=t("../textures/RenderTexture"),s=new i.Matrix;n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}}),n.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},n.prototype.addChildAt=function(t,e){if(t===this)return t;if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},n.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),n=this.getChildIndex(e);if(0>r||0>n)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[r]=e,this.children[n]=t}},n.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},n.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(t);this.children.splice(r,1),this.children.splice(e,0,t)},n.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[t]},n.prototype.removeChild=function(t){var e=this.children.indexOf(t);if(-1!==e)return this.removeChildAt(e)},n.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,this.children.splice(t,1),e},n.prototype.removeChildren=function(t,e){var r=t||0,n="number"==typeof e?e:this.children.length,i=n-r;if(i>0&&n>=i){for(var o=this.children.splice(r,i),a=0;a<o.length;++a)o[a].parent=null;return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},n.prototype.generateTexture=function(t,e,r){var n=this.getLocalBounds(),i=new a(t,0|n.width,0|n.height,t,r,e);return s.tx=-n.x,s.ty=-n.y,i.render(this,s),i},n.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var t=0,e=this.children.length;e>t;++t)this.children[t].updateTransform()}},n.prototype.containerUpdateTransform=n.prototype.updateTransform,n.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return i.Rectangle.EMPTY;for(var t,e,r,n=1/0,o=1/0,a=-(1/0),s=-(1/0),u=!1,h=0,l=this.children.length;l>h;++h){var c=this.children[h];c.visible&&(u=!0,t=this.children[h].getBounds(),n=n<t.x?n:t.x,o=o<t.y?o:t.y,e=t.width+t.x,r=t.height+t.y,a=a>e?a:e,s=s>r?s:r)}if(!u)return i.Rectangle.EMPTY;var f=this._bounds;f.x=n,f.y=o,f.width=a-n,f.height=s-o,this._currentBounds=f}return this._currentBounds},n.prototype.containerGetBounds=n.prototype.getBounds,n.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=i.Matrix.IDENTITY;for(var e=0,r=this.children.length;r>e;++e)this.children[e].updateTransform();return this.worldTransform=t,this._currentBounds=null,this.getBounds(i.Matrix.IDENTITY)},n.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var e,r;if(this._mask||this._filters){for(t.currentRenderer.flush(),this._filters&&t.filterManager.pushFilter(this,this._filters),this._mask&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL(t),e=0,r=this.children.length;r>e;e++)this.children[e].renderWebGL(t);t.currentRenderer.flush(),this._mask&&t.maskManager.popMask(this,this._mask),this._filters&&t.filterManager.popFilter(),t.currentRenderer.start()}else for(this._renderWebGL(t),e=0,r=this.children.length;r>e;++e)this.children[e].renderWebGL(t)}},n.prototype._renderWebGL=function(t){},n.prototype._renderCanvas=function(t){},n.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask,t),this._renderCanvas(t);for(var e=0,r=this.children.length;r>e;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.prototype.destroy=function(t){if(o.prototype.destroy.call(this),t)for(var e=0,r=this.children.length;r>e;++e)this.children[e].destroy(t);this.removeChildren(),this.children=null}},{"../math":32,"../textures/RenderTexture":70,"./DisplayObject":24}],24:[function(t,e,r){function n(){a.call(this),this.position=new i.Point,this.scale=new i.Point(1,1),this.pivot=new i.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new i.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new i.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cachedObject=null}var i=t("../math"),o=t("../textures/RenderTexture"),a=t("eventemitter3"),s=t("../const"),u=new i.Matrix;n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},worldVisible:{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},mask:{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),
this._mask=t,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}}),n.prototype.updateTransform=function(){var t,e,r,n,i,o,a=this.parent.worldTransform,u=this.worldTransform;this.rotation%s.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,r=-this._sr*this.scale.y,n=this._cr*this.scale.y,i=this.position.x,o=this.position.y,(this.pivot.x||this.pivot.y)&&(i-=this.pivot.x*t+this.pivot.y*r,o-=this.pivot.x*e+this.pivot.y*n),u.a=t*a.a+e*a.c,u.b=t*a.b+e*a.d,u.c=r*a.a+n*a.c,u.d=r*a.b+n*a.d,u.tx=i*a.a+o*a.c+a.tx,u.ty=i*a.b+o*a.d+a.ty):(t=this.scale.x,n=this.scale.y,i=this.position.x-this.pivot.x*t,o=this.position.y-this.pivot.y*n,u.a=t*a.a,u.b=t*a.b,u.c=n*a.c,u.d=n*a.d,u.tx=i*a.a+o*a.c+a.tx,u.ty=i*a.b+o*a.d+a.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},n.prototype.displayObjectUpdateTransform=n.prototype.updateTransform,n.prototype.getBounds=function(t){return i.Rectangle.EMPTY},n.prototype.getLocalBounds=function(){return this.getBounds(i.Matrix.IDENTITY)},n.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},n.prototype.toLocal=function(t,e){return e&&(t=e.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},n.prototype.renderWebGL=function(t){},n.prototype.renderCanvas=function(t){},n.prototype.generateTexture=function(t,e,r){var n=this.getLocalBounds(),i=new o(t,0|n.width,0|n.height,e,r);return u.tx=-n.x,u.ty=-n.y,i.render(this,u),i},n.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{"../const":22,"../math":32,"../textures/RenderTexture":70,eventemitter3:11}],25:[function(t,e,r){function n(){i.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=l.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new h.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var i=t("../display/Container"),o=t("../textures/Texture"),a=t("../renderers/canvas/utils/CanvasBuffer"),s=t("../renderers/canvas/utils/CanvasGraphics"),u=t("./GraphicsData"),h=t("../math"),l=t("../const"),c=new h.Point;n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{}),n.prototype.clone=function(){var t=new n;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=this.dirty,t.glDirty=this.glDirty,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},n.prototype.lineStyle=function(t,e,r){return this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0===r?1:r,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new h.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},n.prototype.moveTo=function(t,e){return this.drawShape(new h.Polygon([t,e])),this},n.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},n.prototype.quadraticCurveTo=function(t,e,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i,o,a=20,s=this.currentPath.shape.points;0===s.length&&this.moveTo(0,0);for(var u=s[s.length-2],h=s[s.length-1],l=0,c=1;a>=c;++c)l=c/a,i=u+(t-u)*l,o=h+(e-h)*l,s.push(i+(t+(r-t)*l-i)*l,o+(e+(n-e)*l-o)*l);return this.dirty=this.boundsDirty=!0,this},n.prototype.bezierCurveTo=function(t,e,r,n,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var a,s,u,h,l,c=20,f=this.currentPath.shape.points,p=f[f.length-2],d=f[f.length-1],m=0,g=1;c>=g;++g)m=g/c,a=1-m,s=a*a,u=s*a,h=m*m,l=h*m,f.push(u*p+3*s*m*t+3*a*h*r+l*i,u*d+3*s*m*e+3*a*h*n+l*o);return this.dirty=this.boundsDirty=!0,this},n.prototype.arcTo=function(t,e,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1],u=s-e,h=a-t,l=n-e,c=r-t,f=Math.abs(u*c-h*l);if(1e-8>f||0===i)(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e);else{var p=u*u+h*h,d=l*l+c*c,m=u*l+h*c,g=i*Math.sqrt(p)/f,v=i*Math.sqrt(d)/f,E=g*m/p,y=v*m/d,x=g*c+v*h,T=g*l+v*u,R=h*(v+E),b=u*(v+E),_=c*(g+y),w=l*(g+y),M=Math.atan2(b-T,R-x),H=Math.atan2(w-T,_-x);this.arc(x+t,T+e,i,M,H,h*l>c*u)}return this.dirty=this.boundsDirty=!0,this},n.prototype.arc=function(t,e,r,n,i,o){if(o=o||!1,n===i)return this;!o&&n>=i?i+=2*Math.PI:o&&i>=n&&(n+=2*Math.PI);var a=o?-1*(n-i):i-n,s=40*Math.ceil(Math.abs(a)/(2*Math.PI));if(0===a)return this;var u=t+Math.cos(n)*r,h=e+Math.sin(n)*r;this.currentPath?o&&this.filling?this.currentPath.shape.points.push(t,e):this.currentPath.shape.points.push(u,h):o&&this.filling?this.moveTo(t,e):this.moveTo(u,h);for(var l=this.currentPath.shape.points,c=a/(2*s),f=2*c,p=Math.cos(c),d=Math.sin(c),m=s-1,g=m%1/m,v=0;m>=v;v++){var E=v+g*v,y=c+n+f*E,x=Math.cos(y),T=-Math.sin(y);l.push((p*x+d*T)*r+t,(p*-T+d*x)*r+e)}return this.dirty=this.boundsDirty=!0,this},n.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},n.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},n.prototype.drawRect=function(t,e,r,n){return this.drawShape(new h.Rectangle(t,e,r,n)),this},n.prototype.drawRoundedRect=function(t,e,r,n,i){return this.drawShape(new h.RoundedRectangle(t,e,r,n,i)),this},n.prototype.drawCircle=function(t,e,r){return this.drawShape(new h.Circle(t,e,r)),this},n.prototype.drawEllipse=function(t,e,r,n){return this.drawShape(new h.Ellipse(t,e,r,n)),this},n.prototype.drawPolygon=function(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}return this.drawShape(new h.Polygon(e)),this},n.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},n.prototype.generateTexture=function(t,e,r){e=e||1;var n=this.getLocalBounds(),i=new a(n.width*e,n.height*e),u=o.fromCanvas(i.canvas,r);return u.baseTexture.resolution=e,i.context.scale(e,e),i.context.translate(-n.x,-n.y),s.renderGraphics(this,i.context),u},n.prototype._renderWebGL=function(t){this.glDirty&&(this.dirty=!0,this.glDirty=!1),t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this)},n.prototype._renderCanvas=function(t){if(this.isMask!==!0){this._prevTint!==this.tint&&(this.dirty=!0,this._prevTint=this.tint);var e=t.context,r=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=t.blendModes[t.currentBlendMode]);var n=t.resolution;e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),s.renderGraphics(this,e)}},n.prototype.getBounds=function(t){if(!this._currentBounds){if(!this.renderable)return h.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var e=this._localBounds,r=e.x,n=e.width+e.x,i=e.y,o=e.height+e.y,a=t||this.worldTransform,s=a.a,u=a.b,l=a.c,c=a.d,f=a.tx,p=a.ty,d=s*n+l*o+f,m=c*o+u*n+p,g=s*r+l*o+f,v=c*o+u*r+p,E=s*r+l*i+f,y=c*i+u*r+p,x=s*n+l*i+f,T=c*i+u*n+p,R=d,b=m,_=d,w=m;_=_>g?g:_,_=_>E?E:_,_=_>x?x:_,w=w>v?v:w,w=w>y?y:w,w=w>T?T:w,R=g>R?g:R,R=E>R?E:R,R=x>R?x:R,b=v>b?v:b,b=y>b?y:b,b=T>b?T:b,this._bounds.x=_,this._bounds.width=R-_,this._bounds.y=w,this._bounds.height=b-w,this._currentBounds=this._bounds}return this._currentBounds},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);for(var e=this.graphicsData,r=0;r<e.length;r++){var n=e[r];if(n.fill&&n.shape&&n.shape.contains(c.x,c.y))return!0}return!1},n.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),r=1/0,n=-(1/0);if(this.graphicsData.length)for(var i,o,a,s,u,h,c=0;c<this.graphicsData.length;c++){var f=this.graphicsData[c],p=f.type,d=f.lineWidth;if(i=f.shape,p===l.SHAPES.RECT||p===l.SHAPES.RREC)a=i.x-d/2,s=i.y-d/2,u=i.width+d,h=i.height+d,t=t>a?a:t,e=a+u>e?a+u:e,r=r>s?s:r,n=s+h>n?s+h:n;else if(p===l.SHAPES.CIRC)a=i.x,s=i.y,u=i.radius+d/2,h=i.radius+d/2,t=t>a-u?a-u:t,e=a+u>e?a+u:e,r=r>s-h?s-h:r,n=s+h>n?s+h:n;else if(p===l.SHAPES.ELIP)a=i.x,s=i.y,u=i.width+d/2,h=i.height+d/2,t=t>a-u?a-u:t,e=a+u>e?a+u:e,r=r>s-h?s-h:r,n=s+h>n?s+h:n;else{o=i.points;for(var m=0;m<o.length;m+=2)a=o[m],s=o[m+1],t=t>a-d?a-d:t,e=a+d>e?a+d:e,r=r>s-d?s-d:r,n=s+d>n?s+d:n}}else t=0,e=0,r=0,n=0;var g=this.boundsPadding;this._localBounds.x=t-g,this._localBounds.width=e-t+2*g,this._localBounds.y=r-g,this._localBounds.height=n-r+2*g},n.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new u(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===l.SHAPES.POLY&&(e.shape.closed=this.filling,this.currentPath=e),this.dirty=this.boundsDirty=!0,e},n.prototype.destroy=function(){i.prototype.destroy.apply(this,arguments);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var e in this._webgl)for(var r=0;r<this._webgl[e].data.length;++r)this._webgl[e].data[r].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":22,"../display/Container":23,"../math":32,"../renderers/canvas/utils/CanvasBuffer":44,"../renderers/canvas/utils/CanvasGraphics":45,"../textures/Texture":71,"./GraphicsData":26}],26:[function(t,e,r){function n(t,e,r,n,i,o,a){this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this._lineTint=e,this.fillColor=n,this.fillAlpha=i,this._fillTint=n,this.fill=o,this.shape=a,this.type=a.type}n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},n.prototype.destroy=function(){this.shape=null}},{}],27:[function(t,e,r){function n(t){s.call(this,t),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null}var i=t("../../utils"),o=t("../../math"),a=t("../../const"),s=t("../../renderers/webgl/utils/ObjectRenderer"),u=t("../../renderers/webgl/WebGLRenderer"),h=t("./WebGLGraphicsData"),l=t("earcut");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,u.registerPlugin("graphics",n),n.prototype.onContextChange=function(){},n.prototype.destroy=function(){s.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},n.prototype.render=function(t){var e,r=this.renderer,n=r.gl,o=r.shaderManager.plugins.primitiveShader;t.dirty&&this.updateGraphics(t,n);var a=t._webGL[n.id];r.blendModeManager.setBlendMode(t.blendMode);for(var s=0;s<a.data.length;s++)1===a.data[s].mode?(e=a.data[s],r.stencilManager.pushStencil(t,e,r),n.uniform1f(r.shaderManager.complexPrimitiveShader.uniforms.alpha._location,t.worldAlpha*e.alpha),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilManager.popStencil(t,e,r)):(e=a.data[s],o=r.shaderManager.primitiveShader,r.shaderManager.setShader(o),n.uniformMatrix3fv(o.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(o.uniforms.projectionMatrix._location,!1,r.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(o.uniforms.tint._location,i.hex2rgb(t.tint)),n.uniform1f(o.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(o.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(o.attributes.aColor,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0))},n.prototype.updateGraphics=function(t){var e=this.renderer.gl,r=t._webGL[e.id];r||(r=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1;var n;if(t.clearDirty){for(t.clearDirty=!1,n=0;n<r.data.length;n++){var i=r.data[n];i.reset(),this.graphicsDataPool.push(i)}r.data=[],r.lastIndex=0}var o;for(n=r.lastIndex;n<t.graphicsData.length;n++){var s=t.graphicsData[n];if(s.type===a.SHAPES.POLY){if(s.points=s.shape.points.slice(),s.shape.closed&&(s.points[0]!==s.points[s.points.length-2]||s.points[1]!==s.points[s.points.length-1])&&s.points.push(s.points[0],s.points[1]),s.fill&&s.points.length>=6)if(s.points.length<12){o=this.switchMode(r,0);var u=this.buildPoly(s,o);u||(o=this.switchMode(r,1),this.buildComplexPoly(s,o))}else o=this.switchMode(r,1),this.buildComplexPoly(s,o);s.lineWidth>0&&(o=this.switchMode(r,0),this.buildLine(s,o))}else o=this.switchMode(r,0),s.type===a.SHAPES.RECT?this.buildRectangle(s,o):s.type===a.SHAPES.CIRC||s.type===a.SHAPES.ELIP?this.buildCircle(s,o):s.type===a.SHAPES.RREC&&this.buildRoundedRectangle(s,o);r.lastIndex++}for(n=0;n<r.data.length;n++)o=r.data[n],o.dirty&&o.upload()},n.prototype.switchMode=function(t,e){var r;return t.data.length?(r=t.data[t.data.length-1],(r.points.length>32e4||r.mode!==e||1===e)&&(r=this.graphicsDataPool.pop()||new h(t.gl),r.mode=e,t.data.push(r))):(r=this.graphicsDataPool.pop()||new h(t.gl),r.mode=e,t.data.push(r)),r.dirty=!0,r},n.prototype.buildRectangle=function(t,e){var r=t.shape,n=r.x,o=r.y,a=r.width,s=r.height;if(t.fill){var u=i.hex2rgb(t.fillColor),h=t.fillAlpha,l=u[0]*h,c=u[1]*h,f=u[2]*h,p=e.points,d=e.indices,m=p.length/6;p.push(n,o),p.push(l,c,f,h),p.push(n+a,o),p.push(l,c,f,h),p.push(n,o+s),p.push(l,c,f,h),p.push(n+a,o+s),p.push(l,c,f,h),d.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var g=t.points;t.points=[n,o,n+a,o,n+a,o+s,n,o+s,n,o],this.buildLine(t,e),t.points=g}},n.prototype.buildRoundedRectangle=function(t,e){var r=t.shape,n=r.x,o=r.y,a=r.width,s=r.height,u=r.radius,h=[];if(h.push(n,o+u),this.quadraticBezierCurve(n,o+s-u,n,o+s,n+u,o+s,h),this.quadraticBezierCurve(n+a-u,o+s,n+a,o+s,n+a,o+s-u,h),this.quadraticBezierCurve(n+a,o+u,n+a,o,n+a-u,o,h),this.quadraticBezierCurve(n+u,o,n,o,n,o+u+1e-10,h),t.fill){var c=i.hex2rgb(t.fillColor),f=t.fillAlpha,p=c[0]*f,d=c[1]*f,m=c[2]*f,g=e.points,v=e.indices,E=g.length/6,y=l(h,null,2),x=0;for(x=0;x<y.length;x+=3)v.push(y[x]+E),v.push(y[x]+E),v.push(y[x+1]+E),v.push(y[x+2]+E),v.push(y[x+2]+E);for(x=0;x<h.length;x++)g.push(h[x],h[++x],p,d,m,f)}if(t.lineWidth){var T=t.points;t.points=h,this.buildLine(t,e),t.points=T}},n.prototype.quadraticBezierCurve=function(t,e,r,n,i,o,a){function s(t,e,r){var n=e-t;return t+n*r}for(var u,h,l,c,f,p,d=20,m=a||[],g=0,v=0;d>=v;v++)g=v/d,u=s(t,r,g),h=s(e,n,g),l=s(r,i,g),c=s(n,o,g),f=s(u,l,g),p=s(h,c,g),m.push(f,p);return m},n.prototype.buildCircle=function(t,e){var r,n,o=t.shape,s=o.x,u=o.y;t.type===a.SHAPES.CIRC?(r=o.radius,n=o.radius):(r=o.width,n=o.height);var h=40,l=2*Math.PI/h,c=0;if(t.fill){var f=i.hex2rgb(t.fillColor),p=t.fillAlpha,d=f[0]*p,m=f[1]*p,g=f[2]*p,v=e.points,E=e.indices,y=v.length/6;for(E.push(y),c=0;h+1>c;c++)v.push(s,u,d,m,g,p),v.push(s+Math.sin(l*c)*r,u+Math.cos(l*c)*n,d,m,g,p),E.push(y++,y++);E.push(y-1)}if(t.lineWidth){var x=t.points;for(t.points=[],c=0;h+1>c;c++)t.points.push(s+Math.sin(l*c)*r,u+Math.cos(l*c)*n);this.buildLine(t,e),t.points=x}},n.prototype.buildLine=function(t,e){var r=0,n=t.points;if(0!==n.length){if(t.lineWidth%2)for(r=0;r<n.length;r++)n[r]+=.5;var a=new o.Point(n[0],n[1]),s=new o.Point(n[n.length-2],n[n.length-1]);if(a.x===s.x&&a.y===s.y){n=n.slice(),n.pop(),n.pop(),s=new o.Point(n[n.length-2],n[n.length-1]);var u=s.x+.5*(a.x-s.x),h=s.y+.5*(a.y-s.y);n.unshift(u,h),n.push(u,h)}var l,c,f,p,d,m,g,v,E,y,x,T,R,b,_,w,M,H,S,C,A,L,P,F=e.points,D=e.indices,B=n.length/2,O=n.length,N=F.length/6,k=t.lineWidth/2,U=i.hex2rgb(t.lineColor),I=t.lineAlpha,z=U[0]*I,V=U[1]*I,j=U[2]*I;for(f=n[0],p=n[1],d=n[2],m=n[3],E=-(p-m),y=f-d,P=Math.sqrt(E*E+y*y),E/=P,y/=P,E*=k,y*=k,F.push(f-E,p-y,z,V,j,I),F.push(f+E,p+y,z,V,j,I),r=1;B-1>r;r++)f=n[2*(r-1)],p=n[2*(r-1)+1],d=n[2*r],m=n[2*r+1],g=n[2*(r+1)],v=n[2*(r+1)+1],E=-(p-m),y=f-d,P=Math.sqrt(E*E+y*y),E/=P,y/=P,E*=k,y*=k,x=-(m-v),T=d-g,P=Math.sqrt(x*x+T*T),x/=P,T/=P,x*=k,T*=k,_=-y+p-(-y+m),w=-E+d-(-E+f),M=(-E+f)*(-y+m)-(-E+d)*(-y+p),H=-T+v-(-T+m),S=-x+d-(-x+g),C=(-x+g)*(-T+m)-(-x+d)*(-T+v),A=_*S-H*w,Math.abs(A)<.1?(A+=10.1,F.push(d-E,m-y,z,V,j,I),F.push(d+E,m+y,z,V,j,I)):(l=(w*C-S*M)/A,c=(H*M-_*C)/A,L=(l-d)*(l-d)+(c-m)+(c-m),L>19600?(R=E-x,b=y-T,P=Math.sqrt(R*R+b*b),R/=P,b/=P,R*=k,b*=k,F.push(d-R,m-b),F.push(z,V,j,I),F.push(d+R,m+b),F.push(z,V,j,I),F.push(d-R,m-b),F.push(z,V,j,I),O++):(F.push(l,c),F.push(z,V,j,I),F.push(d-(l-d),m-(c-m)),F.push(z,V,j,I)));for(f=n[2*(B-2)],p=n[2*(B-2)+1],d=n[2*(B-1)],m=n[2*(B-1)+1],E=-(p-m),y=f-d,P=Math.sqrt(E*E+y*y),E/=P,y/=P,E*=k,y*=k,F.push(d-E,m-y),F.push(z,V,j,I),F.push(d+E,m+y),F.push(z,V,j,I),D.push(N),r=0;O>r;r++)D.push(N++);D.push(N-1)}},n.prototype.buildComplexPoly=function(t,e){var r=t.points.slice();if(!(r.length<6)){var n=e.indices;e.points=r,e.alpha=t.fillAlpha,e.color=i.hex2rgb(t.fillColor);for(var o,a,s=1/0,u=-(1/0),h=1/0,l=-(1/0),c=0;c<r.length;c+=2)o=r[c],a=r[c+1],s=s>o?o:s,u=o>u?o:u,h=h>a?a:h,l=a>l?a:l;r.push(s,h,u,h,u,l,s,l);var f=r.length/2;for(c=0;f>c;c++)n.push(c)}},n.prototype.buildPoly=function(t,e){var r=t.points;if(!(r.length<6)){var n=e.points,o=e.indices,a=r.length/2,s=i.hex2rgb(t.fillColor),u=t.fillAlpha,h=s[0]*u,c=s[1]*u,f=s[2]*u,p=l(r,null,2);if(!p)return!1;var d=n.length/6,m=0;for(m=0;m<p.length;m+=3)o.push(p[m]+d),o.push(p[m]+d),o.push(p[m+1]+d),o.push(p[m+2]+d),o.push(p[m+2]+d);for(m=0;a>m;m++)n.push(r[2*m],r[2*m+1],h,c,f,u);return!0}}},{"../../const":22,"../../math":32,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62,"../../utils":76,"./WebGLGraphicsData":28,earcut:10}],28:[function(t,e,r){function n(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}n.prototype.constructor=n,e.exports=n,n.prototype.reset=function(){this.points.length=0,this.indices.length=0},n.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndices,t.STATIC_DRAW),this.dirty=!1},n.prototype.destroy=function(){this.gl=null,this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],29:[function(t,e,r){/**
 * @file        Main export of the PIXI core library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/GoodBoyDigital/pixi.js/blob/master/LICENSE|MIT License}
 */
var n=e.exports=Object.assign(t("./const"),t("./math"),{utils:t("./utils"),math:t("./math"),ticker:t("./ticker"),DisplayObject:t("./display/DisplayObject"),Container:t("./display/Container"),Sprite:t("./sprites/Sprite"),ParticleContainer:t("./particles/ParticleContainer"),SpriteRenderer:t("./sprites/webgl/SpriteRenderer"),ParticleRenderer:t("./particles/webgl/ParticleRenderer"),Text:t("./text/Text"),Graphics:t("./graphics/Graphics"),GraphicsData:t("./graphics/GraphicsData"),GraphicsRenderer:t("./graphics/webgl/GraphicsRenderer"),Texture:t("./textures/Texture"),BaseTexture:t("./textures/BaseTexture"),RenderTexture:t("./textures/RenderTexture"),VideoBaseTexture:t("./textures/VideoBaseTexture"),TextureUvs:t("./textures/TextureUvs"),CanvasRenderer:t("./renderers/canvas/CanvasRenderer"),CanvasGraphics:t("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:t("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:t("./renderers/webgl/WebGLRenderer"),ShaderManager:t("./renderers/webgl/managers/ShaderManager"),Shader:t("./renderers/webgl/shaders/Shader"),ObjectRenderer:t("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:t("./renderers/webgl/utils/RenderTarget"),AbstractFilter:t("./renderers/webgl/filters/AbstractFilter"),autoDetectRenderer:function(t,e,r,i){return t=t||800,e=e||600,!i&&n.utils.isWebGLSupported()?new n.WebGLRenderer(t,e,r):new n.CanvasRenderer(t,e,r)}})},{"./const":22,"./display/Container":23,"./display/DisplayObject":24,"./graphics/Graphics":25,"./graphics/GraphicsData":26,"./graphics/webgl/GraphicsRenderer":27,"./math":32,"./particles/ParticleContainer":38,"./particles/webgl/ParticleRenderer":40,"./renderers/canvas/CanvasRenderer":43,"./renderers/canvas/utils/CanvasBuffer":44,"./renderers/canvas/utils/CanvasGraphics":45,"./renderers/webgl/WebGLRenderer":48,"./renderers/webgl/filters/AbstractFilter":49,"./renderers/webgl/managers/ShaderManager":55,"./renderers/webgl/shaders/Shader":60,"./renderers/webgl/utils/ObjectRenderer":62,"./renderers/webgl/utils/RenderTarget":64,"./sprites/Sprite":66,"./sprites/webgl/SpriteRenderer":67,"./text/Text":68,"./textures/BaseTexture":69,"./textures/RenderTexture":70,"./textures/Texture":71,"./textures/TextureUvs":72,"./textures/VideoBaseTexture":73,"./ticker":75,"./utils":76}],30:[function(t,e,r){function n(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var i=t("./Point");n.prototype.constructor=n,e.exports=n,n.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},n.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var e=this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},n.prototype.apply=function(t,e){e=e||new i;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},n.prototype.applyInverse=function(t,e){e=e||new i;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,o=t.y;return e.x=this.d*r*n+-this.c*r*o+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*o+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},n.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},n.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},n.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},n.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},n.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},n.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var t=new n;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.IDENTITY=new n,n.TEMP_MATRIX=new n},{"./Point":31}],31:[function(t,e,r){function n(t,e){this.x=t||0,this.y=e||0}n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(t){this.set(t.x,t.y)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},n.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}},{}],32:[function(t,e,r){e.exports={Point:t("./Point"),Matrix:t("./Matrix"),Circle:t("./shapes/Circle"),Ellipse:t("./shapes/Ellipse"),Polygon:t("./shapes/Polygon"),Rectangle:t("./shapes/Rectangle"),RoundedRectangle:t("./shapes/RoundedRectangle")}},{"./Matrix":30,"./Point":31,"./shapes/Circle":33,"./shapes/Ellipse":34,"./shapes/Polygon":35,"./shapes/Rectangle":36,"./shapes/RoundedRectangle":37}],33:[function(t,e,r){function n(t,e,r){this.x=t||0,this.y=e||0,this.radius=r||0,this.type=o.SHAPES.CIRC}var i=t("./Rectangle"),o=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.x-t,n=this.y-e,i=this.radius*this.radius;return r*=r,n*=n,i>=r+n},n.prototype.getBounds=function(){return new i(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":22,"./Rectangle":36}],34:[function(t,e,r){function n(t,e,r,n){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0,this.type=o.SHAPES.ELIP}var i=t("./Rectangle"),o=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,1>=r+n},n.prototype.getBounds=function(){return new i(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":22,"./Rectangle":36}],35:[function(t,e,r){function n(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}if(e[0]instanceof i){for(var n=[],a=0,s=e.length;s>a;a++)n.push(e[a].x,e[a].y);e=n}this.closed=!0,this.points=e,this.type=o.SHAPES.POLY}var i=t("../Point"),o=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.points.slice())},n.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,i=0,o=n-1;n>i;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],h=this.points[2*o+1],l=s>e!=h>e&&(u-a)*(e-s)/(h-s)+a>t;l&&(r=!r)}return r}},{"../../const":22,"../Point":31}],36:[function(t,e,r){function n(t,e,r,n){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0,this.type=i.SHAPES.RECT}var i=t("../../const");n.prototype.constructor=n,e.exports=n,n.EMPTY=new n(0,0,0,0),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height?!0:!1}},{"../../const":22}],37:[function(t,e,r){function n(t,e,r,n,o){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0,this.radius=o||20,this.type=i.SHAPES.RREC}var i=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height?!0:!1}},{"../../const":22}],38:[function(t,e,r){function n(t,e){i.call(this),this._properties=[!1,!0,!1,!1,!1],this._size=t||15e3,this._buffers=null,this._updateStatic=!1,this.interactiveChildren=!1,this.blendMode=o.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(e)}var i=t("../display/Container"),o=t("../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},n.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},n.prototype.renderWebGL=function(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},n.prototype.addChildAt=function(t,e){if(t===this)return t;if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this._updateStatic=!0,t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},n.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,this.children.splice(t,1),this._updateStatic=!0,e},n.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldTransform,n=!0,i=0,o=0,a=0,s=0;e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var h=this.children[u];if(h.visible){var l=h.texture.frame;if(e.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)===0)n&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),n=!1),i=h.anchor.x*-l.width*h.scale.x+h.position.x+.5,o=h.anchor.y*-l.height*h.scale.y+h.position.y+.5,a=l.width*h.scale.x,s=l.height*h.scale.y;else{n||(n=!0),h.displayObjectUpdateTransform();var c=h.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,0|c.tx,0|c.ty):e.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),i=h.anchor.x*-l.width+.5,o=h.anchor.y*-l.height+.5,a=l.width,s=l.height}e.drawImage(h.texture.baseTexture.source,l.x,l.y,l.width,l.height,i,o,a,s)}}}},n.prototype.destroy=function(){if(i.prototype.destroy.apply(this,arguments),this._buffers)for(var t=0;t<this._buffers.length;++t)this._buffers.destroy();this._properties=null,this._buffers=null}},{"../const":22,"../display/Container":23}],39:[function(t,e,r){function n(t,e,r){this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<e.length;n++){var i=e[n];i.dynamic?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}n.prototype.constructor=n,e.exports=n,n.prototype.initBuffers=function(){var t,e,r=this.gl,n=0;for(this.dynamicStride=0,t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],e.offset=n,n+=e.size,this.dynamicStride+=e.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),r.bufferData(r.ARRAY_BUFFER,this.dynamicData,r.DYNAMIC_DRAW);var i=0;for(this.staticStride=0,t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],e.offset=i,i+=e.size,this.staticStride+=e.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),r.bufferData(r.ARRAY_BUFFER,this.staticData,r.DYNAMIC_DRAW)},n.prototype.uploadDynamic=function(t,e,r){for(var n=this.gl,i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(t,e,r,this.dynamicData,this.dynamicStride,o.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.dynamicData)},n.prototype.uploadStatic=function(t,e,r){for(var n=this.gl,i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(t,e,r,this.staticData,this.staticStride,o.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.staticData)},n.prototype.bind=function(){var t,e,r=this.gl;for(r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],r.vertexAttribPointer(e.attribute,e.size,r.FLOAT,!1,4*this.dynamicStride,4*e.offset);for(r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],r.vertexAttribPointer(e.attribute,e.size,r.FLOAT,!1,4*this.staticStride,4*e.offset)},n.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],40:[function(t,e,r){function n(t){i.call(this,t),this.size=15e3;var e=6*this.size;this.indices=new Uint16Array(e);for(var r=0,n=0;e>r;r+=6,n+=4)this.indices[r+0]=n+0,this.indices[r+1]=n+1,this.indices[r+2]=n+2,this.indices[r+3]=n+0,this.indices[r+4]=n+2,this.indices[r+5]=n+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new u.Matrix}var i=t("../../renderers/webgl/utils/ObjectRenderer"),o=t("../../renderers/webgl/WebGLRenderer"),a=t("./ParticleShader"),s=t("./ParticleBuffer"),u=t("../../math");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,o.registerPlugin("particle",n),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new a(this.renderer.shaderManager),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,dynamic:!1,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,dynamic:!0,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,dynamic:!1,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,dynamic:!1,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,dynamic:!1,size:1,uploadFunction:this.uploadAlpha,offset:0}]},n.prototype.start=function(){var t=this.renderer.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.shader;this.renderer.shaderManager.setShader(e)},n.prototype.render=function(t){var e=t.children,r=e.length,n=t._size;if(0!==r){r>n&&(r=n),t._buffers||(t._buffers=this.generateBuffers(t)),this.renderer.blendModeManager.setBlendMode(t.blendMode);var i=this.renderer.gl,o=t.worldTransform.copy(this.tempMatrix);o.prepend(this.renderer.currentRenderTarget.projectionMatrix),i.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,o.toArray(!0)),i.uniform1f(this.shader.uniforms.uAlpha._location,t.worldAlpha);var a=t._updateStatic,s=e[0]._texture.baseTexture;if(s._glTextures[i.id])i.bindTexture(i.TEXTURE_2D,s._glTextures[i.id]);else{if(!this.renderer.updateTexture(s))return;this.properties[0].dynamic&&this.properties[3].dynamic||(a=!0)}for(var u=0,h=0;r>h;h+=this.size){var l=r-h;l>this.size&&(l=this.size);var c=t._buffers[u++];c.uploadDynamic(e,h,l),a&&c.uploadStatic(e,h,l),c.bind(this.shader),i.drawElements(i.TRIANGLES,6*l,i.UNSIGNED_SHORT,0),this.renderer.drawCount++}t._updateStatic=!1}},n.prototype.generateBuffers=function(t){var e,r=this.renderer.gl,n=[],i=t._size;for(e=0;e<t._properties.length;e++)this.properties[e].dynamic=t._properties[e];for(e=0;i>e;e+=this.size)n.push(new s(r,this.properties,this.size,this.shader));return n},n.prototype.uploadVertices=function(t,e,r,n,i,o){for(var a,s,u,h,l,c,f,p,d,m=0;r>m;m++)a=t[e+m],s=a._texture,h=a.scale.x,l=a.scale.y,s.trim?(u=s.trim,f=u.x-a.anchor.x*u.width,c=f+s.crop.width,d=u.y-a.anchor.y*u.height,p=d+s.crop.height):(c=s._frame.width*(1-a.anchor.x),f=s._frame.width*-a.anchor.x,p=s._frame.height*(1-a.anchor.y),d=s._frame.height*-a.anchor.y),n[o]=f*h,n[o+1]=d*l,n[o+i]=c*h,n[o+i+1]=d*l,n[o+2*i]=c*h,n[o+2*i+1]=p*l,n[o+3*i]=f*h,n[o+3*i+1]=p*l,o+=4*i},n.prototype.uploadPosition=function(t,e,r,n,i,o){for(var a=0;r>a;a++){var s=t[e+a].position;n[o]=s.x,n[o+1]=s.y,n[o+i]=s.x,n[o+i+1]=s.y,n[o+2*i]=s.x,n[o+2*i+1]=s.y,n[o+3*i]=s.x,n[o+3*i+1]=s.y,o+=4*i}},n.prototype.uploadRotation=function(t,e,r,n,i,o){for(var a=0;r>a;a++){var s=t[e+a].rotation;n[o]=s,n[o+i]=s,n[o+2*i]=s,n[o+3*i]=s,o+=4*i}},n.prototype.uploadUvs=function(t,e,r,n,i,o){for(var a=0;r>a;a++){var s=t[e+a]._texture._uvs;s?(n[o]=s.x0,n[o+1]=s.y0,n[o+i]=s.x1,n[o+i+1]=s.y1,n[o+2*i]=s.x2,n[o+2*i+1]=s.y2,n[o+3*i]=s.x3,n[o+3*i+1]=s.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},n.prototype.uploadAlpha=function(t,e,r,n,i,o){for(var a=0;r>a;a++){var s=t[e+a].alpha;n[o]=s,n[o+i]=s,n[o+2*i]=s,n[o+3*i]=s,o+=4*i}},n.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),i.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../math":32,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62,"./ParticleBuffer":39,"./ParticleShader":41}],41:[function(t,e,r){function n(t){i.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor * uAlpha ;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var i=t("../../renderers/webgl/shaders/TextureShader");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n},{"../../renderers/webgl/shaders/TextureShader":61}],42:[function(t,e,r){function n(t,e,r,n){if(s.call(this),i.sayHello(t),n)for(var u in a.DEFAULT_RENDER_OPTIONS)"undefined"==typeof n[u]&&(n[u]=a.DEFAULT_RENDER_OPTIONS[u]);else n=a.DEFAULT_RENDER_OPTIONS;this.type=a.RENDERER_TYPE.UNKNOWN,this.width=e||800,this.height=r||600,this.view=n.view||document.createElement("canvas"),this.resolution=n.resolution,this.transparent=n.transparent,this.autoResize=n.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=n.preserveDrawingBuffer,this.clearBeforeRender=n.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=n.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new o.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var i=t("../utils"),o=t("../math"),a=t("../const"),s=t("eventemitter3");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=i.hex2string(t),i.hex2rgb(t,this._backgroundColorRgb)}}}),n.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},n.prototype.destroy=function(t){t&&this.view.parent&&this.view.parent.removeChild(this.view),this.type=a.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{"../const":22,"../math":32,"../utils":76,eventemitter3:11}],43:[function(t,e,r){function n(t,e,r){i.call(this,"Canvas",t,e,r),this.type=u.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new o,this.roundPixels=!1,this.currentScaleMode=u.SCALE_MODES.DEFAULT,this.currentBlendMode=u.BLEND_MODES.NORMAL,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new s.Matrix,worldAlpha:1},this.resize(t,e)}var i=t("../SystemRenderer"),o=t("./utils/CanvasMaskManager"),a=t("../../utils"),s=t("../../math"),u=t("../../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,a.pluginTarget.mixin(n),n.prototype.render=function(t){var e=t.parent;this._lastObjectRendered=t,t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.currentBlendMode=u.BLEND_MODES.NORMAL,this.context.globalCompositeOperation=this.blendModes[u.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t,this.context)},n.prototype.destroy=function(t){this.destroyPlugins(),i.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.roundPixels=!1,this.currentScaleMode=0,this.currentBlendMode=0,this.smoothProperty=null},n.prototype.renderDisplayObject=function(t,e){var r=this.context;this.context=e,t.renderCanvas(this),this.context=r},n.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},a.canUseNewCanvasBlendModes()?(this.blendModes[u.BLEND_MODES.NORMAL]="source-over",this.blendModes[u.BLEND_MODES.ADD]="lighter",this.blendModes[u.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[u.BLEND_MODES.SCREEN]="screen",this.blendModes[u.BLEND_MODES.OVERLAY]="overlay",this.blendModes[u.BLEND_MODES.DARKEN]="darken",this.blendModes[u.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[u.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[u.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[u.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[u.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[u.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[u.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[u.BLEND_MODES.HUE]="hue",this.blendModes[u.BLEND_MODES.SATURATION]="saturate",this.blendModes[u.BLEND_MODES.COLOR]="color",this.blendModes[u.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[u.BLEND_MODES.NORMAL]="source-over",this.blendModes[u.BLEND_MODES.ADD]="lighter",this.blendModes[u.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[u.BLEND_MODES.SCREEN]="source-over",this.blendModes[u.BLEND_MODES.OVERLAY]="source-over",this.blendModes[u.BLEND_MODES.DARKEN]="source-over",this.blendModes[u.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[u.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[u.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[u.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[u.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[u.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[u.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[u.BLEND_MODES.HUE]="source-over",this.blendModes[u.BLEND_MODES.SATURATION]="source-over",this.blendModes[u.BLEND_MODES.COLOR]="source-over",this.blendModes[u.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":22,"../../math":32,"../../utils":76,"../SystemRenderer":42,"./utils/CanvasMaskManager":46}],44:[function(t,e,r){function n(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e}n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},height:{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}}),n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(t,e){this.canvas.width=t,this.canvas.height=e},n.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],45:[function(t,e,r){var n=t("../../../const"),i={};e.exports=i,i.renderGraphics=function(t,e){var r=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],a=o.shape,s=o._fillTint,u=o._lineTint;if(e.lineWidth=o.lineWidth,o.type===n.SHAPES.POLY){e.beginPath();var h=a.points;e.moveTo(h[0],h[1]);for(var l=1;l<h.length/2;l++)e.lineTo(h[2*l],h[2*l+1]);a.closed&&e.lineTo(h[0],h[1]),h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}else if(o.type===n.SHAPES.RECT)(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fillRect(a.x,a.y,a.width,a.height)),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.strokeRect(a.x,a.y,a.width,a.height));else if(o.type===n.SHAPES.CIRC)e.beginPath(),e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke());else if(o.type===n.SHAPES.ELIP){var c=2*a.width,f=2*a.height,p=a.x-c/2,d=a.y-f/2;e.beginPath();var m=.5522848,g=c/2*m,v=f/2*m,E=p+c,y=d+f,x=p+c/2,T=d+f/2;e.moveTo(p,T),e.bezierCurveTo(p,T-v,x-g,d,x,d),e.bezierCurveTo(x+g,d,E,T-v,E,T),e.bezierCurveTo(E,T+v,x+g,y,x,y),e.bezierCurveTo(x-g,y,p,T+v,p,T),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}else if(o.type===n.SHAPES.RREC){var R=a.x,b=a.y,_=a.width,w=a.height,M=a.radius,H=Math.min(_,w)/2|0;M=M>H?H:M,e.beginPath(),e.moveTo(R,b+M),e.lineTo(R,b+w-M),e.quadraticCurveTo(R,b+w,R+M,b+w),e.lineTo(R+_-M,b+w),e.quadraticCurveTo(R+_,b+w,R+_,b+w-M),e.lineTo(R+_,b+M),e.quadraticCurveTo(R+_,b,R+_-M,b),e.lineTo(R+M,b),e.quadraticCurveTo(R,b,R,b+M),e.closePath(),(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}}},i.renderGraphicsMask=function(t,e){var r=t.graphicsData.length;if(0!==r){e.beginPath();for(var i=0;r>i;i++){var o=t.graphicsData[i],a=o.shape;if(o.type===n.SHAPES.POLY){var s=a.points;e.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;u++)e.lineTo(s[2*u],s[2*u+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(o.type===n.SHAPES.RECT)e.rect(a.x,a.y,a.width,a.height),e.closePath();else if(o.type===n.SHAPES.CIRC)e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath();else if(o.type===n.SHAPES.ELIP){var h=2*a.width,l=2*a.height,c=a.x-h/2,f=a.y-l/2,p=.5522848,d=h/2*p,m=l/2*p,g=c+h,v=f+l,E=c+h/2,y=f+l/2;e.moveTo(c,y),e.bezierCurveTo(c,y-m,E-d,f,E,f),e.bezierCurveTo(E+d,f,g,y-m,g,y),e.bezierCurveTo(g,y+m,E+d,v,E,v),e.bezierCurveTo(E-d,v,c,y+m,c,y),e.closePath()}else if(o.type===n.SHAPES.RREC){var x=a.x,T=a.y,R=a.width,b=a.height,_=a.radius,w=Math.min(R,b)/2|0;_=_>w?w:_,e.moveTo(x,T+_),e.lineTo(x,T+b-_),e.quadraticCurveTo(x,T+b,x+_,T+b),e.lineTo(x+R-_,T+b),e.quadraticCurveTo(x+R,T+b,x+R,T+b-_),e.lineTo(x+R,T+_),e.quadraticCurveTo(x+R,T,x+R-_,T),e.lineTo(x+_,T),e.quadraticCurveTo(x,T,x,T+_),e.closePath()}}}},i.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,n=(255&t.tint)/255,i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255,o._lineTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255}}},{"../../../const":22}],46:[function(t,e,r){function n(){}var i=t("./CanvasGraphics");n.prototype.constructor=n,e.exports=n,n.prototype.pushMask=function(t,e){e.context.save();var r=t.alpha,n=t.worldTransform,o=e.resolution;e.context.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),t.texture||(i.renderGraphicsMask(t,e.context),e.context.clip()),t.worldAlpha=r},n.prototype.popMask=function(t){t.context.restore()},n.prototype.destroy=function(){}},{"./CanvasGraphics":45}],47:[function(t,e,r){var n=t("../../../utils"),i={};e.exports=i,i.getTintedTexture=function(t,e){var r=t.texture;e=i.roundColor(e);var n="#"+("00000"+(0|e).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[n])return r.tintCache[n];var o=i.canvas||document.createElement("canvas");if(i.tintMethod(r,e,o),i.convertTintToImage){var a=new Image;a.src=o.toDataURL(),r.tintCache[n]=a}else r.tintCache[n]=o,i.canvas=null;return o},i.tintWithMultiply=function(t,e,r){var n=r.getContext("2d"),i=t.crop;r.width=i.width,r.height=i.height,n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},i.tintWithOverlay=function(t,e,r){var n=r.getContext("2d"),i=t.crop;r.width=i.width,r.height=i.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},i.tintWithPerPixel=function(t,e,r){var i=r.getContext("2d"),o=t.crop;r.width=o.width,r.height=o.height,i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var a=n.hex2rgb(e),s=a[0],u=a[1],h=a[2],l=i.getImageData(0,0,o.width,o.height),c=l.data,f=0;f<c.length;f+=4)c[f+0]*=s,c[f+1]*=u,c[f+2]*=h;i.putImageData(l,0,0)},i.roundColor=function(t){var e=i.cacheStepsPerColorChannel,r=n.hex2rgb(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),n.rgb2hex(r)},i.cacheStepsPerColorChannel=8,i.convertTintToImage=!1,i.canUseMultiply=n.canUseNewCanvasBlendModes(),
i.tintMethod=i.canUseMultiply?i.tintWithMultiply:i.tintWithPerPixel},{"../../../utils":76}],48:[function(t,e,r){function n(t,e,r){r=r||{},i.call(this,"WebGL",t,e,r),this.type=d.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!r.forceFXAA&&r.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new o(this),this.maskManager=new a(this),this.stencilManager=new s(this),this.filterManager=new u(this),this.blendModeManager=new h(this),this.currentRenderTarget=null,this.currentRenderer=new c(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapBlendModes(),this._renderTargetStack=[]}var i=t("../SystemRenderer"),o=t("./managers/ShaderManager"),a=t("./managers/MaskManager"),s=t("./managers/StencilManager"),u=t("./managers/FilterManager"),h=t("./managers/BlendModeManager"),l=t("./utils/RenderTarget"),c=t("./utils/ObjectRenderer"),f=t("./filters/FXAAFilter"),p=t("../../utils"),d=t("../../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,p.pluginTarget.mixin(n),n.glContextId=0,n.prototype._createContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=n.glContextId++,t.id=this.glContextId,t.renderer=this},n.prototype._initContext=function(){var t=this.gl;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.renderTarget=new l(t,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",t),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!t.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new f])},n.prototype.render=function(t){if(!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=t,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,t.filterArea=this.renderTarget.size,t.filters=this._FXAAFilter);var e=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e;var r=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?r.clearColor(0,0,0,0):r.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),r.clear(r.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.renderTarget)}},n.prototype.renderDisplayObject=function(t,e,r){this.setRenderTarget(e),r&&e.clear(),this.filterManager.setFilterStack(e.filterStack),t.renderWebGL(this),this.currentRenderer.flush()},n.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},n.prototype.setRenderTarget=function(t){this.currentRenderTarget!==t&&(this.currentRenderTarget=t,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(t.stencilMaskStack))},n.prototype.resize=function(t,e){i.prototype.resize.call(this,t,e),this.filterManager.resize(t,e),this.renderTarget.resize(t,e),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},n.prototype.updateTexture=function(t){if(t=t.baseTexture||t,t.hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture(),t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this)),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===d.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===d.SCALE_MODES.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===d.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._glTextures[e.id]}},n.prototype.destroyTexture=function(t){t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.gl.id]&&this.gl.deleteTexture(t._glTextures[this.gl.id])},n.prototype.handleContextLost=function(t){t.preventDefault()},n.prototype.handleContextRestored=function(){this._initContext();for(var t in p.BaseTextureCache)p.BaseTextureCache[t]._glTextures.length=0},n.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),i.prototype.destroy.call(this,t),this.uuid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.drawCount=0,this.gl=null},n.prototype._mapBlendModes=function(){var t=this.gl;this.blendModes||(this.blendModes={},this.blendModes[d.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],this.blendModes[d.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.SCREEN]=[t.SRC_ALPHA,t.ONE],this.blendModes[d.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[d.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA])}},{"../../const":22,"../../utils":76,"../SystemRenderer":42,"./filters/FXAAFilter":50,"./managers/BlendModeManager":52,"./managers/FilterManager":53,"./managers/MaskManager":54,"./managers/ShaderManager":55,"./managers/StencilManager":56,"./utils/ObjectRenderer":62,"./utils/RenderTarget":64}],49:[function(t,e,r){function n(t,e,r){this.shaders=[],this.padding=0,this.uniforms=r||{},this.vertexSrc=t||i.defaultVertexSrc,this.fragmentSrc=e||i.defaultFragmentSrc}var i=t("../shaders/TextureShader");n.prototype.constructor=n,e.exports=n,n.prototype.getShader=function(t){var e=t.gl,r=this.shaders[e.id];return r||(r=new i(t.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[e.id]=r),r},n.prototype.applyFilter=function(t,e,r,n){var i=this.getShader(t);t.filterManager.applyFilter(i,e,r,n)},n.prototype.syncUniform=function(t){for(var e=0,r=this.shaders.length;r>e;++e)this.shaders[e].syncUniform(t)}},{"../shaders/TextureShader":61}],50:[function(t,e,r){function n(){i.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}var i=t("./AbstractFilter");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager,i=this.getShader(t);n.applyFilter(i,e,r)}},{"./AbstractFilter":49}],51:[function(t,e,r){function n(t){var e=new o.Matrix;i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:t._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:e.toArray(!0)}}),this.maskSprite=t,this.maskMatrix=e}var i=t("./AbstractFilter"),o=t("../../../math");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager;this.uniforms.mask.value=this.maskSprite._texture,n.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var i=this.getShader(t);n.applyFilter(i,e,r)},Object.defineProperties(n.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../../math":32,"./AbstractFilter":49}],52:[function(t,e,r){function n(t){i.call(this,t),this.currentBlendMode=99999}var i=t("./WebGLManager");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(e[0],e[1]),!0}},{"./WebGLManager":57}],53:[function(t,e,r){function n(t){i.call(this,t),this.filterStack=[],this.filterStack.push({renderTarget:t.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new u.Rectangle(0,0,t.width,t.height),this.currentFrame=null}var i=t("./WebGLManager"),o=t("../utils/RenderTarget"),a=t("../../../const"),s=t("../utils/Quad"),u=t("../../../math");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.onContextChange=function(){this.texturePool.length=0;var t=this.renderer.gl;this.quad=new s(t)},n.prototype.setFilterStack=function(t){this.filterStack=t},n.prototype.pushFilter=function(t,e){var r=t.filterArea?t.filterArea.clone():t.getBounds();r.x=0|r.x,r.y=0|r.y,r.width=0|r.width,r.height=0|r.height;var n=0|e[0].padding;if(r.x-=n,r.y-=n,r.width+=2*n,r.height+=2*n,this.renderer.currentRenderTarget.transform){var i=this.renderer.currentRenderTarget.transform;r.x+=i.tx,r.y+=i.ty,this.capFilterArea(r),r.x-=i.tx,r.y-=i.ty}else this.capFilterArea(r);if(r.width>0&&r.height>0){this.currentFrame=r;var o=this.getRenderTarget();this.renderer.setRenderTarget(o),o.clear(),this.filterStack.push({renderTarget:o,filter:e})}else this.filterStack.push({renderTarget:null,filter:e})},n.prototype.popFilter=function(){var t=this.filterStack.pop(),e=this.filterStack[this.filterStack.length-1],r=t.renderTarget;if(t.renderTarget){var n=e.renderTarget,i=this.renderer.gl;this.currentFrame=r.frame,this.quad.map(this.textureSize,r.frame),i.bindBuffer(i.ARRAY_BUFFER,this.quad.vertexBuffer),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var o=t.filter;if(i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,i.FLOAT,!1,0,32),i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,i.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(a.BLEND_MODES.NORMAL),1===o.length)o[0].uniforms.dimensions&&(o[0].uniforms.dimensions.value[0]=this.renderer.width,o[0].uniforms.dimensions.value[1]=this.renderer.height,o[0].uniforms.dimensions.value[2]=this.quad.vertices[0],o[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),o[0].applyFilter(this.renderer,r,n),this.returnRenderTarget(r);else{for(var s=r,u=this.getRenderTarget(!0),h=0;h<o.length-1;h++){var l=o[h];l.uniforms.dimensions&&(l.uniforms.dimensions.value[0]=this.renderer.width,l.uniforms.dimensions.value[1]=this.renderer.height,l.uniforms.dimensions.value[2]=this.quad.vertices[0],l.uniforms.dimensions.value[3]=this.quad.vertices[5]),l.applyFilter(this.renderer,s,u);var c=s;s=u,u=c}o[o.length-1].applyFilter(this.renderer,s,n),this.returnRenderTarget(s),this.returnRenderTarget(u)}return t.filter}},n.prototype.getRenderTarget=function(t){var e=this.texturePool.pop()||new o(this.renderer.gl,this.textureSize.width,this.textureSize.height,a.SCALE_MODES.LINEAR,this.renderer.resolution*a.FILTER_RESOLUTION);return e.frame=this.currentFrame,t&&e.clear(!0),e},n.prototype.returnRenderTarget=function(t){this.texturePool.push(t)},n.prototype.applyFilter=function(t,e,r,n){var i=this.renderer.gl;this.renderer.setRenderTarget(r),n&&r.clear(),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.texture),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)},n.prototype.calculateMappedMatrix=function(t,e,r){var n=e.worldTransform.copy(u.Matrix.TEMP_MATRIX),i=e._texture.baseTexture,o=r.identity(),a=this.textureSize.height/this.textureSize.width;o.translate(t.x/this.textureSize.width,t.y/this.textureSize.height),o.scale(1,a);var s=this.textureSize.width/i.width,h=this.textureSize.height/i.height;return n.tx/=i.width*s,n.ty/=i.width*s,n.invert(),o.prepend(n),o.scale(1,1/a),o.scale(s,h),o.translate(e.anchor.x,e.anchor.y),o},n.prototype.capFilterArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.textureSize.width&&(t.width=this.textureSize.width-t.x),t.y+t.height>this.textureSize.height&&(t.height=this.textureSize.height-t.y)},n.prototype.resize=function(t,e){this.textureSize.width=t,this.textureSize.height=e;for(var r=0;r<this.texturePool.length;r++)this.texturePool[r].resize(t,e)},n.prototype.destroy=function(){this.filterStack=null,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null}},{"../../../const":22,"../../../math":32,"../utils/Quad":63,"../utils/RenderTarget":64,"./WebGLManager":57}],54:[function(t,e,r){function n(t){i.call(this,t),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var i=t("./WebGLManager"),o=t("../filters/SpriteMaskFilter");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.pushMask=function(t,e){e.texture?this.pushSpriteMask(t,e):this.pushStencilMask(t,e)},n.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.popStencilMask(t,e)},n.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool.pop();r||(r=[new o(e)]),r[0].maskSprite=e,this.renderer.filterManager.pushFilter(t,r)},n.prototype.popSpriteMask=function(){var t=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(t)},n.prototype.pushStencilMask=function(t,e){this.renderer.stencilManager.pushMask(e)},n.prototype.popStencilMask=function(t,e){this.renderer.stencilManager.popMask(e)}},{"../filters/SpriteMaskFilter":51,"./WebGLManager":57}],55:[function(t,e,r){function n(t){i.call(this,t),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var i=t("./WebGLManager"),o=t("../shaders/TextureShader"),a=t("../shaders/ComplexPrimitiveShader"),s=t("../shaders/PrimitiveShader"),u=t("../../../utils");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,u.pluginTarget.mixin(n),e.exports=n,n.prototype.onContextChange=function(){this.initPlugins();var t=this.renderer.gl;this.maxAttibs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.defaultShader=new o(this),this.primitiveShader=new s(this),this.complexPrimitiveShader=new a(this)},n.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(var r in t)this.tempAttribState[t[r]]=!0;var n=this.renderer.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.attribState[e]?n.enableVertexAttribArray(e):n.disableVertexAttribArray(e))},n.prototype.setShader=function(t){return this._currentId===t.uuid?!1:(this._currentId=t.uuid,this.currentShader=t,this.renderer.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{"../../../utils":76,"../shaders/ComplexPrimitiveShader":58,"../shaders/PrimitiveShader":59,"../shaders/TextureShader":61,"./WebGLManager":57}],56:[function(t,e,r){function n(t){i.call(this,t),this.stencilMaskStack=null}var i=t("./WebGLManager"),o=t("../../../utils");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.stencilStack.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},n.prototype.pushStencil=function(t,e){this.renderer.currentRenderTarget.attachStencilBuffer();var r=this.renderer.gl,n=this.stencilMaskStack;this.bindGraphics(t,e,this.renderer),0===n.stencilStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),n.reverse=!0,n.count=0),n.stencilStack.push(e);var i=n.count;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),1===e.mode?(r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),n.reverse?(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),n.reverse?r.stencilFunc(r.EQUAL,255-(i+1),255):r.stencilFunc(r.EQUAL,i+1,255),n.reverse=!n.reverse):(n.reverse?(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),n.reverse?r.stencilFunc(r.EQUAL,i+1,255):r.stencilFunc(r.EQUAL,255-(i+1),255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),n.count++},n.prototype.bindGraphics=function(t,e){this._currentGraphics=t;var r,n=this.renderer.gl;1===e.mode?(r=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(r),n.uniformMatrix3fv(r.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(r.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(r.uniforms.tint._location,o.hex2rgb(t.tint)),n.uniform3fv(r.uniforms.color._location,e.color),n.uniform1f(r.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(r.attributes.aVertexPosition,2,n.FLOAT,!1,8,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(r=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(r),n.uniformMatrix3fv(r.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(r.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(r.uniforms.tint._location,o.hex2rgb(t.tint)),n.uniform1f(r.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(r.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(r.attributes.aColor,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},n.prototype.popStencil=function(t,e){var r=this.renderer.gl,n=this.stencilMaskStack;if(n.stencilStack.pop(),n.count--,0===n.stencilStack.length)r.disable(r.STENCIL_TEST);else{var i=n.count;this.bindGraphics(t,e,this.renderer),r.colorMask(!1,!1,!1,!1),1===e.mode?(n.reverse=!n.reverse,n.reverse?(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),n.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)):(n.reverse?(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),n.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},n.prototype.pushMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),t.dirty&&this.renderer.plugins.graphics.updateGraphics(t,this.renderer.gl),t._webGL[this.renderer.gl.id].data.length&&this.pushStencil(t,t._webGL[this.renderer.gl.id].data[0],this.renderer)},n.prototype.popMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(t,t._webGL[this.renderer.gl.id].data[0],this.renderer)}},{"../../../utils":76,"./WebGLManager":57}],57:[function(t,e,r){function n(t){this.renderer=t,this.renderer.on("context",this.onContextChange,this)}n.prototype.constructor=n,e.exports=n,n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],58:[function(t,e,r){function n(t){i.call(this,t,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var i=t("./Shader");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n},{"./Shader":60}],59:[function(t,e,r){function n(t){i.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var i=t("./Shader");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n},{"./Shader":60}],60:[function(t,e,r){function n(t,e,r,n,o){if(!e||!r)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uuid=i.uuid(),this.gl=t.renderer.gl,this.shaderManager=t,this.program=null,this.uniforms=n||{},this.attributes=o||{},this.textureCount=1,this.vertexSrc=e,this.fragmentSrc=r,this.init()}var i=t("../../../utils");n.prototype.constructor=n,e.exports=n,n.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},n.prototype.cacheUniformLocations=function(t){for(var e=0;e<t.length;++e)this.uniforms[t[e]]._location=this.gl.getUniformLocation(this.program,t[e])},n.prototype.cacheAttributeLocations=function(t){for(var e=0;e<t.length;++e)this.attributes[t[e]]=this.gl.getAttribLocation(this.program,t[e])},n.prototype.compile=function(){var t=this.gl,e=this._glCompile(t.VERTEX_SHADER,this.vertexSrc),r=this._glCompile(t.FRAGMENT_SHADER,this.fragmentSrc),n=t.createProgram();return t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(n,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(n)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(n)),
t.deleteProgram(n),n=null),t.deleteShader(e),t.deleteShader(r),this.program=n},n.prototype.syncUniform=function(t){var e,r,n=t._location,o=t.value,a=this.gl;switch(t.type){case"i":case"1i":a.uniform1i(n,o);break;case"f":case"1f":a.uniform1f(n,o);break;case"2f":a.uniform2f(n,o[0],o[1]);break;case"3f":a.uniform3f(n,o[0],o[1],o[2]);break;case"4f":a.uniform4f(n,o[0],o[1],o[2],o[3]);break;case"v2":a.uniform2f(n,o.x,o.y);break;case"v3":a.uniform3f(n,o.x,o.y,o.z);break;case"v4":a.uniform4f(n,o.x,o.y,o.z,o.w);break;case"1iv":a.uniform1iv(n,o);break;case"2iv":a.uniform2iv(n,o);break;case"3iv":a.uniform3iv(n,o);break;case"4iv":a.uniform4iv(n,o);break;case"1fv":a.uniform1fv(n,o);break;case"2fv":a.uniform2fv(n,o);break;case"3fv":a.uniform3fv(n,o);break;case"4fv":a.uniform4fv(n,o);break;case"m2":case"mat2":case"Matrix2fv":a.uniformMatrix2fv(n,t.transpose,o);break;case"m3":case"mat3":case"Matrix3fv":a.uniformMatrix3fv(n,t.transpose,o);break;case"m4":case"mat4":case"Matrix4fv":a.uniformMatrix4fv(n,t.transpose,o);break;case"c":"number"==typeof o&&(o=i.hex2rgb(o)),a.uniform3f(n,o[0],o[1],o[2]);break;case"iv1":a.uniform1iv(n,o);break;case"iv":a.uniform3iv(n,o);break;case"fv1":a.uniform1fv(n,o);break;case"fv":a.uniform3fv(n,o);break;case"v2v":for(t._array||(t._array=new Float32Array(2*o.length)),e=0,r=o.length;r>e;++e)t._array[2*e]=o[e].x,t._array[2*e+1]=o[e].y;a.uniform2fv(n,t._array);break;case"v3v":for(t._array||(t._array=new Float32Array(3*o.length)),e=0,r=o.length;r>e;++e)t._array[3*e]=o[e].x,t._array[3*e+1]=o[e].y,t._array[3*e+2]=o[e].z;a.uniform3fv(n,t._array);break;case"v4v":for(t._array||(t._array=new Float32Array(4*o.length)),e=0,r=o.length;r>e;++e)t._array[4*e]=o[e].x,t._array[4*e+1]=o[e].y,t._array[4*e+2]=o[e].z,t._array[4*e+3]=o[e].w;a.uniform4fv(n,t._array);break;case"t":case"sampler2D":if(!t.value||!t.value.baseTexture.hasLoaded)break;a.activeTexture(a["TEXTURE"+this.textureCount]);var s=t.value.baseTexture._glTextures[a.id];s||(this.initSampler2D(t),s=t.value.baseTexture._glTextures[a.id]),a.bindTexture(a.TEXTURE_2D,s),a.uniform1i(t._location,this.textureCount),this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+t.type)}},n.prototype.syncUniforms=function(){this.textureCount=1;for(var t in this.uniforms)this.syncUniform(this.uniforms[t])},n.prototype.initSampler2D=function(t){var e=this.gl,r=t.value.baseTexture;if(r.hasLoaded)if(t.textureData){var n=t.textureData;r._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,r._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,n.luminance?e.LUMINANCE:e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n.magFilter?n.magFilter:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n.wrapS?n.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,n.wrapS?n.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n.wrapT?n.wrapT:e.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(r)},n.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},n.prototype._glCompile=function(t,e){var r=this.gl.createShader(t);return this.gl.shaderSource(r,e),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(console.log(this.gl.getShaderInfoLog(r)),null)}},{"../../../utils":76}],61:[function(t,e,r){function n(t,e,r,o,a){var s={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(o)for(var u in o)s[u]=o[u];var h={aVertexPosition:0,aTextureCoord:0,aColor:0};if(a)for(var l in a)h[l]=a[l];e=e||n.defaultVertexSrc,r=r||n.defaultFragmentSrc,i.call(this,t,e,r,s,h)}var i=t("./Shader");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),n.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":60}],62:[function(t,e,r){function n(t){i.call(this,t)}var i=t("../managers/WebGLManager");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.flush=function(){},n.prototype.render=function(t){}},{"../managers/WebGLManager":57}],63:[function(t,e,r){function n(t){this.gl=t,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.upload()}n.prototype.constructor=n,n.prototype.map=function(t,e){var r=0,n=0;this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this.upload()},n.prototype.upload=function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this.uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this.colors)},e.exports=n},{}],64:[function(t,e,r){var n=t("../../../math"),i=t("../../../utils"),o=t("../../../const"),a=t("./StencilMaskStack"),s=function(t,e,r,s,u,h){if(this.gl=t,this.frameBuffer=null,this.texture=null,this.size=new n.Rectangle(0,0,1,1),this.resolution=u||o.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new a,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=s||o.SCALE_MODES.DEFAULT,this.root=h,!this.root){this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,s===o.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s===o.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST);var l=i.isPowerOfTwo(e,r);l?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}this.resize(e,r)};s.prototype.constructor=s,e.exports=s,s.prototype.clear=function(t){var e=this.gl;t&&e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},s.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var t=this.gl;this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},s.prototype.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer);var e=this.frame||this.size;this.calculateProjection(e),this.transform&&this.projectionMatrix.append(this.transform),t.viewport(0,0,e.width*this.resolution,e.height*this.resolution)},s.prototype.calculateProjection=function(t){var e=this.projectionMatrix;e.identity(),this.root?(e.a=1/t.width*2,e.d=-1/t.height*2,e.tx=-1-t.x*e.a,e.ty=1-t.y*e.d):(e.a=1/t.width*2,e.d=1/t.height*2,e.tx=-1-t.x*e.a,e.ty=-1-t.y*e.d)},s.prototype.resize=function(t,e){if(t=0|t,e=0|e,this.size.width!==t||this.size.height!==e){if(this.size.width=t,this.size.height=e,!this.root){var r=this.gl;r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t*this.resolution,e*this.resolution,0,r.RGBA,r.UNSIGNED_BYTE,null),this.stencilBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencilBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t*this.resolution,e*this.resolution))}var n=this.frame||this.size;this.calculateProjection(n)}},s.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{"../../../const":22,"../../../math":32,"../../../utils":76,"./StencilMaskStack":65}],65:[function(t,e,r){function n(){this.stencilStack=[],this.reverse=!0,this.count=0}n.prototype.constructor=n,e.exports=n},{}],66:[function(t,e,r){function n(t){a.call(this),this.anchor=new i.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=h.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=t||o.EMPTY}var i=t("../math"),o=t("../textures/Texture"),a=t("../display/Container"),s=t("../renderers/canvas/utils/CanvasTinter"),u=t("../utils"),h=t("../const"),l=new i.Point;n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.scale.x*this.texture._frame.width},set:function(t){this.scale.x=t/this.texture._frame.width,this._width=t}},height:{get:function(){return this.scale.y*this.texture._frame.height},set:function(t){this.scale.y=t/this.texture._frame.height,this._height=t}},texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),n.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},n.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this)},n.prototype.getBounds=function(t){if(!this._currentBounds){var e,r,n,i,o=this._texture._frame.width,a=this._texture._frame.height,s=o*(1-this.anchor.x),u=o*-this.anchor.x,h=a*(1-this.anchor.y),l=a*-this.anchor.y,c=t||this.worldTransform,f=c.a,p=c.b,d=c.c,m=c.d,g=c.tx,v=c.ty;if(0===p&&0===d)0>f&&(f*=-1),0>m&&(m*=-1),e=f*u+g,r=f*s+g,n=m*l+v,i=m*h+v;else{var E=f*u+d*l+g,y=m*l+p*u+v,x=f*s+d*l+g,T=m*l+p*s+v,R=f*s+d*h+g,b=m*h+p*s+v,_=f*u+d*h+g,w=m*h+p*u+v;e=E,e=e>x?x:e,e=e>R?R:e,e=e>_?_:e,n=y,n=n>T?T:n,n=n>b?b:n,n=n>w?w:n,r=E,r=x>r?x:r,r=R>r?R:r,r=_>r?_:r,i=y,i=T>i?T:i,i=b>i?b:i,i=w>i?w:i}if(this.children.length){var M=this.containerGetBounds();s=M.x,u=M.x+M.width,h=M.y,l=M.y+M.height,e=s>e?e:s,n=h>n?n:h,r=r>u?r:u,i=i>l?i:l}var H=this._bounds;H.x=e,H.width=r-e,H.y=n,H.height=i-n,this._currentBounds=H}return this._currentBounds},n.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,l);var e,r=this._texture._frame.width,n=this._texture._frame.height,i=-r*this.anchor.x;return l.x>i&&l.x<i+r&&(e=-n*this.anchor.y,l.y>e&&l.y<e+n)?!0:!1},n.prototype._renderCanvas=function(t){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)&&(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=t.blendModes[t.currentBlendMode]),this.texture.valid)){var e,r,n,i,o=this._texture,a=this.worldTransform;if(t.context.globalAlpha=this.worldAlpha,t.smoothProperty&&t.currentScaleMode!==o.baseTexture.scaleMode&&(t.currentScaleMode=o.baseTexture.scaleMode,t.context[t.smoothProperty]=t.currentScaleMode===h.SCALE_MODES.LINEAR),o.rotate){var u=a.a,l=a.b;a.a=-a.c,a.b=-a.d,a.c=u,a.d=l,n=o.crop.height,i=o.crop.width,e=o.trim?o.trim.y-this.anchor.y*o.trim.height:this.anchor.y*-o._frame.height,r=o.trim?o.trim.x-this.anchor.x*o.trim.width:this.anchor.x*-o._frame.width}else n=o.crop.width,i=o.crop.height,e=o.trim?o.trim.x-this.anchor.x*o.trim.width:this.anchor.x*-o._frame.width,r=o.trim?o.trim.y-this.anchor.y*o.trim.height:this.anchor.y*-o._frame.height;t.roundPixels?(t.context.setTransform(a.a,a.b,a.c,a.d,a.tx*t.resolution|0,a.ty*t.resolution|0),e=0|e,r=0|r):t.context.setTransform(a.a,a.b,a.c,a.d,a.tx*t.resolution,a.ty*t.resolution);var c=o.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=s.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,n*c,i*c,e*t.resolution,r*t.resolution,n*t.resolution,i*t.resolution)):t.context.drawImage(o.baseTexture.source,o.crop.x*c,o.crop.y*c,n*c,i*c,e*t.resolution,r*t.resolution,n*t.resolution,i*t.resolution)}},n.prototype.destroy=function(t,e){a.prototype.destroy.call(this),this.anchor=null,t&&this._texture.destroy(e),this._texture=null,this.shader=null},n.fromFrame=function(t){var e=u.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new n(e)},n.fromImage=function(t,e,r){return new n(o.fromImage(t,e,r))}},{"../const":22,"../display/Container":23,"../math":32,"../renderers/canvas/utils/CanvasTinter":47,"../textures/Texture":71,"../utils":76}],67:[function(t,e,r){function n(t){i.call(this,t),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=a.SPRITE_BATCH_SIZE;var e=4*this.size*this.vertByteSize,r=6*this.size;this.vertices=new ArrayBuffer(e),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(r),this.lastIndexCount=0;for(var n=0,o=0;r>n;n+=6,o+=4)this.indices[n+0]=o+0,this.indices[n+1]=o+1,this.indices[n+2]=o+2,this.indices[n+3]=o+0,this.indices[n+4]=o+2,this.indices[n+5]=o+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.shader=null}var i=t("../../renderers/webgl/utils/ObjectRenderer"),o=t("../../renderers/webgl/WebGLRenderer"),a=t("../../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,o.registerPlugin("sprite",n),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},n.prototype.render=function(t){var e=t._texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture);var r=e._uvs;if(r){var n,i,o,a,s=t.anchor.x,u=t.anchor.y;if(e.trim){var h=e.trim;i=h.x-s*h.width,n=i+e.crop.width,a=h.y-u*h.height,o=a+e.crop.height}else n=e._frame.width*(1-s),i=e._frame.width*-s,o=e._frame.height*(1-u),a=e._frame.height*-u;var l=this.currentBatchSize*this.vertByteSize,c=t.worldTransform,f=c.a,p=c.b,d=c.c,m=c.d,g=c.tx,v=c.ty,E=this.colors,y=this.positions;this.renderer.roundPixels?(y[l]=f*i+d*a+g|0,y[l+1]=m*a+p*i+v|0,y[l+5]=f*n+d*a+g|0,y[l+6]=m*a+p*n+v|0,y[l+10]=f*n+d*o+g|0,y[l+11]=m*o+p*n+v|0,y[l+15]=f*i+d*o+g|0,y[l+16]=m*o+p*i+v|0):(y[l]=f*i+d*a+g,y[l+1]=m*a+p*i+v,y[l+5]=f*n+d*a+g,y[l+6]=m*a+p*n+v,y[l+10]=f*n+d*o+g,y[l+11]=m*o+p*n+v,y[l+15]=f*i+d*o+g,y[l+16]=m*o+p*i+v),y[l+2]=r.x0,y[l+3]=r.y0,y[l+7]=r.x1,y[l+8]=r.y1,y[l+12]=r.x2,y[l+13]=r.y2,y[l+17]=r.x3,y[l+18]=r.y3;var x=t.tint;E[l+4]=E[l+9]=E[l+14]=E[l+19]=(x>>16)+(65280&x)+((255&x)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},n.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.renderer.gl;if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var r=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);e.bufferSubData(e.ARRAY_BUFFER,0,r)}for(var n,i,o,a,s=0,u=0,h=null,l=this.renderer.blendModeManager.currentBlendMode,c=null,f=!1,p=!1,d=0,m=this.currentBatchSize;m>d;d++)a=this.sprites[d],n=a._texture.baseTexture,i=a.blendMode,o=a.shader||this.shader,f=l!==i,p=c!==o,(h!==n||f||p)&&(this.renderBatch(h,s,u),u=d,s=0,h=n,f&&(l=i,this.renderer.blendModeManager.setBlendMode(l)),p&&(c=o,t=c.shaders?c.shaders[e.id]:c,t||(t=c.getShader(this.renderer)),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),e.activeTexture(e.TEXTURE0))),s++;this.renderBatch(h,s,u),this.currentBatchSize=0}},n.prototype.renderBatch=function(t,e,r){if(0!==e){var n=this.renderer.gl;t._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,t._glTextures[n.id]):this.renderer.updateTexture(t),n.drawElements(n.TRIANGLES,6*e,n.UNSIGNED_SHORT,6*r*2),this.renderer.drawCount++}},n.prototype.start=function(){var t=this.renderer.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.vertByteSize;t.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.shader.attributes.aColor,4,t.UNSIGNED_BYTE,!0,e,16)},n.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.currentBaseTexture=null,this.drawing=!1,this.textures=null,this.blendModes=null,this.shaders=null,this.sprites=null,this.shader=null}},{"../../const":22,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62}],68:[function(t,e,r){function n(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||u.RESOLUTION,this._text=null,this._style=null;var n=o.fromCanvas(this.canvas);n.trim=new a.Rectangle,i.call(this,n),this.text=t,this.style=e}var i=t("../sprites/Sprite"),o=t("../textures/Texture"),a=t("../math"),s=t("../utils"),u=t("../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.fontPropertiesCache={},n.fontPropertiesCanvas=document.createElement("canvas"),n.fontPropertiesContext=n.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(n.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(t){this.scale.x=t/this._texture._frame.width,this._width=t}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(t){this.scale.y=t/this._texture._frame.height,this._height=t}},style:{get:function(){return this._style},set:function(t){t=t||{},"number"==typeof t.fill&&(t.fill=s.hex2string(t.fill)),"number"==typeof t.stroke&&(t.stroke=s.hex2string(t.stroke)),"number"==typeof t.dropShadowColor&&(t.dropShadowColor=s.hex2string(t.dropShadowColor)),t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowColor=t.dropShadowColor||"#000000",t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||5,t.padding=t.padding||0,t.textBaseline=t.textBaseline||"alphabetic",t.lineJoin=t.lineJoin||"miter",t.miterLimit=t.miterLimit||10,this._style=t,this.dirty=!0}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),n.prototype.updateText=function(){var t=this._style;this.context.font=t.font;for(var e=t.wordWrap?this.wordWrap(this._text):this._text,r=e.split(/(?:\r\n|\r|\n)/),n=new Array(r.length),i=0,o=this.determineFontProperties(t.font),a=0;a<r.length;a++){var s=this.context.measureText(r[a]).width;n[a]=s,i=Math.max(i,s)}var u=i+t.strokeThickness;t.dropShadow&&(u+=t.dropShadowDistance),this.canvas.width=(u+this.context.lineWidth)*this.resolution;var h=this.style.lineHeight||o.fontSize+t.strokeThickness,l=h*r.length;t.dropShadow&&(l+=t.dropShadowDistance),this.canvas.height=(l+2*this._style.padding)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=t.font,this.context.strokeStyle=t.stroke,this.context.lineWidth=t.strokeThickness,this.context.textBaseline=t.textBaseline,this.context.lineJoin=t.lineJoin,this.context.miterLimit=t.miterLimit;var c,f;if(t.dropShadow){this.context.fillStyle=t.dropShadowColor;var p=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,d=Math.sin(t.dropShadowAngle)*t.dropShadowDistance;for(a=0;a<r.length;a++)c=t.strokeThickness/2,f=t.strokeThickness/2+a*h+o.ascent,"right"===t.align?c+=i-n[a]:"center"===t.align&&(c+=(i-n[a])/2),t.fill&&this.context.fillText(r[a],c+p,f+d+this._style.padding)}for(this.context.fillStyle=t.fill,a=0;a<r.length;a++)c=t.strokeThickness/2,f=t.strokeThickness/2+a*h+o.ascent,"right"===t.align?c+=i-n[a]:"center"===t.align&&(c+=(i-n[a])/2),t.stroke&&t.strokeThickness&&this.context.strokeText(r[a],c,f+this._style.padding),t.fill&&this.context.fillText(r[a],c,f+this._style.padding);this.updateTexture()},n.prototype.updateTexture=function(){var t=this._texture;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.crop.width=t._frame.width=this.canvas.width/this.resolution,t.crop.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=0,t.trim.y=-this._style.padding,t.trim.width=t._frame.width,t.trim.height=t._frame.height-2*this._style.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},n.prototype.renderWebGL=function(t){this.dirty&&this.updateText(),i.prototype.renderWebGL.call(this,t)},n.prototype._renderCanvas=function(t){this.dirty&&this.updateText(),i.prototype._renderCanvas.call(this,t)},n.prototype.determineFontProperties=function(t){var e=n.fontPropertiesCache[t];if(!e){e={};var r=n.fontPropertiesCanvas,i=n.fontPropertiesContext;i.font=t;var o=Math.ceil(i.measureText("|Mq").width),a=Math.ceil(i.measureText("M").width),s=2*a;a=1.4*a|0,r.width=o,r.height=s,i.fillStyle="#f00",i.fillRect(0,0,o,s),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|Mq",0,a);var u,h,l=i.getImageData(0,0,o,s).data,c=l.length,f=4*o,p=0,d=!1;for(u=0;a>u;u++){for(h=0;f>h;h+=4)if(255!==l[p+h]){d=!0;break}if(d)break;p+=f}for(e.ascent=a-u,p=c-f,d=!1,u=s;u>a;u--){for(h=0;f>h;h+=4)if(255!==l[p+h]){d=!0;break}if(d)break;p-=f}e.descent=u-a,e.fontSize=e.ascent+e.descent,n.fontPropertiesCache[t]=e}return e},n.prototype.wordWrap=function(t){for(var e="",r=t.split("\n"),n=this._style.wordWrapWidth,i=0;i<r.length;i++){for(var o=n,a=r[i].split(" "),s=0;s<a.length;s++){var u=this.context.measureText(a[s]).width,h=u+this.context.measureText(" ").width;0===s||h>o?(s>0&&(e+="\n"),e+=a[s],o=n-u):(o-=h,e+=" "+a[s])}i<r.length-1&&(e+="\n")}return e},n.prototype.getBounds=function(t){return this.dirty&&this.updateText(),i.prototype.getBounds.call(this,t)},n.prototype.destroy=function(t){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===t?!0:t)}},{"../const":22,"../math":32,"../sprites/Sprite":66,"../textures/Texture":71,"../utils":76}],69:[function(t,e,r){function n(t,e,r){a.call(this),this.uuid=i.uuid(),this.resolution=r||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=e||o.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures=[],t&&this.loadSource(t)}var i=t("../utils"),o=t("../const"),a=t("eventemitter3");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=i.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},n.prototype.loadSource=function(t){var e=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=t,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!t.getContext){this.isLoading=!0;var r=this;t.onload=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),r.emit("loaded",r))},t.onerror=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},t.complete&&t.src&&(this.isLoading=!1,t.onload=null,t.onerror=null,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this))}},n.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},n.prototype.destroy=function(){this.imageUrl?(delete i.BaseTextureCache[this.imageUrl],delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete i.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},n.prototype.dispose=function(){this.emit("dispose",this),this._glTextures.length=0},n.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},n.fromImage=function(t,e,r){var o=i.BaseTextureCache[t];if(void 0===e&&0!==t.indexOf("data:")&&(e=!0),!o){var a=new Image;e&&(a.crossOrigin=""),o=new n(a,r),o.imageUrl=t,a.src=t,i.BaseTextureCache[t]=o,o.resolution=i.getResolutionOfUrl(t)}return o},n.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+i.uuid());var r=i.BaseTextureCache[t._pixiId];return r||(r=new n(t,e),i.BaseTextureCache[t._pixiId]=r),r}},{"../const":22,"../utils":76,eventemitter3:11}],70:[function(t,e,r){function n(t,e,r,n,c){if(!t)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");e=e||100,r=r||100,c=c||l.RESOLUTION;var f=new i;if(f.width=e,f.height=r,f.resolution=c,f.scaleMode=n||l.SCALE_MODES.DEFAULT,f.hasLoaded=!0,o.call(this,f,new h.Rectangle(0,0,e,r)),this.width=e,this.height=r,this.resolution=c,this.render=null,this.renderer=t,this.renderer.type===l.RENDERER_TYPE.WEBGL){var p=this.renderer.gl;this.textureBuffer=new a(p,this.width,this.height,f.scaleMode,this.resolution),this.baseTexture._glTextures[p.id]=this.textureBuffer.texture,this.filterManager=new s(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(e,r),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new u(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var i=t("./BaseTexture"),o=t("./Texture"),a=t("../renderers/webgl/utils/RenderTarget"),s=t("../renderers/webgl/managers/FilterManager"),u=t("../renderers/canvas/utils/CanvasBuffer"),h=t("../math"),l=t("../const"),c=new h.Matrix;n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.resize=function(t,e,r){(t!==this.width||e!==this.height)&&(this.valid=t>0&&e>0,this.width=this._frame.width=this.crop.width=t,this.height=this._frame.height=this.crop.height=e,r&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},n.prototype.clear=function(){this.valid&&(this.renderer.type===l.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},n.prototype.renderWebGL=function(t,e,r,n){if(this.valid){if(n=void 0!==n?n:!0,//!updateTransform;
this.textureBuffer.transform=e,this.textureBuffer.activate(),t.worldAlpha=t.alpha,n){t.worldTransform.identity(),t.currentBounds=null;var i,o,a=t.children;for(i=0,o=a.length;o>i;++i)a[i].updateTransform()}var s=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(t,this.textureBuffer,r),this.renderer.filterManager=s}},n.prototype.renderCanvas=function(t,e,r,n){if(this.valid){n=!!n;var i=t.worldTransform,o=c;o.identity(),e&&o.append(e),t.worldTransform=o,t.worldAlpha=1;var a,s,u=t.children;for(a=0,s=u.length;s>a;++a)u[a].updateTransform();r&&this.textureBuffer.clear(),t.worldTransform=i;var h=this.textureBuffer.context,l=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,h),this.renderer.resolution=l}},n.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},n.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},n.prototype.getBase64=function(){return this.getCanvas().toDataURL()},n.prototype.getCanvas=function(){if(this.renderer.type===l.RENDERER_TYPE.WEBGL){var t=this.renderer.gl,e=this.textureBuffer.size.width,r=this.textureBuffer.size.height,n=new Uint8Array(4*e*r);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,r,t.RGBA,t.UNSIGNED_BYTE,n),t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new u(e,r),o=i.context.getImageData(0,0,e,r);return o.data.set(n),i.context.putImageData(o,0,0),i.canvas}return this.textureBuffer.canvas},n.prototype.getPixels=function(){var t,e;if(this.renderer.type===l.RENDERER_TYPE.WEBGL){var r=this.renderer.gl;t=this.textureBuffer.size.width,e=this.textureBuffer.size.height;var n=new Uint8Array(4*t*e);return r.bindFramebuffer(r.FRAMEBUFFER,this.textureBuffer.frameBuffer),r.readPixels(0,0,t,e,r.RGBA,r.UNSIGNED_BYTE,n),r.bindFramebuffer(r.FRAMEBUFFER,null),n}return t=this.textureBuffer.canvas.width,e=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,t,e).data},n.prototype.getPixel=function(t,e){if(this.renderer.type===l.RENDERER_TYPE.WEBGL){var r=this.renderer.gl,n=new Uint8Array(4);return r.bindFramebuffer(r.FRAMEBUFFER,this.textureBuffer.frameBuffer),r.readPixels(t,e,1,1,r.RGBA,r.UNSIGNED_BYTE,n),r.bindFramebuffer(r.FRAMEBUFFER,null),n}return this.textureBuffer.canvas.getContext("2d").getImageData(t,e,1,1).data}},{"../const":22,"../math":32,"../renderers/canvas/utils/CanvasBuffer":44,"../renderers/webgl/managers/FilterManager":53,"../renderers/webgl/utils/RenderTarget":64,"./BaseTexture":69,"./Texture":71}],71:[function(t,e,r){function n(t,e,r,i,o){s.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new u.Rectangle(0,0,1,1)),t instanceof n&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=i,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=r||e,this.rotate=!!o,t.hasLoaded?(this.noFrame&&(e=new u.Rectangle(0,0,t.width,t.height),t.on("update",this.onBaseTextureUpdated,this)),this.frame=e):t.once("loaded",this.onBaseTextureLoaded,this)}var i=t("./BaseTexture"),o=t("./VideoBaseTexture"),a=t("./TextureUvs"),s=t("eventemitter3"),u=t("../math"),h=t("../utils");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{frame:{get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,this.width=t.width,this.height=t.height,!this.trim&&!this.rotate&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=t,this.valid&&this._updateUvs()}}}),n.prototype.update=function(){this.baseTexture.update()},n.prototype.onBaseTextureLoaded=function(t){this.frame=this.noFrame?new u.Rectangle(0,0,t.width,t.height):this._frame,this.emit("update",this)},n.prototype.onBaseTextureUpdated=function(t){this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},n.prototype.destroy=function(t){this.baseTexture&&(t&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1},n.prototype.clone=function(){return new n(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},n.prototype._updateUvs=function(){this._uvs||(this._uvs=new a),this._uvs.set(this.crop,this.baseTexture,this.rotate)},n.fromImage=function(t,e,r){var o=h.TextureCache[t];return o||(o=new n(i.fromImage(t,e,r)),h.TextureCache[t]=o),o},n.fromFrame=function(t){var e=h.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},n.fromCanvas=function(t,e){return new n(i.fromCanvas(t,e))},n.fromVideo=function(t,e){return"string"==typeof t?n.fromVideoUrl(t,e):new n(o.fromVideo(t,e))},n.fromVideoUrl=function(t,e){return new n(o.fromUrl(t,e))},n.addTextureToCache=function(t,e){h.TextureCache[e]=t},n.removeTextureFromCache=function(t){var e=h.TextureCache[t];return delete h.TextureCache[t],delete h.BaseTextureCache[t],e},n.EMPTY=new n(new i)},{"../math":32,"../utils":76,"./BaseTexture":69,"./TextureUvs":72,"./VideoBaseTexture":73,eventemitter3:11}],72:[function(t,e,r){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}e.exports=n,n.prototype.set=function(t,e,r){var n=e.width,i=e.height;r?(this.x0=(t.x+t.height)/n,this.y0=t.y/i,this.x1=(t.x+t.height)/n,this.y1=(t.y+t.width)/i,this.x2=t.x/n,this.y2=(t.y+t.width)/i,this.x3=t.x/n,this.y3=t.y/i):(this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i)}},{}],73:[function(t,e,r){function n(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),o.call(this,t,e),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),t.complete||(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function i(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=t,r.type=e,r}var o=t("./BaseTexture"),a=t("../utils");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},n.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},n.prototype._onPlayStop=function(){this.autoUpdate=!1},n.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},n.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete a.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),o.prototype.destroy.call(this)},n.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+a.uuid());var r=a.BaseTextureCache[t._pixiId];return r||(r=new n(t,e),a.BaseTextureCache[t._pixiId]=r),r},n.fromUrl=function(t,e){var r=document.createElement("video");if(Array.isArray(t))for(var o=0;o<t.length;++o)r.appendChild(i(t.src||t,t.mime));else r.appendChild(i(t.src||t,t.mime));return r.load(),r.play(),n.fromVideo(r,e)},n.fromUrls=n.fromUrl},{"../utils":76,"./BaseTexture":69}],74:[function(t,e,r){function n(){var t=this;this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._emitter.listeners(a,!0)&&(t._requestId=requestAnimationFrame(t._tick)))},this._emitter=new o,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/i.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var i=t("../const"),o=t("eventemitter3"),a="tick";Object.defineProperties(n.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,i.TARGET_FPMS);this._maxElapsedMS=1/e}}}),n.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(a,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(t,e){return this._emitter.on(a,t,e),this._startIfPossible(),this},n.prototype.addOnce=function(t,e){return this._emitter.once(a,t,e),this._startIfPossible(),this},n.prototype.remove=function(t,e){return this._emitter.off(a,t,e),this._emitter.listeners(a,!0)||this._cancelIfNeeded(),this},n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.update=function(t){var e;t=t||performance.now(),e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*i.TARGET_FPMS*this.speed,this._emitter.emit(a,this.deltaTime),this.lastTime=t},e.exports=n},{"../const":22,eventemitter3:11}],75:[function(t,e,r){/**
 * @file        Main export of the PIXI extras library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/GoodBoyDigital/pixi.js/blob/master/LICENSE|MIT License}
 */
var n=t("./Ticker"),i=new n;i.autoStart=!0,e.exports={shared:i,Ticker:n}},{"./Ticker":74}],76:[function(t,e,r){var n=t("../const"),i=e.exports={_uid:0,_saidHello:!1,pluginTarget:t("./pluginTarget"),async:t("async"),uuid:function(){return++i._uid},hex2rgb:function(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},hex2string:function(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t},rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",r=new Image;r.src=t+"AP804Oa6"+e;var n=new Image;n.src=t+"/wCKxvRF"+e;var i=document.createElement("canvas");i.width=6,i.height=1;var o=i.getContext("2d");o.globalCompositeOperation="multiply",o.drawImage(r,0,0),o.drawImage(n,2,0);var a=o.getImageData(2,0,1,1).data;return 255===a[0]&&0===a[1]&&0===a[2]},getNextPowerOfTwo:function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},isPowerOfTwo:function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},getResolutionOfUrl:function(t){var e=n.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):1},sayHello:function(t){if(!i._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+n.VERSION+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+n.VERSION+" - "+t+" - http://www.pixijs.com/");i._saidHello=!0}},isWebGLSupported:function(){var t={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return!(!r||!r.getContextAttributes().stencil)}catch(n){return!1}},TextureCache:{},BaseTextureCache:{}}},{"../const":22,"./pluginTarget":77,async:2}],77:[function(t,e,r){function n(t){t.__plugins={},t.registerPlugin=function(e,r){t.__plugins[e]=r},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.exports={mixin:function(t){n(t)}}},{}],78:[function(t,e,r){var n=t("./core"),i=t("./mesh"),o=t("./extras"),a=t("./core/utils");n.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},n.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(n,{Stage:{get:function(){return console.warn("You do not need to use a PIXI Stage any more, you can simply render any container."),n.Container}},DisplayObjectContainer:{get:function(){return console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),n.Container}},Strip:{get:function(){return console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),i.Mesh}},Rope:{get:function(){return console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),i.Rope}},MovieClip:{get:function(){return console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),o.MovieClip}},TilingSprite:{get:function(){return console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),o.TilingSprite}},BitmapText:{get:function(){return console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),o.BitmapText}},blendModes:{get:function(){return console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),n.BLEND_MODES}},scaleModes:{get:function(){return console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),n.SCALE_MODES}},BaseTextureCache:{get:function(){return console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),a.BaseTextureCache}},TextureCache:{get:function(){return console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),a.TextureCache}}}),n.Sprite.prototype.setTexture=function(t){this.texture=t,console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},o.BitmapText.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},n.Text.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},n.Text.prototype.setStyle=function(t){this.style=t,console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},n.Texture.prototype.setFrame=function(t){this.frame=t,console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")}},{"./core":29,"./core/utils":76,"./extras":85,"./mesh":126}],79:[function(t,e,r){function n(t,e){i.Container.call(this),e=e||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},this.font=e.font,this._text=t,this.maxWidth=0,this.dirty=!1,this.updateText()}var i=t("../core");n.prototype=Object.create(i.Container.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{tint:{get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):n.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),n.prototype.updateText=function(){for(var t=n.fonts[this._font.name],e=new i.math.Point,r=null,o=[],a=0,s=0,u=[],h=0,l=this._font.size/t.size,c=-1,f=0;f<this.text.length;f++){var p=this.text.charCodeAt(f);if(c=/(\s)/.test(this.text.charAt(f))?f:c,/(?:\r\n|\r|\n)/.test(this.text.charAt(f)))u.push(a),s=Math.max(s,a),h++,e.x=0,e.y+=t.lineHeight,r=null;else if(-1!==c&&this.maxWidth>0&&e.x*l>this.maxWidth)o.splice(c,f-c),f=c,c=-1,u.push(a),s=Math.max(s,a),h++,e.x=0,e.y+=t.lineHeight,r=null;else{var d=t.chars[p];d&&(r&&d.kerning[r]&&(e.x+=d.kerning[r]),o.push({texture:d.texture,line:h,charCode:p,position:new i.math.Point(e.x+d.xOffset,e.y+d.yOffset)}),a=e.x+(d.texture.width+d.xOffset),e.x+=d.xAdvance,r=p)}}u.push(a),s=Math.max(s,a);var m=[];for(f=0;h>=f;f++){var g=0;"right"===this._font.align?g=s-u[f]:"center"===this._font.align&&(g=(s-u[f])/2),m.push(g)}var v=o.length,E=this.tint;for(f=0;v>f;f++){var y=this._glyphs[f];y?y.texture=o[f].texture:(y=new i.Sprite(o[f].texture),this._glyphs.push(y)),y.position.x=(o[f].position.x+m[o[f].line])*l,y.position.y=o[f].position.y*l,y.scale.x=y.scale.y=l,y.tint=E,y.parent||this.addChild(y)}for(f=v;f<this._glyphs.length;++f)this.removeChild(this._glyphs[f]);this.textWidth=s*l,this.textHeight=(e.y+t.lineHeight)*l},n.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},n.prototype.getLocalBounds=function(){return this.validate(),i.Container.prototype.getLocalBounds.call(this)},n.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},n.fonts={}},{"../core":29}],80:[function(t,e,r){function n(t){i.Sprite.call(this,t[0]),this._textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var i=t("../core");n.prototype=Object.create(i.Sprite.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(t){this._textures=t,this.texture=this._textures[Math.floor(this._currentTime)%this._textures.length]}},currentFrame:{get:function(){return Math.floor(this._currentTime)%this._textures.length}}}),n.prototype.stop=function(){this.playing&&(this.playing=!1,i.ticker.shared.remove(this.update,this))},n.prototype.play=function(){this.playing||(this.playing=!0,i.ticker.shared.add(this.update,this))},n.prototype.gotoAndStop=function(t){this.stop(),this._currentTime=t;var e=Math.floor(this._currentTime);this._texture=this._textures[e%this._textures.length]},n.prototype.gotoAndPlay=function(t){this._currentTime=t,this.play()},n.prototype.update=function(t){this._currentTime+=this.animationSpeed*t;var e=Math.floor(this._currentTime);0>e?this.loop?this._texture=this._textures[this._textures.length-1+e%this._textures.length]:(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this.loop||e<this._textures.length?this._texture=this._textures[e%this._textures.length]:e>=this._textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())},n.prototype.destroy=function(){this.stop(),i.Sprite.prototype.destroy.call(this)},n.fromFrames=function(t){for(var e=[],r=0;r<t.length;++r)e.push(new i.Texture.fromFrame(t[r]));return new n(e)},n.fromImages=function(t){for(var e=[],r=0;r<t.length;++r)e.push(new i.Texture.fromImage(t[r]));return new n(e)}},{"../core":29}],81:[function(t,e,r){function n(t,e,r){i.Sprite.call(this,t),this.tileScale=new i.math.Point(1,1),this.tilePosition=new i.math.Point(0,0),this._width=e||100,this._height=r||100,this._uvs=new i.TextureUvs,this._canvasPattern=null,this.shader=new i.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   coord /= uFrame.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","void main(void){","   vec2 coord = fract(vTextureCoord);","   coord *= uFrame.zw;","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]}})}var i=t("../core"),o=new i.Point;n.prototype=Object.create(i.Sprite.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t}},height:{get:function(){return this._height},set:function(t){this._height=t}}}),n.prototype._onTextureUpdate=function(){},n.prototype._renderWebGL=function(t){var e=this._texture;if(e&&e._uvs){var r=e._uvs,n=e._frame.width,i=e._frame.height,o=e.baseTexture.width,a=e.baseTexture.height;e._uvs=this._uvs,e._frame.width=this.width,e._frame.height=this.height,this.shader.uniforms.uFrame.value[0]=r.x0,this.shader.uniforms.uFrame.value[1]=r.y0,this.shader.uniforms.uFrame.value[2]=r.x1-r.x0,this.shader.uniforms.uFrame.value[3]=r.y2-r.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(n*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(i*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=o/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=a/this._height*this.tileScale.y,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this),e._uvs=r,e._frame.width=n,e._frame.height=i}},n.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var r=t.context,n=this.worldTransform,o=t.resolution,a=e.baseTexture,s=this.tilePosition.x%(e._frame.width*this.tileScale.x),u=this.tilePosition.y%(e._frame.height*this.tileScale.y);if(!this._canvasPattern){var h=new i.CanvasBuffer(e._frame.width,e._frame.height);h.context.drawImage(a.source,-e._frame.x,-e._frame.y),this._canvasPattern=h.context.createPattern(h.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),r.scale(this.tileScale.x,this.tileScale.y),r.translate(s+this.anchor.x*-this._width,u+this.anchor.y*-this._height),this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,r.globalCompositeOperation=t.blendModes[t.currentBlendMode]),r.fillStyle=this._canvasPattern,r.fillRect(-s,-u,this._width/this.tileScale.x,this._height/this.tileScale.y)}},n.prototype.getBounds=function(){var t,e,r,n,i=this._width,o=this._height,a=i*(1-this.anchor.x),s=i*-this.anchor.x,u=o*(1-this.anchor.y),h=o*-this.anchor.y,l=this.worldTransform,c=l.a,f=l.b,p=l.c,d=l.d,m=l.tx,g=l.ty,v=c*s+p*h+m,E=d*h+f*s+g,y=c*a+p*h+m,x=d*h+f*a+g,T=c*a+p*u+m,R=d*u+f*a+g,b=c*s+p*u+m,_=d*u+f*s+g;t=v,t=t>y?y:t,t=t>T?T:t,t=t>b?b:t,r=E,r=r>x?x:r,r=r>R?R:r,r=r>_?_:r,e=v,e=y>e?y:e,e=T>e?T:e,e=b>e?b:e,n=E,n=x>n?x:n,n=R>n?R:n,n=_>n?_:n;var w=this._bounds;return w.x=t,w.width=e-t,w.y=r,w.height=n-r,this._currentBounds=w,w},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,o);var e,r=this._width,n=this._height,i=-r*this.anchor.x;return o.x>i&&o.x<i+r&&(e=-n*this.anchor.y,o.y>e&&o.y<e+n)?!0:!1},n.prototype.destroy=function(){i.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},n.fromFrame=function(t,e,r){var o=i.utils.TextureCache[t];if(!o)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new n(o,e,r)},n.fromImage=function(t,e,r,o,a){return new n(i.Texture.fromImage(t,o,a),e,r)}},{"../core":29}],82:[function(t,e,r){var n=t("../core"),i=n.DisplayObject,o=new n.Matrix;i.prototype._cacheAsBitmap=!1,i.prototype._originalRenderWebGL=null,i.prototype._originalRenderCanvas=null,i.prototype._originalUpdateTransform=null,i.prototype._originalHitTest=null,i.prototype._originalDestroy=null,i.prototype._cachedSprite=null,Object.defineProperties(i.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),i.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this._cachedSprite))},i.prototype._initCachedDisplayObject=function(t){if(!this._cachedSprite){t.currentRenderer.flush();var e=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;e.x-=r,e.y-=r,e.width+=2*r,e.height+=2*r}var i=t.currentRenderTarget,a=t.filterManager.filterStack,s=new n.RenderTexture(t,0|e.width,0|e.height),u=o;u.tx=-e.x,u.ty=-e.y,this.renderWebGL=this._originalRenderWebGL,s.render(this,u,!0,!0),t.setRenderTarget(i),t.filterManager.filterStack=a,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new n.Sprite(s),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},i.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(t))},i.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cachedSprite){var e=this.getLocalBounds(),r=t.context,i=new n.RenderTexture(t,0|e.width,0|e.height),a=o;a.tx=-e.x,a.ty=-e.y,this.renderCanvas=this._originalRenderCanvas,i.render(this,a,!0),t.context=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new n.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},i.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},i.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},i.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},{"../core":29}],83:[function(t,e,r){var n=t("../core");n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":29}],84:[function(t,e,r){var n=t("../core");n.DisplayObject.prototype.getGlobalPosition=function(t){return t=t||new n.Point,this.parent?(this.displayObjectUpdateTransform(),t.x=this.worldTransform.tx,t.y=this.worldTransform.ty):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":29}],85:[function(t,e,r){/**
 * @file        Main export of the PIXI extras library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/GoodBoyDigital/pixi.js/blob/master/LICENSE|MIT License}
 */
t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition"),e.exports={MovieClip:t("./MovieClip"),TilingSprite:t("./TilingSprite"),BitmapText:t("./BitmapText")}},{"./BitmapText":79,"./MovieClip":80,"./TilingSprite":81,"./cacheAsBitmap":82,"./getChildByName":83,"./getGlobalPosition":84}],86:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":29}],87:[function(t,e,r){function n(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new a,this.defaultFilter=new i.AbstractFilter}var i=t("../../core"),o=t("../blur/BlurXFilter"),a=t("../blur/BlurYFilter");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(t,e,r),this.blurXFilter.applyFilter(t,e,n),t.blendModeManager.setBlendMode(i.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(t,n,r),t.blendModeManager.setBlendMode(i.BLEND_MODES.NORMAL),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":29,"../blur/BlurXFilter":90,"../blur/BlurYFilter":91}],88:[function(t,e,r){function n(t,e){i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:t||0},dirY:{type:"1f",value:e||0}}),this.defaultFilter=new i.AbstractFilter,this.passes=1,this.dirX=t||0,this.dirY=e||0,this.strength=4}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r,n){var i=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(i,e,r,n);else{var o=t.filterManager.getRenderTarget(!0);t.filterManager.applyFilter(i,e,o,n);for(var a=0;a<this.passes-2;a++)t.filterManager.applyFilter(i,o,o,n);t.filterManager.applyFilter(i,o,r,n),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}},dirX:{get:function(){return this.dirX},set:function(t){this.uniforms.dirX.value=t}},dirY:{get:function(){return this.dirY},set:function(t){this.uniforms.dirY.value=t}}})},{"../../core":29}],89:[function(t,e,r){function n(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new a}var i=t("../../core"),o=t("./BlurXFilter"),a=t("./BlurYFilter");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(t,e,n),this.blurYFilter.applyFilter(t,n,r),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.padding=.5*Math.abs(t),this.blurXFilter.blur=this.blurYFilter.blur=t}},passes:{get:function(){return this.blurXFilter.passes},set:function(t){this.blurXFilter.passes=this.blurYFilter.passes=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":29,"./BlurXFilter":90,"./BlurYFilter":91}],90:[function(t,e,r){function n(){i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r,n){var i=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(i,e,r,n);else{for(var o=t.filterManager.getRenderTarget(!0),a=e,s=o,u=0;u<this.passes-1;u++){t.filterManager.applyFilter(i,a,s,!0);var h=s;s=a,a=h}t.filterManager.applyFilter(i,a,r,n),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":29}],91:[function(t,e,r){function n(){i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r,n){var i=this.getShader(t);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(i,e,r,n);else{for(var o=t.filterManager.getRenderTarget(!0),a=e,s=o,u=0;u<this.passes-1;u++){t.filterManager.applyFilter(i,a,s,!0);var h=s;s=a,a=h}t.filterManager.applyFilter(i,a,r,n),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":29}],92:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:.1,y:0}}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n},{"../../core":29}],93:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._loadMatrix=function(t,e){e=!!e;var r=t;e&&(this._multiply(r,this.uniforms.m.value,t),r=this._colorMatrix(r)),this.uniforms.m.value=r},n.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19],t},n.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},n.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.grayscale=n.prototype.greyscale,n.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),n=Math.sin(t),i=.213,o=.715,a=.072,s=[i+r*(1-i)+n*-i,o+r*-o+n*-o,a+r*-a+n*(1-a),0,0,i+r*-i+.143*n,o+r*(1-o)+.14*n,a+r*-a+n*-.283,0,0,i+r*-i+n*-(1-i),o+r*-o+n*o,a+r*(1-a)+n*a,0,0,0,0,0,1,0];this._loadMatrix(s,e)},n.prototype.contrast=function(t,e){var r=(t||0)+1,n=-128*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.saturate=function(t,e){var r=2*(t||0)/3+1,n=(r-1)*-.5,i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.desaturate=function(t){this.saturate(-1)},n.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.colorTone=function(t,e,r,n,i){t=t||.2,e=e||.15,r=r||16770432,n=n||3375104;var o=(r>>16&255)/255,a=(r>>8&255)/255,s=(255&r)/255,u=(n>>16&255)/255,h=(n>>8&255)/255,l=(255&n)/255,c=[.3,.59,.11,0,0,o,a,s,t,0,u,h,l,e,0,o-u,a-h,s-l,0,0];this._loadMatrix(c,i)},n.prototype.night=function(t,e){t=t||.1;var r=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperties(n.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(t){this.uniforms.m.value=t}}})},{"../../core":29}],94:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}})},{"../../core":29}],95:[function(t,e,r){function n(t,e,r){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(t)},texelSize:{type:"v2",value:{x:1/e,y:1/r}}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=new Float32Array(t)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(t){this.uniforms.texelSize.value.x=1/t}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(t){this.uniforms.texelSize.value.y=1/t}}})},{"../../core":29}],96:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n},{"../../core":29}],97:[function(t,e,r){function n(t){var e=new i.math.Matrix;t.renderable=!1,i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 original =  texture2D(uSampler, vTextureCoord);\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:t.texture},otherMatrix:{type:"mat3",value:e.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=t,this.maskMatrix=e,this.scale=new i.math.Point(20,20)}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager;n.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/e.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/e.frame.height);var i=this.getShader(t);n.applyFilter(i,e,r)},Object.defineProperties(n.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(t){this.uniforms.mapSampler.value=t}}})},{"../../core":29}],98:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":29}],99:[function(t,e,r){function n(){i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r,n){var i=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(i,e,r,n);else{for(var o=t.filterManager.getRenderTarget(!0),a=e,s=o,u=0;u<this.passes-1;u++){t.filterManager.applyFilter(i,a,s,n);var h=s;s=a,a=h}t.filterManager.applyFilter(i,a,r,n),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}}})},{"../../core":29}],100:[function(t,e,r){function n(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYTintFilter=new a,this.defaultFilter=new i.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=i.BLEND_MODES.MULTIPLY}var i=t("../../core"),o=t("../blur/BlurXFilter"),a=t("./BlurYTintFilter");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(t,e,n),t.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(t,n,r),t.blendModeManager.setBlendMode(i.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(t,e,r),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYTintFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(t){this.blurYTintFilter.blur=t}},color:{get:function(){return i.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(t){this.blurYTintFilter.uniforms.color.value=i.utils.hex2rgb(t)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(t){this.blurYTintFilter.uniforms.alpha.value=t}},distance:{get:function(){return this._distance},set:function(t){this._dirtyPosition=!0,this._distance=t}},angle:{get:function(){return this._angle},set:function(t){this._dirtyPosition=!0,this._angle=t}}})},{"../../core":29,"../blur/BlurXFilter":90,"./BlurYTintFilter":99}],101:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}})},{"../../core":29}],102:[function(t,e,r){/**
 * @file        Main export of the PIXI filters library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/GoodBoyDigital/pixi.js/blob/master/LICENSE|MIT License}
 */
e.exports={AbstractFilter:t("../core/renderers/webgl/filters/AbstractFilter"),FXAAFilter:t("../core/renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:t("../core/renderers/webgl/filters/SpriteMaskFilter"),AsciiFilter:t("./ascii/AsciiFilter"),BloomFilter:t("./bloom/BloomFilter"),BlurFilter:t("./blur/BlurFilter"),BlurXFilter:t("./blur/BlurXFilter"),BlurYFilter:t("./blur/BlurYFilter"),BlurDirFilter:t("./blur/BlurDirFilter"),ColorMatrixFilter:t("./color/ColorMatrixFilter"),ColorStepFilter:t("./color/ColorStepFilter"),ConvolutionFilter:t("./convolution/ConvolutionFilter"),CrossHatchFilter:t("./crosshatch/CrossHatchFilter"),DisplacementFilter:t("./displacement/DisplacementFilter"),DotScreenFilter:t("./dot/DotScreenFilter"),GrayFilter:t("./gray/GrayFilter"),DropShadowFilter:t("./dropshadow/DropShadowFilter"),InvertFilter:t("./invert/InvertFilter"),NoiseFilter:t("./noise/NoiseFilter"),NormalMapFilter:t("./normal/NormalMapFilter"),PixelateFilter:t("./pixelate/PixelateFilter"),RGBSplitFilter:t("./rgb/RGBSplitFilter"),ShockwaveFilter:t("./shockwave/ShockwaveFilter"),SepiaFilter:t("./sepia/SepiaFilter"),SmartBlurFilter:t("./blur/SmartBlurFilter"),TiltShiftFilter:t("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:t("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:t("./tiltshift/TiltShiftYFilter"),TwistFilter:t("./twist/TwistFilter")}},{"../core/renderers/webgl/filters/AbstractFilter":49,"../core/renderers/webgl/filters/FXAAFilter":50,"../core/renderers/webgl/filters/SpriteMaskFilter":51,"./ascii/AsciiFilter":86,"./bloom/BloomFilter":87,"./blur/BlurDirFilter":88,"./blur/BlurFilter":89,"./blur/BlurXFilter":90,"./blur/BlurYFilter":91,"./blur/SmartBlurFilter":92,"./color/ColorMatrixFilter":93,"./color/ColorStepFilter":94,"./convolution/ConvolutionFilter":95,"./crosshatch/CrossHatchFilter":96,"./displacement/DisplacementFilter":97,"./dot/DotScreenFilter":98,"./dropshadow/DropShadowFilter":100,"./gray/GrayFilter":101,"./invert/InvertFilter":103,"./noise/NoiseFilter":104,"./normal/NormalMapFilter":105,"./pixelate/PixelateFilter":106,"./rgb/RGBSplitFilter":107,"./sepia/SepiaFilter":108,"./shockwave/ShockwaveFilter":109,"./tiltshift/TiltShiftFilter":111,"./tiltshift/TiltShiftXFilter":112,"./tiltshift/TiltShiftYFilter":113,"./twist/TwistFilter":114}],103:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}})},{"../../core":29}],104:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:.5}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(t){this.uniforms.noise.value=t}}})},{"../../core":29}],105:[function(t,e,r){function n(t){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D displacementMap;\nuniform sampler2D uSampler;\n\nuniform vec4 dimensions;\n\nconst vec2 Resolution = vec2(1.0,1.0);      //resolution of screen\nuniform vec3 LightPos;    //light position, normalized\nconst vec4 LightColor = vec4(1.0, 1.0, 1.0, 1.0);      //light RGBA -- alpha is intensity\nconst vec4 AmbientColor = vec4(1.0, 1.0, 1.0, 0.5);    //ambient RGBA -- alpha is intensity\nconst vec3 Falloff = vec3(0.0, 1.0, 0.2);         //attenuation coefficients\n\nuniform vec3 LightDir; // = vec3(1.0, 0.0, 1.0);\n\nuniform vec2 mapDimensions; // = vec2(256.0, 256.0);\n\n\nvoid main(void)\n{\n    vec2 mapCords = vTextureCoord.xy;\n\n    vec4 color = texture2D(uSampler, vTextureCoord.st);\n    vec3 nColor = texture2D(displacementMap, vTextureCoord.st).rgb;\n\n\n    mapCords *= vec2(dimensions.x/512.0, dimensions.y/512.0);\n\n    mapCords.y *= -1.0;\n    mapCords.y += 1.0;\n\n    // RGBA of our diffuse color\n    vec4 DiffuseColor = texture2D(uSampler, vTextureCoord);\n\n    // RGB of our normal map\n    vec3 NormalMap = texture2D(displacementMap, mapCords).rgb;\n\n    // The delta position of light\n    // vec3 LightDir = vec3(LightPos.xy - (gl_FragCoord.xy / Resolution.xy), LightPos.z);\n    vec3 LightDir = vec3(LightPos.xy - (mapCords.xy), LightPos.z);\n\n    // Correct for aspect ratio\n    // LightDir.x *= Resolution.x / Resolution.y;\n\n    // Determine distance (used for attenuation) BEFORE we normalize our LightDir\n    float D = length(LightDir);\n\n    // normalize our vectors\n    vec3 N = normalize(NormalMap * 2.0 - 1.0);\n    vec3 L = normalize(LightDir);\n\n    // Pre-multiply light color with intensity\n    // Then perform 'N dot L' to determine our diffuse term\n    vec3 Diffuse = (LightColor.rgb * LightColor.a) * max(dot(N, L), 0.0);\n\n    // pre-multiply ambient color with intensity\n    vec3 Ambient = AmbientColor.rgb * AmbientColor.a;\n\n    // calculate attenuation\n    float Attenuation = 1.0 / ( Falloff.x + (Falloff.y*D) + (Falloff.z*D*D) );\n\n    // the calculation which brings it all together\n    vec3 Intensity = Ambient + Diffuse * Attenuation;\n    vec3 FinalColor = DiffuseColor.rgb * Intensity;\n    gl_FragColor = vColor * vec4(FinalColor, DiffuseColor.a);\n\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, Attenuation); // vColor * vec4(FinalColor, DiffuseColor.a);\n\n/*\n    // normalise color\n    vec3 normal = normalize(nColor * 2.0 - 1.0);\n\n    vec3 deltaPos = vec3( (light.xy - gl_FragCoord.xy) / resolution.xy, light.z );\n\n    float lambert = clamp(dot(normal, lightDir), 0.0, 1.0);\n\n    float d = sqrt(dot(deltaPos, deltaPos));\n    float att = 1.0 / ( attenuation.x + (attenuation.y*d) + (attenuation.z*d*d) );\n\n    vec3 result = (ambientColor * ambientIntensity) + (lightColor.rgb * lambert) * att;\n    result *= color.rgb;\n\n    gl_FragColor = vec4(result, 1.0);\n*/\n}\n",{displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:15,y:15}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:1}},dimensions:{type:"4f",value:[0,0,0,0]},LightPos:{type:"3f",value:[0,1,0]}}),t.baseTexture._powerOf2=!0,t.baseTexture.hasLoaded?this.onTextureLoaded():t.baseTexture.once("loaded",this.onTextureLoaded,this)}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height},Object.defineProperties(n.prototype,{map:{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}},scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../core":29}],106:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":29}],107:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}},green:{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}},blue:{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}})},{"../../core":29}],108:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}})},{"../../core":29}],109:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(t){this.uniforms.center.value=t}},params:{get:function(){return this.uniforms.params.value},set:function(t){this.uniforms.params.value=t}},time:{get:function(){return this.uniforms.time.value},set:function(t){this.uniforms.time.value=t}}})},{"../../core":29}],110:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(n.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(t){this.uniforms.blur.value=t}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(t){this.uniforms.gradientBlur.value=t}},start:{get:function(){return this.uniforms.start.value},set:function(t){this.uniforms.start.value=t,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(t){this.uniforms.end.value=t,this.updateDelta()}}})},{"../../core":29}],111:[function(t,e,r){function n(){i.AbstractFilter.call(this),this.tiltShiftXFilter=new o,this.tiltShiftYFilter=new a}var i=t("../../core"),o=t("./TiltShiftXFilter"),a=t("./TiltShiftYFilter");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(t,e,n),this.tiltShiftYFilter.applyFilter(t,n,r),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t}}})},{"../../core":29,"./TiltShiftXFilter":112,"./TiltShiftYFilter":113}],112:[function(t,e,r){function n(){i.call(this)}var i=t("./TiltShiftAxisFilter");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,r=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=t/r,this.uniforms.delta.value.y=e/r}},{"./TiltShiftAxisFilter":110}],113:[function(t,e,r){function n(){i.call(this)}var i=t("./TiltShiftAxisFilter");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,r=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=-e/r,this.uniforms.delta.value.y=t/r}},{"./TiltShiftAxisFilter":110}],114:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}},radius:{get:function(){return this.uniforms.radius.value},set:function(t){this.uniforms.radius.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":29}],115:[function(t,e,r){function n(){this.global=new i.Point,this.target=null,this.originalEvent=null}var i=t("../core");n.prototype.constructor=n,e.exports=n,n.prototype.getLocalPosition=function(t,e,r){var n=t.worldTransform,o=r?r:this.global,a=n.a,s=n.c,u=n.tx,h=n.b,l=n.d,c=n.ty,f=1/(a*l+s*-h);return e=e||new i.math.Point,e.x=l*f*o.x+-s*f*o.x+(c*s-u*l)*f,e.y=a*f*o.y+-h*f*o.y+(-c*a+u*h)*f,e}},{"../core":29}],116:[function(t,e,r){function n(t,e){e=e||{},this.renderer=t,this.autoPreventDefault=void 0!==e.autoPreventDefault?e.autoPreventDefault:!0,this.interactionFrequency=e.interactionFrequency||10,this.mouse=new o,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this._tempPoint=new i.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var i=t("../core"),o=t("./InteractionData");Object.assign(i.DisplayObject.prototype,t("./interactiveTarget")),n.prototype.constructor=n,e.exports=n,n.prototype.setTargetElement=function(t,e){this.removeEvents(),this.interactionDOMElement=t,this.resolution=e||1,this.addEvents()},n.prototype.addEvents=function(){this.interactionDOMElement&&(i.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},n.prototype.removeEvents=function(){this.interactionDOMElement&&(i.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},n.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},n.prototype.dispatchEvent=function(t,e,r){r.stopped||(r.target=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},n.prototype.mapPositionToPoint=function(t,e,r){var n=this.interactionDOMElement.getBoundingClientRect();t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)/this.resolution,t.y=(r-n.top)*(this.interactionDOMElement.height/n.height)/this.resolution},n.prototype.processInteractive=function(t,e,r,n,i){if(!e.visible)return!1;var o=e.children,a=!1;if(i=i||e.interactive,e.interactiveChildren)for(var s=o.length-1;s>=0;s--)!a&&n?a=this.processInteractive(t,o[s],r,!0,i):this.processInteractive(t,o[s],r,!1,!1);return i&&(n&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),a=e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):e.containsPoint&&(a=e.containsPoint(t))),e.interactive&&r(e,a)),a},n.prototype.onMouseDown=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},n.prototype.processMouseDown=function(t,e){var r=this.mouse.originalEvent,n=2===r.button||3===r.which;e&&(t[n?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(t,n?"rightdown":"mousedown",this.eventData))},n.prototype.onMouseUp=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},n.prototype.processMouseUp=function(t,e){var r=this.mouse.originalEvent,n=2===r.button||3===r.which,i=n?"_isRightDown":"_isLeftDown";e?(this.dispatchEvent(t,n?"rightup":"mouseup",this.eventData),t[i]&&(t[i]=!1,this.dispatchEvent(t,n?"rightclick":"click",this.eventData))):t[i]&&(t[i]=!1,this.dispatchEvent(t,n?"rightupoutside":"mouseupoutside",this.eventData))},n.prototype.onMouseMove=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.didMove=!0,this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},n.prototype.processMouseMove=function(t,e){this.dispatchEvent(t,"mousemove",this.eventData),this.processMouseOverOut(t,e)},n.prototype.onMouseOut=function(t){this.mouse.originalEvent=t,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.interactionDOMElement.style.cursor="inherit",this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)},n.prototype.processMouseOverOut=function(t,e){e?(t._over||(t._over=!0,this.dispatchEvent(t,"mouseover",this.eventData)),t.buttonMode&&(this.cursor=t.defaultCursor)):t._over&&(t._over=!1,this.dispatchEvent(t,"mouseout",this.eventData))},n.prototype.onTouchStart=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,r=e.length,n=0;r>n;n++){var i=e[n],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(o)}},n.prototype.processTouchStart=function(t,e){e&&(t._touchDown=!0,this.dispatchEvent(t,"touchstart",this.eventData))},n.prototype.onTouchEnd=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,r=e.length,n=0;r>n;n++){var i=e[n],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(o)}},n.prototype.processTouchEnd=function(t,e){e?(this.dispatchEvent(t,"touchend",this.eventData),t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"tap",this.eventData))):t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"touchendoutside",this.eventData))},n.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,r=e.length,n=0;r>n;n++){var i=e[n],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchMove,!1),this.returnTouchData(o)}},n.prototype.processTouchMove=function(t,e){e=e,this.dispatchEvent(t,"touchmove",this.eventData)},n.prototype.getTouchData=function(t){var e=this.interactiveDataPool.pop();return e||(e=new o),e.identifier=t.identifier,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&(e.global.x=e.global.x/this.resolution,e.global.y=e.global.y/this.resolution),t.globalX=e.global.x,t.globalY=e.global.y,e},n.prototype.returnTouchData=function(t){this.interactiveDataPool.push(t)},n.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},i.WebGLRenderer.registerPlugin("interaction",n),i.CanvasRenderer.registerPlugin("interaction",n)},{"../core":29,"./InteractionData":115,"./interactiveTarget":118}],117:[function(t,e,r){/**
 * @file        Main export of the PIXI interactions library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/GoodBoyDigital/pixi.js/blob/master/LICENSE|MIT License}
 */
e.exports={InteractionData:t("./InteractionData"),InteractionManager:t("./InteractionManager"),interactiveTarget:t("./interactiveTarget")}},{"./InteractionData":115,"./InteractionManager":116,"./interactiveTarget":118}],118:[function(t,e,r){var n={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1};e.exports=n},{}],119:[function(t,e,r){function n(t,e){var r={},n=t.data.getElementsByTagName("info")[0],i=t.data.getElementsByTagName("common")[0];r.font=n.getAttribute("face"),r.size=parseInt(n.getAttribute("size"),10),r.lineHeight=parseInt(i.getAttribute("lineHeight"),10),r.chars={};for(var a=t.data.getElementsByTagName("char"),u=0;u<a.length;u++){var h=parseInt(a[u].getAttribute("id"),10),l=new o.math.Rectangle(parseInt(a[u].getAttribute("x"),10)+e.frame.x,parseInt(a[u].getAttribute("y"),10)+e.frame.y,parseInt(a[u].getAttribute("width"),10),parseInt(a[u].getAttribute("height"),10));r.chars[h]={xOffset:parseInt(a[u].getAttribute("xoffset"),10),yOffset:parseInt(a[u].getAttribute("yoffset"),10),xAdvance:parseInt(a[u].getAttribute("xadvance"),10),kerning:{},texture:new o.Texture(e.baseTexture,l)}}var c=t.data.getElementsByTagName("kerning");for(u=0;u<c.length;u++){var f=parseInt(c[u].getAttribute("first"),10),p=parseInt(c[u].getAttribute("second"),10),d=parseInt(c[u].getAttribute("amount"),10);r.chars[p].kerning[f]=d}t.bitmapFont=r,s.BitmapText.fonts[r.font]=r}var i=t("resource-loader").Resource,o=t("../core"),a=t("../core/utils"),s=t("../extras"),u=t("path");e.exports=function(){return function(t,e){if(!t.data||!t.isXml)return e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return e();var r=u.dirname(t.url);"."===r&&(r=""),this.baseUrl&&r&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/"),r=r.replace(this.baseUrl,"")),r&&"/"!==r.charAt(r.length-1)&&(r+="/");var o=r+t.data.getElementsByTagName("page")[0].getAttribute("file");if(a.TextureCache[o])n(t,a.TextureCache[o]),e();else{var s={crossOrigin:t.crossOrigin,loadType:i.LOAD_TYPE.IMAGE};this.add(t.name+"_image",o,s,function(r){n(t,r.texture),e()})}}}},{"../core":29,"../core/utils":76,"../extras":85,path:3,"resource-loader":18}],120:[function(t,e,r){/**
 * @file        Main export of the PIXI loaders library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/GoodBoyDigital/pixi.js/blob/master/LICENSE|MIT License}
 */
e.exports={Loader:t("./loader"),bitmapFontParser:t("./bitmapFontParser"),spritesheetParser:t("./spritesheetParser"),textureParser:t("./textureParser"),Resource:t("resource-loader").Resource}},{"./bitmapFontParser":119,"./loader":121,"./spritesheetParser":122,"./textureParser":123,"resource-loader":18}],121:[function(t,e,r){function n(t,e){i.call(this,t,e);for(var r=0;r<n._pixiMiddleware.length;++r)this.use(n._pixiMiddleware[r]())}var i=t("resource-loader"),o=t("./textureParser"),a=t("./spritesheetParser"),s=t("./bitmapFontParser");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n._pixiMiddleware=[i.middleware.parsing.blob,o,a,s],n.addPixiMiddleware=function(t){n._pixiMiddleware.push(t)};var u=i.Resource;u.setExtensionXhrType("fnt",u.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":119,"./spritesheetParser":122,"./textureParser":123,"resource-loader":18}],122:[function(t,e,r){var n=t("resource-loader").Resource,i=t("path"),o=t("../core");e.exports=function(){return function(t,e){if(!t.data||!t.isJson||!t.data.frames)return e();var r={crossOrigin:t.crossOrigin,loadType:n.LOAD_TYPE.IMAGE},a=i.dirname(t.url.replace(this.baseUrl,"")),s=o.utils.getResolutionOfUrl(t.url);this.add(t.name+"_image",a+"/"+t.data.meta.image,r,function(r){t.textures={};var n=t.data.frames;for(var i in n){var a=n[i].frame;if(a){var u=null,h=null;if(u=n[i].rotated?new o.math.Rectangle(a.x,a.y,a.h,a.w):new o.math.Rectangle(a.x,a.y,a.w,a.h),n[i].trimmed&&(h=new o.math.Rectangle(n[i].spriteSourceSize.x/s,n[i].spriteSourceSize.y/s,n[i].sourceSize.w/s,n[i].sourceSize.h/s)),n[i].rotated){var l=u.width;u.width=u.height,u.height=l}u.x/=s,u.y/=s,u.width/=s,u.height/=s,t.textures[i]=new o.Texture(r.texture.baseTexture,u,u.clone(),h,n[i].rotated),o.utils.TextureCache[i]=t.textures[i]}}e()})}}},{"../core":29,path:3,"resource-loader":18}],123:[function(t,e,r){var n=t("../core");e.exports=function(){return function(t,e){t.data&&t.isImage&&(t.texture=new n.Texture(new n.BaseTexture(t.data,null,n.utils.getResolutionOfUrl(t.url))),n.utils.TextureCache[t.url]=t.texture),e()}}},{"../core":29}],124:[function(t,e,r){function n(t,e,r,o,a){i.Container.call(this),this._texture=null,this.uvs=r||new Float32Array([0,1,1,1,1,0,0,1]),this.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=o||new Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=i.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=a||n.DRAW_MODES.TRIANGLE_MESH,this.texture=t}var i=t("../core");n.prototype=Object.create(i.Container.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),n.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.mesh),t.plugins.mesh.render(this)},n.prototype._renderCanvas=function(t){var e=t.context,r=this.worldTransform;t.roundPixels?e.setTransform(r.a,r.b,r.c,r.d,0|r.tx,0|r.ty):e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.drawMode===n.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(e):this._renderCanvasTriangles(e)},n.prototype._renderCanvasTriangleMesh=function(t){for(var e=this.vertices,r=this.uvs,n=e.length/2,i=0;n-2>i;i++){var o=2*i;this._renderCanvasDrawTriangle(t,e,r,o,o+2,o+4)}},n.prototype._renderCanvasTriangles=function(t){for(var e=this.vertices,r=this.uvs,n=this.indices,i=n.length,o=0;i>o;o+=3){var a=2*n[o],s=2*n[o+1],u=2*n[o+2];this._renderCanvasDrawTriangle(t,e,r,a,s,u)}},n.prototype._renderCanvasDrawTriangle=function(t,e,r,n,i,o){var a=this._texture.baseTexture.source,s=this._texture.baseTexture.width,u=this._texture.baseTexture.height,h=e[n],l=e[i],c=e[o],f=e[n+1],p=e[i+1],d=e[o+1],m=r[n]*s,g=r[i]*s,v=r[o]*s,E=r[n+1]*u,y=r[i+1]*u,x=r[o+1]*u;if(this.canvasPadding>0){var T=this.canvasPadding/this.worldTransform.a,R=this.canvasPadding/this.worldTransform.d,b=(h+l+c)/3,_=(f+p+d)/3,w=h-b,M=f-_,H=Math.sqrt(w*w+M*M);h=b+w/H*(H+T),f=_+M/H*(H+R),w=l-b,M=p-_,H=Math.sqrt(w*w+M*M),l=b+w/H*(H+T),p=_+M/H*(H+R),w=c-b,M=d-_,H=Math.sqrt(w*w+M*M),c=b+w/H*(H+T),d=_+M/H*(H+R)}t.save(),t.beginPath(),t.moveTo(h,f),t.lineTo(l,p),t.lineTo(c,d),t.closePath(),t.clip();var S=m*y+E*v+g*x-y*v-E*g-m*x,C=h*y+E*c+l*x-y*c-E*l-h*x,A=m*l+h*v+g*c-l*v-h*g-m*c,L=m*y*c+E*l*v+h*g*x-h*y*v-E*g*c-m*l*x,P=f*y+E*d+p*x-y*d-E*p-f*x,F=m*p+f*v+g*d-p*v-f*g-m*d,D=m*y*d+E*p*v+f*g*x-f*y*v-E*g*d-m*p*x;t.transform(C/S,P/S,A/S,F/S,L/S,D/S),t.drawImage(a,0,0),t.restore()},n.prototype.renderMeshFlat=function(t){var e=this.context,r=t.vertices,n=r.length/2;e.beginPath();for(var i=1;n-2>i;i++){var o=2*i,a=r[o],s=r[o+2],u=r[o+4],h=r[o+1],l=r[o+3],c=r[o+5];e.moveTo(a,h),e.lineTo(s,l),e.lineTo(u,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},n.prototype._onTextureUpdate=function(){this.updateFrame=!0},n.prototype.getBounds=function(t){for(var e=t||this.worldTransform,r=e.a,n=e.b,o=e.c,a=e.d,s=e.tx,u=e.ty,h=-(1/0),l=-(1/0),c=1/0,f=1/0,p=this.vertices,d=0,m=p.length;m>d;d+=2){var g=p[d],v=p[d+1],E=r*g+o*v+s,y=a*v+n*g+u;c=c>E?E:c,f=f>y?y:f,h=E>h?E:h,l=y>l?y:l}if(c===-(1/0)||l===1/0)return i.math.Rectangle.EMPTY;var x=this._bounds;return x.x=c,x.width=h-c,x.y=f,x.height=l-f,this._currentBounds=x,x},n.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":29}],125:[function(t,e,r){function n(t,e){i.call(this,t),this.points=e,this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length),this._ready=!0,this.refresh()}var i=t("./Mesh"),o=t("../core");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){var e=this.uvs,r=this.indices,n=this.colors,i=this._texture._uvs,a=new o.math.Point(i.x0,i.y0),s=new o.math.Point(i.x2-i.x0,i.y2-i.y0);e[0]=0+a.x,e[1]=0+a.y,e[2]=0+a.x,e[3]=1*s.y+a.y,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var u,h,l,c=t.length,f=1;c>f;f++)u=t[f],h=4*f,l=f/(c-1),e[h]=l*s.x+a.x,e[h+1]=0+a.y,e[h+2]=l*s.x+a.x,e[h+3]=1*s.y+a.y,h=2*f,n[h]=1,n[h+1]=1,h=2*f,r[h]=h,r[h+1]=h+1;this.dirty=!0}},n.prototype._onTextureUpdate=function(){i.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},n.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e,r,n,i,o,a,s=t[0],u=0,h=0,l=this.vertices,c=t.length,f=0;c>f;f++)r=t[f],n=4*f,e=f<t.length-1?t[f+1]:r,h=-(e.x-s.x),u=e.y-s.y,i=10*(1-f/(c-1)),i>1&&(i=1),o=Math.sqrt(u*u+h*h),a=this._texture.height/2,u/=o,h/=o,u*=a,h*=a,l[n]=r.x+u,l[n+1]=r.y+h,l[n+2]=r.x-u,l[n+3]=r.y-h,s=r;this.containerUpdateTransform()}}},{"../core":29,"./Mesh":124}],126:[function(t,e,r){/**
 * @file        Main export of the PIXI extras library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/GoodBoyDigital/pixi.js/blob/master/LICENSE|MIT License}
 */
e.exports={Mesh:t("./Mesh"),Rope:t("./Rope"),MeshRenderer:t("./webgl/MeshRenderer"),MeshShader:t("./webgl/MeshShader")}},{"./Mesh":124,"./Rope":125,"./webgl/MeshRenderer":127,"./webgl/MeshShader":128}],127:[function(t,e,r){function n(t){i.call(this,t),this.indices=new Uint16Array(15e3);for(var e=0,r=0;15e3>e;e+=6,r+=4)this.indices[e+0]=r+0,this.indices[e+1]=r+1,this.indices[e+2]=r+2,this.indices[e+3]=r+0,this.indices[e+4]=r+2,this.indices[e+5]=r+3}var i=t("../../core/renderers/webgl/utils/ObjectRenderer"),o=t("../../core/renderers/webgl/WebGLRenderer"),a=t("../Mesh");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,o.registerPlugin("mesh",n),n.prototype.onContextChange=function(){},n.prototype.render=function(t){t._vertexBuffer||this._initWebGL(t);var e=this.renderer,r=e.gl,n=t._texture.baseTexture,i=e.shaderManager.plugins.meshShader,o=t.drawMode===a.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;e.blendModeManager.setBlendMode(t.blendMode),r.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),r.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,e.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform1f(i.uniforms.alpha._location,t.worldAlpha),t.dirty?(t.dirty=!1,r.bindBuffer(r.ARRAY_BUFFER,t._vertexBuffer),r.bufferData(r.ARRAY_BUFFER,t.vertices,r.STATIC_DRAW),r.vertexAttribPointer(i.attributes.aVertexPosition,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,t._uvBuffer),r.bufferData(r.ARRAY_BUFFER,t.uvs,r.STATIC_DRAW),r.vertexAttribPointer(i.attributes.aTextureCoord,2,r.FLOAT,!1,0,0),r.activeTexture(r.TEXTURE0),n._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,n._glTextures[r.id]):this.renderer.updateTexture(n),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t._indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.indices,r.STATIC_DRAW)):(r.bindBuffer(r.ARRAY_BUFFER,t._vertexBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,t.vertices),r.vertexAttribPointer(i.attributes.aVertexPosition,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,t._uvBuffer),r.vertexAttribPointer(i.attributes.aTextureCoord,2,r.FLOAT,!1,0,0),r.activeTexture(r.TEXTURE0),n._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,n._glTextures[r.id]):this.renderer.updateTexture(n),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t._indexBuffer),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,t.indices)),r.drawElements(o,t.indices.length,r.UNSIGNED_SHORT,0)},n.prototype._initWebGL=function(t){var e=this.renderer.gl;t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.STATIC_DRAW),t.colors&&(t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW)),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW)},n.prototype.flush=function(){},n.prototype.start=function(){var t=this.renderer.shaderManager.plugins.meshShader;this.renderer.shaderManager.setShader(t)},n.prototype.destroy=function(){}},{"../../core/renderers/webgl/WebGLRenderer":48,"../../core/renderers/webgl/utils/ObjectRenderer":62,"../Mesh":124}],128:[function(t,e,r){function n(t){i.Shader.call(this,t,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var i=t("../../core");n.prototype=Object.create(i.Shader.prototype),n.prototype.constructor=n,e.exports=n,i.ShaderManager.registerPlugin("meshShader",n)},{"../../core":29}],129:[function(t,e,r){Object.assign||(Object.assign=t("object-assign"))},{"object-assign":12}],130:[function(t,e,r){t("./Object.assign"),t("./requestAnimationFrame")},{"./Object.assign":129,"./requestAnimationFrame":131}],131:[function(t,e,r){(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var r=Date.now(),n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[n[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[i]+"CancelAnimationFrame"]||t[n[i]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+r-e;return 0>n&&(n=0),r=e,setTimeout(function(){r=Date.now(),t(performance.now())},n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),/*!
 * getSize v1.2.2
 * measure size of elements
 * MIT license
 */
function(t,e){"use strict";function r(t){var e=parseFloat(t),r=-1===t.indexOf("%")&&!isNaN(e);return r&&e}function n(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,r=s.length;r>e;e++){var n=s[e];t[n]=0}return t}function o(e){function n(){if(!f){f=!0;var n=t.getComputedStyle;if(h=function(){var t=n?function(t){return n(t,null)}:function(t){return t.currentStyle};return function(e){var r=t(e);return r||a("Style returned "+r+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),r}}(),l=e("boxSizing")){var i=document.createElement("div");i.style.width="200px",i.style.padding="1px 2px 3px 4px",i.style.borderStyle="solid",i.style.borderWidth="1px 2px 3px 4px",i.style[l]="border-box";var o=document.body||document.documentElement;o.appendChild(i);var s=h(i);c=200===r(s.width),o.removeChild(i)}}}function o(t){if(n(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var e=h(t);if("none"===e.display)return i();var o={};o.width=t.offsetWidth,o.height=t.offsetHeight;for(var a=o.isBorderBox=!(!l||!e[l]||"border-box"!==e[l]),f=0,p=s.length;p>f;f++){var d=s[f],m=e[d];m=u(t,m);var g=parseFloat(m);o[d]=isNaN(g)?0:g}var v=o.paddingLeft+o.paddingRight,E=o.paddingTop+o.paddingBottom,y=o.marginLeft+o.marginRight,x=o.marginTop+o.marginBottom,T=o.borderLeftWidth+o.borderRightWidth,R=o.borderTopWidth+o.borderBottomWidth,b=a&&c,_=r(e.width);_!==!1&&(o.width=_+(b?0:v+T));var w=r(e.height);return w!==!1&&(o.height=w+(b?0:E+R)),o.innerWidth=o.width-(v+T),o.innerHeight=o.height-(E+R),o.outerWidth=o.width+y,o.outerHeight=o.height+x,o}}function u(e,r){if(t.getComputedStyle||-1===r.indexOf("%"))return r;var n=e.style,i=n.left,o=e.runtimeStyle,a=o&&o.left;return a&&(o.left=e.currentStyle.left),n.left=r,r=n.pixelLeft,n.left=i,a&&(o.left=a),r}var h,l,c,f=!1;return o}var a="undefined"==typeof console?n:function(t){console.error(t)},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define(["get-style-property/get-style-property"],o):"object"==typeof exports?module.exports=o(require("desandro-get-style-property")):t.getSize=o(t.getStyleProperty)}(window),/*!
 * docReady v1.0.4
 * Cross browser DOMContentLoaded event emitter
 * MIT license
 */
function(t){"use strict";function e(t){"function"==typeof t&&(e.isReady?t():a.push(t))}function r(t){var r="readystatechange"===t.type&&"complete"!==o.readyState;e.isReady||r||n()}function n(){e.isReady=!0;for(var t=0,r=a.length;r>t;t++){var n=a[t];n()}}function i(i){return"complete"===o.readyState?n():(i.bind(o,"DOMContentLoaded",r),i.bind(o,"readystatechange",r),i.bind(t,"load",r)),e}var o=t.document,a=[];e.isReady=!1,"function"==typeof define&&define.amd?define(["eventie/eventie"],i):"object"==typeof exports?module.exports=i(require("eventie")):t.docReady=i(t.eventie)}(window),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["doc-ready/doc-ready","matches-selector/matches-selector"],function(r,n){return e(t,r,n)}):"object"==typeof exports?module.exports=e(t,require("doc-ready"),require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.docReady,t.matchesSelector)}(window,function(t,e,r){"use strict";var n={};n.extend=function(t,e){for(var r in e)t[r]=e[r];return t},n.modulo=function(t,e){return(t%e+e)%e};var i=Object.prototype.toString;n.isArray=function(t){return"[object Array]"==i.call(t)},n.makeArray=function(t){var e=[];if(n.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var r=0,i=t.length;i>r;r++)e.push(t[r]);else e.push(t);return e},n.indexOf=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1},n.removeFrom=function(t,e){var r=n.indexOf(t,e);-1!=r&&t.splice(r,1)},n.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1==t.nodeType&&"string"==typeof t.nodeName},n.setText=function(){function t(t,r){e=e||(void 0!==document.documentElement.textContent?"textContent":"innerText"),t[e]=r}var e;return t}(),n.getParent=function(t,e){for(;t!=document.body;)if(t=t.parentNode,r(t,e))return t},n.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},n.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},n.filterFindElements=function(t,e){t=n.makeArray(t);for(var i=[],o=0,a=t.length;a>o;o++){var s=t[o];if(n.isElement(s))if(e){r(s,e)&&i.push(s);for(var u=s.querySelectorAll(e),h=0,l=u.length;l>h;h++)i.push(u[h])}else i.push(s)}return i},n.debounceMethod=function(t,e,r){var n=t.prototype[e],i=e+"Timeout";t.prototype[e]=function(){var t=this[i];t&&clearTimeout(t);var e=arguments,o=this;this[i]=setTimeout(function(){n.apply(o,e),delete o[i]},r||100)}},n.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,r){return e+"-"+r}).toLowerCase()};var o=t.console;return n.htmlInit=function(r,i){e(function(){for(var e=n.toDashed(i),a=document.querySelectorAll(".js-"+e),s="data-"+e+"-options",u=0,h=a.length;h>u;u++){var l,c=a[u],f=c.getAttribute(s);try{l=f&&JSON.parse(f)}catch(p){o&&o.error("Error parsing "+s+" on "+c.nodeName.toLowerCase()+(c.id?"#"+c.id:"")+": "+p);continue}var d=new r(c,l),m=t.jQuery;m&&m.data(c,i,d)}})},n}),/*!
 * Outlayer v1.4.0
 * the brains and guts of a layout library
 * MIT license
 */
function(t,e){"use strict";"function"==typeof define&&define.amd?define(["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(r,n,i,o,a){return e(t,r,n,i,o,a)}):"object"==typeof exports?module.exports=e(t,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.eventie,t.EventEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,r,n,i,o){"use strict";function a(t,e){var r=i.getQueryElement(t);if(!r)return void(s&&s.error("Bad element for "+this.constructor.namespace+": "+(r||t)));this.element=r,u&&(this.$element=u(this.element)),this.options=i.extend({},this.constructor.defaults),this.option(e);var n=++l;this.element.outlayerGUID=n,c[n]=this,this._create(),this.options.isInitLayout&&this.layout()}var s=t.console,u=t.jQuery,h=function(){},l=0,c={};return a.namespace="outlayer",a.Item=o,a.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},i.extend(a.prototype,r.prototype),a.prototype.option=function(t){i.extend(this.options,t)},a.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),i.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},a.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},a.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),r=this.constructor.Item,n=[],i=0,o=e.length;o>i;i++){var a=e[i],s=new r(a,this);n.push(s)}return n},a.prototype._filterFindItemElements=function(t){return i.filterFindElements(t,this.options.itemSelector)},a.prototype.getItemElements=function(){for(var t=[],e=0,r=this.items.length;r>e;e++)t.push(this.items[e].element);return t},a.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},a.prototype._init=a.prototype.layout,a.prototype._resetLayout=function(){this.getSize()},a.prototype.getSize=function(){this.size=n(this.element)},a.prototype._getMeasurement=function(t,e){var r,o=this.options[t];o?("string"==typeof o?r=this.element.querySelector(o):i.isElement(o)&&(r=o),this[t]=r?n(r)[e]:o):this[t]=0},a.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},a.prototype._getItemsForLayout=function(t){for(var e=[],r=0,n=t.length;n>r;r++){var i=t[r];i.isIgnored||e.push(i)}return e},a.prototype._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){for(var r=[],n=0,i=t.length;i>n;n++){var o=t[n],a=this._getItemLayoutPosition(o);a.item=o,a.isInstant=e||o.isLayoutInstant,r.push(a)}this._processLayoutQueue(r)}},a.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},a.prototype._processLayoutQueue=function(t){for(var e=0,r=t.length;r>e;e++){var n=t[e];this._positionItem(n.item,n.x,n.y,n.isInstant)}},a.prototype._positionItem=function(t,e,r,n){n?t.goTo(e,r):t.moveTo(e,r)},a.prototype._postLayout=function(){this.resizeContainer()},a.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},a.prototype._getContainerSize=h,a.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var r=this.size;r.isBorderBox&&(t+=e?r.paddingLeft+r.paddingRight+r.borderLeftWidth+r.borderRightWidth:r.paddingBottom+r.paddingTop+r.borderTopWidth+r.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},a.prototype._emitCompleteOnItems=function(t,e){function r(){i.emitEvent(t+"Complete",[e])}function n(){a++,a===o&&r()}var i=this,o=e.length;if(!e||!o)return void r();for(var a=0,s=0,u=e.length;u>s;s++){var h=e[s];h.once(t,n)}},a.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},a.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},a.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,r=t.length;r>e;e++){var n=t[e];this.ignore(n)}}},a.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,r=t.length;r>e;e++){var n=t[e];i.removeFrom(this.stamps,n),this.unignore(n)}},a.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=i.makeArray(t)):void 0},a.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var r=this.stamps[t];this._manageStamp(r)}}},a.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},a.prototype._manageStamp=h,a.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),r=this._boundingRect,i=n(t),o={left:e.left-r.left-i.marginLeft,top:e.top-r.top-i.marginTop,right:r.right-e.right-i.marginRight,bottom:r.bottom-e.bottom-i.marginBottom};return o},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.bindResize=function(){this.isResizeBound||(e.bind(t,"resize",this),this.isResizeBound=!0)},a.prototype.unbindResize=function(){this.isResizeBound&&e.unbind(t,"resize",this),this.isResizeBound=!1},a.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},a.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},a.prototype.needsResizeLayout=function(){var t=n(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},a.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},a.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},a.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var r=this.items.slice(0);this.items=e.concat(r),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(r)}},a.prototype.reveal=function(t){this._emitCompleteOnItems("reveal",t);for(var e=t&&t.length,r=0;e&&e>r;r++){var n=t[r];n.reveal()}},a.prototype.hide=function(t){this._emitCompleteOnItems("hide",t);for(var e=t&&t.length,r=0;e&&e>r;r++){var n=t[r];n.hide()}},a.prototype.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},a.prototype.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},a.prototype.getItem=function(t){for(var e=0,r=this.items.length;r>e;e++){var n=this.items[e];if(n.element===t)return n}},a.prototype.getItems=function(t){t=i.makeArray(t);for(var e=[],r=0,n=t.length;n>r;r++){var o=t[r],a=this.getItem(o);a&&e.push(a)}return e},a.prototype.remove=function(t){var e=this.getItems(t);if(this._emitCompleteOnItems("remove",e),e&&e.length)for(var r=0,n=e.length;n>r;r++){var o=e[r];o.remove(),i.removeFrom(this.items,o)}},a.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,r=this.items.length;r>e;e++){var n=this.items[e];n.destroy()}this.unbindResize();var i=this.element.outlayerGUID;delete c[i],delete this.element.outlayerGUID,u&&u.removeData(this.element,this.constructor.namespace)},a.data=function(t){t=i.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&c[e]},a.create=function(t,e){function r(){a.apply(this,arguments)}return Object.create?r.prototype=Object.create(a.prototype):i.extend(r.prototype,a.prototype),r.prototype.constructor=r,r.defaults=i.extend({},a.defaults),i.extend(r.defaults,e),r.prototype.settings={},r.namespace=t,r.data=a.data,r.Item=function(){o.apply(this,arguments)},r.Item.prototype=new o,i.htmlInit(r,t),u&&u.bridget&&u.bridget(t,r),r},a.Item=o,a}),/*!
 * Masonry v3.3.0
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
function(t,e){"use strict";"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],e):"object"==typeof exports?module.exports=e(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):t.Masonry=e(t.Outlayer,t.getSize,t.fizzyUIUtils)}(window,function(t,e,r){"use strict";var n=t.create("masonry");return n.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},n.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],r=t&&t.element;this.columnWidth=r&&e(r).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,i=this.containerWidth+this.gutter,o=i/n,a=n-i%n,s=a&&1>a?"round":"floor";o=Math[s](o),this.cols=Math.max(o,1)},n.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,r=e(t);this.containerWidth=r&&r.innerWidth},n.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,n=e&&1>e?"round":"ceil",i=Math[n](t.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var o=this._getColGroup(i),a=Math.min.apply(Math,o),s=r.indexOf(o,a),u={x:this.columnWidth*s,y:a},h=a+t.size.outerHeight,l=this.cols+1-o.length,c=0;l>c;c++)this.colYs[s+c]=h;return u},n.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],r=this.cols+1-t,n=0;r>n;n++){var i=this.colYs.slice(n,n+t);e[n]=Math.max.apply(Math,i)}return e},n.prototype._manageStamp=function(t){var r=e(t),n=this._getElementOffset(t),i=this.options.isOriginLeft?n.left:n.right,o=i+r.outerWidth,a=Math.floor(i/this.columnWidth);a=Math.max(0,a);var s=Math.floor(o/this.columnWidth);s-=o%this.columnWidth?0:1,s=Math.min(this.cols-1,s);for(var u=(this.options.isOriginTop?n.top:n.bottom)+r.outerHeight,h=a;s>=h;h++)this.colYs[h]=Math.max(u,this.colYs[h])},n.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},n.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!==this.containerWidth},n});